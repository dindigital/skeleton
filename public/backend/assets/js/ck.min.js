!function(){if(!window.CKEDITOR||!window.CKEDITOR.dom){window.CKEDITOR||(window.CKEDITOR=function(){var a={timestamp:"C9A85WF",version:"3.6.5",revision:"7647",rnd:Math.floor(900*Math.random())+100,_:{},status:"unloaded",basePath:function(){var a=window.CKEDITOR_BASEPATH||"";if(!a)for(var b=document.getElementsByTagName("script"),c=0;c<b.length;c++){var d=b[c].src.match(/(^|.*[\\\/])ckeditor(?:_basic)?(?:_source)?.js(?:\?.*)?$/i);if(d){a=d[1];break}}if(-1==a.indexOf(":/")&&(a=0===a.indexOf("/")?location.href.match(/^.*?:\/\/[^\/]*/)[0]+a:location.href.match(/^[^\?]*\/(?:)/)[0]+a),!a)throw'The CKEditor installation path could not be automatically detected. Please set the global variable "CKEDITOR_BASEPATH" before creating editor instances.';return a}(),getUrl:function(a){return-1==a.indexOf(":/")&&0!==a.indexOf("/")&&(a=this.basePath+a),this.timestamp&&"/"!=a.charAt(a.length-1)&&!/[&?]t=/.test(a)&&(a+=(a.indexOf("?")>=0?"&":"?")+"t="+this.timestamp),a}},b=window.CKEDITOR_GETURL;if(b){var c=a.getUrl;a.getUrl=function(d){return b.call(a,d)||c.call(a,d)}}return a}());var a=CKEDITOR;a.event||(a.event=function(){},a.event.implementOn=function(b){var c=a.event.prototype;for(var d in c)void 0==b[d]&&(b[d]=c[d])},a.event.prototype=function(){var a=function(a){var b=a.getPrivate&&a.getPrivate()||a._||(a._={});return b.events||(b.events={})},b=function(a){this.name=a,this.listeners=[]};return b.prototype={getListenerIndex:function(a){for(var b=0,c=this.listeners;b<c.length;b++)if(c[b].fn==a)return b;return-1}},{on:function(c,d,e,f,g){var h=a(this),i=h[c]||(h[c]=new b(c));if(i.getListenerIndex(d)<0){var j=i.listeners;e||(e=this),isNaN(g)&&(g=10);var k=this,l=function(a,b,g,h){var i={name:c,sender:this,editor:a,data:b,listenerData:f,stop:g,cancel:h,removeListener:function(){k.removeListener(c,d)}};return d.call(e,i),i.data};l.fn=d,l.priority=g;for(var m=j.length-1;m>=0;m--)if(j[m].priority<=g)return void j.splice(m+1,0,l);j.unshift(l)}},fire:function(){var b=!1,c=function(){b=!0},d=!1,e=function(){d=!0};return function(f,g,h){var i=a(this)[f],j=b,k=d;if(b=d=!1,i){var l=i.listeners;if(l.length){l=l.slice(0);for(var m=0;m<l.length;m++){var n=l[m].call(this,h,g,c,e);if("undefined"!=typeof n&&(g=n),b||d)break}}}var o=d||("undefined"==typeof g?!1:g);return b=j,d=k,o}}(),fireOnce:function(b,c,d){var e=this.fire(b,c,d);return delete a(this)[b],e},removeListener:function(b,c){var d=a(this)[b];if(d){var e=d.getListenerIndex(c);e>=0&&d.listeners.splice(e,1)}},hasListeners:function(b){var c=a(this)[b];return c&&c.listeners.length>0}}}()),a.editor||(a.ELEMENT_MODE_NONE=0,a.ELEMENT_MODE_REPLACE=1,a.ELEMENT_MODE_APPENDTO=2,a.editor=function(b,c,d,e){var f=this;f._={instanceConfig:b,element:c,data:e},f.elementMode=d||0,a.event.call(f),f._init()},a.editor.replace=function(b,c){var d=b;if("object"!=typeof d){if(d=document.getElementById(b),d&&d.tagName.toLowerCase()in{style:1,script:1,base:1,link:1,meta:1,title:1}&&(d=null),!d)for(var e=0,f=document.getElementsByName(b);(d=f[e++])&&"textarea"!=d.tagName.toLowerCase(););if(!d)throw'[CKEDITOR.editor.replace] The element with id or name "'+b+'" was not found.'}return d.style.visibility="hidden",new a.editor(c,d,1)},a.editor.appendTo=function(b,c,d){var e=b;if("object"!=typeof e&&(e=document.getElementById(b),!e))throw'[CKEDITOR.editor.appendTo] The element with id "'+b+'" was not found.';return new a.editor(c,e,2,d)},a.editor.prototype={_init:function(){var b=a.editor._pending||(a.editor._pending=[]);b.push(this)},fire:function(b,c){return a.event.prototype.fire.call(this,b,c,this)},fireOnce:function(b,c){return a.event.prototype.fireOnce.call(this,b,c,this)}},a.event.implementOn(a.editor.prototype,!0)),a.env||(a.env=function(){var a=navigator.userAgent.toLowerCase(),b=window.opera,c={ie:!1,opera:!!b&&b.version,webkit:a.indexOf(" applewebkit/")>-1,air:a.indexOf(" adobeair/")>-1,mac:a.indexOf("macintosh")>-1,quirks:"BackCompat"==document.compatMode,mobile:a.indexOf("mobile")>-1,iOS:/(ipad|iphone|ipod)/.test(a),isCustomDomain:function(){if(!this.ie)return!1;var a=document.domain,b=window.location.hostname;return a!=b&&a!="["+b+"]"},secure:"https:"==location.protocol};c.gecko="Gecko"==navigator.product&&!c.webkit&&!c.opera;var d=0;if(c.ie&&(d=parseFloat(a.match(/msie (\d+)/)[1]),c.ie8=!!document.documentMode,c.ie8Compat=8==document.documentMode,c.ie9Compat=9==document.documentMode,c.ie7Compat=7==d&&!document.documentMode||7==document.documentMode,c.ie6Compat=7>d||c.quirks),c.gecko){var e=a.match(/rv:([\d\.]+)/);e&&(e=e[1].split("."),d=1e4*e[0]+100*(e[1]||0)+ +(e[2]||0))}return c.opera&&(d=parseFloat(b.version())),c.air&&(d=parseFloat(a.match(/ adobeair\/(\d+)/)[1])),c.webkit&&(d=parseFloat(a.match(/ applewebkit\/(\d+)/)[1])),c.version=d,c.isCompatible=c.iOS&&d>=534||!c.mobile&&(c.ie&&d>=6||c.gecko&&d>=10801||c.opera&&d>=9.5||c.air&&d>=1||c.webkit&&d>=522||!1),c.cssClass="cke_browser_"+(c.ie?"ie":c.gecko?"gecko":c.opera?"opera":c.webkit?"webkit":"unknown"),c.quirks&&(c.cssClass+=" cke_browser_quirks"),c.ie&&(c.cssClass+=" cke_browser_ie"+(c.version<7?"6":c.version>=8?document.documentMode:"7"),c.quirks&&(c.cssClass+=" cke_browser_iequirks")),c.gecko&&10900>d&&(c.cssClass+=" cke_browser_gecko18"),c.air&&(c.cssClass+=" cke_browser_air"),c}());var b=a.env,c=b.ie;"unloaded"==a.status&&function(){a.event.implementOn(a),a.loadFullCore=function(){if("basic_ready"!=a.status)return void(a.loadFullCore._load=1);delete a.loadFullCore;var b=document.createElement("script");b.type="text/javascript",b.src=a.basePath+"ckeditor.js",document.getElementsByTagName("head")[0].appendChild(b)},a.loadFullCoreTimeout=0,a.replaceClass="ckeditor",a.replaceByClassEnabled=1;var c=function(c,d,e,f){if(b.isCompatible){a.loadFullCore&&a.loadFullCore();var g=e(c,d,f);return a.add(g),g}return null};a.replace=function(b,d){return c(b,d,a.editor.replace)},a.appendTo=function(b,d,e){return c(b,d,a.editor.appendTo,e)},a.add=function(a){var b=this._.pending||(this._.pending=[]);b.push(a)},a.replaceAll=function(){for(var a=document.getElementsByTagName("textarea"),b=0;b<a.length;b++){var c=null,d=a[b];if(d.name||d.id){if("string"==typeof arguments[0]){var e=new RegExp("(?:^|\\s)"+arguments[0]+"(?:$|\\s)");if(!e.test(d.className))continue}else if("function"==typeof arguments[0]&&(c={},arguments[0](d,c)===!1))continue;this.replace(d,c)}}},function(){var b=function(){var b=a.loadFullCore,c=a.loadFullCoreTimeout;a.replaceByClassEnabled&&a.replaceAll(a.replaceClass),a.status="basic_ready",b&&b._load?b():c&&setTimeout(function(){a.loadFullCore&&a.loadFullCore()},1e3*c)};window.addEventListener?window.addEventListener("load",b,!1):window.attachEvent&&window.attachEvent("onload",b)}(),a.status="basic_loaded"}(),a.dom={};var d=a.dom;!function(){var b=[];a.on("reset",function(){b=[]}),a.tools={arrayCompare:function(a,b){if(!a&&!b)return!0;if(!a||!b||a.length!=b.length)return!1;for(var c=0;c<a.length;c++)if(a[c]!=b[c])return!1;return!0},clone:function(a){var b;if(a&&a instanceof Array){b=[];for(var c=0;c<a.length;c++)b[c]=this.clone(a[c]);return b}if(null===a||"object"!=typeof a||a instanceof String||a instanceof Number||a instanceof Boolean||a instanceof Date||a instanceof RegExp)return a;b=new a.constructor;for(var d in a){var e=a[d];b[d]=this.clone(e)}return b},capitalize:function(a){return a.charAt(0).toUpperCase()+a.substring(1).toLowerCase()},extend:function(a){var b,c,d=arguments.length;"boolean"==typeof(b=arguments[d-1])?d--:"boolean"==typeof(b=arguments[d-2])&&(c=arguments[d-1],d-=2);for(var e=1;d>e;e++){var f=arguments[e];for(var g in f)(b===!0||void 0==a[g])&&(!c||g in c)&&(a[g]=f[g])}return a},prototypedCopy:function(a){var b=function(){};return b.prototype=a,new b},isArray:function(a){return!!a&&a instanceof Array},isEmpty:function(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0},cssStyleToDomStyle:function(){var a=document.createElement("div").style,b="undefined"!=typeof a.cssFloat?"cssFloat":"undefined"!=typeof a.styleFloat?"styleFloat":"float";return function(a){return"float"==a?b:a.replace(/-./g,function(a){return a.substr(1).toUpperCase()})}}(),buildStyleHtml:function(a){a=[].concat(a);for(var b,c=[],d=0;d<a.length;d++)b=a[d],c.push(/@import|[{}]/.test(b)?"<style>"+b+"</style>":'<link type="text/css" rel=stylesheet href="'+b+'">');return c.join("")},htmlEncode:function(a){var b=function(a){var b=new d.element("span");return b.setText(a),b.getHtml()},c="<br>"==b("\n").toLowerCase()?function(a){return b(a).replace(/<br>/gi,"\n")}:b,e=">"==b(">")?function(a){return c(a).replace(/>/g,"&gt;")}:c,f="&nbsp; "==b("  ")?function(a){return e(a).replace(/&nbsp;/g," ")}:e;return this.htmlEncode=f,this.htmlEncode(a)},htmlEncodeAttr:function(a){return a.replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},getNextNumber:function(){var a=0;return function(){return++a}}(),getNextId:function(){return"cke_"+this.getNextNumber()},override:function(a,b){return b(a)},setTimeout:function(a,b,c,d,e){return e||(e=window),c||(c=e),e.setTimeout(function(){d?a.apply(c,[].concat(d)):a.apply(c)},b||0)},trim:function(){var a=/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g;return function(b){return b.replace(a,"")}}(),ltrim:function(){var a=/^[ \t\n\r]+/g;return function(b){return b.replace(a,"")}}(),rtrim:function(){var a=/[ \t\n\r]+$/g;return function(b){return b.replace(a,"")}}(),indexOf:Array.prototype.indexOf?function(a,b){return a.indexOf(b)}:function(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1},bind:function(a,b){return function(){return a.apply(b,arguments)}},createClass:function(b){var c=b.$,d=b.base,e=b.privates||b._,f=b.proto,g=b.statics;if(e){var h=c;c=function(){var b=this,c=b._||(b._={});for(var d in e){var f=e[d];c[d]="function"==typeof f?a.tools.bind(f,b):f}h.apply(b,arguments)}}return d&&(c.prototype=this.prototypedCopy(d.prototype),c.prototype.constructor=c,c.prototype.base=function(){this.base=d.prototype.base,d.apply(this,arguments),this.base=arguments.callee}),f&&this.extend(c.prototype,f,!0),g&&this.extend(c,g,!0),c},addFunction:function(a,c){return b.push(function(){return a.apply(c||this,arguments)})-1},removeFunction:function(a){b[a]=null},callFunction:function(a){var c=b[a];return c&&c.apply(window,Array.prototype.slice.call(arguments,1))},cssLength:function(){return function(a){return a+(!a||isNaN(Number(a))?"":"px")}}(),convertToPx:function(){var b;return function(c){return b||(b=d.element.createFromHtml('<div style="position:absolute;left:-9999px;top:-9999px;margin:0px;padding:0px;border:0px;"></div>',a.document),a.document.getBody().append(b)),/%$/.test(c)?c:(b.setStyle("width",c),b.$.clientWidth)}}(),repeat:function(a,b){return new Array(b+1).join(a)},tryThese:function(){for(var a,b=0,c=arguments.length;c>b;b++){var d=arguments[b];try{a=d();break}catch(e){}}return a},genKey:function(){return Array.prototype.slice.call(arguments).join("-")},normalizeCssText:function(b,c){var d,e=[],f=a.tools.parseCssText(b,!0,c);for(d in f)e.push(d+":"+f[d]);return e.sort(),e.length?e.join(";")+";":""},convertRgbToHex:function(a){return a.replace(/(?:rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\))/gi,function(a,b,c,d){for(var e=[b,c,d],f=0;3>f;f++)e[f]=("0"+parseInt(e[f],10).toString(16)).slice(-2);return"#"+e.join("")})},parseCssText:function(b,c,e){var f={};if(e){var g=new d.element("span");g.setAttribute("style",b),b=a.tools.convertRgbToHex(g.getAttribute("style")||"")}return b&&";"!=b?(b.replace(/&quot;/g,'"').replace(/\s*([^:;\s]+)\s*:\s*([^;]+)\s*(?=;|$)/g,function(b,d,e){c&&(d=d.toLowerCase(),"font-family"==d&&(e=e.toLowerCase().replace(/["']/g,"").replace(/\s*,\s*/g,",")),e=a.tools.trim(e)),f[d]=e}),f):f}}}();var e=a.tools;a.dtd=function(){var a=e.extend,b={isindex:1,fieldset:1},c={input:1,button:1,select:1,textarea:1,label:1},d=a({a:1},c),f=a({iframe:1},d),g={hr:1,ul:1,menu:1,div:1,section:1,header:1,footer:1,nav:1,article:1,aside:1,figure:1,dialog:1,hgroup:1,mark:1,time:1,meter:1,command:1,keygen:1,output:1,progress:1,audio:1,video:1,details:1,datagrid:1,datalist:1,blockquote:1,noscript:1,table:1,center:1,address:1,dir:1,pre:1,h5:1,dl:1,h4:1,noframes:1,h6:1,ol:1,h1:1,h3:1,h2:1},h={ins:1,del:1,script:1,style:1},i=a({b:1,acronym:1,bdo:1,"var":1,"#":1,abbr:1,code:1,br:1,i:1,cite:1,kbd:1,u:1,strike:1,s:1,tt:1,strong:1,q:1,samp:1,em:1,dfn:1,span:1,wbr:1},h),j=a({sub:1,img:1,object:1,sup:1,basefont:1,map:1,applet:1,font:1,big:1,small:1,mark:1},i),k=a({p:1},j),l=a({iframe:1},j,c),m={img:1,noscript:1,br:1,kbd:1,center:1,button:1,basefont:1,h5:1,h4:1,samp:1,h6:1,ol:1,h1:1,h3:1,h2:1,form:1,font:1,"#":1,select:1,menu:1,ins:1,abbr:1,label:1,code:1,table:1,script:1,cite:1,input:1,iframe:1,strong:1,textarea:1,noframes:1,big:1,small:1,span:1,hr:1,sub:1,bdo:1,"var":1,div:1,section:1,header:1,footer:1,nav:1,article:1,aside:1,figure:1,dialog:1,hgroup:1,mark:1,time:1,meter:1,menu:1,command:1,keygen:1,output:1,progress:1,audio:1,video:1,details:1,datagrid:1,datalist:1,object:1,sup:1,strike:1,dir:1,map:1,dl:1,applet:1,del:1,isindex:1,fieldset:1,ul:1,b:1,acronym:1,a:1,blockquote:1,i:1,u:1,s:1,tt:1,address:1,q:1,pre:1,p:1,em:1,dfn:1},n=a({a:1},l),o={tr:1},p={"#":1},q=a({param:1},m),r=a({form:1},b,f,g,k),s={li:1},t={style:1,script:1},u={base:1,link:1,meta:1,title:1},v=a(u,t),w={head:1,body:1},x={html:1},y={address:1,blockquote:1,center:1,dir:1,div:1,section:1,header:1,footer:1,nav:1,article:1,aside:1,figure:1,dialog:1,hgroup:1,time:1,meter:1,menu:1,command:1,keygen:1,output:1,progress:1,audio:1,video:1,details:1,datagrid:1,datalist:1,dl:1,fieldset:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,hr:1,isindex:1,noframes:1,ol:1,p:1,pre:1,table:1,ul:1};return{$nonBodyContent:a(x,w,u),$block:y,$blockLimit:{body:1,div:1,section:1,header:1,footer:1,nav:1,article:1,aside:1,figure:1,dialog:1,hgroup:1,time:1,meter:1,menu:1,command:1,keygen:1,output:1,progress:1,audio:1,video:1,details:1,datagrid:1,datalist:1,td:1,th:1,caption:1,form:1},$inline:n,$body:a({script:1,style:1},y),$cdata:{script:1,style:1},$empty:{area:1,base:1,br:1,col:1,hr:1,img:1,input:1,link:1,meta:1,param:1,wbr:1},$listItem:{dd:1,dt:1,li:1},$list:{ul:1,ol:1,dl:1},$nonEditable:{applet:1,button:1,embed:1,iframe:1,map:1,object:1,option:1,script:1,textarea:1,param:1,audio:1,video:1},$captionBlock:{caption:1,legend:1},$removeEmpty:{abbr:1,acronym:1,address:1,b:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,q:1,s:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,tt:1,u:1,"var":1,mark:1},$tabIndex:{a:1,area:1,button:1,input:1,object:1,select:1,textarea:1},$tableContent:{caption:1,col:1,colgroup:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1},html:w,head:v,style:p,script:p,body:r,base:{},link:{},meta:{},title:p,col:{},tr:{td:1,th:1},img:{},colgroup:{col:1},noscript:r,td:r,br:{},wbr:{},th:r,center:r,kbd:n,button:a(k,g),basefont:{},h5:n,h4:n,samp:n,h6:n,ol:s,h1:n,h3:n,option:p,h2:n,form:a(b,f,g,k),select:{optgroup:1,option:1},font:n,ins:n,menu:s,abbr:n,label:n,table:{thead:1,col:1,tbody:1,tr:1,colgroup:1,caption:1,tfoot:1},code:n,tfoot:o,cite:n,li:r,input:{},iframe:r,strong:n,textarea:p,noframes:r,big:n,small:n,span:n,hr:{},dt:n,sub:n,optgroup:{option:1},param:{},bdo:n,"var":n,div:r,object:q,sup:n,dd:r,strike:n,area:{},dir:s,map:a({area:1,form:1,p:1},b,h,g),applet:q,dl:{dt:1,dd:1},del:n,isindex:{},fieldset:a({legend:1},m),thead:o,ul:s,acronym:n,b:n,a:l,blockquote:r,caption:n,i:n,u:n,tbody:o,s:n,address:a(f,k),tt:n,legend:n,q:n,pre:a(i,d),p:n,em:n,dfn:n,section:r,header:r,footer:r,nav:r,article:r,aside:r,figure:r,dialog:r,hgroup:r,mark:n,time:n,meter:n,menu:n,command:n,keygen:n,output:n,progress:q,audio:q,video:q,details:q,datagrid:q,datalist:q}}();var f=a.dtd;d.event=function(a){this.$=a},d.event.prototype={getKey:function(){return this.$.keyCode||this.$.which},getKeystroke:function(){var a=this,b=a.getKey();return(a.$.ctrlKey||a.$.metaKey)&&(b+=1114112),a.$.shiftKey&&(b+=2228224),a.$.altKey&&(b+=4456448),b},preventDefault:function(a){var b=this.$;b.preventDefault?b.preventDefault():b.returnValue=!1,a&&this.stopPropagation()},stopPropagation:function(){var a=this.$;a.stopPropagation?a.stopPropagation():a.cancelBubble=!0},getTarget:function(){var a=this.$.target||this.$.srcElement;return a?new d.node(a):null},getPageOffset:function(){var a=this,b=a.getTarget().getDocument().$,c=a.$.pageX||a.$.clientX+(b.documentElement.scrollLeft||b.body.scrollLeft),d=a.$.pageY||a.$.clientY+(b.documentElement.scrollTop||b.body.scrollTop);return{x:c,y:d}}},a.CTRL=1114112,a.SHIFT=2228224,a.ALT=4456448,d.domObject=function(a){a&&(this.$=a)},d.domObject.prototype=function(){var b=function(b,c){return function(e){"undefined"!=typeof a&&b.fire(c,new d.event(e))}};return{getPrivate:function(){var a;return(a=this.getCustomData("_"))||this.setCustomData("_",a={}),a},on:function(c){var d=this,e=d.getCustomData("_cke_nativeListeners");if(e||(e={},d.setCustomData("_cke_nativeListeners",e)),!e[c]){var f=e[c]=b(d,c);d.$.addEventListener?d.$.addEventListener(c,f,!!a.event.useCapture):d.$.attachEvent&&d.$.attachEvent("on"+c,f)}return a.event.prototype.on.apply(d,arguments)},removeListener:function(b){var c=this;if(a.event.prototype.removeListener.apply(c,arguments),!c.hasListeners(b)){var d=c.getCustomData("_cke_nativeListeners"),e=d&&d[b];e&&(c.$.removeEventListener?c.$.removeEventListener(b,e,!1):c.$.detachEvent&&c.$.detachEvent("on"+b,e),delete d[b])}},removeAllListeners:function(){var a=this,b=a.getCustomData("_cke_nativeListeners");for(var c in b){var d=b[c];a.$.detachEvent?a.$.detachEvent("on"+c,d):a.$.removeEventListener&&a.$.removeEventListener(c,d,!1),delete b[c]}}}}(),function(b){var c={};a.on("reset",function(){c={}}),b.equals=function(a){return a&&a.$===this.$},b.setCustomData=function(a,b){var d=this.getUniqueId(),e=c[d]||(c[d]={});return e[a]=b,this},b.getCustomData=function(a){var b=this.$["data-cke-expando"],d=b&&c[b];return d&&d[a]},b.removeCustomData=function(a){var b=this.$["data-cke-expando"],d=b&&c[b],e=d&&d[a];return"undefined"!=typeof e&&delete d[a],e||null},b.clearCustomData=function(){this.removeAllListeners();var a=this.$["data-cke-expando"];a&&delete c[a]},b.getUniqueId=function(){return this.$["data-cke-expando"]||(this.$["data-cke-expando"]=e.getNextNumber())},a.event.implementOn(b)}(d.domObject.prototype),d.window=function(a){d.domObject.call(this,a)},d.window.prototype=new d.domObject,e.extend(d.window.prototype,{focus:function(){b.webkit&&this.$.parent&&this.$.parent.focus(),this.$.focus()},getViewPaneSize:function(){var a=this.$.document,b="CSS1Compat"==a.compatMode;return{width:(b?a.documentElement.clientWidth:a.body.clientWidth)||0,height:(b?a.documentElement.clientHeight:a.body.clientHeight)||0}},getScrollPosition:function(){var a=this.$;if("pageXOffset"in a)return{x:a.pageXOffset||0,y:a.pageYOffset||0};var b=a.document;return{x:b.documentElement.scrollLeft||b.body.scrollLeft||0,y:b.documentElement.scrollTop||b.body.scrollTop||0}}}),d.document=function(a){d.domObject.call(this,a)};var g=d.document;g.prototype=new d.domObject,e.extend(g.prototype,{appendStyleSheet:function(a){if(this.$.createStyleSheet)this.$.createStyleSheet(a);else{var b=new d.element("link");b.setAttributes({rel:"stylesheet",type:"text/css",href:a}),this.getHead().append(b)}},appendStyleText:function(a){var b=this;if(b.$.createStyleSheet){var c=b.$.createStyleSheet("");c.cssText=a}else{var e=new d.element("style",b);e.append(new d.text(a,b)),b.getHead().append(e)}},createElement:function(a,b){var c=new d.element(a,this);return b&&(b.attributes&&c.setAttributes(b.attributes),b.styles&&c.setStyles(b.styles)),c},createText:function(a){return new d.text(a,this)},focus:function(){this.getWindow().focus()},getById:function(a){var b=this.$.getElementById(a);return b?new d.element(b):null},getByAddress:function(a,b){for(var c=this.$.documentElement,e=0;c&&e<a.length;e++){var f=a[e];if(b)for(var g=-1,h=0;h<c.childNodes.length;h++){var i=c.childNodes[h];if((b!==!0||3!=i.nodeType||!i.previousSibling||3!=i.previousSibling.nodeType)&&(g++,g==f)){c=i;break}}else c=c.childNodes[f]}return c?new d.node(c):null},getElementsByTag:function(a,b){return(!c||document.documentMode>8)&&b&&(a=b+":"+a),new d.nodeList(this.$.getElementsByTagName(a))},getHead:function(){var a=this.$.getElementsByTagName("head")[0];return a=a?new d.element(a):this.getDocumentElement().append(new d.element("head"),!0),(this.getHead=function(){return a})()},getBody:function(){var a=new d.element(this.$.body);return(this.getBody=function(){return a})()},getDocumentElement:function(){var a=new d.element(this.$.documentElement);return(this.getDocumentElement=function(){return a})()},getWindow:function(){var a=new d.window(this.$.parentWindow||this.$.defaultView);return(this.getWindow=function(){return a})()},write:function(a){var c=this;c.$.open("text/html","replace"),b.isCustomDomain()&&(c.$.domain=document.domain),c.$.write(a),c.$.close()}}),d.node=function(a){if(a){var b=9==a.nodeType?"document":1==a.nodeType?"element":3==a.nodeType?"text":8==a.nodeType?"comment":"domObject";return new d[b](a)}return this},d.node.prototype=new d.domObject,a.NODE_ELEMENT=1,a.NODE_DOCUMENT=9,a.NODE_TEXT=3,a.NODE_COMMENT=8,a.NODE_DOCUMENT_FRAGMENT=11,a.POSITION_IDENTICAL=0,a.POSITION_DISCONNECTED=1,a.POSITION_FOLLOWING=2,a.POSITION_PRECEDING=4,a.POSITION_IS_CONTAINED=8,a.POSITION_CONTAINS=16,e.extend(d.node.prototype,{appendTo:function(a,b){return a.append(this,b),a},clone:function(a,b){var c=this.$.cloneNode(a),e=function(c){if(1==c.nodeType&&(b||c.removeAttribute("id",!1),c["data-cke-expando"]=void 0,a))for(var d=c.childNodes,f=0;f<d.length;f++)e(d[f])};return e(c),new d.node(c)},hasPrevious:function(){return!!this.$.previousSibling},hasNext:function(){return!!this.$.nextSibling},insertAfter:function(a){return a.$.parentNode.insertBefore(this.$,a.$.nextSibling),a},insertBefore:function(a){return a.$.parentNode.insertBefore(this.$,a.$),a},insertBeforeMe:function(a){return this.$.parentNode.insertBefore(a.$,this.$),a},getAddress:function(a){for(var b=[],c=this.getDocument().$.documentElement,d=this.$;d&&d!=c;){var e=d.parentNode;e&&b.unshift(this.getIndex.call({$:d},a)),d=e}return b},getDocument:function(){return new g(this.$.ownerDocument||this.$.parentNode.ownerDocument)},getIndex:function(a){for(var b=this.$,c=0;b=b.previousSibling;)a&&3==b.nodeType&&(!b.nodeValue.length||b.previousSibling&&3==b.previousSibling.nodeType)||c++;return c},getNextSourceNode:function(a,b,c){if(c&&!c.call){var d=c;c=function(a){return!a.equals(d)}}var e,f=!a&&this.getFirst&&this.getFirst();if(!f){if(1==this.type&&c&&c(this,!0)===!1)return null;f=this.getNext()}for(;!f&&(e=(e||this).getParent());){if(c&&c(e,!0)===!1)return null;f=e.getNext()}return f?c&&c(f)===!1?null:b&&b!=f.type?f.getNextSourceNode(!1,b,c):f:null},getPreviousSourceNode:function(a,b,c){if(c&&!c.call){var d=c;c=function(a){return!a.equals(d)}}var e,f=!a&&this.getLast&&this.getLast();if(!f){if(1==this.type&&c&&c(this,!0)===!1)return null;f=this.getPrevious()}for(;!f&&(e=(e||this).getParent());){if(c&&c(e,!0)===!1)return null;f=e.getPrevious()}return f?c&&c(f)===!1?null:b&&f.type!=b?f.getPreviousSourceNode(!1,b,c):f:null},getPrevious:function(a){var b,c=this.$;do c=c.previousSibling,b=c&&10!=c.nodeType&&new d.node(c);while(b&&a&&!a(b));return b},getNext:function(a){var b,c=this.$;do c=c.nextSibling,b=c&&new d.node(c);while(b&&a&&!a(b));return b},getParent:function(){var a=this.$.parentNode;return a&&1==a.nodeType?new d.node(a):null},getParents:function(a){var b=this,c=[];do c[a?"push":"unshift"](b);while(b=b.getParent());return c},getCommonAncestor:function(a){var b=this;if(a.equals(b))return b;if(a.contains&&a.contains(b))return a;var c=b.contains?b:b.getParent();do if(c.contains(a))return c;while(c=c.getParent());return null},getPosition:function(a){var b=this.$,c=a.$;if(b.compareDocumentPosition)return b.compareDocumentPosition(c);if(b==c)return 0;if(1==this.type&&1==a.type){if(b.contains){if(b.contains(c))return 20;if(c.contains(b))return 10}if("sourceIndex"in b)return b.sourceIndex<0||c.sourceIndex<0?1:b.sourceIndex<c.sourceIndex?4:2}for(var d=this.getAddress(),e=a.getAddress(),f=Math.min(d.length,e.length),g=0;f-1>=g;g++)if(d[g]!=e[g]){if(f>g)return d[g]<e[g]?4:2;break}return d.length<e.length?20:10},getAscendant:function(a,b){var c,e=this.$;for(b||(e=e.parentNode);e;){if(e.nodeName&&(c=e.nodeName.toLowerCase(),"string"==typeof a?c==a:c in a))return new d.node(e);e=e.parentNode}return null},hasAscendant:function(a,b){var c=this.$;for(b||(c=c.parentNode);c;){if(c.nodeName&&c.nodeName.toLowerCase()==a)return!0;c=c.parentNode}return!1},move:function(a,b){a.append(this.remove(),b)},remove:function(a){var b=this.$,c=b.parentNode;if(c){if(a)for(var d;d=b.firstChild;)c.insertBefore(b.removeChild(d),b);c.removeChild(b)}return this},replace:function(a){this.insertBefore(a),a.remove()},trim:function(){this.ltrim(),this.rtrim()},ltrim:function(){for(var a,b=this;b.getFirst&&(a=b.getFirst());){if(3==a.type){var c=e.ltrim(a.getText()),d=a.getLength();if(!c){a.remove();continue}c.length<d&&(a.split(d-c.length),b.$.removeChild(b.$.firstChild))}break}},rtrim:function(){for(var a,d=this;d.getLast&&(a=d.getLast());){if(3==a.type){var f=e.rtrim(a.getText()),g=a.getLength();if(!f){a.remove();continue}f.length<g&&(a.split(f.length),d.$.lastChild.parentNode.removeChild(d.$.lastChild))}break}c||b.opera||(a=d.$.lastChild,a&&1==a.type&&"br"==a.nodeName.toLowerCase()&&a.parentNode.removeChild(a))},isReadOnly:function(){var a=this;if(1!=this.type&&(a=this.getParent()),a&&"undefined"!=typeof a.$.isContentEditable)return!(a.$.isContentEditable||a.data("cke-editable"));for(var b=a;b&&!b.is("body")&&!b.data("cke-editable");){if("false"==b.getAttribute("contentEditable"))return!0;if("true"==b.getAttribute("contentEditable"))break;b=b.getParent()}return!1}}),d.nodeList=function(a){this.$=a},d.nodeList.prototype={count:function(){return this.$.length},getItem:function(a){var b=this.$[a];return b?new d.node(b):null}},d.element=function(a,b){"string"==typeof a&&(a=(b?b.$:document).createElement(a)),d.domObject.call(this,a)};var h=d.element;h.get=function(a){return a&&(a.$?a:new h(a))},h.prototype=new d.node,h.createFromHtml=function(a,b){var c=new h("div",b);return c.setHtml(a),c.getFirst().remove()},h.setMarker=function(a,b,c,d){var f=b.getCustomData("list_marker_id")||b.setCustomData("list_marker_id",e.getNextNumber()).getCustomData("list_marker_id"),g=b.getCustomData("list_marker_names")||b.setCustomData("list_marker_names",{}).getCustomData("list_marker_names");return a[f]=b,g[c]=1,b.setCustomData(c,d)},h.clearAllMarkers=function(a){for(var b in a)h.clearMarkers(a,a[b],1)},h.clearMarkers=function(a,b,c){var d=b.getCustomData("list_marker_names"),e=b.getCustomData("list_marker_id");for(var f in d)b.removeCustomData(f);b.removeCustomData("list_marker_names"),c&&(b.removeCustomData("list_marker_id"),delete a[e])},function(){function i(a){var b,c=["top","left","right","bottom"];"border"==a&&(b=["color","style","width"]);for(var d=[],e=0;e<c.length;e++)if(b)for(var f=0;f<b.length;f++)d.push([a,c[e],b[f]].join("-"));else d.push([a,c[e]].join("-"));return d}function j(a){for(var b=0,c=0,d=k[a].length;d>c;c++)b+=parseInt(this.getComputedStyle(k[a][c])||0,10)||0;return b}e.extend(h.prototype,{type:1,addClass:function(a){var b=this.$.className;if(b){var c=new RegExp("(?:^|\\s)"+a+"(?:\\s|$)","");c.test(b)||(b+=" "+a)}this.$.className=b||a},removeClass:function(a){var b=this.getAttribute("class");if(b){var c=new RegExp("(?:^|\\s+)"+a+"(?=\\s|$)","i");c.test(b)&&(b=b.replace(c,"").replace(/^\s+/,""),b?this.setAttribute("class",b):this.removeAttribute("class"))}},hasClass:function(a){var b=new RegExp("(?:^|\\s+)"+a+"(?=\\s|$)","");return b.test(this.getAttribute("class"))},append:function(a,b){var c=this;return"string"==typeof a&&(a=c.getDocument().createElement(a)),b?c.$.insertBefore(a.$,c.$.firstChild):c.$.appendChild(a.$),a},appendHtml:function(a){var b=this;if(b.$.childNodes.length){var c=new h("div",b.getDocument());c.setHtml(a),c.moveChildren(b)}else b.setHtml(a)},appendText:function(a){void 0!=this.$.text?this.$.text+=a:this.append(new d.text(a))},appendBogus:function(){for(var a=this,c=a.getLast();c&&3==c.type&&!e.rtrim(c.getText());)c=c.getPrevious();if(!c||!c.is||!c.is("br")){var d=b.opera?a.getDocument().createText(""):a.getDocument().createElement("br");b.gecko&&d.setAttribute("type","_moz"),a.append(d)}},breakParent:function(a){var b=this,c=new d.range(b.getDocument());c.setStartAfter(b),c.setEndAfter(a);var e=c.extractContents();c.insertNode(b.remove()),e.insertAfterNode(b)},contains:c||b.webkit?function(a){var b=this.$;return 1!=a.type?b.contains(a.getParent().$):b!=a.$&&b.contains(a.$)}:function(a){return!!(16&this.$.compareDocumentPosition(a.$))},focus:function(){function a(){try{this.$.focus()}catch(a){}}return function(b){b?e.setTimeout(a,100,this):a.call(this)}}(),getHtml:function(){var a=this.$.innerHTML;return c?a.replace(/<\?[^>]*>/g,""):a},getOuterHtml:function(){var a=this;if(a.$.outerHTML)return a.$.outerHTML.replace(/<\?[^>]*>/,"");var b=a.$.ownerDocument.createElement("div");return b.appendChild(a.$.cloneNode(!0)),b.innerHTML},setHtml:function(a){return this.$.innerHTML=a},setText:function(a){return h.prototype.setText=void 0!=this.$.innerText?function(a){return this.$.innerText=a}:function(a){return this.$.textContent=a},this.setText(a)},getAttribute:function(){var a=function(a){return this.$.getAttribute(a,2)};return c&&(b.ie7Compat||b.ie6Compat)?function(b){var c=this;switch(b){case"class":b="className";break;case"http-equiv":b="httpEquiv";break;case"name":return c.$.name;case"tabindex":var d=a.call(c,b);return 0!==d&&0===c.$.tabIndex&&(d=null),d;case"checked":var e=c.$.attributes.getNamedItem(b),f=e.specified?e.nodeValue:c.$.checked;return f?"checked":null;case"hspace":case"value":return c.$[b];case"style":return c.$.style.cssText;case"contenteditable":case"contentEditable":return c.$.attributes.getNamedItem("contentEditable").specified?c.$.getAttribute("contentEditable"):null}return a.call(c,b)}:a}(),getChildren:function(){return new d.nodeList(this.$.childNodes)},getComputedStyle:c?function(a){return this.$.currentStyle[e.cssStyleToDomStyle(a)]}:function(a){var b=this.getWindow().$.getComputedStyle(this.$,null);return b?b.getPropertyValue(a):""},getDtd:function(){var a=f[this.getName()];return this.getDtd=function(){return a},a},getElementsByTag:g.prototype.getElementsByTag,getTabIndex:c?function(){var a=this.$.tabIndex;return 0!==a||f.$tabIndex[this.getName()]||0===parseInt(this.getAttribute("tabindex"),10)||(a=-1),a}:b.webkit?function(){var a=this.$.tabIndex;return void 0==a&&(a=parseInt(this.getAttribute("tabindex"),10),isNaN(a)&&(a=-1)),a}:function(){return this.$.tabIndex},getText:function(){return this.$.textContent||this.$.innerText||""},getWindow:function(){return this.getDocument().getWindow()},getId:function(){return this.$.id||null},getNameAtt:function(){return this.$.name||null},getName:function(){var a=this.$.nodeName.toLowerCase();if(c&&!(document.documentMode>8)){var b=this.$.scopeName;"HTML"!=b&&(a=b.toLowerCase()+":"+a)}return(this.getName=function(){return a})()},getValue:function(){return this.$.value},getFirst:function(a){var b=this.$.firstChild,c=b&&new d.node(b);return c&&a&&!a(c)&&(c=c.getNext(a)),c},getLast:function(a){var b=this.$.lastChild,c=b&&new d.node(b);return c&&a&&!a(c)&&(c=c.getPrevious(a)),c},getStyle:function(a){return this.$.style[e.cssStyleToDomStyle(a)]},is:function(){for(var a=this.getName(),b=0;b<arguments.length;b++)if(arguments[b]==a)return!0;return!1},isEditable:function(a){var b=this,c=b.getName();if(b.isReadOnly()||"none"==b.getComputedStyle("display")||"hidden"==b.getComputedStyle("visibility")||b.is("a")&&b.data("cke-saved-name")&&!b.getChildCount()||f.$nonEditable[c]||f.$empty[c])return!1;if(a!==!1){var d=f[c]||f.span;return d&&d["#"]}return!0},isIdentical:function(a){if(this.getName()!=a.getName())return!1;for(var b=this.$.attributes,d=a.$.attributes,e=b.length,f=d.length,g=0;e>g;g++){var h=b[g];if("_moz_dirty"!=h.nodeName&&(!c||h.specified&&"data-cke-expando"!=h.nodeName)&&h.nodeValue!=a.getAttribute(h.nodeName))return!1;

}if(c)for(g=0;f>g;g++)if(h=d[g],h.specified&&"data-cke-expando"!=h.nodeName&&h.nodeValue!=this.getAttribute(h.nodeName))return!1;return!0},isVisible:function(){var c,d,e=this,f=(e.$.offsetHeight||e.$.offsetWidth)&&"hidden"!=e.getComputedStyle("visibility");return f&&(b.webkit||b.opera)&&(c=e.getWindow(),!c.equals(a.document.getWindow())&&(d=c.$.frameElement)&&(f=new h(d).isVisible())),!!f},isEmptyInlineRemoveable:function(){if(!f.$removeEmpty[this.getName()])return!1;for(var a=this.getChildren(),b=0,c=a.count();c>b;b++){var d=a.getItem(b);if((1!=d.type||!d.data("cke-bookmark"))&&(1==d.type&&!d.isEmptyInlineRemoveable()||3==d.type&&e.trim(d.getText())))return!1}return!0},hasAttributes:c&&(b.ie7Compat||b.ie6Compat)?function(){for(var a=this.$.attributes,b=0;b<a.length;b++){var c=a[b];switch(c.nodeName){case"class":if(this.getAttribute("class"))return!0;case"data-cke-expando":continue;default:if(c.specified)return!0}}return!1}:function(){var a=this.$.attributes,b=a.length,c={"data-cke-expando":1,_moz_dirty:1};return b>0&&(b>2||!c[a[0].nodeName]||2==b&&!c[a[1].nodeName])},hasAttribute:function(){function a(a){var b=this.$.attributes.getNamedItem(a);return!(!b||!b.specified)}return c&&b.version<8?function(b){return"name"==b?!!this.$.name:a.call(this,b)}:a}(),hide:function(){this.setStyle("display","none")},moveChildren:function(a,b){var c=this.$;if(a=a.$,c!=a){var d;if(b)for(;d=c.lastChild;)a.insertBefore(c.removeChild(d),a.firstChild);else for(;d=c.firstChild;)a.appendChild(c.removeChild(d))}},mergeSiblings:function(){function a(a,b,c){if(b&&1==b.type){for(var d=[];b.data("cke-bookmark")||b.isEmptyInlineRemoveable();)if(d.push(b),b=c?b.getNext():b.getPrevious(),!b||1!=b.type)return;if(a.isIdentical(b)){for(var e=c?a.getLast():a.getFirst();d.length;)d.shift().move(a,!c);b.moveChildren(a,!c),b.remove(),e&&1==e.type&&e.mergeSiblings()}}}return function(b){var c=this;(b===!1||f.$removeEmpty[c.getName()]||c.is("a"))&&(a(c,c.getNext(),!0),a(c,c.getPrevious()))}}(),show:function(){this.setStyles({display:"",visibility:""})},setAttribute:function(){var a=function(a,b){return this.$.setAttribute(a,b),this};return c&&(b.ie7Compat||b.ie6Compat)?function(b,c){var d=this;return"class"==b?d.$.className=c:"style"==b?d.$.style.cssText=c:"tabindex"==b?d.$.tabIndex=c:"checked"==b?d.$.checked=c:"contenteditable"==b?a.call(d,"contentEditable",c):a.apply(d,arguments),d}:b.ie8Compat&&b.secure?function(b,c){if("src"==b&&c.match(/^http:\/\//))try{a.apply(this,arguments)}catch(d){}else a.apply(this,arguments);return this}:a}(),setAttributes:function(a){for(var b in a)this.setAttribute(b,a[b]);return this},setValue:function(a){return this.$.value=a,this},removeAttribute:function(){var a=function(a){this.$.removeAttribute(a)};return c&&(b.ie7Compat||b.ie6Compat)?function(b){"class"==b?b="className":"tabindex"==b?b="tabIndex":"contenteditable"==b&&(b="contentEditable"),a.call(this,b)}:a}(),removeAttributes:function(a){if(e.isArray(a))for(var b=0;b<a.length;b++)this.removeAttribute(a[b]);else for(var c in a)a.hasOwnProperty(c)&&this.removeAttribute(c)},removeStyle:function(a){var b=this,c=b.$.style;if(c.removeProperty||"border"!=a&&"margin"!=a&&"padding"!=a)c.removeProperty?c.removeProperty(a):c.removeAttribute(e.cssStyleToDomStyle(a)),b.$.style.cssText||b.removeAttribute("style");else for(var d=i(a),f=0;f<d.length;f++)b.removeStyle(d[f])},setStyle:function(a,b){return this.$.style[e.cssStyleToDomStyle(a)]=b,this},setStyles:function(a){for(var b in a)this.setStyle(b,a[b]);return this},setOpacity:function(a){c&&b.version<9?(a=Math.round(100*a),this.setStyle("filter",a>=100?"":"progid:DXImageTransform.Microsoft.Alpha(opacity="+a+")")):this.setStyle("opacity",a)},unselectable:b.gecko?function(){this.$.style.MozUserSelect="none",this.on("dragstart",function(a){a.data.preventDefault()})}:b.webkit?function(){this.$.style.KhtmlUserSelect="none",this.on("dragstart",function(a){a.data.preventDefault()})}:function(){if(c||b.opera){var a,d=this.$,e=d.getElementsByTagName("*"),f=0;for(d.unselectable="on";a=e[f++];)switch(a.tagName.toLowerCase()){case"iframe":case"textarea":case"input":case"select":break;default:a.unselectable="on"}}},getPositionedAncestor:function(){for(var a=this;"html"!=a.getName();){if("static"!=a.getComputedStyle("position"))return a;a=a.getParent()}return null},getDocumentPosition:function(a){var d=this,e=0,f=0,g=d.getDocument(),i=g.getBody(),j="BackCompat"==g.$.compatMode;if(document.documentElement.getBoundingClientRect){var k=d.$.getBoundingClientRect(),l=g.$,m=l.documentElement,n=m.clientTop||i.$.clientTop||0,o=m.clientLeft||i.$.clientLeft||0,p=!0;if(c){var q=g.getDocumentElement().contains(d),r=g.getBody().contains(d);p=j&&r||!j&&q}p&&(e=k.left+(!j&&m.scrollLeft||i.$.scrollLeft),e-=o,f=k.top+(!j&&m.scrollTop||i.$.scrollTop),f-=n)}else for(var s,t=d,u=null;t&&"body"!=t.getName()&&"html"!=t.getName();){e+=t.$.offsetLeft-t.$.scrollLeft,f+=t.$.offsetTop-t.$.scrollTop,t.equals(d)||(e+=t.$.clientLeft||0,f+=t.$.clientTop||0);for(var v=u;v&&!v.equals(t);)e-=v.$.scrollLeft,f-=v.$.scrollTop,v=v.getParent();u=t,t=(s=t.$.offsetParent)?new h(s):null}if(a){var w=d.getWindow(),x=a.getWindow();if(!w.equals(x)&&w.$.frameElement){var y=new h(w.$.frameElement).getDocumentPosition(a);e+=y.x,f+=y.y}}return document.documentElement.getBoundingClientRect||b.gecko&&!j&&(e+=d.$.clientLeft?1:0,f+=d.$.clientTop?1:0),{x:e,y:f}},scrollIntoView:function(a){var b=this.getParent();if(b)do{var c=b.$.clientWidth&&b.$.clientWidth<b.$.scrollWidth||b.$.clientHeight&&b.$.clientHeight<b.$.scrollHeight;if(c&&this.scrollIntoParent(b,a,1),b.is("html")){var d=b.getWindow();try{var e=d.$.frameElement;e&&(b=new h(e))}catch(f){}}}while(b=b.getParent())},scrollIntoParent:function(a,b,c){function e(b,c){/body|html/.test(a.getName())?a.getWindow().$.scrollBy(b,c):(a.$.scrollLeft+=b,a.$.scrollTop+=c)}function f(a,b){var c={x:0,y:0};if(!a.is(j?"body":"html")){var d=a.$.getBoundingClientRect();c.x=d.left,c.y=d.top}var e=a.getWindow();if(!e.equals(b)){var g=f(h.get(e.$.frameElement),b);c.x+=g.x,c.y+=g.y}return c}function g(a,b){return parseInt(a.getComputedStyle("margin-"+b)||0,10)||0}!a&&(a=this.getWindow());var i=a.getDocument(),j="BackCompat"==i.$.compatMode;a instanceof d.window&&(a=j?i.getBody():i.getDocumentElement());var k,l,m=a.getWindow(),n=f(this,m),o=f(a,m),p=this.$.offsetHeight,q=this.$.offsetWidth,r=a.$.clientHeight,s=a.$.clientWidth;k={x:n.x-g(this,"left")-o.x||0,y:n.y-g(this,"top")-o.y||0},l={x:n.x+q+g(this,"right")-(o.x+s)||0,y:n.y+p+g(this,"bottom")-(o.y+r)||0},(k.y<0||l.y>0)&&e(0,b===!0?k.y:b===!1?l.y:k.y<0?k.y:l.y),c&&(k.x<0||l.x>0)&&e(k.x<0?k.x:l.x,0)},setState:function(a){var b=this;switch(a){case 1:b.addClass("cke_on"),b.removeClass("cke_off"),b.removeClass("cke_disabled");break;case 0:b.addClass("cke_disabled"),b.removeClass("cke_off"),b.removeClass("cke_on");break;default:b.addClass("cke_off"),b.removeClass("cke_on"),b.removeClass("cke_disabled")}},getFrameDocument:function(){var a=this.$;try{a.contentWindow.document}catch(d){a.src=a.src,c&&b.version<7&&window.showModalDialog('javascript:document.write("<script>window.setTimeout(function(){window.close();},50);</script>")')}return a&&new g(a.contentWindow.document)},copyAttributes:function(a,b){var d=this,e=d.$.attributes;b=b||{};for(var f=0;f<e.length;f++){var g,h=e[f],i=h.nodeName.toLowerCase();i in b||("checked"==i&&(g=d.getAttribute(i))?a.setAttribute(i,g):(h.specified||c&&h.nodeValue&&"value"==i)&&(g=d.getAttribute(i),null===g&&(g=h.nodeValue),a.setAttribute(i,g)))}""!==d.$.style.cssText&&(a.$.style.cssText=d.$.style.cssText)},renameNode:function(a){var b=this;if(b.getName()!=a){var c=b.getDocument(),d=new h(a,c);b.copyAttributes(d),b.moveChildren(d),b.getParent()&&b.$.parentNode.replaceChild(d.$,b.$),d.$["data-cke-expando"]=b.$["data-cke-expando"],b.$=d.$}},getChild:function(a){var b=this.$;if(a.slice)for(;a.length>0&&b;)b=b.childNodes[a.shift()];else b=b.childNodes[a];return b?new d.node(b):null},getChildCount:function(){return this.$.childNodes.length},disableContextMenu:function(){this.on("contextmenu",function(a){a.data.getTarget().hasClass("cke_enable_context_menu")||a.data.preventDefault()})},getDirection:function(a){var b=this;return a?b.getComputedStyle("direction")||b.getDirection()||b.getDocument().$.dir||b.getDocument().getBody().getDirection(1):b.getStyle("direction")||b.getAttribute("dir")},data:function(a,b){return a="data-"+a,void 0===b?this.getAttribute(a):(b===!1?this.removeAttribute(a):this.setAttribute(a,b),null)}});var k={width:["border-left-width","border-right-width","padding-left","padding-right"],height:["border-top-width","border-bottom-width","padding-top","padding-bottom"]};h.prototype.setSize=function(a,d,e){"number"==typeof d&&(!e||c&&b.quirks||(d-=j.call(this,a)),this.setStyle(a,d+"px"))},h.prototype.getSize=function(a,b){var c=Math.max(this.$["offset"+e.capitalize(a)],this.$["client"+e.capitalize(a)])||0;return b&&(c-=j.call(this,a)),c}}(),a.command=function(b,c){this.uiItems=[],this.exec=function(a){var d=this;return 0==d.state?!1:(d.editorFocus&&b.focus(),d.fire("exec")===!0?!0:c.exec.call(d,b,a)!==!1)},this.refresh=function(){return this.fire("refresh")===!0?!0:c.refresh&&c.refresh.apply(this,arguments)!==!1},e.extend(this,c,{modes:{wysiwyg:1},editorFocus:1,state:2}),a.event.call(this)},a.command.prototype={enable:function(){var a=this;0==a.state&&a.setState(a.preserveState&&"undefined"!=typeof a.previousState?a.previousState:2)},disable:function(){this.setState(0)},setState:function(a){var b=this;return b.state==a?!1:(b.previousState=b.state,b.state=a,b.fire("state"),!0)},toggleState:function(){var a=this;2==a.state?a.setState(1):1==a.state&&a.setState(2)}},a.event.implementOn(a.command.prototype,!0),a.ENTER_P=1,a.ENTER_BR=2,a.ENTER_DIV=3,a.config={customConfig:"config.js",autoUpdateElement:!0,baseHref:"",contentsCss:a.basePath+"contents.css",contentsLangDirection:"ui",contentsLanguage:"",language:"",defaultLanguage:"en",enterMode:1,forceEnterMode:!1,shiftEnterMode:2,corePlugins:"",docType:'<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">',bodyId:"",bodyClass:"",fullPage:!1,height:200,plugins:"about,a11yhelp,basicstyles,bidi,blockquote,button,clipboard,colorbutton,colordialog,contextmenu,dialogadvtab,div,elementspath,enterkey,entities,filebrowser,find,flash,font,format,forms,horizontalrule,htmldataprocessor,iframe,image,indent,justify,keystrokes,link,list,liststyle,maximize,newpage,pagebreak,pastefromword,pastetext,popup,preview,print,removeformat,resize,save,scayt,showblocks,showborders,smiley,sourcearea,specialchar,stylescombo,tab,table,tabletools,templates,toolbar,undo,wsc,wysiwygarea",extraPlugins:"",removePlugins:"",protectedSource:[],tabIndex:0,theme:"default",skin:"kama",width:"",baseFloatZIndex:1e4};var i=a.config;a.focusManager=function(a){return a.focusManager?a.focusManager:(this.hasFocus=!1,this._={editor:a},this)},a.focusManager.prototype={focus:function(){var b=this;if(b._.timer&&clearTimeout(b._.timer),!b.hasFocus){a.currentInstance&&a.currentInstance.focusManager.forceBlur();var c=b._.editor;c.container.getChild(1).addClass("cke_focus"),b.hasFocus=!0,c.fire("focus")}},blur:function(){var a=this;a._.timer&&clearTimeout(a._.timer),a._.timer=setTimeout(function(){delete a._.timer,a.forceBlur()},100)},forceBlur:function(){if(this.hasFocus){var a=this._.editor;a.container.getChild(1).removeClass("cke_focus"),this.hasFocus=!1,a.fire("blur")}}},function(){a.lang={languages:{af:1,ar:1,bg:1,bn:1,bs:1,ca:1,cs:1,cy:1,da:1,de:1,el:1,"en-au":1,"en-ca":1,"en-gb":1,en:1,eo:1,es:1,et:1,eu:1,fa:1,fi:1,fo:1,"fr-ca":1,fr:1,gl:1,gu:1,he:1,hi:1,hr:1,hu:1,is:1,it:1,ja:1,ka:1,km:1,ko:1,ku:1,lt:1,lv:1,mn:1,ms:1,nb:1,nl:1,no:1,pl:1,"pt-br":1,pt:1,ro:1,ru:1,sk:1,sl:1,"sr-latn":1,sr:1,sv:1,th:1,tr:1,ug:1,uk:1,vi:1,"zh-cn":1,zh:1},load:function(b,c,d){b&&a.lang.languages[b]||(b=this.detect(c,b)),this[b]?d(b,this[b]):a.scriptLoader.load(a.getUrl("lang/"+b+".js"),function(){d(b,this[b])},this)},detect:function(b,c){var d=this.languages;c=c||navigator.userLanguage||navigator.language||b;var e=c.toLowerCase().match(/([a-z]+)(?:-([a-z]+))?/),f=e[1],g=e[2];return d[f+"-"+g]?f=f+"-"+g:d[f]||(f=null),a.lang.detect=f?function(){return f}:function(a){return a},f||b}}}(),a.scriptLoader=function(){var b={},d={};return{load:function(e,f,g,i){var j="string"==typeof e;j&&(e=[e]),g||(g=a);var k=e.length,l=[],m=[],n=function(a){f&&(j?f.call(g,a):f.call(g,l,m))};if(0===k)return void n(!0);var o=function(b,c){(c?l:m).push(b),--k<=0&&(i&&a.document.getDocumentElement().removeStyle("cursor"),n(c))},p=function(a,c){b[a]=1;var e=d[a];delete d[a];for(var f=0;f<e.length;f++)e[f](a,c)},q=function(e){if(b[e])return void o(e,!0);var g=d[e]||(d[e]=[]);if(g.push(o),!(g.length>1)){var i=new h("script");i.setAttributes({type:"text/javascript",src:e}),f&&(c?i.$.onreadystatechange=function(){("loaded"==i.$.readyState||"complete"==i.$.readyState)&&(i.$.onreadystatechange=null,p(e,!0))}:(i.$.onload=function(){setTimeout(function(){p(e,!0)},0)},i.$.onerror=function(){p(e,!1)})),i.appendTo(a.document.getHead())}};i&&a.document.getDocumentElement().setStyle("cursor","wait");for(var r=0;k>r;r++)q(e[r])}}}(),a.resourceManager=function(a,b){var c=this;c.basePath=a,c.fileName=b,c.registered={},c.loaded={},c.externals={},c._={waitingList:{}}},a.resourceManager.prototype={add:function(b,c){if(this.registered[b])throw'[CKEDITOR.resourceManager.add] The resource name "'+b+'" is already registered.';a.fire(b+e.capitalize(this.fileName)+"Ready",this.registered[b]=c||{})},get:function(a){return this.registered[a]||null},getPath:function(b){var c=this.externals[b];return a.getUrl(c&&c.dir||this.basePath+b+"/")},getFilePath:function(b){var c=this.externals[b];return a.getUrl(this.getPath(b)+(c&&"string"==typeof c.file?c.file:this.fileName+".js"))},addExternal:function(a,b,c){a=a.split(",");for(var d=0;d<a.length;d++){var e=a[d];this.externals[e]={dir:b,file:c}}},load:function(b,c,d){e.isArray(b)||(b=b?[b]:[]);for(var f=this.loaded,g=this.registered,h=[],i={},j={},k=0;k<b.length;k++){var l=b[k];if(l)if(f[l]||g[l])j[l]=this.get(l);else{var m=this.getFilePath(l);h.push(m),m in i||(i[m]=[]),i[m].push(l)}}a.scriptLoader.load(h,function(a,b){if(b.length)throw'[CKEDITOR.resourceManager.load] Resource name "'+i[b[0]].join(",")+'" was not found at "'+b[0]+'".';for(var e=0;e<a.length;e++)for(var g=i[a[e]],h=0;h<g.length;h++){var k=g[h];j[k]=this.get(k),f[k]=1}c.call(d,j)},this)}},a.plugins=new a.resourceManager("plugins/","plugin");var j=a.plugins;j.load=e.override(j.load,function(a){return function(b,c,d){var f={},g=function(b){a.call(this,b,function(a){e.extend(f,a);var b=[];for(var h in a){var i=a[h],j=i&&i.requires;if(j)for(var k=0;k<j.length;k++)f[j[k]]||b.push(j[k])}if(b.length)g.call(this,b);else{for(h in f)i=f[h],i.onLoad&&!i.onLoad._called&&(i.onLoad(),i.onLoad._called=1);c&&c.call(d||window,f)}},this)};g.call(this,b)}}),j.setLang=function(a,b,c){var d=this.get(a),f=d.langEntries||(d.langEntries={}),g=d.lang||(d.lang=[]);-1==e.indexOf(g,b)&&g.push(b),f[b]=c},a.skins=function(){var b={},c={},d=function(d,f,g,h){function i(a,b){return a.replace(/url\s*\(([\s'"]*)(.*?)([\s"']*)\)/g,function(a,c,d,e){return/^\/|^\w?:/.test(d)?a:"url("+b+c+d+e+")"})}var j=b[f];d.skin||(d.skin=j,j.init&&j.init(d));var k=function(b){for(var d=0;d<b.length;d++)b[d]=a.getUrl(c[f]+b[d])};g=j[g];var l=!g||!!g._isLoaded;if(l)h&&h();else{var m=g._pending||(g._pending=[]);if(m.push(h),m.length>1)return;var n=!g.css||!g.css.length,o=!g.js||!g.js.length,p=function(){if(n&&o){g._isLoaded=1;for(var a=0;a<m.length;a++)m[a]&&m[a]()}};if(!n){var q=g.css;if(e.isArray(q)){k(q);for(var r=0;r<q.length;r++)a.document.appendStyleSheet(q[r])}else q=i(q,a.getUrl(c[f])),a.document.appendStyleText(q);g.css=q,n=1}o||(k(g.js),a.scriptLoader.load(g.js,function(){o=1,p()})),p()}};return{add:function(d,e){b[d]=e,e.skinPath=c[d]||(c[d]=a.getUrl("skins/"+d+"/"))},load:function(e,f,g){var h=e.skinName,i=e.skinPath;b[h]?d(e,h,f,g):(c[h]=i,a.scriptLoader.load(a.getUrl(i+"skin.js"),function(){d(e,h,f,g)}))}}}(),a.themes=new a.resourceManager("themes/","theme"),a.ui=function(a){return a.ui?a.ui:(this._={handlers:{},items:{},editor:a},this)};var k=a.ui;if(k.prototype={add:function(a,b,c){this._.items[a]={type:b,command:c.command||null,args:Array.prototype.slice.call(arguments,2)}},create:function(a){var b=this,c=b._.items[a],d=c&&b._.handlers[c.type],f=c&&c.command&&b._.editor.getCommand(c.command),g=d&&d.create.apply(b,c.args);return c&&(g=e.extend(g,b._.editor.skin[c.type],!0)),f&&f.uiItems.push(g),g},addHandler:function(a,b){this._.handlers[a]=b}},a.event.implementOn(k),function(){function c(){var a,b=this._.commands,c=this.mode;if(c)for(var d in b)a=b[d],a[a.startDisabled?"disable":this.readOnly&&!a.readOnly?"disable":a.modes[c]?"enable":"disable"]()}var d=0,f=function(){var b="editor"+ ++d;return a.instances&&a.instances[b]?f():b},g={},l=function(b){var c=b.config.customConfig;if(!c)return!1;c=a.getUrl(c);var d=g[c]||(g[c]={});return d.fn?(d.fn.call(b,b.config),a.getUrl(b.config.customConfig)!=c&&l(b)||b.fireOnce("customConfigLoaded")):a.scriptLoader.load(c,function(){a.editorConfig?d.fn=a.editorConfig:d.fn=function(){},l(b)}),!0},m=function(a,b){a.on("customConfigLoaded",function(){if(b){if(b.on)for(var c in b.on)a.on(c,b.on[c]);e.extend(a.config,b,!0),delete a.config.on}n(a)}),b&&void 0!=b.customConfig&&(a.config.customConfig=b.customConfig),l(a)||a.fireOnce("customConfigLoaded")},n=function(b){var c=b.config.skin.split(","),d=c[0],e=a.getUrl(c[1]||"skins/"+d+"/");b.skinName=d,b.skinPath=e,b.skinClass="cke_skin_"+d,b.tabIndex=b.config.tabIndex||b.element.getAttribute("tabindex")||0,b.readOnly=!(!b.config.readOnly&&!b.element.getAttribute("disabled")),b.fireOnce("configLoaded"),q(b)},o=function(c){a.lang.load(c.config.language,c.config.defaultLanguage,function(a,d){c.langCode=a,c.lang=e.prototypedCopy(d),b.gecko&&b.version<10900&&"rtl"==c.lang.dir&&(c.lang.dir="ltr"),c.fire("langLoaded");var f=c.config;"ui"==f.contentsLangDirection&&(f.contentsLangDirection=c.lang.dir),p(c)})},p=function(c){var d=c.config,f=d.plugins,g=d.extraPlugins,h=d.removePlugins;if(g){var i=new RegExp("(?:^|,)(?:"+g.replace(/\s*,\s*/g,"|")+")(?=,|$)","g");f=f.replace(i,""),f+=","+g}h&&(i=new RegExp("(?:^|,)(?:"+h.replace(/\s*,\s*/g,"|")+")(?=,|$)","g"),f=f.replace(i,"")),b.air&&(f+=",adobeair"),j.load(f.split(","),function(b){var d=[],f=[],g=[];c.plugins=b;for(var h in b){var i=b[h],k=i.lang,l=j.getPath(h),m=null;i.path=l,k&&(m=e.indexOf(k,c.langCode)>=0?c.langCode:k[0],i.langEntries&&i.langEntries[m]?(e.extend(c.lang,i.langEntries[m]),m=null):g.push(a.getUrl(l+"lang/"+m+".js"))),f.push(m),d.push(i)}a.scriptLoader.load(g,function(){for(var a=["beforeInit","init","afterInit"],b=0;b<a.length;b++)for(var g=0;g<d.length;g++){var h=d[g];0===b&&f[g]&&h.lang&&e.extend(c.lang,h.langEntries[f[g]]),h[a[b]]&&h[a[b]](c)}c.fire("pluginsLoaded"),r(c)})})},q=function(b){a.skins.load(b,"editor",function(){o(b)})},r=function(b){var c=b.config.theme;a.themes.load(c,function(){var d=b.theme=a.themes.get(c);d.path=a.themes.getPath(c),d.build(b),b.config.autoUpdateElement&&s(b)})},s=function(a){function b(){a.updateElement()}var c=a.element;if(1==a.elementMode&&c.is("textarea")){var d=c.$.form&&new h(c.$.form);d&&(d.on("submit",b),d.$.submit.nodeName||d.$.submit.length||(d.$.submit=e.override(d.$.submit,function(b){return function(){a.updateElement(),b.apply?b.apply(this,arguments):b()}})),a.on("destroy",function(){d.removeListener("submit",b)}))}};a.editor.prototype._init=function(){var b=this,d=h.get(b._.element),g=b._.instanceConfig;if(delete b._.element,delete b._.instanceConfig,b._.commands={},b._.styles=[],b.element=d,b.name=d&&1==b.elementMode&&(d.getId()||d.getNameAtt())||f(),b.name in a.instances)throw'[CKEDITOR.editor] The instance "'+b.name+'" already exists.';b.id=e.getNextId(),b.config=e.prototypedCopy(i),b.ui=new k(b),b.focusManager=new a.focusManager(b),a.fire("instanceCreated",null,b),b.on("mode",c,null,null,1),b.on("readOnly",c,null,null,1),m(b,g)}}(),e.extend(a.editor.prototype,{addCommand:function(b,c){return this._.commands[b]=new a.command(this,c)},addCss:function(a){this._.styles.push(a)},destroy:function(b){var c=this;b||c.updateElement(),c.fire("destroy"),c.theme&&c.theme.destroy(c),a.remove(c),a.fire("instanceDestroyed",null,c)},execCommand:function(a,b){var c=this.getCommand(a),d={name:a,commandData:b,command:c};return c&&0!=c.state&&this.fire("beforeCommandExec",d)!==!0&&(d.returnValue=c.exec(d.commandData),!c.async&&this.fire("afterCommandExec",d)!==!0)?d.returnValue:!1},getCommand:function(a){return this._.commands[a]},getData:function(){var a=this;a.fire("beforeGetData");var b=a._.data;if("string"!=typeof b){var c=a.element;b=c&&1==a.elementMode?c.is("textarea")?c.getValue():c.getHtml():""}return b={dataValue:b},a.fire("getData",b),b.dataValue},getSnapshot:function(){var a=this.fire("getSnapshot");if("string"!=typeof a){var b=this.element;b&&1==this.elementMode&&(a=b.is("textarea")?b.getValue():b.getHtml())}return a},loadSnapshot:function(a){this.fire("loadSnapshot",a)},setData:function(a,b,c){b&&this.on("dataReady",function(a){a.removeListener(),b.call(a.editor)});var d={dataValue:a};!c&&this.fire("setData",d),this._.data=d.dataValue,!c&&this.fire("afterSetData",d)},setReadOnly:function(a){a=void 0==a||a,this.readOnly!=a&&(this.readOnly=a,this.fire("readOnly"))},insertHtml:function(a){this.fire("insertHtml",a)},insertText:function(a){this.fire("insertText",a)},insertElement:function(a){this.fire("insertElement",a)},checkDirty:function(){return this.mayBeDirty&&this._.previousValue!==this.getSnapshot()},resetDirty:function(){this.mayBeDirty&&(this._.previousValue=this.getSnapshot())},updateElement:function(){var a=this,b=a.element;if(b&&1==a.elementMode){var c=a.getData();a.config.htmlEncodeOutput&&(c=e.htmlEncode(c)),b.is("textarea")?b.setValue(c):b.setHtml(c)}}}),a.on("loaded",function(){var b=a.editor._pending;if(b){delete a.editor._pending;for(var c=0;c<b.length;c++)b[c]._init()}}),a.htmlParser=function(){this._={htmlPartsRegex:new RegExp("<(?:(?:\\/([^>]+)>)|(?:!--([\\S|\\s]*?)-->)|(?:([^\\s>]+)\\s*((?:(?:\"[^\"]*\")|(?:'[^']*')|[^\"'>])*)\\/?>))","g")}},function(){var b=/([\w\-:.]+)(?:(?:\s*=\s*(?:(?:"([^"]*)")|(?:'([^']*)')|([^\s>]+)))|(?=\s|$))/g,c={checked:1,compact:1,declare:1,defer:1,disabled:1,ismap:1,multiple:1,nohref:1,noresize:1,noshade:1,nowrap:1,readonly:1,selected:1};a.htmlParser.prototype={onTagOpen:function(){},onTagClose:function(){},onText:function(){},onCDATA:function(){},onComment:function(){},parse:function(a){for(var d,e,g,h=this,i=0;d=h._.htmlPartsRegex.exec(a);){var j=d.index;if(j>i){var k=a.substring(i,j);g?g.push(k):h.onText(k)}if(i=h._.htmlPartsRegex.lastIndex,!(e=d[1])||(e=e.toLowerCase(),g&&f.$cdata[e]&&(h.onCDATA(g.join("")),g=null),g))if(g)g.push(d[0]);else if(e=d[3]){if(e=e.toLowerCase(),/="/.test(e))continue;var l,m={},n=d[4],o=!(!n||"/"!=n.charAt(n.length-1));if(n)for(;l=b.exec(n);){var p=l[1].toLowerCase(),q=l[2]||l[3]||l[4]||"";!q&&c[p]?m[p]=p:m[p]=q}h.onTagOpen(e,m,o),!g&&f.$cdata[e]&&(g=[])}else(e=d[2])&&h.onComment(e);else h.onTagClose(e)}a.length>i&&h.onText(a.substring(i,a.length))}}}(),a.htmlParser.comment=function(a){this.value=a,this._={isBlockLike:!1}},a.htmlParser.comment.prototype={type:8,writeHtml:function(a,b){var c=this.value;if(b){if(!(c=b.onComment(c,this)))return;if("string"!=typeof c)return c.parent=this.parent,void c.writeHtml(a,b)}a.comment(c)}},function(){a.htmlParser.text=function(a){this.value=a,this._={isBlockLike:!1}},a.htmlParser.text.prototype={type:3,writeHtml:function(a,b){var c=this.value;(!b||(c=b.onText(c,this)))&&a.text(c)}}}(),function(){a.htmlParser.cdata=function(a){this.value=a},a.htmlParser.cdata.prototype={type:3,writeHtml:function(a){a.write(this.value)}}}(),a.htmlParser.fragment=function(){this.children=[],this.parent=null,this._={isBlockLike:!0,hasInlineStarted:!1}},function(){function d(a){return"a"==a.name&&a.attributes.href||f.$removeEmpty[a.name]}var g=e.extend({table:1,ul:1,ol:1,dl:1},f.table,f.ul,f.ol,f.dl),h=c&&b.version<8?{dd:1,dt:1}:{},i={ol:1,ul:1},j=e.extend({},{html:1},f.html,f.body,f.head,{style:1,script:1});a.htmlParser.fragment.fromHtml=function(b,k,l){function m(a){var b;if(r.length>0)for(var c=0;c<r.length;c++){var d=r[c],e=d.name,g=f[e],h=t.name&&f[t.name];h&&!h[e]||a&&g&&!g[a]&&f[a]?e==t.name&&(o(t,t.parent,1),c--):(b||(n(),b=1),d=d.clone(),d.parent=t,t=d,r.splice(c,1),c--)}}function n(){for(;s.length;)o(s.shift(),t)}function o(a,b,c){if(void 0===a.previous){b=b||t||q;var d=t;if(k&&(!b.type||"body"==b.name)){var g,h;g=a.attributes&&(h=a.attributes["data-cke-real-element-type"])?h:a.name,g&&!(g in f.$body||"body"==g||a.isOrphan)&&(t=b,p.onTagOpen(k,{}),a.returnPoint=b=t)}if(a._.isBlockLike&&"pre"!=a.name&&"textarea"!=a.name){var i,j=a.children.length,l=a.children[j-1];l&&3==l.type&&((i=e.rtrim(l.value))?l.value=i:a.children.length=j-1)}b.add(a),"pre"==a.name&&(v=!1),"textarea"==a.name&&(u=!1),a.returnPoint?(t=a.returnPoint,delete a.returnPoint):t=c?b:d}}var p=new a.htmlParser,q=l||new a.htmlParser.fragment,r=[],s=[],t=q,u=!1,v=!1;p.onTagOpen=function(b,c,e,k){var l=new a.htmlParser.element(b,c);if(l.isUnknown&&e&&(l.isEmpty=!0),l.isOptionalClose=b in h||k,d(l))return void r.push(l);if("pre"==b)v=!0;else{if("br"==b&&v)return void t.add(new a.htmlParser.text("\n"));"textarea"==b&&(u=!0)}if("br"==b)return void s.push(l);for(;;){var q=t.name,w=q?f[q]||(t._.isBlockLike?f.div:f.span):j;if(l.isUnknown||t.isUnknown||w[b])break;if(t.isOptionalClose)p.onTagClose(q);else if(b in i&&q in i){var x=t.children,y=x[x.length-1];y&&"li"==y.name||o(y=new a.htmlParser.element("li"),t),!l.returnPoint&&(l.returnPoint=t),t=y}else if(b in f.$listItem&&q!=b)p.onTagOpen("li"==b?"ul":"dl",{},0,1);else if(q in g&&q!=b)!l.returnPoint&&(l.returnPoint=t),t=t.parent;else{if(q in f.$inline&&r.unshift(t),!t.parent){l.isOrphan=1;break}o(t,t.parent,1)}}m(b),n(),l.parent=t,l.isEmpty?o(l):t=l},p.onTagClose=function(a){for(var b=r.length-1;b>=0;b--)if(a==r[b].name)return void r.splice(b,1);for(var c=[],d=[],e=t;e!=q&&e.name!=a;)e._.isBlockLike||d.unshift(e),c.push(e),e=e.returnPoint||e.parent;if(e!=q){for(b=0;b<c.length;b++){var f=c[b];o(f,f.parent)}t=e,e._.isBlockLike&&n(),o(e,e.parent),e==t&&(t=t.parent),r=r.concat(d)}"body"==a&&(k=!1)},p.onText=function(b){if(t._.hasInlineStarted&&!s.length||v||u||(b=e.ltrim(b),0!==b.length)){var c=t.name,d=c?f[c]||(t._.isBlockLike?f.div:f.span):j;if(!u&&!d["#"]&&c in g)return p.onTagOpen(c in i?"li":"dl"==c?"dd":"table"==c?"tr":"tr"==c?"td":""),void p.onText(b);n(),m(),!k||t.type&&"body"!=t.name||!e.trim(b)||this.onTagOpen(k,{},0,1),v||u||(b=b.replace(/[\t\r\n ]{2,}|[\t\r\n]/g," ")),t.add(new a.htmlParser.text(b))}},p.onCDATA=function(b){t.add(new a.htmlParser.cdata(b))},p.onComment=function(b){n(),m(),t.add(new a.htmlParser.comment(b))},p.parse(b),n(!c&&1);for(;t!=q;)o(t,t.parent,1);return q},a.htmlParser.fragment.prototype={add:function(a,b){var c=this;isNaN(b)&&(b=c.children.length);var d=b>0?c.children[b-1]:null;if(d){if(a._.isBlockLike&&3==d.type&&(d.value=e.rtrim(d.value),0===d.value.length))return c.children.pop(),void c.add(a);d.next=a}a.previous=d,a.parent=c,c.children.splice(b,0,a),c._.hasInlineStarted=3==a.type||1==a.type&&!a._.isBlockLike},writeHtml:function(b,c){var d;this.filterChildren=function(){var b=new a.htmlParser.basicWriter;this.writeChildrenHtml.call(this,b,c,!0);var e=b.getHtml();this.children=new a.htmlParser.fragment.fromHtml(e).children,d=1},!this.name&&c&&c.onFragment(this),this.writeChildrenHtml(b,d?null:c)},writeChildrenHtml:function(a,b){for(var c=0;c<this.children.length;c++)this.children[c].writeHtml(a,b)}}}(),a.htmlParser.element=function(a,b){var c=this;c.name=a,c.attributes=b||{},c.children=[];var d=a||"",e=d.match(/^cke:(.*)/);e&&(d=e[1]);var g=!!(f.$nonBodyContent[d]||f.$block[d]||f.$listItem[d]||f.$tableContent[d]||f.$nonEditable[d]||"br"==d);c.isEmpty=!!f.$empty[a],c.isUnknown=!f[a],c._={isBlockLike:g,hasInlineStarted:c.isEmpty||!g}},a.htmlParser.cssStyle=function(){var b,c=arguments[0],d={};return b=c instanceof a.htmlParser.element?c.attributes.style:c,(b||"").replace(/&quot;/g,'"').replace(/\s*([^ :;]+)\s*:\s*([^;]+)\s*(?=;|$)/g,function(a,b,c){"font-family"==b&&(c=c.replace(/["']/g,"")),d[b.toLowerCase()]=c}),{rules:d,populate:function(b){var c=this.toString();c&&(b instanceof h?b.setAttribute("style",c):b instanceof a.htmlParser.element?b.attributes.style=c:b.style=c)},toString:function(){var a=[];for(var b in d)d[b]&&a.push(b,":",d[b],";");return a.join("")}}},function(){var b=function(a,b){return a=a[0],b=b[0],b>a?-1:a>b?1:0};a.htmlParser.element.prototype={type:1,add:a.htmlParser.fragment.prototype.add,clone:function(){return new a.htmlParser.element(this.name,this.attributes)},writeHtml:function(c,d){var e,f,g,h,i=this.attributes,j=this,k=j.name;if(j.filterChildren=function(){if(!h){var b=new a.htmlParser.basicWriter;a.htmlParser.fragment.prototype.writeChildrenHtml.call(j,b,d),j.children=new a.htmlParser.fragment.fromHtml(b.getHtml(),0,j.clone()).children,h=1}},d){for(;;){if(!(k=d.onElementName(k)))return;if(j.name=k,!(j=d.onElement(j)))return;if(j.parent=this.parent,j.name==k)break;if(1!=j.type)return void j.writeHtml(c,d);if(k=j.name,!k){for(var l=0,m=this.children.length;m>l;l++)this.children[l].parent=j.parent;return void this.writeChildrenHtml.call(j,c,h?null:d)}}i=j.attributes}c.openTag(k,i);for(var n=[],o=0;2>o;o++)for(e in i)if(f=e,g=i[e],1==o)n.push([e,g]);else if(d){for(;;){if(f=d.onAttributeName(e)){if(f!=e){delete i[e],e=f;continue}break}delete i[e];break}f&&((g=d.onAttribute(j,f,g))===!1?delete i[f]:i[f]=g)}c.sortAttributes&&n.sort(b);var p=n.length;for(o=0;p>o;o++){var q=n[o];c.attribute(q[0],q[1])}c.openTagClose(k,j.isEmpty),j.isEmpty||(this.writeChildrenHtml.call(j,c,h?null:d),c.closeTag(k))},writeChildrenHtml:function(b,c){a.htmlParser.fragment.prototype.writeChildrenHtml.apply(this,arguments)}}}(),function(){function b(a,b){for(var c=0;a&&c<b.length;c++){var d=b[c];a=a.replace(d[0],d[1])}return a}function c(a,b,c){"function"==typeof b&&(b=[b]);var d,e,f=a.length,g=b&&b.length;if(g){for(d=0;f>d&&a[d].pri<c;d++);for(e=g-1;e>=0;e--){var h=b[e];h&&(h.pri=c,a.splice(d,0,h))}}}function d(a,b,c){if(b)for(var d in b){var e=a[d];a[d]=f(e,b[d],c),e||a.$length++}}function f(a,b,d){return b?(b.pri=d,a?(a.splice?c(a,b,d):(a=a.pri>d?[b,a]:[a,b],a.filter=g),a):(b.filter=b,b)):void 0}function g(b){for(var c=b.type||b instanceof a.htmlParser.fragment,d=0;d<this.length;d++){if(c)var e=b.type,f=b.name;var g=this[d],h=g.apply(window,arguments);if(h===!1)return h;if(c){if(h&&(h.name!=f||h.type!=e))return h}else if("string"!=typeof h)return h;void 0!=h&&(b=h)}return b}a.htmlParser.filter=e.createClass({$:function(a){this._={elementNames:[],attributeNames:[],elements:{$length:0},attributes:{$length:0}},a&&this.addRules(a,10)},proto:{addRules:function(a,b){var e=this;"number"!=typeof b&&(b=10),c(e._.elementNames,a.elementNames,b),c(e._.attributeNames,a.attributeNames,b),d(e._.elements,a.elements,b),d(e._.attributes,a.attributes,b),e._.text=f(e._.text,a.text,b)||e._.text,e._.comment=f(e._.comment,a.comment,b)||e._.comment,e._.root=f(e._.root,a.root,b)||e._.root},onElementName:function(a){return b(a,this._.elementNames)},onAttributeName:function(a){return b(a,this._.attributeNames)},onText:function(a){var b=this._.text;return b?b.filter(a):a},onComment:function(a,b){var c=this._.comment;return c?c.filter(a,b):a},onFragment:function(a){var b=this._.root;return b?b.filter(a):a},onElement:function(a){for(var b,c,d=this,e=[d._.elements["^"],d._.elements[a.name],d._.elements.$],f=0;3>f;f++)if(b=e[f]){if(c=b.filter(a,d),c===!1)return null;if(c&&c!=a)return d.onNode(c);if(a.parent&&!a.name)break}return a},onNode:function(b){var c=b.type;return 1==c?this.onElement(b):3==c?new a.htmlParser.text(this.onText(b.value)):8==c?new a.htmlParser.comment(this.onComment(b.value)):null;

},onAttribute:function(a,b,c){var d=this._.attributes[b];if(d){var e=d.filter(c,a,this);if(e===!1)return!1;if("undefined"!=typeof e)return e}return c}}})}(),a.htmlParser.basicWriter=e.createClass({$:function(){this._={output:[]}},proto:{openTag:function(a,b){this._.output.push("<",a)},openTagClose:function(a,b){this._.output.push(b?" />":">")},attribute:function(a,b){"string"==typeof b&&(b=e.htmlEncodeAttr(b)),this._.output.push(" ",a,'="',b,'"')},closeTag:function(a){this._.output.push("</",a,">")},text:function(a){this._.output.push(a)},comment:function(a){this._.output.push("<!--",a,"-->")},write:function(a){this._.output.push(a)},reset:function(){this._.output=[],this._.indent=!1},getHtml:function(a){var b=this._.output.join("");return a&&this.reset(),b}}}),delete a.loadFullCore,a.instances={},a.document=new g(document),a.add=function(b){a.instances[b.name]=b,b.on("focus",function(){a.currentInstance!=b&&(a.currentInstance=b,a.fire("currentInstance"))}),b.on("blur",function(){a.currentInstance==b&&(a.currentInstance=null,a.fire("currentInstance"))})},a.remove=function(b){delete a.instances[b.name]},a.on("instanceDestroyed",function(){e.isEmpty(this.instances)&&a.fire("reset")}),a.TRISTATE_ON=1,a.TRISTATE_OFF=2,a.TRISTATE_DISABLED=0,d.comment=function(a,b){"string"==typeof a&&(a=(b?b.$:document).createComment(a)),d.domObject.call(this,a)},d.comment.prototype=new d.node,e.extend(d.comment.prototype,{type:8,getOuterHtml:function(){return"<!--"+this.$.nodeValue+"-->"}}),function(){var a={address:1,blockquote:1,dl:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,p:1,pre:1,li:1,dt:1,dd:1,legend:1,caption:1},b={body:1,div:1,table:1,tbody:1,tr:1,td:1,th:1,form:1,fieldset:1},c=function(a){for(var b=a.getChildren(),c=0,d=b.count();d>c;c++){var e=b.getItem(c);if(1==e.type&&f.$block[e.getName()])return!0}return!1};d.elementPath=function(d){for(var e=this,f=null,g=null,h=[],i=d;i;){if(1==i.type){e.lastElement||(e.lastElement=i);var j=i.getName();if(g||(!f&&a[j]&&(f=i),b[j]&&(f||"div"!=j||c(i)?g=i:f=i)),h.push(i),"body"==j)break}i=i.getParent()}e.block=f,e.blockLimit=g,e.elements=h}}(),d.elementPath.prototype={compare:function(a){var b=this.elements,c=a&&a.elements;if(!c||b.length!=c.length)return!1;for(var d=0;d<b.length;d++)if(!b[d].equals(c[d]))return!1;return!0},contains:function(a){for(var b=this.elements,c=0;c<b.length;c++)if(b[c].getName()in a)return b[c];return null}},d.text=function(a,b){"string"==typeof a&&(a=(b?b.$:document).createTextNode(a)),this.$=a},d.text.prototype=new d.node,e.extend(d.text.prototype,{type:3,getLength:function(){return this.$.nodeValue.length},getText:function(){return this.$.nodeValue},setText:function(a){this.$.nodeValue=a},split:function(a){var e=this;if(c&&a==e.getLength()){var f=e.getDocument().createText("");return f.insertAfter(e),f}var g=e.getDocument(),h=new d.text(e.$.splitText(a),g);if(b.ie8){var i=new d.text("",g);i.insertAfter(h),i.remove()}return h},substring:function(a,b){return"number"!=typeof b?this.$.nodeValue.substr(a):this.$.nodeValue.substring(a,b)}}),d.documentFragment=function(b){b=b||a.document,this.$=b.$.createDocumentFragment()},e.extend(d.documentFragment.prototype,h.prototype,{type:11,insertAfterNode:function(a){a=a.$,a.parentNode.insertBefore(this.$,a.nextSibling)}},!0,{append:1,appendBogus:1,getFirst:1,getLast:1,appendTo:1,moveChildren:1,insertBefore:1,insertAfterNode:1,replace:1,trim:1,type:1,ltrim:1,rtrim:1,getDocument:1,getChildCount:1,getChild:1,getChildren:1}),function(){function a(a,b){var c=this.range;if(this._.end)return null;if(!this._.start){if(this._.start=1,c.collapsed)return this.end(),null;c.optimize()}var d,e,f=c.startContainer,g=c.endContainer,h=c.startOffset,i=c.endOffset,j=this.guard,k=this.type,l=a?"getPreviousSourceNode":"getNextSourceNode";if(!a&&!this._.guardLTR){var m=1==g.type?g:g.getParent(),n=1==g.type?g.getChild(i):g.getNext();this._.guardLTR=function(a,b){return!(b&&m.equals(a)||n&&a.equals(n)||1==a.type&&b&&"body"==a.getName())}}if(a&&!this._.guardRTL){var o=1==f.type?f:f.getParent(),p=1==f.type?h?f.getChild(h-1):null:f.getPrevious();this._.guardRTL=function(a,b){return!(b&&o.equals(a)||p&&a.equals(p)||1==a.type&&b&&"body"==a.getName())}}var q=a?this._.guardRTL:this._.guardLTR;for(e=j?function(a,b){return q(a,b)===!1?!1:j(a,b)}:q,this.current?d=this.current[l](!1,k,e):(a?(d=g,1==d.type&&(d=i>0?d.getChild(i-1):e(d,!0)===!1?null:d.getPreviousSourceNode(!0,k,e))):(d=f,1==d.type&&((d=d.getChild(h))||(d=e(f,!0)===!1?null:f.getNextSourceNode(!0,k,e)))),d&&e(d)===!1&&(d=null));d&&!this._.end;){if(this.current=d,this.evaluator&&this.evaluator(d)===!1){if(b&&this.evaluator)return!1}else if(!b)return d;d=d[l](!1,k,e)}return this.end(),this.current=null}function g(b){for(var c,d=null;c=a.call(this,b);)d=c;return d}d.walker=e.createClass({$:function(a){this.range=a,this._={}},proto:{end:function(){this._.end=1},next:function(){return a.call(this)},previous:function(){return a.call(this,1)},checkForward:function(){return a.call(this,0,1)!==!1},checkBackward:function(){return a.call(this,1,1)!==!1},lastForward:function(){return g.call(this)},lastBackward:function(){return g.call(this,1)},reset:function(){delete this.current,this._={}}}});var i={block:1,"list-item":1,table:1,"table-row-group":1,"table-header-group":1,"table-footer-group":1,"table-row":1,"table-column-group":1,"table-column":1,"table-cell":1,"table-caption":1};h.prototype.isBlockBoundary=function(a){var b=a?e.extend({},f.$block,a||{}):f.$block;return"none"==this.getComputedStyle("float")&&i[this.getComputedStyle("display")]||b[this.getName()]},d.walker.blockBoundary=function(a){return function(b,c){return!(1==b.type&&b.isBlockBoundary(a))}},d.walker.listItemBoundary=function(){return this.blockBoundary({br:1})},d.walker.bookmark=function(a,b){function c(a){return a&&a.getName&&"span"==a.getName()&&a.data("cke-bookmark")}return function(d){var e,f;return e=d&&!d.getName&&(f=d.getParent())&&c(f),e=a?e:e||c(d),!!(b^e)}},d.walker.whitespaces=function(a){return function(c){var d;return c&&3==c.type&&(d=!e.trim(c.getText())||b.webkit&&"​"==c.getText()),!!(a^d)}},d.walker.invisible=function(a){var b=d.walker.whitespaces();return function(c){var d;return b(c)?d=1:(3==c.type&&(c=c.getParent()),d=!c.$.offsetHeight),!!(a^d)}},d.walker.nodeType=function(a,b){return function(c){return!!(b^c.type==a)}},d.walker.bogus=function(a){function b(a){return!k(a)&&!l(a)}return function(d){var e=c?d.getText&&j.test(d.getText()):d.is&&d.is("br");if(e){var f=d.getParent(),g=d.getNext(b);e=f.isBlockBoundary()&&(!g||1==g.type&&g.isBlockBoundary())}return!!(a^e)}};var j=/^[\t\r\n ]*(?:&nbsp;|\xa0)$/,k=d.walker.whitespaces(),l=d.walker.bookmark(),m=function(a){return l(a)||k(a)||1==a.type&&a.getName()in f.$inline&&!(a.getName()in f.$empty)};h.prototype.getBogus=function(){var a=this;do a=a.getPreviousSourceNode();while(m(a));return a&&(c?a.getText&&j.test(a.getText()):a.is&&a.is("br"))?a:!1}}(),d.range=function(a){var b=this;b.startContainer=null,b.startOffset=null,b.endContainer=null,b.endOffset=null,b.collapsed=!0,b.document=a},function(){function a(){var a=!1,b=d.walker.whitespaces(),c=d.walker.bookmark(!0),f=d.walker.bogus();return function(d){return c(d)||b(d)?!0:f(d)&&!a?(a=!0,!0):3==d.type&&(d.hasAscendant("pre")||e.trim(d.getText()).length)?!1:1!=d.type||k[d.getName()]?!0:!1}}function b(a){var b=d.walker.whitespaces(),c=d.walker.bookmark(1);return function(d){return c(d)||b(d)?!0:!a&&l(d)||1==d.type&&d.getName()in f.$removeEmpty}}function g(a){return!m(a)&&!n(a)}var i=function(a){a.collapsed=a.startContainer&&a.endContainer&&a.startContainer.equals(a.endContainer)&&a.startOffset==a.endOffset},j=function(a,b,c,d){a.optimizeBookmark();var e,f,g=a.startContainer,i=a.endContainer,j=a.startOffset,k=a.endOffset;3==i.type?i=i.split(k):i.getChildCount()>0&&(k>=i.getChildCount()?(i=i.append(a.document.createText("")),f=!0):i=i.getChild(k)),3==g.type?(g.split(j),g.equals(i)&&(i=g.getNext())):j?j>=g.getChildCount()?(g=g.append(a.document.createText("")),e=!0):g=g.getChild(j).getPrevious():(g=g.getFirst().insertBeforeMe(a.document.createText("")),e=!0);var l,m,n,o=g.getParents(),p=i.getParents();for(l=0;l<o.length&&(m=o[l],n=p[l],m.equals(n));l++);for(var q,r,s,t,u=c,v=l;v<o.length;v++){for(q=o[v],u&&!q.equals(g)&&(r=u.append(q.clone())),s=q.getNext();s&&!s.equals(p[v])&&!s.equals(i);)t=s.getNext(),2==b?u.append(s.clone(!0)):(s.remove(),1==b&&u.append(s)),s=t;u&&(u=r)}u=c;for(var w=l;w<p.length;w++){if(q=p[w],b>0&&!q.equals(i)&&(r=u.append(q.clone())),!o[w]||q.$.parentNode!=o[w].$.parentNode)for(s=q.getPrevious();s&&!s.equals(o[w])&&!s.equals(g);)t=s.getPrevious(),2==b?u.$.insertBefore(s.$.cloneNode(!0),u.$.firstChild):(s.remove(),1==b&&u.$.insertBefore(s.$,u.$.firstChild)),s=t;u&&(u=r)}if(2==b){var x=a.startContainer;3==x.type&&(x.$.data+=x.$.nextSibling.data,x.$.parentNode.removeChild(x.$.nextSibling));var y=a.endContainer;3==y.type&&y.$.nextSibling&&(y.$.data+=y.$.nextSibling.data,y.$.parentNode.removeChild(y.$.nextSibling))}else{if(m&&n&&(g.$.parentNode!=m.$.parentNode||i.$.parentNode!=n.$.parentNode)){var z=n.getIndex();if(e&&n.$.parentNode==g.$.parentNode&&z--,d&&1==m.type){var A=h.createFromHtml('<span data-cke-bookmark="1" style="display:none">&nbsp;</span>',a.document);A.insertAfter(m),m.mergeSiblings(!1),a.moveToBookmark({startNode:A})}else a.setStart(n.getParent(),z)}a.collapse(!0)}e&&g.remove(),f&&i.$.parentNode&&i.remove()},k={abbr:1,acronym:1,b:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,q:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,tt:1,u:1,"var":1},l=d.walker.bogus(),m=new d.walker.whitespaces,n=new d.walker.bookmark,o=/^[\t\r\n ]*(?:&nbsp;|\xa0)$/;d.range.prototype={clone:function(){var a=this,b=new d.range(a.document);return b.startContainer=a.startContainer,b.startOffset=a.startOffset,b.endContainer=a.endContainer,b.endOffset=a.endOffset,b.collapsed=a.collapsed,b},collapse:function(a){var b=this;a?(b.endContainer=b.startContainer,b.endOffset=b.startOffset):(b.startContainer=b.endContainer,b.startOffset=b.endOffset),b.collapsed=!0},cloneContents:function(){var a=new d.documentFragment(this.document);return this.collapsed||j(this,2,a),a},deleteContents:function(a){this.collapsed||j(this,0,null,a)},extractContents:function(a){var b=new d.documentFragment(this.document);return this.collapsed||j(this,1,b,a),b},createBookmark:function(a){var b,c,d,f,g=this,h=g.collapsed;return b=g.document.createElement("span"),b.data("cke-bookmark",1),b.setStyle("display","none"),b.setHtml("&nbsp;"),a&&(d="cke_bm_"+e.getNextNumber(),b.setAttribute("id",d+(h?"C":"S"))),h||(c=b.clone(),c.setHtml("&nbsp;"),a&&c.setAttribute("id",d+"E"),f=g.clone(),f.collapse(),f.insertNode(c)),f=g.clone(),f.collapse(!0),f.insertNode(b),c?(g.setStartAfter(b),g.setEndBefore(c)):g.moveToPosition(b,4),{startNode:a?d+(h?"C":"S"):b,endNode:a?d+"E":c,serializable:a,collapsed:h}},createBookmark2:function(a){var b,c,d=this,e=d.startContainer,f=d.endContainer,g=d.startOffset,h=d.endOffset,i=d.collapsed;if(!e||!f)return{start:0,end:0};if(a){for(1==e.type&&(b=e.getChild(g),b&&3==b.type&&g>0&&3==b.getPrevious().type&&(e=b,g=0),b&&1==b.type&&(g=b.getIndex(1)));3==e.type&&(c=e.getPrevious())&&3==c.type;)e=c,g+=c.getLength();if(!i)for(1==f.type&&(b=f.getChild(h),b&&3==b.type&&h>0&&3==b.getPrevious().type&&(f=b,h=0),b&&1==b.type&&(h=b.getIndex(1)));3==f.type&&(c=f.getPrevious())&&3==c.type;)f=c,h+=c.getLength()}return{start:e.getAddress(a),end:i?null:f.getAddress(a),startOffset:g,endOffset:h,normalized:a,collapsed:i,is2:!0}},moveToBookmark:function(a){var b=this;if(a.is2){var c=b.document.getByAddress(a.start,a.normalized),d=a.startOffset,e=a.end&&b.document.getByAddress(a.end,a.normalized),f=a.endOffset;b.setStart(c,d),e?b.setEnd(e,f):b.collapse(!0)}else{var g=a.serializable,h=g?b.document.getById(a.startNode):a.startNode,i=g?b.document.getById(a.endNode):a.endNode;b.setStartBefore(h),h.remove(),i?(b.setEndBefore(i),i.remove()):b.collapse(!0)}},getBoundaryNodes:function(){var a,b=this,c=b.startContainer,e=b.endContainer,f=b.startOffset,g=b.endOffset;if(1==c.type)if(a=c.getChildCount(),a>f)c=c.getChild(f);else if(1>a)c=c.getPreviousSourceNode();else{for(c=c.$;c.lastChild;)c=c.lastChild;c=new d.node(c),c=c.getNextSourceNode()||c}if(1==e.type)if(a=e.getChildCount(),a>g)e=e.getChild(g).getPreviousSourceNode(!0);else if(1>a)e=e.getPreviousSourceNode();else{for(e=e.$;e.lastChild;)e=e.lastChild;e=new d.node(e)}return 2&c.getPosition(e)&&(c=e),{startNode:c,endNode:e}},getCommonAncestor:function(a,b){var c,d=this,e=d.startContainer,f=d.endContainer;return c=e.equals(f)?a&&1==e.type&&d.startOffset==d.endOffset-1?e.getChild(d.startOffset):e:e.getCommonAncestor(f),b&&!c.is?c.getParent():c},optimize:function(){var a=this,b=a.startContainer,c=a.startOffset;1!=b.type&&(c?c>=b.getLength()&&a.setStartAfter(b):a.setStartBefore(b)),b=a.endContainer,c=a.endOffset,1!=b.type&&(c?c>=b.getLength()&&a.setEndAfter(b):a.setEndBefore(b))},optimizeBookmark:function(){var a=this,b=a.startContainer,c=a.endContainer;b.is&&b.is("span")&&b.data("cke-bookmark")&&a.setStartAt(b,3),c&&c.is&&c.is("span")&&c.data("cke-bookmark")&&a.setEndAt(c,4)},trim:function(a,b){var c=this,d=c.startContainer,e=c.startOffset,f=c.collapsed;if((!a||f)&&d&&3==d.type){if(e)if(e>=d.getLength())e=d.getIndex()+1,d=d.getParent();else{var g=d.split(e);e=d.getIndex()+1,d=d.getParent(),c.startContainer.equals(c.endContainer)?c.setEnd(g,c.endOffset-c.startOffset):d.equals(c.endContainer)&&(c.endOffset+=1)}else e=d.getIndex(),d=d.getParent();if(c.setStart(d,e),f)return void c.collapse(!0)}var h=c.endContainer,i=c.endOffset;b||f||!h||3!=h.type||(i?i>=h.getLength()?(i=h.getIndex()+1,h=h.getParent()):(h.split(i),i=h.getIndex()+1,h=h.getParent()):(i=h.getIndex(),h=h.getParent()),c.setEnd(h,i))},enlarge:function(a,b){switch(a){case 1:if(this.collapsed)return;var c,g,h,i,j,k,l,m=this.getCommonAncestor(),n=this.document.getBody(),o=!1,p=this.startContainer,q=this.startOffset;for(3==p.type?(q&&(p=!e.trim(p.substring(0,q)).length&&p,o=!!p),p&&((i=p.getPrevious())||(h=p.getParent()))):(q&&(i=p.getChild(q-1)||p.getLast()),i||(h=p));h||i;){if(h&&!i){if(!j&&h.equals(m)&&(j=!0),!n.contains(h))break;o&&"inline"==h.getComputedStyle("display")||(o=!1,j?c=h:this.setStartBefore(h)),i=h.getPrevious()}for(;i;)if(k=!1,8!=i.type){if(3==i.type)l=i.getText(),/[^\s\ufeff]/.test(l)&&(i=null),k=/[\s\ufeff]$/.test(l);else if((i.$.offsetWidth>0||b&&i.is("br"))&&!i.data("cke-bookmark"))if(o&&f.$removeEmpty[i.getName()]){if(l=i.getText(),/[^\s\ufeff]/.test(l))i=null;else for(var r,s=i.$.getElementsByTagName("*"),t=0;r=s[t++];)if(!f.$removeEmpty[r.nodeName.toLowerCase()]){i=null;break}i&&(k=!!l.length)}else i=null;if(k&&(o?j?c=h:h&&this.setStartBefore(h):o=!0),i){var u=i.getPrevious();if(!h&&!u){h=i,i=null;break}i=u}else h=null}else i=i.getPrevious();h&&(h=h.getParent())}for(p=this.endContainer,q=this.endOffset,h=i=null,j=o=!1,3==p.type?(p=!e.trim(p.substring(q)).length&&p,o=!(p&&p.getLength()),p&&((i=p.getNext())||(h=p.getParent()))):(i=p.getChild(q),i||(h=p));h||i;){if(h&&!i){if(!j&&h.equals(m)&&(j=!0),!n.contains(h))break;o&&"inline"==h.getComputedStyle("display")||(o=!1,j?g=h:h&&this.setEndAfter(h)),i=h.getNext()}for(;i;){if(k=!1,3==i.type)l=i.getText(),/[^\s\ufeff]/.test(l)&&(i=null),k=/^[\s\ufeff]/.test(l);else if(1==i.type){if((i.$.offsetWidth>0||b&&i.is("br"))&&!i.data("cke-bookmark"))if(o&&f.$removeEmpty[i.getName()]){if(l=i.getText(),/[^\s\ufeff]/.test(l))i=null;else for(s=i.$.getElementsByTagName("*"),t=0;r=s[t++];)if(!f.$removeEmpty[r.nodeName.toLowerCase()]){i=null;break}i&&(k=!!l.length)}else i=null}else k=1;if(k&&o&&(j?g=h:this.setEndAfter(h)),i){if(u=i.getNext(),!h&&!u){h=i,i=null;break}i=u}else h=null}h&&(h=h.getParent())}c&&g&&(m=c.contains(g)?g:c,this.setStartBefore(m),this.setEndAfter(m));break;case 2:case 3:var v=new d.range(this.document);n=this.document.getBody(),v.setStartAt(n,1),v.setEnd(this.startContainer,this.startOffset);var w,x,y=new d.walker(v),z=d.walker.blockBoundary(3==a?{br:1}:null),A=function(a){var b=z(a);return b||(w=a),b},B=function(a){var b=A(a);return!b&&a.is&&a.is("br")&&(x=a),b};if(y.guard=A,h=y.lastBackward(),w=w||n,this.setStartAt(w,!w.is("br")&&(!h&&this.checkStartOfBlock()||h&&w.contains(h))?1:4),3==a){var C=this.clone();y=new d.walker(C);var D=d.walker.whitespaces(),E=d.walker.bookmark();y.evaluator=function(a){return!D(a)&&!E(a)};var F=y.previous();if(F&&1==F.type&&F.is("br"))return}v=this.clone(),v.collapse(),v.setEndAt(n,2),y=new d.walker(v),y.guard=3==a?B:A,w=null,h=y.lastForward(),w=w||n,this.setEndAt(w,!h&&this.checkEndOfBlock()||h&&w.contains(h)?2:3),x&&this.setEndAfter(x)}},shrink:function(a,b){if(!this.collapsed){a=a||2;var c=this.clone(),e=this.startContainer,f=this.endContainer,g=this.startOffset,h=this.endOffset,i=(this.collapsed,1),j=1;e&&3==e.type&&(g?g>=e.getLength()?c.setStartAfter(e):(c.setStartBefore(e),i=0):c.setStartBefore(e)),f&&3==f.type&&(h?h>=f.getLength()?c.setEndAfter(f):(c.setEndAfter(f),j=0):c.setEndBefore(f));var k=new d.walker(c),l=d.walker.bookmark();k.evaluator=function(b){return b.type==(1==a?1:3)};var m;if(k.guard=function(b,c){return l(b)?!0:1==a&&3==b.type?!1:c&&b.equals(m)?!1:(c||1!=b.type||(m=b),!0)},i){var n=k[1==a?"lastForward":"next"]();n&&this.setStartAt(n,b?1:3)}if(j){k.reset();var o=k[1==a?"lastBackward":"previous"]();o&&this.setEndAt(o,b?2:4)}return!(!i&&!j)}},insertNode:function(a){var b=this;b.optimizeBookmark(),b.trim(!1,!0);var c=b.startContainer,d=b.startOffset,e=c.getChild(d);e?a.insertBefore(e):c.append(a),a.getParent().equals(b.endContainer)&&b.endOffset++,b.setStartBefore(a)},moveToPosition:function(a,b){this.setStartAt(a,b),this.collapse(!0)},selectNodeContents:function(a){this.setStart(a,0),this.setEnd(a,3==a.type?a.getLength():a.getChildCount())},setStart:function(a,b){var c=this;1==a.type&&f.$empty[a.getName()]&&(b=a.getIndex(),a=a.getParent()),c.startContainer=a,c.startOffset=b,c.endContainer||(c.endContainer=a,c.endOffset=b),i(c)},setEnd:function(a,b){var c=this;1==a.type&&f.$empty[a.getName()]&&(b=a.getIndex()+1,a=a.getParent()),c.endContainer=a,c.endOffset=b,c.startContainer||(c.startContainer=a,c.startOffset=b),i(c)},setStartAfter:function(a){this.setStart(a.getParent(),a.getIndex()+1)},setStartBefore:function(a){this.setStart(a.getParent(),a.getIndex())},setEndAfter:function(a){this.setEnd(a.getParent(),a.getIndex()+1)},setEndBefore:function(a){this.setEnd(a.getParent(),a.getIndex())},setStartAt:function(a,b){var c=this;switch(b){case 1:c.setStart(a,0);break;case 2:3==a.type?c.setStart(a,a.getLength()):c.setStart(a,a.getChildCount());break;case 3:c.setStartBefore(a);break;case 4:c.setStartAfter(a)}i(c)},setEndAt:function(a,b){var c=this;switch(b){case 1:c.setEnd(a,0);break;case 2:3==a.type?c.setEnd(a,a.getLength()):c.setEnd(a,a.getChildCount());break;case 3:c.setEndBefore(a);break;case 4:c.setEndAfter(a)}i(c)},fixBlock:function(a,b){var d=this,e=d.createBookmark(),f=d.document.createElement(b);return d.collapse(a),d.enlarge(2),d.extractContents().appendTo(f),f.trim(),c||f.appendBogus(),d.insertNode(f),d.moveToBookmark(e),f},splitBlock:function(a){var b=this,e=new d.elementPath(b.startContainer),f=new d.elementPath(b.endContainer),g=e.blockLimit,h=f.blockLimit,i=e.block,j=f.block,k=null;if(!g.equals(h))return null;"br"!=a&&(i||(i=b.fixBlock(!0,a),j=new d.elementPath(b.endContainer).block),j||(j=b.fixBlock(!1,a)));var l=i&&b.checkStartOfBlock(),m=j&&b.checkEndOfBlock();return b.deleteContents(),i&&i.equals(j)&&(m?(k=new d.elementPath(b.startContainer),b.moveToPosition(j,4),j=null):l?(k=new d.elementPath(b.startContainer),b.moveToPosition(i,3),i=null):(j=b.splitElement(i),c||i.is("ul","ol")||i.appendBogus())),{previousBlock:i,nextBlock:j,wasStartOfBlock:l,wasEndOfBlock:m,elementPath:k}},splitElement:function(a){var b=this;if(!b.collapsed)return null;b.setEndAt(a,2);var c=b.extractContents(),d=a.clone(!1);return c.appendTo(d),d.insertAfter(a),b.moveToPosition(a,4),d},checkBoundaryOfElement:function(a,c){var e=1==c,f=this.clone();f.collapse(e),f[e?"setStartAt":"setEndAt"](a,e?1:2);var g=new d.walker(f);return g.evaluator=b(e),g[e?"checkBackward":"checkForward"]()},checkStartOfBlock:function(){var b=this,f=b.startContainer,g=b.startOffset;if(c&&g&&3==f.type){var h=e.ltrim(f.substring(0,g));o.test(h)&&b.trim(0,1)}var i=new d.elementPath(b.startContainer),j=b.clone();j.collapse(!0),j.setStartAt(i.block||i.blockLimit,1);var k=new d.walker(j);return k.evaluator=a(),k.checkBackward()},checkEndOfBlock:function(){var b=this,f=b.endContainer,g=b.endOffset;if(c&&3==f.type){var h=e.rtrim(f.substring(g));o.test(h)&&b.trim(1,0)}var i=new d.elementPath(b.endContainer),j=b.clone();j.collapse(!1),j.setEndAt(i.block||i.blockLimit,2);var k=new d.walker(j);return k.evaluator=a(),k.checkForward()},getPreviousNode:function(a,b,c){var e=this.clone();e.collapse(1),e.setStartAt(c||this.document.getBody(),1);var f=new d.walker(e);return f.evaluator=a,f.guard=b,f.previous()},getNextNode:function(a,b,c){var e=this.clone();e.collapse(),e.setEndAt(c||this.document.getBody(),2);var f=new d.walker(e);return f.evaluator=a,f.guard=b,f.next()},checkReadOnly:function(){function a(a,b){for(;a;){if(1==a.type){if("false"==a.getAttribute("contentEditable")&&!a.data("cke-editable"))return 0;if(a.is("html")||"true"==a.getAttribute("contentEditable")&&(a.contains(b)||a.equals(b)))break}a=a.getParent()}return 1}return function(){var b=this.startContainer,c=this.endContainer;return!(a(b,c)&&a(c,b))}}(),moveToElementEditablePosition:function(a,b){function c(a,c){var d;return 1==a.type&&a.isEditable(!1)&&(d=a[b?"getLast":"getFirst"](g)),c||d||(d=a[b?"getPrevious":"getNext"](g)),d}if(1==a.type&&!a.isEditable(!1))return this.moveToPosition(a,b?4:3),!0;for(var d=0;a;){if(3==a.type){b&&this.checkEndOfBlock()&&o.test(a.getText())?this.moveToPosition(a,3):this.moveToPosition(a,b?4:3),d=1;break}1==a.type&&(a.isEditable()?(this.moveToPosition(a,b?2:1),d=1):b&&a.is("br")&&this.checkEndOfBlock()&&this.moveToPosition(a,3)),a=c(a,d)}return!!d},moveToElementEditStart:function(a){return this.moveToElementEditablePosition(a)},moveToElementEditEnd:function(a){return this.moveToElementEditablePosition(a,!0)},getEnclosedNode:function(){var a=this.clone();if(a.optimize(),1!=a.startContainer.type||1!=a.endContainer.type)return null;var b=new d.walker(a),c=d.walker.bookmark(!0),e=d.walker.whitespaces(!0),f=function(a){return e(a)&&c(a)};a.evaluator=f;var g=b.next();return b.reset(),g&&g.equals(b.previous())?g:null},getTouchedStartNode:function(){var a=this.startContainer;return this.collapsed||1!=a.type?a:a.getChild(this.startOffset)||a},getTouchedEndNode:function(){var a=this.endContainer;return this.collapsed||1!=a.type?a:a.getChild(this.endOffset-1)||a}}}(),a.POSITION_AFTER_START=1,a.POSITION_BEFORE_END=2,a.POSITION_BEFORE_START=3,a.POSITION_AFTER_END=4,a.ENLARGE_ELEMENT=1,a.ENLARGE_BLOCK_CONTENTS=2,a.ENLARGE_LIST_ITEM_CONTENTS=3,a.START=1,a.END=2,a.STARTEND=3,a.SHRINK_ELEMENT=1,a.SHRINK_TEXT=2,function(){function a(a,b,c){var d=a.serializable,e=b[c?"endContainer":"startContainer"],f=c?"endOffset":"startOffset",g=d?b.document.getById(a.startNode):a.startNode,h=d?b.document.getById(a.endNode):a.endNode;return e.equals(g.getPrevious())?(b.startOffset=b.startOffset-e.getLength()-h.getPrevious().getLength(),e=h.getNext()):e.equals(h.getPrevious())&&(b.startOffset=b.startOffset-e.getLength(),e=h.getNext()),e.equals(g.getParent())&&b[f]++,e.equals(h.getParent())&&b[f]++,b[c?"endContainer":"startContainer"]=e,b}d.rangeList=function(a){return a instanceof d.rangeList?a:(a?a instanceof d.range&&(a=[a]):a=[],e.extend(a,b))};var b={createIterator:function(){var a,b=this,c=d.walker.bookmark(),e=[];return{getNextRange:function(d){a=void 0==a?0:a+1;var f=b[a];if(f&&b.length>1){if(!a)for(var g=b.length-1;g>=0;g--)e.unshift(b[g].createBookmark(!0));if(d)for(var h=0;b[a+h+1];){for(var i,j=f.document,k=0,l=j.getById(e[h].endNode),m=j.getById(e[h+1].startNode);;){if(i=l.getNextSourceNode(!1),m.equals(i))k=1;else if(c(i)||1==i.type&&i.isBlockBoundary()){l=i;continue}break}if(!k)break;h++}for(f.moveToBookmark(e.shift());h--;)i=b[++a],i.moveToBookmark(e.shift()),f.setEnd(i.endContainer,i.endOffset)}return f}}},createBookmarks:function(b){for(var c,d=this,e=[],f=0;f<d.length;f++){e.push(c=d[f].createBookmark(b,!0));for(var g=f+1;g<d.length;g++)d[g]=a(c,d[g]),d[g]=a(c,d[g],!0)}return e},createBookmarks2:function(a){for(var b=[],c=0;c<this.length;c++)b.push(this[c].createBookmark2(a));return b},moveToBookmarks:function(a){for(var b=0;b<this.length;b++)this[b].moveToBookmark(a[b])}}}(),function(){if(b.webkit)return void(b.hc=!1);var c=h.createFromHtml('<div style="width:0px;height:0px;position:absolute;left:-10000px;border: 1px solid;border-color: red blue;"></div>',a.document);c.appendTo(a.document.getHead());try{b.hc=c.getComputedStyle("border-top-color")==c.getComputedStyle("border-right-color")}catch(d){b.hc=!1}b.hc&&(b.cssClass+=" cke_hc"),c.remove()}(),j.load(i.corePlugins.split(","),function(){a.status="loaded",a.fire("loaded");var b=a._.pending;if(b){delete a._.pending;for(var c=0;c<b.length;c++)a.add(b[c])}}),c)try{document.execCommand("BackgroundImageCache",!1,!0)}catch(l){}a.skins.add("kama",function(){var d="cke_ui_color";return{editor:{css:["editor.css"]},dialog:{css:["dialog.css"]},richcombo:{canGroup:!1},templates:{css:["templates.css"]},margins:[0,0,0,0],init:function(f){function g(a){var b=a.getById(d);return b||(b=a.getHead().append("style"),b.setAttribute("id",d),b.setAttribute("type","text/css")),b}function h(a,d,e){for(var f,g,h,i=0;i<a.length;i++)if(b.webkit)for(g=0;g<d.length;g++){for(h=d[g][1],f=0;f<e.length;f++)h=h.replace(e[f][0],e[f][1]);a[i].$.sheet.addRule(d[g][0],h)}else{for(h=d,f=0;f<e.length;f++)h=h.replace(e[f][0],e[f][1]);c?a[i].$.styleSheet.cssText+=h:a[i].$.innerHTML+=h}}f.config.width&&!isNaN(f.config.width)&&(f.config.width-=12);var i=[],j="/* UI Color Support */.cke_skin_kama .cke_menuitem .cke_icon_wrapper{	background-color: $color !important;	border-color: $color !important;}.cke_skin_kama .cke_menuitem a:hover .cke_icon_wrapper,.cke_skin_kama .cke_menuitem a:focus .cke_icon_wrapper,.cke_skin_kama .cke_menuitem a:active .cke_icon_wrapper{	background-color: $color !important;	border-color: $color !important;}.cke_skin_kama .cke_menuitem a:hover .cke_label,.cke_skin_kama .cke_menuitem a:focus .cke_label,.cke_skin_kama .cke_menuitem a:active .cke_label{	background-color: $color !important;}.cke_skin_kama .cke_menuitem a.cke_disabled:hover .cke_label,.cke_skin_kama .cke_menuitem a.cke_disabled:focus .cke_label,.cke_skin_kama .cke_menuitem a.cke_disabled:active .cke_label{	background-color: transparent !important;}.cke_skin_kama .cke_menuitem a.cke_disabled:hover .cke_icon_wrapper,.cke_skin_kama .cke_menuitem a.cke_disabled:focus .cke_icon_wrapper,.cke_skin_kama .cke_menuitem a.cke_disabled:active .cke_icon_wrapper{	background-color: $color !important;	border-color: $color !important;}.cke_skin_kama .cke_menuitem a.cke_disabled .cke_icon_wrapper{	background-color: $color !important;	border-color: $color !important;}.cke_skin_kama .cke_menuseparator{	background-color: $color !important;}.cke_skin_kama .cke_menuitem a:hover,.cke_skin_kama .cke_menuitem a:focus,.cke_skin_kama .cke_menuitem a:active{	background-color: $color !important;}";if(b.webkit){j=j.split("}").slice(0,-1);for(var k=0;k<j.length;k++)j[k]=j[k].split("{")}var l=/\$color/g;e.extend(f,{uiColor:null,getUiColor:function(){return this.uiColor},setUiColor:function(c){var d,e=g(a.document),k="."+f.id,m=[k+" .cke_wrapper",k+"_dialog .cke_dialog_contents",k+"_dialog a.cke_dialog_tab",k+"_dialog .cke_dialog_footer"].join(","),n="background-color: $color !important;";return d=b.webkit?[[m,n]]:m+"{"+n+"}",(this.setUiColor=function(a){var b=[[l,a]];f.uiColor=a,h([e],d,b),h(i,j,b)})(c)}}),f.on("menuShow",function(a){var b=a.data[0],c=b.element.getElementsByTag("iframe").getItem(0).getFrameDocument();if(!c.getById("cke_ui_color")){var d=g(c);i.push(d);var e=f.getUiColor();e&&h([d],j,[[l,e]])}}),f.config.uiColor&&f.setUiColor(f.config.uiColor)}}}()),function(){function b(){a.dialog.on("resize",function(a){var b=a.data,c=b.width,d=b.height,e=b.dialog,f=e.parts.contents;"kama"==b.skin&&f.setStyles({width:c+"px",height:d+"px"})})}a.dialog?b():a.on("dialogPluginReady",b)}(),j.add("about",{requires:["dialog"],init:function(b){var c=b.addCommand("about",new a.dialogCommand("about"));c.modes={wysiwyg:1,source:1},c.canUndo=!1,c.readOnly=1,b.ui.addButton("About",{label:b.lang.about.title,command:"about"}),a.dialog.add("about",this.path+"dialogs/about.js")}}),function(){var b="a11yhelp",c="a11yHelp";j.add(b,{requires:["dialog"],availableLangs:{cs:1,cy:1,da:1,de:1,el:1,en:1,eo:1,fa:1,fi:1,fr:1,gu:1,he:1,it:1,ku:1,mk:1,nb:1,nl:1,no:1,"pt-br":1,ro:1,tr:1,ug:1,vi:1,"zh-cn":1},init:function(b){var d=this;b.addCommand(c,{exec:function(){var f=b.langCode;f=d.availableLangs[f]?f:"en",a.scriptLoader.load(a.getUrl(d.path+"lang/"+f+".js"),function(){e.extend(b.lang,d.langEntries[f]),b.openDialog(c)})},modes:{wysiwyg:1,source:1},readOnly:1,canUndo:!1}),a.dialog.add(c,this.path+"dialogs/a11yhelp.js")}})}(),j.add("basicstyles",{requires:["styles","button"],init:function(b){var c=function(c,d,e,f){var g=new a.style(f);b.attachStyleStateChange(g,function(a){!b.readOnly&&b.getCommand(e).setState(a)}),b.addCommand(e,new a.styleCommand(g)),b.ui.addButton(c,{label:d,command:e})},d=b.config,e=b.lang;c("Bold",e.bold,"bold",d.coreStyles_bold),c("Italic",e.italic,"italic",d.coreStyles_italic),c("Underline",e.underline,"underline",d.coreStyles_underline),c("Strike",e.strike,"strike",d.coreStyles_strike),c("Subscript",e.subscript,"subscript",d.coreStyles_subscript),c("Superscript",e.superscript,"superscript",d.coreStyles_superscript)}}),i.coreStyles_bold={element:"strong",overrides:"b"},i.coreStyles_italic={element:"em",overrides:"i"},i.coreStyles_underline={element:"u"},i.coreStyles_strike={element:"strike"},i.coreStyles_subscript={element:"sub"},i.coreStyles_superscript={element:"sup"},function(){function b(a){c(a),f(a)}function c(a){var b=a.editor,c=a.data.path;if(!b.readOnly){var d,e=b.config.useComputedState;if(e=void 0===e||e,e||(d=g(c.lastElement)),d=d||c.block||c.blockLimit,d.is("body")){var f=b.getSelection().getRanges()[0].getEnclosedNode();f&&1==f.type&&(d=f)}if(d){var h=e?d.getComputedStyle("direction"):d.getStyle("direction")||d.getAttribute("dir");b.getCommand("bidirtl").setState("rtl"==h?1:2),b.getCommand("bidiltr").setState("ltr"==h?1:2)}}}function f(a){var b=a.editor,c=a.data.path.block||a.data.path.blockLimit;b.fire("contentDirChanged",c?c.getComputedStyle("direction"):b.lang.dir)}function g(a){for(;a&&!(a.getName()in q||a.is("body"));){var b=a.getParent();if(!b)break;a=b}return a}function i(a,b,c,d){if(!a.isReadOnly()){h.setMarker(d,a,"bidi_processed",1);for(var e=a;(e=e.getParent())&&!e.is("body");)if(e.getCustomData("bidi_processed"))return a.removeStyle("direction"),void a.removeAttribute("dir");var f="useComputedState"in c.config?c.config.useComputedState:1,g=f?a.getComputedStyle("direction"):a.getStyle("direction")||a.hasAttribute("dir");g!=b&&(a.removeStyle("direction"),f?(a.removeAttribute("dir"),b!=a.getComputedStyle("direction")&&a.setAttribute("dir",b)):a.setAttribute("dir",b),c.forceNextSelectionCheck())}}function k(a,b,c){var d=a.getCommonAncestor(!1,!0);if(a=a.clone(),a.enlarge(2==c?3:2),a.checkBoundaryOfElement(d,1)&&a.checkBoundaryOfElement(d,2)){for(var e;d&&1==d.type&&(e=d.getParent())&&1==e.getChildCount()&&!(d.getName()in b);)d=e;return 1==d.type&&d.getName()in b&&d}}function l(a){return function(b){var c=b.getSelection(),e=b.config.enterMode,f=c.getRanges();if(f&&f.length){for(var g,j={},l=c.createBookmarks(),m=f.createIterator(),n=0;g=m.getNextRange(1);){var q=g.getEnclosedNode();q&&(!q||1==q.type&&q.getName()in p)||(q=k(g,o,e)),q&&i(q,a,b,j);var r,s,t=new d.walker(g),u=l[n].startNode,v=l[n++].endNode;t.evaluator=function(a){return!!(1==a.type&&a.getName()in o&&(a.getName()!=(1==e?"p":"div")||1!=a.getParent().type||"blockquote"!=a.getParent().getName())&&2&a.getPosition(u)&&4==(20&a.getPosition(v)));

};for(;s=t.next();)i(s,a,b,j);for(r=g.createIterator(),r.enlargeBr=2!=e;s=r.getNextParagraph(1==e?"p":"div");)i(s,a,b,j)}h.clearAllMarkers(j),b.forceNextSelectionCheck(),c.selectBookmarks(l),b.focus()}}}function m(a){for(var b=a.getDocument().getBody().getParent();a;){if(a.equals(b))return!1;a=a.getParent()}return!0}function n(b){var c=b==r.setAttribute,d=b==r.removeAttribute,e=/\bdirection\s*:\s*(.*?)\s*(:?$|;)/;return function(f,g){var h=this;if(!h.getDocument().equals(a.document)){var i;if((f==(c||d?"dir":"direction")||"style"==f&&(d||e.test(g)))&&!m(h)){i=h.getDirection(1);var j=b.apply(h,arguments);if(i!=h.getDirection(1))return h.getDocument().fire("dirChanged",h),j}}return b.apply(h,arguments)}}var o={table:1,ul:1,ol:1,blockquote:1,div:1},p={},q={};e.extend(p,o,{tr:1,p:1,div:1,li:1}),e.extend(q,p,{td:1}),j.add("bidi",{requires:["styles","button"],init:function(c){var d=function(b,d,e,f){c.addCommand(e,new a.command(c,{exec:f})),c.ui.addButton(b,{label:d,command:e})},e=c.lang.bidi;d("BidiLtr",e.ltr,"bidiltr",l("ltr")),d("BidiRtl",e.rtl,"bidirtl",l("rtl")),c.on("selectionChange",b),c.on("contentDom",function(){c.document.on("dirChanged",function(a){c.fire("dirChanged",{node:a.data,dir:a.data.getDirection(1)})})})}});for(var r=h.prototype,s=["setStyle","removeStyle","setAttribute","removeAttribute"],t=0;t<s.length;t++)r[s[t]]=e.override(r[s[t]],n)}(),function(){function a(a,b){var c=b.block||b.blockLimit;return c&&"body"!=c.getName()&&c.getAscendant("blockquote",!0)?1:2}function b(b){var c=b.editor;if(!c.readOnly){var d=c.getCommand("blockquote");d.state=a(c,b.data.path),d.fire("state")}}function e(a){for(var b,c=0,d=a.getChildCount();d>c&&(b=a.getChild(c));c++)if(1==b.type&&b.isBlockBoundary())return!1;return!0}var f={exec:function(a){var b=a.getCommand("blockquote").state,f=a.getSelection(),g=f&&f.getRanges(!0)[0];if(g){var i=f.createBookmarks();if(c){var j,k=i[0].startNode,l=i[0].endNode;if(k&&"blockquote"==k.getParent().getName())for(j=k;j=j.getNext();)if(1==j.type&&j.isBlockBoundary()){k.move(j,!0);break}if(l&&"blockquote"==l.getParent().getName())for(j=l;j=j.getPrevious();)if(1==j.type&&j.isBlockBoundary()){l.move(j);break}}var m,n=g.createIterator();if(n.enlargeBr=2!=a.config.enterMode,2==b){for(var o=[];m=n.getNextParagraph();)o.push(m);if(o.length<1){var p=a.document.createElement(1==a.config.enterMode?"p":"div"),q=i.shift();g.insertNode(p),p.append(new d.text("\ufeff",a.document)),g.moveToBookmark(q),g.selectNodeContents(p),g.collapse(!0),q=g.createBookmark(),o.push(p),i.unshift(q)}for(var r=o[0].getParent(),s=[],t=0;t<o.length;t++)m=o[t],r=r.getCommonAncestor(m.getParent());for(var u={table:1,tbody:1,tr:1,ol:1,ul:1};u[r.getName()];)r=r.getParent();for(var v=null;o.length>0;){for(m=o.shift();!m.getParent().equals(r);)m=m.getParent();m.equals(v)||s.push(m),v=m}for(;s.length>0;)if(m=s.shift(),"blockquote"==m.getName()){for(var w=new d.documentFragment(a.document);m.getFirst();)w.append(m.getFirst().remove()),o.push(w.getLast());w.replace(m)}else o.push(m);var x=a.document.createElement("blockquote");for(x.insertBefore(o[0]);o.length>0;)m=o.shift(),x.append(m)}else if(1==b){for(var y=[],z={};m=n.getNextParagraph();){for(var A=null,B=null;m.getParent();){if("blockquote"==m.getParent().getName()){A=m.getParent(),B=m;break}m=m.getParent()}A&&B&&!B.getCustomData("blockquote_moveout")&&(y.push(B),h.setMarker(z,B,"blockquote_moveout",!0))}h.clearAllMarkers(z);var C=[],D=[];for(z={};y.length>0;){var E=y.shift();x=E.getParent(),E.getPrevious()?E.getNext()?(E.breakParent(E.getParent()),D.push(E.getNext())):E.remove().insertAfter(x):E.remove().insertBefore(x),x.getCustomData("blockquote_processed")||(D.push(x),h.setMarker(z,x,"blockquote_processed",!0)),C.push(E)}for(h.clearAllMarkers(z),t=D.length-1;t>=0;t--)x=D[t],e(x)&&x.remove();if(2==a.config.enterMode)for(var F=!0;C.length;)if(E=C.shift(),"div"==E.getName()){w=new d.documentFragment(a.document);var G=F&&E.getPrevious()&&!(1==E.getPrevious().type&&E.getPrevious().isBlockBoundary());G&&w.append(a.document.createElement("br"));for(var H=E.getNext()&&!(1==E.getNext().type&&E.getNext().isBlockBoundary());E.getFirst();)E.getFirst().remove().appendTo(w);H&&w.append(a.document.createElement("br")),w.replace(E),F=!1}}f.selectBookmarks(i),a.focus()}}};j.add("blockquote",{init:function(a){a.addCommand("blockquote",f),a.ui.addButton("Blockquote",{label:a.lang.blockquote,command:"blockquote"}),a.on("selectionChange",b)},requires:["domiterator"]})}(),j.add("button",{beforeInit:function(a){a.ui.addHandler("button",k.button.handler)}}),a.UI_BUTTON="button",k.button=function(a){e.extend(this,a,{title:a.label,className:a.className||a.command&&"cke_button_"+a.command||"",click:a.click||function(b){b.execCommand(a.command)}}),this._={}},k.button.handler={create:function(a){return new k.button(a)}},function(){k.button.prototype={render:function(f,g){function h(){var a=f.mode;if(a){var b=this.modes[a]?void 0!=q[a]?q[a]:2:0;this.setState(f.readOnly&&!this.readOnly?0:b)}}var i,j=b,k=this._.id=e.getNextId(),l="",m=this.command;this._.editor=f;var n={id:k,button:this,editor:f,focus:function(){var b=a.document.getById(k);b.focus()},execute:function(){c&&b.version<7?e.setTimeout(function(){this.button.click(f)},0,this):this.button.click(f)}},o=e.addFunction(function(a){return n.onkey?(a=new d.event(a),n.onkey(n,a.getKeystroke())!==!1):void 0}),p=e.addFunction(function(a){var c;return n.onfocus&&(c=n.onfocus(n,new d.event(a))!==!1),b.gecko&&b.version<10900&&a.preventBubble(),c});if(n.clickFn=i=e.addFunction(n.execute,n),this.modes){var q={};f.on("beforeModeUnload",function(){f.mode&&0!=this._.state&&(q[f.mode]=this._.state)},this),f.on("mode",h,this),!this.readOnly&&f.on("readOnly",h,this)}else m&&(m=f.getCommand(m),m&&(m.on("state",function(){this.setState(m.state)},this),l+="cke_"+(1==m.state?"on":0==m.state?"disabled":"off")));if(m||(l+="cke_off"),this.className&&(l+=" "+this.className),g.push('<span class="cke_button'+(this.icon&&-1==this.icon.indexOf(".png")?" cke_noalphafix":"")+'">','<a id="',k,'" class="',l,'"',j.gecko&&j.version>=10900&&!j.hc?"":'" href="javascript:void(\''+(this.title||"").replace("'","")+"')\"",' title="',this.title,'" tabindex="-1" hidefocus="true" role="button" aria-labelledby="'+k+'_label"'+(this.hasArrow?' aria-haspopup="true"':"")),(j.opera||j.gecko&&j.mac)&&g.push(' onkeypress="return false;"'),j.gecko&&g.push(' onblur="this.style.cssText = this.style.cssText;"'),g.push(' onkeydown="return CKEDITOR.tools.callFunction(',o,', event);" onfocus="return CKEDITOR.tools.callFunction(',p,', event);" '+(c?'onclick="return false;" onmouseup':"onclick")+'="CKEDITOR.tools.callFunction(',i,', this); return false;"><span class="cke_icon"'),this.icon){var r=-16*(this.iconOffset||0);g.push(' style="background-image:url(',a.getUrl(this.icon),");background-position:0 "+r+'px;"')}return g.push('>&nbsp;</span><span id="',k,'_label" class="cke_label">',this.label,"</span>"),this.hasArrow&&g.push('<span class="cke_buttonarrow">'+(b.hc?"&#9660;":"&nbsp;")+"</span>"),g.push("</a>","</span>"),this.onRender&&this.onRender(),n},setState:function(b){if(this._.state==b)return!1;this._.state=b;var c=a.document.getById(this._.id);return c?(c.setState(b),0==b?c.setAttribute("aria-disabled",!0):c.removeAttribute("aria-disabled"),1==b?c.setAttribute("aria-pressed",!0):c.removeAttribute("aria-pressed"),!0):!1}}}(),k.prototype.addButton=function(a,b){this.add(a,"button",b)},function(){function f(a){a.cancel()}function g(a,c,e){var g=this.document;if(!g.getById("cke_pastebin")){if("text"==c&&a.data&&a.data.$.clipboardData){var i=a.data.$.clipboardData.getData("text/plain");if(i)return a.data.preventDefault(),void e(i)}var j=this.getSelection(),k=new d.range(g),l=new h("text"==c?"textarea":b.webkit?"body":"div",g);l.setAttribute("id","cke_pastebin"),b.webkit&&l.append(g.createText(" ")),g.getBody().append(l),l.setStyles({position:"absolute",top:j.getStartElement().getDocumentPosition().y+"px",width:"1px",height:"1px",overflow:"hidden"}),l.setStyle("ltr"==this.config.contentsLangDirection?"left":"right","-1000px");var m=j.createBookmarks();this.on("selectionChange",f,null,null,0),"text"==c?l.$.focus():(k.setStartAt(l,1),k.setEndAt(l,2),k.select(!0));var n=this;window.setTimeout(function(){n.document.getBody().focus(),n.removeListener("selectionChange",f),b.ie7Compat?(j.selectBookmarks(m),l.remove()):(l.remove(),j.selectBookmarks(m));var a;l=b.webkit&&(a=l.getFirst())&&a.is&&a.hasClass("Apple-style-span")?a:l,e(l["get"+("text"==c?"Value":"Html")]())},0)}}function i(a){if(c&&!b.quirks){var d,e=a.getSelection();if(3==e.getType()&&(d=e.getSelectedElement())){var f=e.getRanges()[0],g=a.document.createText("");g.insertBefore(d),f.setStartBefore(g),f.setEndAfter(d),e.selectRanges([f]),setTimeout(function(){d.getParent()&&(g.remove(),e.selectElement(d))},0)}}}function k(a,d){var e;if(q&&a in{Paste:1,Cut:1})return 0;if("Paste"==a){c&&(p=1);try{e=d.document.$.queryCommandEnabled(a)||b.webkit}catch(f){}p=0}else{var g=d.getSelection(),h=g&&g.getRanges();e=g&&!(1==h.length&&h[0].collapsed)}return e?2:0}function l(){var a=this;if("wysiwyg"==a.mode){var b=k("Paste",a);a.getCommand("cut").setState(k("Cut",a)),a.getCommand("copy").setState(k("Copy",a)),a.getCommand("paste").setState(b),a.fire("pasteState",b)}}var m=function(a,c){var d=a.document,e=d.getBody(),f=!1,g=function(){f=!0};return e.on(c,g),(b.version>7?d.$:d.$.selection.createRange()).execCommand(c),e.removeListener(c,g),f},n=c?function(a,b){return m(a,b)}:function(a,b){try{return a.document.$.execCommand(b,!1,null)}catch(c){return!1}},o=function(a){var b=this;b.type=a,b.canUndo="cut"==b.type,b.startDisabled=!0};o.prototype={exec:function(a,b){"cut"==this.type&&i(a);var c=n(a,this.type);return c||alert(a.lang.clipboard[this.type+"Error"]),c}};var p,q,r={canUndo:!1,exec:c?function(a){return a.focus(),a.document.getBody().fire("beforepaste")||m(a,"paste")?void 0:(a.fire("pasteDialog"),!1)}:function(a){try{if(!a.document.getBody().fire("beforepaste")&&!a.document.$.execCommand("Paste",!1,null))throw 0}catch(b){return setTimeout(function(){a.fire("pasteDialog")},0),!1}}},s=function(a){if("wysiwyg"==this.mode)switch(a.data.keyCode){case 1114198:case 2228269:var c=this.document.getBody();return void((b.opera||b.gecko)&&c.fire("paste"));case 1114200:case 2228270:var d=this;this.fire("saveSnapshot"),setTimeout(function(){d.fire("saveSnapshot")},0)}};j.add("clipboard",{requires:["dialog","htmldataprocessor"],init:function(b){function d(a,c,d,e){var f=b.lang[c];b.addCommand(c,d),b.ui.addButton(a,{label:f,command:c}),b.addMenuItems&&b.addMenuItem(c,{label:f,command:c,group:"clipboard",order:e})}b.on("paste",function(a){var c=a.data;c.html?b.insertHtml(c.html):c.text&&b.insertText(c.text),setTimeout(function(){b.fire("afterPaste")},0)},null,null,1e3),b.on("pasteDialog",function(a){setTimeout(function(){b.openDialog("paste")},0)}),b.on("pasteState",function(a){b.getCommand("paste").setState(a.data)}),d("Cut","cut",new o("cut"),1),d("Copy","copy",new o("copy"),4),d("Paste","paste",r,8),a.dialog.add("paste",a.getUrl(this.path+"dialogs/paste.js")),b.on("key",s,b),b.on("contentDom",function(){var a=b.document.getBody();a.on(c?"beforepaste":"paste",function(a){if(!p){var d=a.data&&a.data.$;if(!c||!d||d.ctrlKey){var f={mode:"html"};b.fire("beforePaste",f),g.call(b,a,f.mode,function(a){if(a=e.trim(a.replace(/<span[^>]+data-cke-bookmark[^<]*?<\/span>/gi,""))){var c={};c[f.mode]=a,b.fire("paste",c)}})}}}),c&&(a.on("contextmenu",function(){p=1,setTimeout(function(){p=0},0)}),a.on("paste",function(a){b.document.getById("cke_pastebin")||(a.data.preventDefault(),p=0,r.exec(b))})),a.on("beforecut",function(){!p&&i(b)}),a.on("mouseup",function(){setTimeout(function(){l.call(b)},0)},b),a.on("keyup",l,b)}),b.on("selectionChange",function(a){q=a.data.selection.getRanges()[0].checkReadOnly(),l.call(b)}),b.contextMenu&&b.contextMenu.addListener(function(a,c){c.getRanges()[0].checkReadOnly();return{cut:k("Cut",b),copy:k("Copy",b),paste:k("Paste",b)}})}})}(),j.add("colorbutton",{requires:["panelbutton","floatpanel","styles"],init:function(c){function f(a,b,f){var h=e.getNextId()+"_colorBox";c.ui.add(a,"panelbutton",{label:f,title:f,className:"cke_button_"+a.toLowerCase(),modes:{wysiwyg:1},panel:{css:c.skin.editor.css,attributes:{role:"listbox","aria-label":j.panelTitle}},onBlock:function(a,d){d.autoSize=!0,d.element.addClass("cke_colorblock"),d.element.setHtml(g(a,b,h)),d.element.getDocument().getBody().setStyle("overflow","hidden"),k.fire("ready",this);var e=d.keys,f="rtl"==c.lang.dir;e[f?37:39]="next",e[40]="next",e[9]="next",e[f?39:37]="prev",e[38]="prev",e[2228233]="prev",e[32]="click"},onOpen:function(){var a,e=c.getSelection(),f=e&&e.getStartElement(),g=new d.elementPath(f);f=g.block||g.blockLimit||c.document.getBody();do a=f&&f.getComputedStyle("back"==b?"background-color":"color")||"transparent";while("back"==b&&"transparent"==a&&f&&(f=f.getParent()));a&&"transparent"!=a||(a="#ffffff"),this._.panel._.iframe.getFrameDocument().getById(h).setStyle("background-color",a)}})}function g(b,d,f){var g=[],k=i.colorButton_colors.split(","),l=e.addFunction(function(d,e){function f(a){this.removeListener("ok",f),this.removeListener("cancel",f),"ok"==a.name&&g(this.getContentElement("picker","selectedColor").getValue(),e)}if("?"==d){var g=arguments.callee;return void c.openDialog("colordialog",function(){this.on("ok",f),this.on("cancel",f)})}if(c.focus(),b.hide(!1),c.fire("saveSnapshot"),new a.style(i["colorButton_"+e+"Style"],{color:"inherit"}).remove(c.document),d){var j=i["colorButton_"+e+"Style"];j.childRule="back"==e?function(a){return h(a)}:function(a){return!(a.is("a")||a.getElementsByTag("a").count())||h(a)},new a.style(j,{color:d}).apply(c.document)}c.fire("saveSnapshot")});g.push('<a class="cke_colorauto" _cke_focus=1 hidefocus=true title="',j.auto,'" onclick="CKEDITOR.tools.callFunction(',l,",null,'",d,"');return false;\" href=\"javascript:void('",j.auto,'\')" role="option"><table role="presentation" cellspacing=0 cellpadding=0 width="100%"><tr><td><span class="cke_colorbox" id="',f,'"></span></td><td colspan=7 align=center>',j.auto,'</td></tr></table></a><table role="presentation" cellspacing=0 cellpadding=0 width="100%">');for(var m=0;m<k.length;m++){m%8===0&&g.push("</tr><tr>");var n=k[m].split("/"),o=n[0],p=n[1]||o;n[1]||(o="#"+o.replace(/^(.)(.)(.)$/,"$1$1$2$2$3$3"));var q=c.lang.colors[p]||p;g.push('<td><a class="cke_colorbox" _cke_focus=1 hidefocus=true title="',q,'" onclick="CKEDITOR.tools.callFunction(',l,",'",o,"','",d,"'); return false;\" href=\"javascript:void('",q,'\')" role="option"><span class="cke_colorbox" style="background-color:#',p,'"></span></a></td>')}return(void 0===i.colorButton_enableMore||i.colorButton_enableMore)&&g.push('</tr><tr><td colspan=8 align=center><a class="cke_colormore" _cke_focus=1 hidefocus=true title="',j.more,'" onclick="CKEDITOR.tools.callFunction(',l,",'?','",d,"');return false;\" href=\"javascript:void('",j.more,"')\"",' role="option">',j.more,"</a></td>"),g.push("</tr></table>"),g.join("")}function h(a){return"false"==a.getAttribute("contentEditable")||a.getAttribute("data-nostyle")}var i=c.config,j=c.lang.colorButton;b.hc||(f("TextColor","fore",j.textColorTitle),f("BGColor","back",j.bgColorTitle))}}),i.colorButton_colors="000,800000,8B4513,2F4F4F,008080,000080,4B0082,696969,B22222,A52A2A,DAA520,006400,40E0D0,0000CD,800080,808080,F00,FF8C00,FFD700,008000,0FF,00F,EE82EE,A9A9A9,FFA07A,FFA500,FFFF00,00FF00,AFEEEE,ADD8E6,DDA0DD,D3D3D3,FFF0F5,FAEBD7,FFFFE0,F0FFF0,F0FFFF,F0F8FF,E6E6FA,FFF",i.colorButton_foreStyle={element:"span",styles:{color:"#(color)"},overrides:[{element:"font",attributes:{color:null}}]},i.colorButton_backStyle={element:"span",styles:{"background-color":"#(color)"}},j.colordialog={requires:["dialog"],init:function(b){b.addCommand("colordialog",new a.dialogCommand("colordialog")),a.dialog.add("colordialog",this.path+"dialogs/colordialog.js")}},j.add("colordialog",j.colordialog),j.add("contextmenu",{requires:["menu"],onLoad:function(){j.contextMenu=e.createClass({base:a.menu,$:function(a){this.base.call(this,a,{panel:{className:a.skinClass+" cke_contextmenu",attributes:{"aria-label":a.lang.contextmenu.options}}})},proto:{addTarget:function(a,d){if(b.opera&&!("oncontextmenu"in document.body)){var f;a.on("mousedown",function(c){if(c=c.data,2!=c.$.button)return void(1114113==c.getKeystroke()&&a.fire("contextmenu",c));if(!(d&&(b.mac?c.$.metaKey:c.$.ctrlKey))){var e=c.getTarget();if(!f){var g=e.getDocument();f=g.createElement("input"),f.$.type="button",g.getBody().append(f)}f.setAttribute("style","position:absolute;top:"+(c.$.clientY-2)+"px;left:"+(c.$.clientX-2)+"px;width:5px;height:5px;opacity:0.01")}}),a.on("mouseup",function(b){f&&(f.remove(),f=void 0,a.fire("contextmenu",b.data))})}if(a.on("contextmenu",function(a){var f=a.data;if(!d||!(b.webkit?g:b.mac?f.$.metaKey:f.$.ctrlKey)){f.preventDefault();var h=f.getTarget().getDocument().getDocumentElement(),i=f.$.clientX,j=f.$.clientY;e.setTimeout(function(){this.open(h,null,i,j)},c?200:0,this)}},this),b.opera&&a.on("keypress",function(a){var b=a.data;0===b.$.keyCode&&b.preventDefault()}),b.webkit){var g,h=function(a){g=b.mac?a.data.$.metaKey:a.data.$.ctrlKey},i=function(){g=0};a.on("keydown",h),a.on("keyup",i),a.on("contextmenu",i)}},open:function(b,c,d,e){this.editor.focus(),b=b||a.document.getDocumentElement(),this.show(b,c,d,e)}}})},beforeInit:function(a){a.contextMenu=new j.contextMenu(a),a.addCommand("contextMenu",{exec:function(){a.contextMenu.open(a.document.getBody())}})}}),function(){function b(a){var b=this.att,c=a&&a.hasAttribute(b)&&a.getAttribute(b)||"";void 0!==c&&this.setValue(c)}function c(){for(var a,b=0;b<arguments.length;b++)if(arguments[b]instanceof h){a=arguments[b];break}if(a){var c=this.att,d=this.getValue();d?a.setAttribute(c,d):a.removeAttribute(c,d)}}j.add("dialogadvtab",{createAdvancedTab:function(d,f){f||(f={id:1,dir:1,classes:1,styles:1});var g=d.lang.common,h={id:"advanced",label:g.advancedTab,title:g.advancedTab,elements:[{type:"vbox",padding:1,children:[]}]},i=[];return(f.id||f.dir)&&(f.id&&i.push({id:"advId",att:"id",type:"text",label:g.id,setup:b,commit:c}),f.dir&&i.push({id:"advLangDir",att:"dir",type:"select",label:g.langDir,"default":"",style:"width:100%",items:[[g.notSet,""],[g.langDirLTR,"ltr"],[g.langDirRTL,"rtl"]],setup:b,commit:c}),h.elements[0].children.push({type:"hbox",widths:["50%","50%"],children:[].concat(i)})),(f.styles||f.classes)&&(i=[],f.styles&&i.push({id:"advStyles",att:"style",type:"text",label:g.styles,"default":"",validate:a.dialog.validate.inlineStyle(g.invalidInlineStyle),onChange:function(){},getStyle:function(a,b){var c=this.getValue().match(new RegExp(a+"\\s*:\\s*([^;]*)","i"));return c?c[1]:b},updateStyle:function(a,b){var c=this.getValue(),f=d.document.createElement("span");f.setAttribute("style",c),f.setStyle(a,b),c=e.normalizeCssText(f.getAttribute("style")),this.setValue(c,1)},setup:b,commit:c}),f.classes&&i.push({type:"hbox",widths:["45%","55%"],children:[{id:"advCSSClasses",att:"class",type:"text",label:g.cssClasses,"default":"",setup:b,commit:c}]}),h.elements[0].children.push({type:"hbox",widths:["50%","50%"],children:[].concat(i)})),h}})}(),function(){j.add("div",{requires:["editingblock","dialog","domiterator","styles"],init:function(b){var c=b.lang.div;b.addCommand("creatediv",new a.dialogCommand("creatediv")),b.addCommand("editdiv",new a.dialogCommand("editdiv")),b.addCommand("removediv",{exec:function(a){function b(a){var b=new d.elementPath(a),c=b.blockLimit,e=c.is("div")&&c;e&&!e.data("cke-div-added")&&(i.push(e),e.data("cke-div-added"))}for(var c,e,f=a.getSelection(),g=f&&f.getRanges(),h=f.createBookmarks(),i=[],j=0;j<g.length;j++)c=g[j],c.collapsed?b(f.getStartElement()):(e=new d.walker(c),e.evaluator=b,e.lastForward());for(j=0;j<i.length;j++)i[j].remove(!0);f.selectBookmarks(h)}}),b.ui.addButton("CreateDiv",{label:c.toolbar,command:"creatediv"}),b.addMenuItems&&(b.addMenuItems({editdiv:{label:c.edit,command:"editdiv",group:"div",order:1},removediv:{label:c.remove,command:"removediv",group:"div",order:5}}),b.contextMenu&&b.contextMenu.addListener(function(a,b){if(!a||a.isReadOnly())return null;var c=new d.elementPath(a),e=c.blockLimit;return e&&e.getAscendant("div",!0)?{editdiv:2,removediv:2}:null})),a.dialog.add("creatediv",this.path+"dialogs/div.js"),a.dialog.add("editdiv",this.path+"dialogs/div.js")}})}(),function(){var f={toolbarFocus:{editorFocus:!1,readOnly:1,exec:function(d){var e=d._.elementsPath.idBase,f=a.document.getById(e+"0");f&&f.focus(c||b.air)}}},g='<span class="cke_empty">&nbsp;</span>';j.add("elementspath",{requires:["selection"],init:function(c){function h(a){c.focus();var b=c._.elementsPath.list[a];if(b.is("body")){var e=new d.range(c.document);e.selectNodeContents(b),e.select()}else c.getSelection().selectElement(b)}function i(){j&&j.setHtml(g),delete c._.elementsPath.list}var j,k="cke_path_"+c.name,l=function(){return j||(j=a.document.getById(k)),j},m="cke_elementspath_"+e.getNextNumber()+"_";c._.elementsPath={idBase:m,filters:[]},c.on("themeSpace",function(a){"bottom"==a.data.space&&(a.data.html+='<span id="'+k+'_label" class="cke_voice_label">'+c.lang.elementsPath.eleLabel+'</span><div id="'+k+'" class="cke_path" role="group" aria-labelledby="'+k+'_label">'+g+"</div>")});var n=e.addFunction(h),o=e.addFunction(function(b,e){var f,g=c._.elementsPath.idBase;e=new d.event(e);var i="rtl"==c.lang.dir;switch(e.getKeystroke()){case i?39:37:case 9:return f=a.document.getById(g+(b+1)),f||(f=a.document.getById(g+"0")),f.focus(),!1;case i?37:39:case 2228233:return f=a.document.getById(g+(b-1)),f||(f=a.document.getById(g+(c._.elementsPath.list.length-1))),f.focus(),!1;case 27:return c.focus(),!1;case 13:case 32:return h(b),!1}return!0});c.on("selectionChange",function(a){for(var c=b,d=a.data.selection,e=d.getStartElement(),f=[],h=a.editor,i=h._.elementsPath.list=[],j=h._.elementsPath.filters;e;){var k,p=0;k=e.data("cke-display-name")?e.data("cke-display-name"):e.data("cke-real-element-type")?e.data("cke-real-element-type"):e.getName();for(var q=0;q<j.length;q++){var r=j[q](e,k);if(r===!1){p=1;break}k=r||k}if(!p){var s=i.push(e)-1,t="";(c.opera||c.gecko&&c.mac)&&(t+=' onkeypress="return false;"'),c.gecko&&(t+=' onblur="this.style.cssText = this.style.cssText;"');var u=h.lang.elementsPath.eleTitle.replace(/%1/,k);f.unshift('<a id="',m,s,'" href="javascript:void(\'',k,'\')" tabindex="-1" title="',u,'"'+(b.gecko&&b.version<10900?' onfocus="event.preventBubble();"':"")+' hidefocus="true"  onkeydown="return CKEDITOR.tools.callFunction(',o,",",s,', event );"'+t,' onclick="CKEDITOR.tools.callFunction('+n,",",s,'); return false;"',' role="button" aria-labelledby="'+m+s+'_label">',k,'<span id="',m,s,'_label" class="cke_label">'+u+"</span>","</a>")}if("body"==k)break;e=e.getParent()}var v=l();v.setHtml(f.join("")+g),h.fire("elementsPathUpdate",{space:v})}),c.on("readOnly",i),c.on("contentDomUnload",i),c.addCommand("elementsPathFocus",f.toolbarFocus)}})}(),function(){function a(a){return"wysiwyg"!=a.mode?!1:e(a,a.config.shiftEnterMode,1)}function e(a,b,c){return c=a.config.forceEnterMode||c,"wysiwyg"!=a.mode?!1:(b||(b=a.config.enterMode),setTimeout(function(){a.fire("saveSnapshot"),2==b?i(a,b,null,c):k(a,b,null,c),a.fire("saveSnapshot")},0),!0)}function g(a){for(var b=a.getSelection().getRanges(!0),c=b.length-1;c>0;c--)b[c].deleteContents();return b[0]}j.add("enterkey",{requires:["keystrokes","indent"],init:function(b){b.addCommand("enter",{modes:{wysiwyg:1},editorFocus:!1,exec:function(a){e(a)}}),b.addCommand("shiftEnter",{modes:{wysiwyg:1},editorFocus:!1,exec:function(b){a(b)}});var c=b.keystrokeHandler.keystrokes;c[13]="enter",c[2228237]="shiftEnter"}}),j.enterkey={enterBlock:function(a,b,e,h){if(e=e||g(a)){var j=e.document,k=e.checkStartOfBlock(),m=e.checkEndOfBlock(),n=new d.elementPath(e.startContainer),o=n.block;if(k&&m){if(o&&(o.is("li")||o.getParent().is("li")))return void a.execCommand("outdent");if(o&&o.getParent().is("blockquote"))return o.breakParent(o.getParent()),o.getPrevious().getFirst(d.walker.invisible(1))||o.getPrevious().remove(),o.getNext().getFirst(d.walker.invisible(1))||o.getNext().remove(),e.moveToElementEditStart(o),void e.select()}else if(o&&o.is("pre")){if(!m)return void i(a,b,e,h)}else if(o&&f.$captionBlock[o.getName()])return void i(a,b,e,h);var p=3==b?"div":"p",q=e.splitBlock(p);if(q){var r,s=q.previousBlock,t=q.nextBlock,u=q.wasStartOfBlock,v=q.wasEndOfBlock;if(t?(r=t.getParent(),r.is("li")&&(t.breakParent(r),t.move(t.getNext(),1))):s&&(r=s.getParent())&&r.is("li")&&(s.breakParent(r),r=s.getNext(),e.moveToElementEditStart(r),s.move(s.getPrevious())),u||v){var w,x;s?(s.is("li")||!l.test(s.getName())&&!s.is("pre"))&&(w=s.clone()):t&&(w=t.clone()),w?h&&!w.is("li")&&w.renameNode(p):r&&r.is("li")?w=r:(w=j.createElement(p),s&&(x=s.getDirection())&&w.setAttribute("dir",x));var y=q.elementPath;if(y)for(var z=0,A=y.elements.length;A>z;z++){var B=y.elements[z];if(B.equals(y.block)||B.equals(y.blockLimit))break;f.$removeEmpty[B.getName()]&&(B=B.clone(),w.moveChildren(B),w.append(B))}c||w.appendBogus(),w.getParent()||e.insertNode(w),w.is("li")&&w.removeAttribute("value"),!c||!u||v&&s.getChildCount()||(e.moveToElementEditStart(v?s:w),e.select()),e.moveToElementEditStart(u&&!v?t:w)}else t.is("li")&&(r=t.getFirst(d.walker.invisible(!0)))&&r.is&&r.is("ul","ol")&&(c?j.createText(" "):j.createElement("br")).insertBefore(r),t&&e.moveToElementEditStart(t);if(!c)if(t){var C=j.createElement("span");C.setHtml("&nbsp;"),e.insertNode(C),C.scrollIntoView(),e.deleteContents()}else w.scrollIntoView();e.select()}}},enterBr:function(a,e,f,h){if(f=f||g(a)){var i=f.document,j=f.checkEndOfBlock(),m=new d.elementPath(a.getSelection().getStartElement()),n=m.block,o=n&&m.block.getName(),p=!1;if(!h&&"li"==o)return void k(a,e,f,h);if(!h&&j&&l.test(o)){var q,r;(r=n.getDirection())?(q=i.createElement("div"),q.setAttribute("dir",r),q.insertAfter(n),f.setStart(q,0)):(i.createElement("br").insertAfter(n),b.gecko&&i.createText("").insertAfter(n),f.setStartAt(n.getNext(),c?3:1))}else{var s;if(p="pre"==o,s=p&&!b.gecko?i.createText(c?"\r":"\n"):i.createElement("br"),f.deleteContents(),f.insertNode(s),c)f.setStartAt(s,4);else{i.createText("\ufeff").insertAfter(s),j&&s.getParent().appendBogus(),s.getNext().$.nodeValue="",f.setStartAt(s.getNext(),1);var t=null;b.gecko?t=i.createElement("br"):(t=i.createElement("span"),t.setHtml("&nbsp;")),t.insertBefore(s.getNext()),t.scrollIntoView(),t.remove()}}f.collapse(!0),f.select(p)}}};var h=j.enterkey,i=h.enterBr,k=h.enterBlock,l=/^h[1-6]$/}(),function(){function a(a,b){var c={},d=[],e={nbsp:" ",shy:"­",gt:">",lt:"<",amp:"&",apos:"'",quot:'"'};if(a=a.replace(/\b(nbsp|shy|gt|lt|amp|apos|quot)(?:,|$)/g,function(a,f){var g=b?"&"+f+";":e[f],h=b?e[f]:"&"+f+";";return c[g]=h,d.push(g),""}),!b&&a){a=a.split(",");var f,g=document.createElement("div");g.innerHTML="&"+a.join(";&")+";",f=g.innerHTML,g=null;for(var h=0;h<f.length;h++){var i=f.charAt(h);c[i]="&"+a[h]+";",d.push(i)}}return c.regex=d.join(b?"|":""),c}var b="nbsp,gt,lt,amp",c="quot,iexcl,cent,pound,curren,yen,brvbar,sect,uml,copy,ordf,laquo,not,shy,reg,macr,deg,plusmn,sup2,sup3,acute,micro,para,middot,cedil,sup1,ordm,raquo,frac14,frac12,frac34,iquest,times,divide,fnof,bull,hellip,prime,Prime,oline,frasl,weierp,image,real,trade,alefsym,larr,uarr,rarr,darr,harr,crarr,lArr,uArr,rArr,dArr,hArr,forall,part,exist,empty,nabla,isin,notin,ni,prod,sum,minus,lowast,radic,prop,infin,ang,and,or,cap,cup,int,there4,sim,cong,asymp,ne,equiv,le,ge,sub,sup,nsub,sube,supe,oplus,otimes,perp,sdot,lceil,rceil,lfloor,rfloor,lang,rang,loz,spades,clubs,hearts,diams,circ,tilde,ensp,emsp,thinsp,zwnj,zwj,lrm,rlm,ndash,mdash,lsquo,rsquo,sbquo,ldquo,rdquo,bdquo,dagger,Dagger,permil,lsaquo,rsaquo,euro",d="Agrave,Aacute,Acirc,Atilde,Auml,Aring,AElig,Ccedil,Egrave,Eacute,Ecirc,Euml,Igrave,Iacute,Icirc,Iuml,ETH,Ntilde,Ograve,Oacute,Ocirc,Otilde,Ouml,Oslash,Ugrave,Uacute,Ucirc,Uuml,Yacute,THORN,szlig,agrave,aacute,acirc,atilde,auml,aring,aelig,ccedil,egrave,eacute,ecirc,euml,igrave,iacute,icirc,iuml,eth,ntilde,ograve,oacute,ocirc,otilde,ouml,oslash,ugrave,uacute,ucirc,uuml,yacute,thorn,yuml,OElig,oelig,Scaron,scaron,Yuml",e="Alpha,Beta,Gamma,Delta,Epsilon,Zeta,Eta,Theta,Iota,Kappa,Lambda,Mu,Nu,Xi,Omicron,Pi,Rho,Sigma,Tau,Upsilon,Phi,Chi,Psi,Omega,alpha,beta,gamma,delta,epsilon,zeta,eta,theta,iota,kappa,lambda,mu,nu,xi,omicron,pi,rho,sigmaf,sigma,tau,upsilon,phi,chi,psi,omega,thetasym,upsih,piv";j.add("entities",{afterInit:function(f){function g(a){return"force"!=i.entities_processNumerical&&m[a]?m[a]:"&#"+a.charCodeAt(0)+";"}function h(a){return o[a]}var i=f.config,j=f.dataProcessor,k=j&&j.htmlFilter;if(k){var l=[];i.basicEntities!==!1&&l.push(b),i.entities&&(l.length&&l.push(c),i.entities_latin&&l.push(d),i.entities_greek&&l.push(e),i.entities_additional&&l.push(i.entities_additional));var m=a(l.join(",")),n=m.regex?"["+m.regex+"]":"a^";delete m.regex,i.entities&&i.entities_processNumerical&&(n="[^ -~]|"+n),n=new RegExp(n,"g");var o=a([b,"shy"].join(","),!0),p=new RegExp(o.regex,"g");k.addRules({text:function(a){return a.replace(p,h).replace(n,g)}})}}})}(),i.basicEntities=!0,i.entities=!0,i.entities_latin=!0,i.entities_greek=!0,i.entities_additional="#39",function(){function b(a,b){var c=[];if(!b)return a;for(var d in b)c.push(d+"="+encodeURIComponent(b[d]));return a+(-1!=a.indexOf("?")?"&":"?")+c.join("&")}function c(a){a+="";var b=a.charAt(0).toUpperCase();return b+a.substr(1)}function d(a){var d=this,e=d.getDialog(),f=e.getParentEditor();f._.filebrowserSe=d;var g=f.config["filebrowser"+c(e.getName())+"WindowWidth"]||f.config.filebrowserWindowWidth||"80%",h=f.config["filebrowser"+c(e.getName())+"WindowHeight"]||f.config.filebrowserWindowHeight||"70%",i=d.filebrowser.params||{};i.CKEditor=f.name,i.CKEditorFuncNum=f._.filebrowserFn,i.langCode||(i.langCode=f.langCode);var j=b(d.filebrowser.url,i);f.popup(j,g,h,f.config.filebrowserWindowFeatures||f.config.fileBrowserWindowFeatures)}function f(a){var b=this,c=b.getDialog(),d=c.getParentEditor();return d._.filebrowserSe=b,c.getContentElement(b["for"][0],b["for"][1]).getInputElement().$.value&&c.getContentElement(b["for"][0],b["for"][1]).getAction()?!0:!1}function g(a,c,d){var e=d.params||{};e.CKEditor=a.name,e.CKEditorFuncNum=a._.filebrowserFn,e.langCode||(e.langCode=a.langCode),c.action=b(d.url,e),c.filebrowser=d}function h(a,b,e,i){var j;for(var k in i)if(j=i[k],("hbox"==j.type||"vbox"==j.type||"fieldset"==j.type)&&h(a,b,e,j.children),j.filebrowser){if("string"==typeof j.filebrowser){var l={action:"fileButton"==j.type?"QuickUpload":"Browse",target:j.filebrowser};j.filebrowser=l}if("Browse"==j.filebrowser.action){var m=j.filebrowser.url;void 0===m&&(m=a.config["filebrowser"+c(b)+"BrowseUrl"],void 0===m&&(m=a.config.filebrowserBrowseUrl)),m&&(j.onClick=d,j.filebrowser.url=m,j.hidden=!1)}else if("QuickUpload"==j.filebrowser.action&&j["for"]&&(m=j.filebrowser.url,void 0===m&&(m=a.config["filebrowser"+c(b)+"UploadUrl"],void 0===m&&(m=a.config.filebrowserUploadUrl)),m)){var n=j.onClick;j.onClick=function(a){var b=a.sender;return n&&n.call(b,a)===!1?!1:f.call(b,a)},j.filebrowser.url=m,j.hidden=!1,g(a,e.getContents(j["for"][0]).get(j["for"][1]),j.filebrowser)}}}function i(a,b){var c=b.getDialog(),d=b.filebrowser.target||null;if(d){var e=d.split(":"),f=c.getContentElement(e[0],e[1]);f&&(f.setValue(a),c.selectPage(e[0]))}}function k(a,b,c){if(-1!==c.indexOf(";")){for(var d=c.split(";"),e=0;e<d.length;e++)if(k(a,b,d[e]))return!0;return!1}var f=a.getContents(b).get(c).filebrowser;return f&&f.url}function l(a,b){var c=this,d=c._.filebrowserSe.getDialog(),e=c._.filebrowserSe["for"],f=c._.filebrowserSe.filebrowser.onSelect;e&&d.getContentElement(e[0],e[1]).reset(),("function"!=typeof b||b.call(c._.filebrowserSe)!==!1)&&(f&&f.call(c._.filebrowserSe,a,b)===!1||("string"==typeof b&&b&&alert(b),a&&i(a,c._.filebrowserSe)))}j.add("filebrowser",{init:function(a,b){a._.filebrowserFn=e.addFunction(l,a),
a.on("destroy",function(){e.removeFunction(this._.filebrowserFn)})}}),a.on("dialogDefinition",function(a){var b,c=a.data.definition;for(var d in c.contents)(b=c.contents[d])&&(h(a.editor,a.data.name,c,b.elements),b.hidden&&b.filebrowser&&(b.hidden=!k(c,b.id,b.filebrowser)))})}(),j.add("find",{requires:["dialog"],init:function(b){j.find;b.ui.addButton("Find",{label:b.lang.findAndReplace.find,command:"find"});var c=b.addCommand("find",new a.dialogCommand("find"));c.canUndo=!1,c.readOnly=1,b.ui.addButton("Replace",{label:b.lang.findAndReplace.replace,command:"replace"});var d=b.addCommand("replace",new a.dialogCommand("replace"));d.canUndo=!1,a.dialog.add("find",this.path+"dialogs/find.js"),a.dialog.add("replace",this.path+"dialogs/find.js")},requires:["styles"]}),i.find_highlight={element:"span",styles:{"background-color":"#004",color:"#fff"}},function(){function b(a){var b=a.attributes;return"application/x-shockwave-flash"==b.type||d.test(b.src||"")}function c(a,b){return a.createFakeParserElement(b,"cke_flash","flash",!0)}var d=/\.swf(?:$|\?)/i;j.add("flash",{init:function(b){b.addCommand("flash",new a.dialogCommand("flash")),b.ui.addButton("Flash",{label:b.lang.common.flash,command:"flash"}),a.dialog.add("flash",this.path+"dialogs/flash.js"),b.addCss("img.cke_flash{background-image: url("+a.getUrl(this.path+"images/placeholder.png")+");background-position: center center;background-repeat: no-repeat;border: 1px solid #a9a9a9;width: 80px;height: 80px;}"),b.addMenuItems&&b.addMenuItems({flash:{label:b.lang.flash.properties,command:"flash",group:"flash"}}),b.on("doubleclick",function(a){var b=a.data.element;b.is("img")&&"flash"==b.data("cke-real-element-type")&&(a.data.dialog="flash")}),b.contextMenu&&b.contextMenu.addListener(function(a,b){return a&&a.is("img")&&!a.isReadOnly()&&"flash"==a.data("cke-real-element-type")?{flash:2}:void 0})},afterInit:function(a){var d=a.dataProcessor,e=d&&d.dataFilter;e&&e.addRules({elements:{"cke:object":function(d){var e=d.attributes,f=e.classid&&String(e.classid).toLowerCase();if(!f&&!b(d)){for(var g=0;g<d.children.length;g++)if("cke:embed"==d.children[g].name)return b(d.children[g])?c(a,d):null;return null}return c(a,d)},"cke:embed":function(d){return b(d)?c(a,d):null}}},5)},requires:["fakeobjects"]})}(),e.extend(i,{flashEmbedTagOnly:!1,flashAddEmbedTag:!0,flashConvertOnEdit:!1}),function(){function b(b,c,d,e,f,g,h){for(var i=b.config,j=f.split(";"),k=[],l={},m=0;m<j.length;m++){var n=j[m];if(n){n=n.split("/");var o={},p=j[m]=n[0];o[d]=k[m]=n[1]||p,l[p]=new a.style(h,o),l[p]._.definition.name=p}else j.splice(m--,1)}b.ui.addRichCombo(c,{label:e.label,title:e.panelTitle,className:"cke_"+("size"==d?"fontSize":"font"),panel:{css:b.skin.editor.css.concat(i.contentsCss),multiSelect:!1,attributes:{"aria-label":e.panelTitle}},init:function(){this.startGroup(e.panelTitle);for(var a=0;a<j.length;a++){var b=j[a];this.add(b,l[b].buildPreview(),b)}},onClick:function(a){b.focus(),b.fire("saveSnapshot");var c=l[a];this.getValue()==a?c.remove(b.document):c.apply(b.document),b.fire("saveSnapshot")},onRender:function(){b.on("selectionChange",function(a){for(var b,c=this.getValue(),d=a.data.path,e=d.elements,f=0;f<e.length;f++){b=e[f];for(var h in l)if(l[h].checkElementMatch(b,!0))return void(h!=c&&this.setValue(h))}this.setValue("",g)},this)}})}j.add("font",{requires:["richcombo","styles"],init:function(a){var c=a.config;b(a,"Font","family",a.lang.font,c.font_names,c.font_defaultLabel,c.font_style),b(a,"FontSize","size",a.lang.fontSize,c.fontSize_sizes,c.fontSize_defaultLabel,c.fontSize_style)}})}(),i.font_names="Arial/Arial, Helvetica, sans-serif;Comic Sans MS/Comic Sans MS, cursive;Courier New/Courier New, Courier, monospace;Georgia/Georgia, serif;Lucida Sans Unicode/Lucida Sans Unicode, Lucida Grande, sans-serif;Tahoma/Tahoma, Geneva, sans-serif;Times New Roman/Times New Roman, Times, serif;Trebuchet MS/Trebuchet MS, Helvetica, sans-serif;Verdana/Verdana, Geneva, sans-serif",i.font_defaultLabel="",i.font_style={element:"span",styles:{"font-family":"#(family)"},overrides:[{element:"font",attributes:{face:null}}]},i.fontSize_sizes="8/8px;9/9px;10/10px;11/11px;12/12px;14/14px;16/16px;18/18px;20/20px;22/22px;24/24px;26/26px;28/28px;36/36px;48/48px;72/72px",i.fontSize_defaultLabel="",i.fontSize_style={element:"span",styles:{"font-size":"#(size)"},overrides:[{element:"font",attributes:{size:null}}]},j.add("format",{requires:["richcombo","styles"],init:function(b){for(var c=b.config,e=b.lang.format,f=c.format_tags.split(";"),g={},h=0;h<f.length;h++){var i=f[h];g[i]=new a.style(c["format_"+i]),g[i]._.enterMode=b.config.enterMode}b.ui.addRichCombo("Format",{label:e.label,title:e.panelTitle,className:"cke_format",panel:{css:b.skin.editor.css.concat(c.contentsCss),multiSelect:!1,attributes:{"aria-label":e.panelTitle}},init:function(){this.startGroup(e.panelTitle);for(var a in g){var b=e["tag_"+a];this.add(a,g[a].buildPreview(b),b)}},onClick:function(a){b.focus(),b.fire("saveSnapshot");var c=g[a],e=new d.elementPath(b.getSelection().getStartElement());c[c.checkActive(e)?"remove":"apply"](b.document),setTimeout(function(){b.fire("saveSnapshot")},0)},onRender:function(){b.on("selectionChange",function(a){var c=this.getValue(),d=a.data.path;for(var e in g)if(g[e].checkActive(d))return void(e!=c&&this.setValue(e,b.lang.format["tag_"+e]));this.setValue("")},this)}})}}),i.format_tags="p;h1;h2;h3;h4;h5;h6;pre;address;div",i.format_p={element:"p"},i.format_div={element:"div"},i.format_pre={element:"pre"},i.format_address={element:"address"},i.format_h1={element:"h1"},i.format_h2={element:"h2"},i.format_h3={element:"h3"},i.format_h4={element:"h4"},i.format_h5={element:"h5"},i.format_h6={element:"h6"},j.add("forms",{requires:["dialog"],init:function(b){var c=b.lang;b.addCss("form{border: 1px dotted #FF0000;padding: 2px;}\n"),b.addCss("img.cke_hidden{background-image: url("+a.getUrl(this.path+"images/hiddenfield.gif")+");background-position: center center;background-repeat: no-repeat;border: 1px solid #a9a9a9;width: 16px !important;height: 16px !important;}");var d=function(d,e,f){b.addCommand(e,new a.dialogCommand(e)),b.ui.addButton(d,{label:c.common[d.charAt(0).toLowerCase()+d.slice(1)],command:e}),a.dialog.add(e,f)},e=this.path+"dialogs/";d("Form","form",e+"form.js"),d("Checkbox","checkbox",e+"checkbox.js"),d("Radio","radio",e+"radio.js"),d("TextField","textfield",e+"textfield.js"),d("Textarea","textarea",e+"textarea.js"),d("Select","select",e+"select.js"),d("Button","button",e+"button.js"),d("ImageButton","imagebutton",j.getPath("image")+"dialogs/image.js"),d("HiddenField","hiddenfield",e+"hiddenfield.js"),b.addMenuItems&&b.addMenuItems({form:{label:c.form.menu,command:"form",group:"form"},checkbox:{label:c.checkboxAndRadio.checkboxTitle,command:"checkbox",group:"checkbox"},radio:{label:c.checkboxAndRadio.radioTitle,command:"radio",group:"radio"},textfield:{label:c.textfield.title,command:"textfield",group:"textfield"},hiddenfield:{label:c.hidden.title,command:"hiddenfield",group:"hiddenfield"},imagebutton:{label:c.image.titleButton,command:"imagebutton",group:"imagebutton"},button:{label:c.button.title,command:"button",group:"button"},select:{label:c.select.title,command:"select",group:"select"},textarea:{label:c.textarea.title,command:"textarea",group:"textarea"}}),b.contextMenu&&(b.contextMenu.addListener(function(a){return a&&a.hasAscendant("form",!0)&&!a.isReadOnly()?{form:2}:void 0}),b.contextMenu.addListener(function(a){if(a&&!a.isReadOnly()){var b=a.getName();if("select"==b)return{select:2};if("textarea"==b)return{textarea:2};if("input"==b)switch(a.getAttribute("type")){case"button":case"submit":case"reset":return{button:2};case"checkbox":return{checkbox:2};case"radio":return{radio:2};case"image":return{imagebutton:2};default:return{textfield:2}}if("img"==b&&"hiddenfield"==a.data("cke-real-element-type"))return{hiddenfield:2}}})),b.on("doubleclick",function(a){var b=a.data.element;if(b.is("form"))a.data.dialog="form";else if(b.is("select"))a.data.dialog="select";else if(b.is("textarea"))a.data.dialog="textarea";else if(b.is("img")&&"hiddenfield"==b.data("cke-real-element-type"))a.data.dialog="hiddenfield";else if(b.is("input"))switch(b.getAttribute("type")){case"button":case"submit":case"reset":a.data.dialog="button";break;case"checkbox":a.data.dialog="checkbox";break;case"radio":a.data.dialog="radio";break;case"image":a.data.dialog="imagebutton";break;default:a.data.dialog="textfield"}})},afterInit:function(a){var b=a.dataProcessor,d=b&&b.htmlFilter,e=b&&b.dataFilter;c&&d&&d.addRules({elements:{input:function(a){var b=a.attributes,c=b.type;c||(b.type="text"),("checkbox"==c||"radio"==c)&&"on"==b.value&&delete b.value}}}),e&&e.addRules({elements:{input:function(b){return"hidden"==b.attributes.type?a.createFakeParserElement(b,"cke_hidden","hiddenfield"):void 0}}})},requires:["image","fakeobjects"]}),c&&(h.prototype.hasAttribute=e.override(h.prototype.hasAttribute,function(a){return function(b){{var c=this;c.$.attributes.getNamedItem(b)}if("input"==c.getName())switch(b){case"class":return c.$.className.length>0;case"checked":return!!c.$.checked;case"value":var d=c.getAttribute("type");return"checkbox"==d||"radio"==d?"on"!=c.$.value:c.$.value}return a.apply(c,arguments)}})),function(){var a={canUndo:!1,exec:function(a){var b=a.document.createElement("hr");a.insertElement(b)}},b="horizontalrule";j.add(b,{init:function(c){c.addCommand(b,a),c.ui.addButton("HorizontalRule",{label:c.lang.horizontalrule,command:b})}})}(),function(){function b(a){for(var b=a.children.length,c=a.children[b-1];c&&3==c.type&&!e.trim(c.value);)c=a.children[--b];return c}function d(a){var b=a.parent;return b?e.indexOf(b.children,a):-1}function g(a,d){var e=a.children,f=b(a);f&&(!d&&c||1!=f.type||"br"!=f.name||e.pop(),3==f.type&&z.test(f.value)&&e.pop())}function k(a,d,e){if(!d&&(!e||"function"==typeof e&&e(a)===!1))return!1;if(d&&c&&(document.documentMode>7||a.name in f.tr||a.name in f.$listItem))return!1;var g=b(a);return!g||g&&(1==g.type&&"br"==g.name||"form"==a.name&&"input"==g.name)}function l(b,d){return function(e){g(e,!b),k(e,!b,d)&&e.add(b||c?new a.htmlParser.text(" "):new a.htmlParser.element("br",{}))}}function m(a){var b=a.attributes;"false"!=b.contenteditable&&(b["data-cke-editable"]=b.contenteditable?"true":1),b.contenteditable="false"}function n(a){var b=a.attributes;switch(b["data-cke-editable"]){case"true":b.contenteditable="true";break;case"1":delete b.contenteditable}}function o(b){return b.replace(I,function(b,c,d){return"<"+c+d.replace(J,function(b,c){return/^on/.test(c)||-1!=d.indexOf("data-cke-saved-"+c)?b:" data-cke-saved-"+b+" data-cke-"+a.rnd+"-"+b})+">"})}function p(a){return a.replace(K,function(a){return"<cke:encoded>"+encodeURIComponent(a)+"</cke:encoded>"})}function q(a){return a.replace(L,function(a,b){return decodeURIComponent(b)})}function r(a){return a.replace(M,"$1cke:$2")}function s(a){return a.replace(N,"$1$2")}function t(a){return a.replace(O,"<cke:$1$2></cke:$1>")}function u(a){return a.replace(/(<pre\b[^>]*>)(\r\n|\n)/g,"$1$2$2")}function v(a){return a.replace(/<!--(?!{cke_protected})[\s\S]+?-->/g,function(a){return"<!--"+A+"{C}"+encodeURIComponent(a).replace(/--/g,"%2D%2D")+"-->"})}function w(a){return a.replace(/<!--\{cke_protected\}\{C\}([\s\S]+?)-->/g,function(a,b){return decodeURIComponent(b)})}function x(a,b){var c=b._.dataStore;return a.replace(/<!--\{cke_protected\}([\s\S]+?)-->/g,function(a,b){return decodeURIComponent(b)}).replace(/\{cke_protected_(\d+)\}/g,function(a,b){return c&&c[b]||""})}function y(a,b){var c=[],d=b.config.protectedSource,e=b._.dataStore||(b._.dataStore={id:1}),f=/<\!--\{cke_temp(comment)?\}(\d*?)-->/g,g=[/<script[\s\S]*?<\/script>/gi,/<noscript[\s\S]*?<\/noscript>/gi].concat(d);a=a.replace(/<!--[\s\S]*?-->/g,function(a){return"<!--{cke_tempcomment}"+(c.push(a)-1)+"-->"});for(var h=0;h<g.length;h++)a=a.replace(g[h],function(a){return a=a.replace(f,function(a,b,d){return c[d]}),/cke_temp(comment)?/.test(a)?a:"<!--{cke_temp}"+(c.push(a)-1)+"-->"});return a=a.replace(f,function(a,b,d){return"<!--"+A+(b?"{C}":"")+encodeURIComponent(c[d]).replace(/--/g,"%2D%2D")+"-->"}),a.replace(/(['"]).*?\1/g,function(a){return a.replace(/<!--\{cke_protected\}([\s\S]+?)-->/g,function(a,b){return e[e.id]=decodeURIComponent(b),"{cke_protected_"+e.id++ +"}"})})}var z=/^[\t\r\n ]*(?:&nbsp;|\xa0)$/,A="{cke_protected}",B=f,C=["caption","colgroup","col","thead","tfoot","tbody"],D=e.extend({},B.$block,B.$listItem,B.$tableContent);for(var E in D)"br"in B[E]||delete D[E];delete D.pre;var F={elements:{},attributeNames:[[/^on/,"data-cke-pa-on"]]},G={elements:{}};for(E in D)G.elements[E]=l();var H={elementNames:[[/^cke:/,""],[/^\?xml:namespace$/,""]],attributeNames:[[/^data-cke-(saved|pa)-/,""],[/^data-cke-.*/,""],["hidefocus",""]],elements:{$:function(a){var b=a.attributes;if(b){if(b["data-cke-temp"])return!1;for(var c,d=["name","href","src"],e=0;e<d.length;e++)c="data-cke-saved-"+d[e],c in b&&delete b[d[e]]}return a},table:function(a){var b=a.children.slice(0);b.sort(function(a,b){var c,f;return 1==a.type&&b.type==a.type&&(c=e.indexOf(C,a.name),f=e.indexOf(C,b.name)),c>-1&&f>-1&&c!=f||(c=d(a),f=d(b)),c>f?1:-1})},embed:function(a){var b=a.parent;if(b&&"object"==b.name){var c=b.attributes.width,d=b.attributes.height;c&&(a.attributes.width=c),d&&(a.attributes.height=d)}},param:function(a){return a.children=[],a.isEmpty=!0,a},a:function(a){return a.children.length||a.attributes.name||a.attributes["data-cke-saved-name"]?void 0:!1},span:function(a){"Apple-style-span"==a.attributes["class"]&&delete a.name},pre:function(a){c&&g(a)},html:function(a){delete a.attributes.contenteditable,delete a.attributes["class"]},body:function(a){delete a.attributes.spellcheck,delete a.attributes.contenteditable},style:function(a){var b=a.children[0];b&&b.value&&(b.value=e.trim(b.value)),a.attributes.type||(a.attributes.type="text/css")},title:function(a){var b=a.children[0];b&&(b.value=a.attributes["data-cke-title"]||"")}},attributes:{"class":function(a,b){return e.ltrim(a.replace(/(?:^|\s+)cke_[^\s]*/g,""))||!1}}};c&&(H.attributes.style=function(a,b){return a.replace(/(^|;)([^\:]+)/g,function(a){return a.toLowerCase()})});for(E in{input:1,textarea:1})F.elements[E]=m,H.elements[E]=n;var I=/<(a|area|img|input|source)\b([^>]*)>/gi,J=/\b(on\w+|href|src|name)\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|(?:[^ "'>]+))/gi,K=/(?:<style(?=[ >])[^>]*>[\s\S]*<\/style>)|(?:<(:?link|meta|base)[^>]*>)/gi,L=/<cke:encoded>([^<]*)<\/cke:encoded>/gi,M=/(<\/?)((?:object|embed|param|html|body|head|title)[^>]*>)/gi,N=/(<\/?)cke:((?:html|body|head|title)[^>]*>)/gi,O=/<cke:(param|embed)([^>]*?)\/?>(?!\s*<\/cke:\1)/gi;j.add("htmldataprocessor",{requires:["htmlwriter"],init:function(b){var c=b.dataProcessor=new a.htmlDataProcessor(b);c.writer.forceSimpleAmpersand=b.config.forceSimpleAmpersand,c.dataFilter.addRules(F),c.dataFilter.addRules(G),c.htmlFilter.addRules(H);var d={elements:{}};for(E in D)d.elements[E]=l(!0,b.config.fillEmptyBlocks);c.htmlFilter.addRules(d)},onLoad:function(){!("fillEmptyBlocks"in i)&&(i.fillEmptyBlocks=1)}}),a.htmlDataProcessor=function(b){var c=this;c.editor=b,c.writer=new a.htmlWriter,c.dataFilter=new a.htmlParser.filter,c.htmlFilter=new a.htmlParser.filter},a.htmlDataProcessor.prototype={toHtml:function(b,c){b=y(b,this.editor),b=o(b),b=p(b),b=r(b),b=t(b),b=u(b);var d=new h("div");d.setHtml("a"+b),b=d.getHtml().substr(1),b=b.replace(new RegExp(" data-cke-"+a.rnd+"-","ig")," "),b=s(b),b=q(b),b=w(b);var e=a.htmlParser.fragment.fromHtml(b,c),f=new a.htmlParser.basicWriter;return e.writeHtml(f,this.dataFilter),b=f.getHtml(!0),b=v(b)},toDataFormat:function(b,c){var d=this.writer,e=a.htmlParser.fragment.fromHtml(b,c);d.reset(),e.writeHtml(d,this.htmlFilter);var f=d.getHtml(!0);return f=w(f),f=x(f,this.editor)}}}(),function(){j.add("iframe",{requires:["dialog","fakeobjects"],init:function(b){var c="iframe",d=b.lang.iframe;a.dialog.add(c,this.path+"dialogs/iframe.js"),b.addCommand(c,new a.dialogCommand(c)),b.addCss("img.cke_iframe{background-image: url("+a.getUrl(this.path+"images/placeholder.png")+");background-position: center center;background-repeat: no-repeat;border: 1px solid #a9a9a9;width: 80px;height: 80px;}"),b.ui.addButton("Iframe",{label:d.toolbar,command:c}),b.on("doubleclick",function(a){var b=a.data.element;b.is("img")&&"iframe"==b.data("cke-real-element-type")&&(a.data.dialog="iframe")}),b.addMenuItems&&b.addMenuItems({iframe:{label:d.title,command:"iframe",group:"image"}}),b.contextMenu&&b.contextMenu.addListener(function(a,b){return a&&a.is("img")&&"iframe"==a.data("cke-real-element-type")?{iframe:2}:void 0})},afterInit:function(a){var b=a.dataProcessor,c=b&&b.dataFilter;c&&c.addRules({elements:{iframe:function(b){return a.createFakeParserElement(b,"cke_iframe","iframe",!0)}}})}})}(),function(){function b(a,b){if(!b){var c=a.getSelection();b=3==c.getType()&&c.getSelectedElement()}return b&&b.is("img")&&!b.data("cke-realelement")&&!b.isReadOnly()?b:void 0}function c(a){var b=a.getStyle("float");return("inherit"==b||"none"==b)&&(b=0),b||(b=a.getAttribute("align")),b}j.add("image",{requires:["dialog"],init:function(c){var d="image";a.dialog.add(d,this.path+"dialogs/image.js"),c.addCommand(d,new a.dialogCommand(d)),c.ui.addButton("Image",{label:c.lang.common.image,command:d}),c.on("doubleclick",function(a){var b=a.data.element;!b.is("img")||b.data("cke-realelement")||b.isReadOnly()||(a.data.dialog="image")}),c.addMenuItems&&c.addMenuItems({image:{label:c.lang.image.menu,command:"image",group:"image"}}),c.contextMenu&&c.contextMenu.addListener(function(a,d){return b(c,a)?{image:2}:void 0})},afterInit:function(a){function d(d){var e=a.getCommand("justify"+d);e&&(("left"==d||"right"==d)&&e.on("exec",function(e){var f,g=b(a);g&&(f=c(g),f==d?(g.removeStyle("float"),d==c(g)&&g.removeAttribute("align")):g.setStyle("float",d),e.cancel())}),e.on("refresh",function(e){var f,g=b(a);g&&(f=c(g),this.setState(f==d?1:"right"==d||"left"==d?2:0),e.cancel())}))}d("left"),d("right"),d("center"),d("block")}})}(),i.image_removeLinkByEmptyURL=!0,function(){function a(a){var b=this;if(a.editor.readOnly)return null;var c=a.editor,d=a.data.path,e=d&&d.contains(k),f=d.block||d.blockLimit;if(e)return b.setState(2);if(!b.useIndentClasses&&"indent"==b.name)return b.setState(2);if(!f)return b.setState(0);if(b.useIndentClasses){var h=f.$.className.match(b.classNameRegex),i=0;return h&&(h=h[1],i=b.indentClassMap[h]),b.setState("outdent"==b.name&&!i||"indent"==b.name&&i==c.config.indentClasses.length?0:2)}var j=parseInt(f.getStyle(g(f)),10);return isNaN(j)&&(j=0),b.setState(0>=j?0:2)}function f(a,b){var c=this;if(c.name=b,c.useIndentClasses=a.config.indentClasses&&a.config.indentClasses.length>0,c.useIndentClasses){c.classNameRegex=new RegExp("(?:^|\\s+)("+a.config.indentClasses.join("|")+")(?=$|\\s)"),c.indentClassMap={};for(var d=0;d<a.config.indentClasses.length;d++)c.indentClassMap[a.config.indentClasses[d]]=d+1}c.startDisabled="outdent"==b}function g(a,b){return"ltr"==(b||a.getComputedStyle("direction"))?"margin-left":"margin-right"}function i(a){return 1==a.type&&a.is("li")}var k={ol:1,ul:1},l=d.walker.whitespaces(!0),m=d.walker.bookmark(!1,!0);f.prototype={exec:function(a){function b(b){for(var d=o.startContainer,e=o.endContainer;d&&!d.getParent().equals(b);)d=d.getParent();for(;e&&!e.getParent().equals(b);)e=e.getParent();if(d&&e){for(var f=d,g=[],i=!1;!i;)f.equals(e)&&(i=!0),g.push(f),f=f.getNext();if(!(g.length<1)){for(var n=b.getParents(!0),r=0;r<n.length;r++)if(n[r].getName&&k[n[r].getName()]){b=n[r];break}var s="indent"==p.name?1:-1,t=g[0],u=g[g.length-1],v=j.list.listToArray(b,q),w=v[u.getCustomData("listarray_index")].indent;for(r=t.getCustomData("listarray_index");r<=u.getCustomData("listarray_index");r++)if(v[r].indent+=s,s>0){var x=v[r].parent;v[r].parent=new h(x.getName(),x.getDocument())}for(r=u.getCustomData("listarray_index")+1;r<v.length&&v[r].indent>w;r++)v[r].indent+=s;var y=j.list.arrayToList(v,q,null,a.config.enterMode,b.getDirection());if("outdent"==p.name){var z;if((z=b.getParent())&&z.is("li")){var A,B=y.listNode.getChildren(),C=[],D=B.count();for(r=D-1;r>=0;r--)(A=B.getItem(r))&&A.is&&A.is("li")&&C.push(A)}}if(y&&y.listNode.replace(b),C&&C.length)for(r=0;r<C.length;r++){for(var E=C[r],F=E;(F=F.getNext())&&F.is&&F.getName()in k;)c&&!E.getFirst(function(a){return l(a)&&m(a)})&&E.append(o.document.createText(" ")),E.append(F);E.insertAfter(z)}}}}function f(){var b=o.createIterator(),c=a.config.enterMode;b.enforceRealBlocks=!0,b.enlargeBr=2!=c;for(var d;d=b.getNextParagraph(1==c?"p":"div");)n(d)}function n(b,c){if(b.getCustomData("indent_processed"))return!1;if(p.useIndentClasses){var d=b.$.className.match(p.classNameRegex),f=0;if(d&&(d=d[1],f=p.indentClassMap[d]),"outdent"==p.name?f--:f++,0>f)return!1;f=Math.min(f,a.config.indentClasses.length),f=Math.max(f,0),b.$.className=e.ltrim(b.$.className.replace(p.classNameRegex,"")),f>0&&b.addClass(a.config.indentClasses[f-1])}else{var i=g(b,c),j=parseInt(b.getStyle(i),10);isNaN(j)&&(j=0);var k=a.config.indentOffset||40;if(j+=("indent"==p.name?1:-1)*k,0>j)return!1;j=Math.max(j,0),j=Math.ceil(j/k)*k,b.setStyle(i,j?j+(a.config.indentUnit||"px"):""),""===b.getAttribute("style")&&b.removeAttribute("style")}return h.setMarker(q,b,"indent_processed",1),!0}for(var o,p=this,q={},r=a.getSelection(),s=r.createBookmarks(1),t=r&&r.getRanges(1),u=t.createIterator();o=u.getNextRange();){for(var v=o.getCommonAncestor(),w=v;w&&(1!=w.type||!k[w.getName()]);)w=w.getParent();if(!w){var x=o.getEnclosedNode();x&&1==x.type&&x.getName()in k&&(o.setStartAt(x,1),o.setEndAt(x,2),w=x)}if(w&&1==o.startContainer.type&&o.startContainer.getName()in k){var y=new d.walker(o);y.evaluator=i,o.startContainer=y.next()}if(w&&1==o.endContainer.type&&o.endContainer.getName()in k&&(y=new d.walker(o),y.evaluator=i,o.endContainer=y.previous()),w){var z=w.getFirst(i),A=!!z.getNext(i),B=o.startContainer,C=z.equals(B)||z.contains(B);C&&("indent"==p.name||p.useIndentClasses||parseInt(w.getStyle(g(w)),10))&&n(w,!A&&z.getDirection())||b(w)}else f()}h.clearAllMarkers(q),a.forceNextSelectionCheck(),r.selectBookmarks(s)}},j.add("indent",{init:function(c){var g=c.addCommand("indent",new f(c,"indent")),h=c.addCommand("outdent",new f(c,"outdent"));c.ui.addButton("Indent",{label:c.lang.indent,command:"indent"}),c.ui.addButton("Outdent",{label:c.lang.outdent,command:"outdent"}),c.on("selectionChange",e.bind(a,g)),c.on("selectionChange",e.bind(a,h)),(b.ie6Compat||b.ie7Compat)&&c.addCss("ul,ol{	margin-left: 0px;	padding-left: 40px;}"),c.on("dirChanged",function(a){var b=new d.range(c.document);b.setStartBefore(a.data.node),b.setEndAfter(a.data.node);for(var e,f=new d.walker(b);e=f.next();)if(1==e.type){if(!e.equals(a.data.node)&&e.getDirection()){b.setStartAfter(e),f=new d.walker(b);continue}var g=c.config.indentClasses;if(g)for(var h="ltr"==a.data.dir?["_rtl",""]:["","_rtl"],i=0;i<g.length;i++)e.hasClass(g[i]+h[0])&&(e.removeClass(g[i]+h[0]),e.addClass(g[i]+h[1]));var j=e.getStyle("margin-right"),k=e.getStyle("margin-left");j?e.setStyle("margin-left",j):e.removeStyle("margin-left"),k?e.setStyle("margin-right",k):e.removeStyle("margin-right")}})},requires:["domiterator","list"]})}(),function(){function a(a,b){b=void 0===b||b;var c;if(b)c=a.getComputedStyle("text-align");else{for(;!a.hasAttribute||!a.hasAttribute("align")&&!a.getStyle("text-align");){var d=a.getParent();if(!d)break;a=d}c=a.getStyle("text-align")||a.getAttribute("align")||""}return c&&(c=c.replace(/(?:-(?:moz|webkit)-)?(?:start|auto)/i,"")),!c&&b&&(c="rtl"==a.getComputedStyle("direction")?"right":"left"),c}function b(a){a.editor.readOnly||a.editor.getCommand(this.name).refresh(a.data.path)}function c(a,b,c){var d=this;d.editor=a,d.name=b,d.value=c;var e=a.config.justifyClasses;if(e){switch(c){case"left":d.cssClassName=e[0];break;case"center":d.cssClassName=e[1];break;case"right":d.cssClassName=e[2];break;case"justify":d.cssClassName=e[3]}d.cssClassRegex=new RegExp("(?:^|\\s+)(?:"+e.join("|")+")(?=$|\\s)")}}function f(a){var b=a.editor,c=new d.range(b.document);c.setStartBefore(a.data.node),c.setEndAfter(a.data.node);for(var e,f=new d.walker(c);e=f.next();)if(1==e.type){if(!e.equals(a.data.node)&&e.getDirection()){c.setStartAfter(e),f=new d.walker(c);continue}var g=b.config.justifyClasses;g&&(e.hasClass(g[0])?(e.removeClass(g[0]),e.addClass(g[2])):e.hasClass(g[2])&&(e.removeClass(g[2]),e.addClass(g[0])));var h="text-align",i=e.getStyle(h);"left"==i?e.setStyle(h,"right"):"right"==i&&e.setStyle(h,"left")}}c.prototype={exec:function(b){var c=this,d=b.getSelection(),f=b.config.enterMode;if(d){var g,h,i=d.createBookmarks(),j=d.getRanges(!0),k=c.cssClassName,l=b.config.useComputedState;l=void 0===l||l;for(var m=j.length-1;m>=0;m--)for(g=j[m].createIterator(),g.enlargeBr=2!=f;h=g.getNextParagraph(1==f?"p":"div");){h.removeAttribute("align"),h.removeStyle("text-align");var n=k&&(h.$.className=e.ltrim(h.$.className.replace(c.cssClassRegex,""))),o=2==c.state&&(!l||a(h,!0)!=c.value);k?o?h.addClass(k):n||h.removeAttribute("class"):o&&h.setStyle("text-align",c.value)}b.focus(),b.forceNextSelectionCheck(),d.selectBookmarks(i)}},refresh:function(b){var c=b.block||b.blockLimit;this.setState("body"!=c.getName()&&a(c,this.editor.config.useComputedState)==this.value?1:2)}},j.add("justify",{init:function(a){var d=new c(a,"justifyleft","left"),g=new c(a,"justifycenter","center"),h=new c(a,"justifyright","right"),i=new c(a,"justifyblock","justify");a.addCommand("justifyleft",d),a.addCommand("justifycenter",g),a.addCommand("justifyright",h),a.addCommand("justifyblock",i),a.ui.addButton("JustifyLeft",{label:a.lang.justify.left,command:"justifyleft"}),a.ui.addButton("JustifyCenter",{label:a.lang.justify.center,command:"justifycenter"}),a.ui.addButton("JustifyRight",{label:a.lang.justify.right,command:"justifyright"}),a.ui.addButton("JustifyBlock",{label:a.lang.justify.block,command:"justifyblock"}),a.on("selectionChange",e.bind(b,d)),a.on("selectionChange",e.bind(b,h)),a.on("selectionChange",e.bind(b,g)),a.on("selectionChange",e.bind(b,i)),a.on("dirChanged",f)},requires:["domiterator"]})}(),j.add("keystrokes",{beforeInit:function(b){b.keystrokeHandler=new a.keystrokeHandler(b),b.specialKeys={}},init:function(a){for(var b=a.config.keystrokes,c=a.config.blockedKeystrokes,d=a.keystrokeHandler.keystrokes,e=a.keystrokeHandler.blockedKeystrokes,f=0;f<b.length;f++)d[b[f][0]]=b[f][1];for(f=0;f<c.length;f++)e[c[f]]=1}}),a.keystrokeHandler=function(a){var b=this;return a.keystrokeHandler?a.keystrokeHandler:(b.keystrokes={},b.blockedKeystrokes={},b._={editor:a},b)},function(){var c,d=function(a){a=a.data;var b=a.getKeystroke(),d=this.keystrokes[b],e=this._.editor;if(c=e.fire("key",{keyCode:b})===!0,!c){if(d){var f={from:"keystrokeHandler"};c=e.execCommand(d,f)!==!1}if(!c){var g=e.specialKeys[b];c=g&&g(e)===!0,c||(c=!!this.blockedKeystrokes[b])}}return c&&a.preventDefault(!0),!c},e=function(a){c&&(c=!1,a.data.preventDefault(!0))};a.keystrokeHandler.prototype={attach:function(a){a.on("keydown",d,this),(b.opera||b.gecko&&b.mac)&&a.on("keypress",e,this)}}}(),i.blockedKeystrokes=[1114178,1114185,1114197],i.keystrokes=[[4456569,"toolbarFocus"],[4456570,"elementsPathFocus"],[2228345,"contextMenu"],[3342457,"contextMenu"],[1114202,"undo"],[1114201,"redo"],[3342426,"redo"],[1114188,"link"],[1114178,"bold"],[1114185,"italic"],[1114197,"underline"],[4456448+(c||b.webkit?189:109),"toolbarCollapse"],[4456496,"a11yHelp"]],j.add("link",{requires:["fakeobjects","dialog"],init:function(d){d.addCommand("link",new a.dialogCommand("link")),d.addCommand("anchor",new a.dialogCommand("anchor")),d.addCommand("unlink",new a.unlinkCommand),d.addCommand("removeAnchor",new a.removeAnchorCommand),d.ui.addButton("Link",{label:d.lang.link.toolbar,command:"link"}),d.ui.addButton("Unlink",{label:d.lang.unlink,command:"unlink"}),d.ui.addButton("Anchor",{label:d.lang.anchor.toolbar,command:"anchor"}),a.dialog.add("link",this.path+"dialogs/link.js"),a.dialog.add("anchor",this.path+"dialogs/anchor.js");var e="rtl"==d.lang.dir?"right":"left",f="background:url("+a.getUrl(this.path+"images/anchor.gif")+") no-repeat "+e+" center;border:1px dotted #00f;";d.addCss("a.cke_anchor,a.cke_anchor_empty"+(c&&b.version<7?"":",a[name],a[data-cke-saved-name]")+"{"+f+"padding-"+e+":18px;cursor:auto;}"+(c?"a.cke_anchor_empty{display:inline-block;}":"")+"img.cke_anchor{"+f+"width:16px;min-height:15px;height:1.15em;vertical-align:"+(b.opera?"middle":"text-bottom")+";}"),d.on("selectionChange",function(a){if(!d.readOnly){var b=d.getCommand("unlink"),c=a.data.path.lastElement&&a.data.path.lastElement.getAscendant("a",!0);b.setState(c&&"a"==c.getName()&&c.getAttribute("href")&&c.getChildCount()?2:0)}}),d.on("doubleclick",function(a){var b=j.link.getSelectedLink(d)||a.data.element;b.isReadOnly()||(b.is("a")?(a.data.dialog=!b.getAttribute("name")||b.getAttribute("href")&&b.getChildCount()?"link":"anchor",d.getSelection().selectElement(b)):j.link.tryRestoreFakeAnchor(d,b)&&(a.data.dialog="anchor"))}),d.addMenuItems&&d.addMenuItems({anchor:{label:d.lang.anchor.menu,command:"anchor",group:"anchor",order:1},removeAnchor:{label:d.lang.anchor.remove,command:"removeAnchor",group:"anchor",order:5},link:{label:d.lang.link.menu,command:"link",group:"link",order:1},unlink:{label:d.lang.unlink,command:"unlink",group:"link",order:5}}),d.contextMenu&&d.contextMenu.addListener(function(a,b){if(!a||a.isReadOnly())return null;var c=j.link.tryRestoreFakeAnchor(d,a);if(!c&&!(c=j.link.getSelectedLink(d)))return null;var e={};return c.getAttribute("href")&&c.getChildCount()&&(e={link:2,unlink:2}),c&&c.hasAttribute("name")&&(e.anchor=e.removeAnchor=2),e})},afterInit:function(a){var b=a.dataProcessor,c=b&&b.dataFilter,d=b&&b.htmlFilter,e=a._.elementsPath&&a._.elementsPath.filters;c&&c.addRules({elements:{a:function(b){var c=b.attributes;if(!c.name)return null;var d=!b.children.length;if(j.link.synAnchorSelector){var e=d?"cke_anchor_empty":"cke_anchor",f=c["class"];c.name&&(!f||f.indexOf(e)<0)&&(c["class"]=(f||"")+" "+e),d&&j.link.emptyAnchorFix&&(c.contenteditable="false",c["data-cke-editable"]=1)}else if(j.link.fakeAnchor&&d)return a.createFakeParserElement(b,"cke_anchor","anchor");return null}}}),j.link.emptyAnchorFix&&d&&d.addRules({elements:{a:function(a){delete a.attributes.contenteditable}}}),e&&e.push(function(b,c){return"a"!=c||!j.link.tryRestoreFakeAnchor(a,b)&&(!b.getAttribute("name")||b.getAttribute("href")&&b.getChildCount())?void 0:"anchor"})}}),j.link={getSelectedLink:function(a){try{var b=a.getSelection();if(3==b.getType()){var c=b.getSelectedElement();if(c.is("a"))return c}var d=b.getRanges(!0)[0];d.shrink(2);var e=d.getCommonAncestor();return e.getAscendant("a",!0)}catch(f){return null}},fakeAnchor:b.opera||b.webkit,synAnchorSelector:c,emptyAnchorFix:c&&b.version<8,tryRestoreFakeAnchor:function(a,b){if(b&&b.data("cke-real-element-type")&&"anchor"==b.data("cke-real-element-type")){var c=a.restoreRealElement(b);if(c.data("cke-saved-name"))return c}}},a.unlinkCommand=function(){},a.unlinkCommand.prototype={exec:function(a){for(var b,c,d=a.getSelection(),e=d.createBookmarks(),f=d.getRanges(),g=0;g<f.length;g++)b=f[g].getCommonAncestor(!0),c=b.getAscendant("a",!0),c&&f[g].selectNodeContents(c);d.selectRanges(f),a.document.$.execCommand("unlink",!1,null),d.selectBookmarks(e)},startDisabled:!0},a.removeAnchorCommand=function(){},a.removeAnchorCommand.prototype={exec:function(a){var b,c=a.getSelection(),d=c.createBookmarks();c&&(b=c.getSelectedElement())&&(j.link.fakeAnchor&&!b.getChildCount()?j.link.tryRestoreFakeAnchor(a,b):b.is("a"))?b.remove(1):(b=j.link.getSelectedLink(a))&&(b.hasAttribute("href")?(b.removeAttributes({name:1,"data-cke-saved-name":1}),b.removeClass("cke_anchor")):b.remove(1)),c.selectBookmarks(d)}},e.extend(i,{linkShowAdvancedTab:!0,linkShowTargetTab:!0}),function(){function b(a){var b,c,d;if(b=a.getDirection()){for(c=a.getParent();c&&!(d=c.getDirection());)c=c.getParent();b==d&&a.removeAttribute("dir")}}function g(a,b){var c=a.getAttribute("style");

c&&b.setAttribute("style",c.replace(/([^;])$/,"$1;")+(b.getAttribute("style")||""))}function i(a){if(a.editor.readOnly)return null;var b,c,d=a.data.path,e=d.blockLimit,f=d.elements;for(c=0;c<f.length&&(b=f[c])&&!b.equals(e);c++)if(v[f[c].getName()])return this.setState(this.type==f[c].getName()?1:2);return this.setState(2)}function k(a,b,c,d){for(var e=j.list.listToArray(b.root,c),f=[],g=0;g<b.contents.length;g++){var i=b.contents[g];i=i.getAscendant("li",!0),i&&!i.getCustomData("list_item_processed")&&(f.push(i),h.setMarker(c,i,"list_item_processed",!0))}var k,l,m=b.root,n=m.getDocument();for(g=0;g<f.length;g++){var o=f[g].getCustomData("listarray_index");k=e[o].parent,k.is(this.type)||(l=n.createElement(this.type),k.copyAttributes(l,{start:1,type:1}),l.removeStyle("list-style-type"),e[o].parent=l)}var p,q=j.list.arrayToList(e,c,null,a.config.enterMode),r=q.listNode.getChildCount();for(g=0;r>g&&(p=q.listNode.getChild(g));g++)p.getName()==this.type&&d.push(p);q.listNode.replace(b.root)}function l(a,b,c){var d=b.contents,e=b.root.getDocument(),f=[];if(1==d.length&&d[0].equals(b.root)){var g=e.createElement("div");d[0].moveChildren&&d[0].moveChildren(g),d[0].append(g),d[0]=g}for(var h=b.contents[0].getParent(),i=0;i<d.length;i++)h=h.getCommonAncestor(d[i].getParent());var j,k,l=a.config.useComputedState;for(l=void 0===l||l,i=0;i<d.length;i++)for(var m,n=d[i];m=n.getParent();){if(m.equals(h)){f.push(n),!k&&n.getDirection()&&(k=1);var o=n.getDirection(l);null!==j&&(j=j&&j!=o?null:o);break}n=m}if(!(f.length<1)){var p=f[f.length-1].getNext(),q=e.createElement(this.type);c.push(q);for(var r,s;f.length;)r=f.shift(),s=e.createElement("li"),r.is("pre")||A.test(r.getName())?r.appendTo(s):(r.copyAttributes(s),j&&r.getDirection()&&(s.removeStyle("direction"),s.removeAttribute("dir")),r.moveChildren(s),r.remove()),s.appendTo(q);j&&k&&q.setAttribute("dir",j),p?q.insertBefore(p):q.appendTo(h)}}function m(a,b,c){function e(c){!(p=s[c?"getFirst":"getLast"]())||p.is&&p.isBlockBoundary()||!(q=b.root[c?"getPrevious":"getNext"](d.walker.whitespaces(!0)))||q.is&&q.isBlockBoundary({br:1})||a.document.createElement("br")[c?"insertBefore":"insertAfter"](p)}for(var f=j.list.listToArray(b.root,c),g=[],i=0;i<b.contents.length;i++){var k=b.contents[i];k=k.getAscendant("li",!0),k&&!k.getCustomData("list_item_processed")&&(g.push(k),h.setMarker(c,k,"list_item_processed",!0))}var l=null;for(i=0;i<g.length;i++){var m=g[i].getCustomData("listarray_index");f[m].indent=-1,l=m}for(i=l+1;i<f.length;i++)if(f[i].indent>f[i-1].indent+1){for(var n=f[i-1].indent+1-f[i].indent,o=f[i].indent;f[i]&&f[i].indent>=o;)f[i].indent+=n,i++;i--}var p,q,r=j.list.arrayToList(f,c,null,a.config.enterMode,b.root.getAttribute("dir")),s=r.listNode;e(!0),e(),s.replace(b.root)}function n(a,b){this.name=a,this.type=b}function o(a,b,c,d){for(var e,f;e=a[d?"getLast":"getFirst"](B);)(f=e.getDirection(1))!==b.getDirection(1)&&e.setAttribute("dir",f),e.remove(),c?e[d?"insertBefore":"insertAfter"](c):b.append(e,d)}function p(a){var b;(b=function(b){var c=a[b?"getPrevious":"getNext"](y);c&&1==c.type&&c.is(a.getName())&&(o(a,c,null,!b),a.remove(),a=c)})(),b(1)}function q(a,b){for(var c,d=a.children,e=d.length,f=0;e>f;f++)if(c=d[f],c.name&&c.name in b)return f;return e}function r(b){return function(d){var e,f=d.children,g=q(d,C.$list),h=f[g],i=h&&h.previous;if(i&&(i.name&&"br"==i.name||i.value&&(e=i.value.match(D)))){var j=i;e&&e.index||j!=f[0]?"br"==j.name?f.splice(g-1,1):j.value=j.value.replace(D,""):f[0]=b||c?new a.htmlParser.text(" "):new a.htmlParser.element("br",{})}}}function s(a){return 1==a.type&&(a.getName()in f.$block||a.getName()in f.$listItem)&&f[a.getName()]["#"]}function t(a,b,c){a.fire("saveSnapshot"),c.enlarge(3);var e=c.extractContents();b.trim(!1,!0);var g,h=b.createBookmark(),i=new d.elementPath(b.startContainer),j=i.block,k=i.lastElement.getAscendant("li",1)||j,l=new d.elementPath(c.startContainer),m=l.contains(f.$listItem),n=l.contains(f.$list);if(j){var q=j.getBogus();q&&q.remove()}else n&&(g=n.getPrevious(y),g&&z(g)&&g.remove());g=e.getLast(),g&&1==g.type&&g.is("br")&&g.remove();var r=b.startContainer.getChild(b.startOffset);if(r?e.insertBefore(r):b.startContainer.append(e),m){var s=u(m);s&&(k.contains(m)?(o(s,m.getParent(),m),s.remove()):k.append(s))}for(;c.checkStartOfBlock()&&c.checkEndOfBlock();){l=new d.elementPath(c.startContainer);var t,v=l.block;v.is("li")&&(t=v.getParent(),v.equals(t.getLast(y))&&v.equals(t.getFirst(y))&&(v=t)),c.moveToPosition(v,3),v.remove()}var w=c.clone(),x=a.document.getBody();w.setEndAt(x,2);var A=new d.walker(w);A.evaluator=function(a){return y(a)&&!z(a)};var B=A.next();B&&1==B.type&&B.getName()in f.$list&&p(B),b.moveToBookmark(h),b.select(),a.selectionChange(1),a.fire("saveSnapshot")}function u(a){var b=a.getLast(y);return b&&1==b.type&&b.getName()in v?b:null}var v={ol:1,ul:1},w=d.walker.whitespaces(),x=d.walker.bookmark(),y=function(a){return!(w(a)||x(a))},z=d.walker.bogus();j.list={listToArray:function(a,b,c,d,e){if(!v[a.getName()])return[];d||(d=0),c||(c=[]);for(var g=0,i=a.getChildCount();i>g;g++){var k=a.getChild(g);if(1==k.type&&k.getName()in f.$list&&j.list.listToArray(k,b,c,d+1),"li"==k.$.nodeName.toLowerCase()){var l={parent:a,indent:d,element:k,contents:[]};e?l.grandparent=e:(l.grandparent=a.getParent(),l.grandparent&&"li"==l.grandparent.$.nodeName.toLowerCase()&&(l.grandparent=l.grandparent.getParent())),b&&h.setMarker(b,k,"listarray_index",c.length),c.push(l);for(var m,n=0,o=k.getChildCount();o>n;n++)m=k.getChild(n),1==m.type&&v[m.getName()]?j.list.listToArray(m,b,c,d+1,l.grandparent):l.contents.push(m)}}return c},arrayToList:function(a,e,i,k,l){if(i||(i=0),!a||a.length<i+1)return null;for(var m,n,o,p=a[i].parent.getDocument(),q=new d.documentFragment(p),r=null,s=i,t=Math.max(a[i].indent,0),u=null,w=1==k?"p":"div";;){var x=a[s],z=x.grandparent;if(n=x.element.getDirection(1),x.indent==t){for(r&&a[s].parent.getName()==r.getName()||(r=a[s].parent.clone(!1,1),l&&r.setAttribute("dir",l),q.append(r)),u=r.append(x.element.clone(0,1)),n!=r.getDirection(1)&&u.setAttribute("dir",n),m=0;m<x.contents.length;m++)u.append(x.contents[m].clone(1,1));s++}else if(x.indent==Math.max(t,0)+1){var A=a[s-1].element.getDirection(1),B=j.list.arrayToList(a,null,s,k,A!=n?n:null);u.getChildCount()||!c||p.$.documentMode>7||u.append(p.createText(" ")),u.append(B.listNode),s=B.nextIndex}else{if(-1!=x.indent||i||!z)return null;v[z.getName()]?(u=x.element.clone(!1,!0),n!=z.getDirection(1)&&u.setAttribute("dir",n)):u=new d.documentFragment(p);var C,D=z.getDirection(1)!=n,E=x.element,F=E.getAttribute("class"),G=E.getAttribute("style"),H=11==u.type&&(2!=k||D||G||F),I=x.contents.length;for(m=0;I>m;m++)C=x.contents[m],1==C.type&&C.isBlockBoundary()?(D&&!C.getDirection()&&C.setAttribute("dir",n),g(E,C),F&&C.addClass(F)):H&&(o||(o=p.createElement(w),D&&o.setAttribute("dir",n)),G&&o.setAttribute("style",G),F&&o.setAttribute("class",F),o.append(C.clone(1,1))),u.append(o||C.clone(1,1));if(11==u.type&&s!=a.length-1){var J=u.getLast();J&&1==J.type&&"_moz"==J.getAttribute("type")&&J.remove(),(J=u.getLast(y)&&1==J.type&&J.getName()in f.$block)||u.append(p.createElement("br"))}var K=u.$.nodeName.toLowerCase();c||"div"!=K&&"p"!=K||u.appendBogus(),q.append(u),r=null,s++}if(o=null,a.length<=s||Math.max(a[s].indent,0)<t)break}if(e){var L=q.getFirst();for(a[0].parent;L;)1==L.type&&(h.clearMarkers(e,L),L.getName()in f.$listItem&&b(L)),L=L.getNextSourceNode()}return{listNode:q,nextIndex:s}}};var A=/^h[1-6]$/,B=d.walker.nodeType(1);n.prototype={exec:function(a){var b=this,c=a.document,e=a.config,f=a.getSelection(),g=f&&f.getRanges(!0);if(g&&!(g.length<1)){if(2==b.state){var i=c.getBody();if(i.getFirst(y)){var j=1==g.length&&g[0],n=j&&j.getEnclosedNode();n&&n.is&&b.type==n.getName()&&b.setState(1)}else 2==e.enterMode?i.appendBogus():g[0].fixBlock(1,1==e.enterMode?"p":"div"),f.selectRanges(g)}for(var o=f.createBookmarks(!0),q=[],r={},s=g.createIterator(),t=0;(j=s.getNextRange())&&++t;){var u=j.getBoundaryNodes(),w=u.startNode,x=u.endNode;1==w.type&&"td"==w.getName()&&j.setStartAt(u.startNode,1),1==x.type&&"td"==x.getName()&&j.setEndAt(u.endNode,2);var z,A=j.createIterator();for(A.forceBrBreak=2==b.state;z=A.getNextParagraph();)if(!z.getCustomData("list_block")){h.setMarker(r,z,"list_block",1);for(var B,C=new d.elementPath(z),D=C.elements,E=D.length,F=0,G=C.blockLimit,H=E-1;H>=0&&(B=D[H]);H--)if(v[B.getName()]&&G.contains(B)){G.removeCustomData("list_group_object_"+t);var I=B.getCustomData("list_group_object");I?I.contents.push(z):(I={root:B,contents:[z]},q.push(I),h.setMarker(r,B,"list_group_object",I)),F=1;break}if(!F){var J=G;J.getCustomData("list_group_object_"+t)?J.getCustomData("list_group_object_"+t).contents.push(z):(I={root:J,contents:[z]},h.setMarker(r,J,"list_group_object_"+t,I),q.push(I))}}}for(var K=[];q.length>0;)I=q.shift(),2==b.state?v[I.root.getName()]?k.call(b,a,I,r,K):l.call(b,a,I,K):1==b.state&&v[I.root.getName()]&&m.call(b,a,I,r);for(H=0;H<K.length;H++)p(K[H]);h.clearAllMarkers(r),f.selectBookmarks(o),a.focus()}}};var C=f,D=/[\t\r\n ]*(?:&nbsp;|\xa0)$/,E={elements:{}};for(var F in C.$listItem)E.elements[F]=r();var G={elements:{}};for(F in C.$listItem)G.elements[F]=r(!0);j.add("list",{init:function(a){var b=a.addCommand("numberedlist",new n("numberedlist","ol")),c=a.addCommand("bulletedlist",new n("bulletedlist","ul"));a.ui.addButton("NumberedList",{label:a.lang.numberedlist,command:"numberedlist"}),a.ui.addButton("BulletedList",{label:a.lang.bulletedlist,command:"bulletedlist"}),a.on("selectionChange",e.bind(i,b)),a.on("selectionChange",e.bind(i,c)),a.on("key",function(b){var c=b.data.keyCode;if("wysiwyg"==a.mode&&c in{8:1,46:1}){var e=a.getSelection(),f=e.getRanges()[0];if(!f.collapsed)return;var g=new d.elementPath(f.startContainer),h=8==c,i=a.document.getBody(),j=new d.walker(f.clone());j.evaluator=function(a){return y(a)&&!z(a)},j.guard=function(a,b){return!(b&&1==a.type&&a.is("table"))};var k=f.clone();if(h){var l,m;if((l=g.contains(v))&&f.checkBoundaryOfElement(l,1)&&(l=l.getParent())&&l.is("li")&&(l=u(l))?(m=l,l=l.getPrevious(y),k.moveToPosition(l&&z(l)?l:m,3)):(j.range.setStartAt(i,1),j.range.setEnd(f.startContainer,f.startOffset),l=j.previous(),l&&1==l.type&&(l.getName()in v||l.is("li"))&&(l.is("li")||(j.range.selectNodeContents(l),j.reset(),j.evaluator=s,l=j.previous()),m=l,k.moveToElementEditEnd(m))),m)t(a,k,f),b.cancel();else{var n,o=g.contains(v);o&&f.checkBoundaryOfElement(o,1)&&(n=o.getFirst(y),f.checkBoundaryOfElement(n,1)&&(l=o.getPrevious(y),u(n)?(l&&(f.moveToElementEditEnd(l),f.select()),b.cancel()):(a.execCommand("outdent"),b.cancel())))}}else{var p,q;if(n=f.startContainer.getAscendant("li",1)){j.range.setEndAt(i,2);var r=n.getLast(y),w=r&&s(r)?r:n,x=0;p=j.next(),p&&1==p.type&&p.getName()in v&&p.equals(r)?(x=1,p=j.next()):f.checkBoundaryOfElement(w,2)&&(x=1),x&&p&&(q=f.clone(),q.moveToElementEditStart(p),t(a,k,q),b.cancel())}else j.range.setEndAt(i,2),p=j.next(),p&&1==p.type&&p.getName()in v&&(p=p.getFirst(y),g.block&&f.checkStartOfBlock()&&f.checkEndOfBlock()?(g.block.remove(),f.moveToElementEditStart(p),f.select(),b.cancel()):u(p)?(f.moveToElementEditStart(p),f.select(),b.cancel()):(q=f.clone(),q.moveToElementEditStart(p),t(a,k,q),b.cancel()))}setTimeout(function(){a.selectionChange(1)})}})},afterInit:function(a){var b=a.dataProcessor;b&&(b.dataFilter.addRules(E),b.htmlFilter.addRules(G))},requires:["domiterator"]})}(),function(){j.liststyle={requires:["dialog"],init:function(b){b.addCommand("numberedListStyle",new a.dialogCommand("numberedListStyle")),a.dialog.add("numberedListStyle",this.path+"dialogs/liststyle.js"),b.addCommand("bulletedListStyle",new a.dialogCommand("bulletedListStyle")),a.dialog.add("bulletedListStyle",this.path+"dialogs/liststyle.js"),b.addMenuItems&&(b.addMenuGroup("list",108),b.addMenuItems({numberedlist:{label:b.lang.list.numberedTitle,group:"list",command:"numberedListStyle"},bulletedlist:{label:b.lang.list.bulletedTitle,group:"list",command:"bulletedListStyle"}})),b.contextMenu&&b.contextMenu.addListener(function(a,b){if(!a||a.isReadOnly())return null;for(;a;){var c=a.getName();if("ol"==c)return{numberedlist:2};if("ul"==c)return{bulletedlist:2};a=a.getParent()}return null})}},j.add("liststyle",j.liststyle)}(),function(){function d(a){if(!a||1!=a.type||"form"!=a.getName())return[];for(var b=[],c=["style","className"],d=0;d<c.length;d++){var e=c[d],f=a.$.elements.namedItem(e);if(f){var g=new h(f);b.push([g,g.nextSibling]),g.remove()}}return b}function e(a,b){if(a&&1==a.type&&"form"==a.getName()&&b.length>0)for(var c=b.length-1;c>=0;c--){var d=b[c][0],e=b[c][1];e?d.insertBefore(e):d.appendTo(a)}}function f(a,b){var c=d(a),f={},g=a.$;return b||(f["class"]=g.className||"",g.className=""),f.inline=g.style.cssText||"",b||(g.style.cssText="position: static; overflow: visible"),e(c),f}function g(a,b){var c=d(a),f=a.$;"class"in b&&(f.className=b["class"]),"inline"in b&&(f.style.cssText=b.inline),e(c)}function i(b){var c=a.instances;for(var d in c){var e=c[d];if("wysiwyg"==e.mode&&!e.readOnly){var f=e.document.getBody();f.setAttribute("contentEditable",!1),f.setAttribute("contentEditable",!0)}}b.focusManager.hasFocus&&(b.toolbox.focus(),b.focus())}function k(a){if(!c||b.version>6)return null;var d=h.createFromHtml('<iframe frameborder="0" tabindex="-1" src="javascript:void((function(){document.open();'+(b.isCustomDomain()?"document.domain='"+this.getDocument().$.domain+"';":"")+'document.close();})())" style="display:block;position:absolute;z-index:-1;progid:DXImageTransform.Microsoft.Alpha(opacity=0);"></iframe>');return a.append(d,!0)}j.add("maximize",{init:function(d){function e(){var a=p.getViewPaneSize();m&&m.setStyles({width:a.width+"px",height:a.height+"px"}),d.resize(a.width,a.height,null,!0)}var h,j,l,m,n=d.lang,o=a.document,p=o.getWindow(),q=2;d.addCommand("maximize",{modes:{wysiwyg:!b.iOS,source:!b.iOS},readOnly:1,editorFocus:!1,exec:function(){var a=d.container.getChild(1),r=d.getThemeSpace("contents");if("wysiwyg"==d.mode){var s=d.getSelection();h=s&&s.getRanges(),j=p.getScrollPosition()}else{var t=d.textarea.$;h=!c&&[t.selectionStart,t.selectionEnd],j=[t.scrollLeft,t.scrollTop]}if(2==this.state){p.on("resize",e),l=p.getScrollPosition();for(var u=d.container;u=u.getParent();)u.setCustomData("maximize_saved_styles",f(u)),u.setStyle("z-index",d.config.baseFloatZIndex-1);r.setCustomData("maximize_saved_styles",f(r,!0)),a.setCustomData("maximize_saved_styles",f(a,!0));var v={overflow:b.webkit?"":"hidden",width:0,height:0};o.getDocumentElement().setStyles(v),!b.gecko&&o.getDocumentElement().setStyle("position","fixed"),!(b.gecko&&b.quirks)&&o.getBody().setStyles(v),c?setTimeout(function(){p.$.scrollTo(0,0)},0):p.$.scrollTo(0,0),a.setStyle("position",b.gecko&&b.quirks?"fixed":"absolute"),a.$.offsetLeft,a.setStyles({"z-index":d.config.baseFloatZIndex-1,left:"0px",top:"0px"}),m=k(a),a.addClass("cke_maximized"),e();var w=a.getDocumentPosition();a.setStyles({left:-1*w.x+"px",top:-1*w.y+"px"}),b.gecko&&i(d)}else if(1==this.state){p.removeListener("resize",e);for(var x=[r,a],y=0;y<x.length;y++)g(x[y],x[y].getCustomData("maximize_saved_styles")),x[y].removeCustomData("maximize_saved_styles");for(u=d.container;u=u.getParent();)g(u,u.getCustomData("maximize_saved_styles")),u.removeCustomData("maximize_saved_styles");c?setTimeout(function(){p.$.scrollTo(l.x,l.y)},0):p.$.scrollTo(l.x,l.y),a.removeClass("cke_maximized"),b.webkit&&(a.setStyle("display","inline"),setTimeout(function(){a.setStyle("display","block")},0)),m&&(m.remove(),m=null),d.fire("resize")}this.toggleState();var z=this.uiItems[0];if(z){var A=2==this.state?n.maximize:n.minimize,B=d.element.getDocument().getById(z._.id);B.getChild(1).setHtml(A),B.setAttribute("title",A),B.setAttribute("href",'javascript:void("'+A+'");')}if("wysiwyg"==d.mode)if(h){b.gecko&&i(d),d.getSelection().selectRanges(h);var C=d.getSelection().getStartElement();C&&C.scrollIntoView(!0)}else p.$.scrollTo(j.x,j.y);else h&&(t.selectionStart=h[0],t.selectionEnd=h[1]),t.scrollLeft=j[0],t.scrollTop=j[1];h=j=null,q=this.state},canUndo:!1}),d.ui.addButton("Maximize",{label:n.maximize,command:"maximize"}),d.on("mode",function(){var a=d.getCommand("maximize");a.setState(0==a.state?0:q)},null,null,100)}})}(),j.add("newpage",{init:function(a){a.addCommand("newpage",{modes:{wysiwyg:1,source:1},exec:function(a){var b=this;a.setData(a.config.newpage_html||"",function(){setTimeout(function(){a.fire("afterCommandExec",{name:"newpage",command:b}),a.selectionChange()},200)}),a.focus()},async:!0}),a.ui.addButton("NewPage",{label:a.lang.newPage,command:"newpage"})}}),j.add("pagebreak",{init:function(c){c.addCommand("pagebreak",j.pagebreakCmd),c.ui.addButton("PageBreak",{label:c.lang.pagebreak,command:"pagebreak"});var d=["{","background: url("+a.getUrl(this.path+"images/pagebreak.gif")+") no-repeat center center;","clear: both;","width:100%; _width:99.9%;","border-top: #999999 1px dotted;","border-bottom: #999999 1px dotted;","padding:0;","height: 5px;","cursor: default;","}"].join("").replace(/;/g," !important;");c.addCss("div.cke_pagebreak"+d),b.opera&&c.on("contentDom",function(){c.document.on("click",function(a){var b=a.data.getTarget();b.is("div")&&b.hasClass("cke_pagebreak")&&c.getSelection().selectElement(b)})})},afterInit:function(b){var c=b.lang.pagebreakAlt,d=b.dataProcessor,e=d&&d.dataFilter,f=d&&d.htmlFilter;f&&f.addRules({attributes:{"class":function(b,c){var d=b.replace("cke_pagebreak","");if(d!=b){var e=a.htmlParser.fragment.fromHtml('<span style="display: none;">&nbsp;</span>');c.children.length=0,c.add(e);var f=c.attributes;delete f["aria-label"],delete f.contenteditable,delete f.title}return d}}},5),e&&e.addRules({elements:{div:function(a){var b=a.attributes,d=b&&b.style,e=d&&1==a.children.length&&a.children[0],f=e&&"span"==e.name&&e.attributes.style;f&&/page-break-after\s*:\s*always/i.test(d)&&/display\s*:\s*none/i.test(f)&&(b.contenteditable="false",b["class"]="cke_pagebreak",b["data-cke-display-name"]="pagebreak",b["aria-label"]=c,b.title=c,a.children.length=0)}}})},requires:["fakeobjects"]}),j.pagebreakCmd={exec:function(a){var b=a.lang.pagebreakAlt,c=h.createFromHtml('<div style="page-break-after: always;"contenteditable="false" title="'+b+'" aria-label="'+b+'" data-cke-display-name="pagebreak" class="cke_pagebreak"></div>',a.document),d=a.getSelection().getRanges(!0);a.fire("saveSnapshot");for(var e,f=d.length-1;f>=0;f--)if(e=d[f],f<d.length-1&&(c=c.clone(!0)),e.splitBlock("p"),e.insertNode(c),f==d.length-1){var g=c.getNext();e.moveToPosition(c,4),(!g||1==g.type&&!g.isEditable())&&e.fixBlock(!0,3==a.config.enterMode?"div":"p"),e.select()}a.fire("saveSnapshot")}},function(){function b(a){a.data.mode="html"}j.add("pastefromword",{init:function(c){var d=0,e=function(a){a&&a.removeListener(),c.removeListener("beforePaste",b),d&&setTimeout(function(){d=0},0)};c.addCommand("pastefromword",{canUndo:!1,exec:function(){d=1,c.on("beforePaste",b),c.execCommand("paste","html")===!1&&(c.on("dialogShow",function(a){a.removeListener(),a.data.on("cancel",e)}),c.on("dialogHide",function(a){a.data.removeListener("cancel",e)})),c.on("afterPaste",e)}}),c.ui.addButton("PasteFromWord",{label:c.lang.pastefromword.toolbar,command:"pastefromword"}),c.on("pasteState",function(a){c.getCommand("pastefromword").setState(a.data)}),c.on("paste",function(b){var e,f=b.data;if((e=f.html)&&(d||/(class=\"?Mso|style=\"[^\"]*\bmso\-|w:WordDocument)/.test(e))){var g=this.loadFilterRules(function(){g?c.fire("paste",f):(!c.config.pasteFromWordPromptCleanup||d||confirm(c.lang.pastefromword.confirmCleanup))&&(f.html=a.cleanWord(e,c))});g&&b.cancel()}},this)},loadFilterRules:function(b){var c=a.cleanWord;if(c)b();else{var d=a.getUrl(i.pasteFromWordCleanupFile||this.path+"filter/default.js");a.scriptLoader.load(d,b,null,!0)}return!c},requires:["clipboard"]})}(),function(){var b={exec:function(a){var b=e.tryThese(function(){var a=window.clipboardData.getData("Text");if(!a)throw 0;return a});return b?(a.fire("paste",{text:b}),!0):(a.openDialog("pastetext"),!1)}};j.add("pastetext",{init:function(c){{var d="pastetext";c.addCommand(d,b)}c.ui.addButton("PasteText",{label:c.lang.pasteText.button,command:d}),a.dialog.add(d,a.getUrl(this.path+"dialogs/pastetext.js")),c.config.forcePasteAsPlainText&&(c.on("beforeCommandExec",function(a){var b=a.data.commandData;"paste"==a.data.name&&"html"!=b&&(c.execCommand("pastetext"),a.cancel())},null,null,0),c.on("beforePaste",function(a){a.data.mode="text"})),c.on("pasteState",function(a){c.getCommand("pastetext").setState(a.data)})},requires:["clipboard"]})}(),j.add("popup"),e.extend(a.editor.prototype,{popup:function(a,b,c,d){b=b||"80%",c=c||"70%","string"==typeof b&&b.length>1&&"%"==b.substr(b.length-1,1)&&(b=parseInt(window.screen.width*parseInt(b,10)/100,10)),"string"==typeof c&&c.length>1&&"%"==c.substr(c.length-1,1)&&(c=parseInt(window.screen.height*parseInt(c,10)/100,10)),640>b&&(b=640),420>c&&(c=420);var e=parseInt((window.screen.height-c)/2,10),f=parseInt((window.screen.width-b)/2,10);d=(d||"location=no,menubar=no,toolbar=no,dependent=yes,minimizable=no,modal=yes,alwaysRaised=yes,resizable=yes,scrollbars=yes")+",width="+b+",height="+c+",top="+e+",left="+f;var g=window.open("",null,d,!0);if(!g)return!1;try{var h=navigator.userAgent.toLowerCase();-1==h.indexOf(" chrome/")&&(g.moveTo(f,e),g.resizeTo(b,c)),g.focus(),g.location.href=a}catch(i){g=window.open(a,null,d,!0)}return!0}}),function(){var a,c={modes:{wysiwyg:1,source:1},canUndo:!1,readOnly:1,exec:function(c){var d,f=c.config,g=f.baseHref?'<base href="'+f.baseHref+'"/>':"",h=b.isCustomDomain();if(f.fullPage)d=c.getData().replace(/<head>/,"$&"+g).replace(/[^>]*(?=<\/title>)/,"$& &mdash; "+c.lang.preview);else{var i="<body ",j=c.document&&c.document.getBody();j&&(j.getAttribute("id")&&(i+='id="'+j.getAttribute("id")+'" '),j.getAttribute("class")&&(i+='class="'+j.getAttribute("class")+'" ')),i+=">",d=c.config.docType+'<html dir="'+c.config.contentsLangDirection+'"><head>'+g+"<title>"+c.lang.preview+"</title>"+e.buildStyleHtml(c.config.contentsCss)+"</head>"+i+c.getData()+"</body></html>"}var k=640,l=420,m=80;try{var n=window.screen;k=Math.round(.8*n.width),l=Math.round(.7*n.height),m=Math.round(.1*n.width)}catch(o){}var p="";h&&(window._cke_htmlToLoad=d,p='javascript:void( (function(){document.open();document.domain="'+document.domain+'";document.write( window.opener._cke_htmlToLoad );document.close();window.opener._cke_htmlToLoad = null;})() )'),b.gecko&&(window._cke_htmlToLoad=d,p=a+"preview.html");var q=window.open(p,null,"toolbar=yes,location=no,status=yes,menubar=yes,scrollbars=yes,resizable=yes,width="+k+",height="+l+",left="+m);if(!h&&!b.gecko){var r=q.document;r.open(),r.write(d),r.close(),b.webkit&&setTimeout(function(){r.body.innerHTML+=""},0)}}},d="preview";j.add(d,{init:function(b){a=this.path,b.addCommand(d,c),b.ui.addButton("Preview",{label:b.lang.preview,command:d})}})}(),j.add("print",{init:function(a){{var b="print";a.addCommand(b,j.print)}a.ui.addButton("Print",{label:a.lang.print,command:b})}}),j.print={exec:function(a){b.opera||(b.gecko?a.window.$.print():a.document.$.execCommand("Print"))},canUndo:!1,readOnly:1,modes:{wysiwyg:!b.opera}},j.add("removeformat",{requires:["selection"],init:function(a){a.addCommand("removeFormat",j.removeformat.commands.removeformat),a.ui.addButton("RemoveFormat",{label:a.lang.removeFormat,command:"removeFormat"}),a._.removeFormat={filters:[]}}}),j.removeformat={commands:{removeformat:{exec:function(a){for(var b,c=a._.removeFormatRegex||(a._.removeFormatRegex=new RegExp("^(?:"+a.config.removeFormatTags.replace(/,/g,"|")+")$","i")),e=a._.removeAttributes||(a._.removeAttributes=a.config.removeFormatAttributes.split(",")),f=j.removeformat.filter,g=a.getSelection().getRanges(1),h=g.createIterator();b=h.getNextRange();){b.collapsed||b.enlarge(1);var i,k=b.createBookmark(),l=k.startNode,m=k.endNode,n=function(b){for(var e,g=new d.elementPath(b),h=g.elements,i=1;(e=h[i])&&(!e.equals(g.block)&&!e.equals(g.blockLimit));i++)c.test(e.getName())&&f(a,e)&&b.breakParent(e)};if(n(l),m)for(n(m),i=l.getNextSourceNode(!0,1);i&&!i.equals(m);){var o=i.getNextSourceNode(!1,1);"img"==i.getName()&&i.data("cke-realelement")||!f(a,i)||(c.test(i.getName())?i.remove(1):(i.removeAttributes(e),a.fire("removeFormatCleanup",i))),i=o}b.moveToBookmark(k)}a.getSelection().selectRanges(g)}}},filter:function(a,b){for(var c=a._.removeFormat.filters,d=0;d<c.length;d++)if(c[d](b)===!1)return!1;return!0}},a.editor.prototype.addRemoveFormatFilter=function(a){this._.removeFormat.filters.push(a)},i.removeFormatTags="b,big,code,del,dfn,em,font,i,ins,kbd,q,samp,small,span,strike,strong,sub,sup,tt,u,var",i.removeFormatAttributes="class,style,lang,width,height,align,hspace,valign",j.add("resize",{init:function(b){function c(a){var c=a.data.$.screenX-h.x,d=a.data.$.screenY-h.y,e=i.width,j=i.height,m=e+c*("rtl"==g?-1:1),n=j+d;k&&(e=Math.max(f.resize_minWidth,Math.min(m,f.resize_maxWidth))),l&&(j=Math.max(f.resize_minHeight,Math.min(n,f.resize_maxHeight))),b.resize(k?e:null,j)}function d(e){a.document.removeListener("mousemove",c),a.document.removeListener("mouseup",d),b.document&&(b.document.removeListener("mousemove",c),b.document.removeListener("mouseup",d))}var f=b.config,g=b.element.getDirection(1);if(!f.resize_dir&&(f.resize_dir="both"),void 0==f.resize_maxWidth&&(f.resize_maxWidth=3e3),void 0==f.resize_maxHeight&&(f.resize_maxHeight=3e3),void 0==f.resize_minWidth&&(f.resize_minWidth=750),void 0==f.resize_minHeight&&(f.resize_minHeight=250),f.resize_enabled!==!1){var h,i,j=null,k=("both"==f.resize_dir||"horizontal"==f.resize_dir)&&f.resize_minWidth!=f.resize_maxWidth,l=("both"==f.resize_dir||"vertical"==f.resize_dir)&&f.resize_minHeight!=f.resize_maxHeight,m=e.addFunction(function(e){j||(j=b.getResizable()),i={width:j.$.offsetWidth||0,height:j.$.offsetHeight||0},h={x:e.screenX,y:e.screenY},f.resize_minWidth>i.width&&(f.resize_minWidth=i.width),f.resize_minHeight>i.height&&(f.resize_minHeight=i.height),a.document.on("mousemove",c),a.document.on("mouseup",d),b.document&&(b.document.on("mousemove",c),b.document.on("mouseup",d))});b.on("destroy",function(){e.removeFunction(m)}),b.on("themeSpace",function(a){if("bottom"==a.data.space){var c="";k&&!l&&(c=" cke_resizer_horizontal"),!k&&l&&(c=" cke_resizer_vertical");var d='<div class="cke_resizer'+c+" cke_resizer_"+g+'" title="'+e.htmlEncode(b.lang.resize)+'" onmousedown="CKEDITOR.tools.callFunction('+m+', event)"></div>';"ltr"==g&&"ltr"==c?a.data.html+=d:a.data.html=d+a.data.html}},b,null,100)}}}),function(){var a={modes:{wysiwyg:1,source:1},readOnly:1,exec:function(a){var b=a.element.$.form;if(b)try{b.submit()}catch(c){b.submit.click&&b.submit.click()}}},b="save";j.add(b,{init:function(c){var d=c.addCommand(b,a);d.modes={wysiwyg:!!c.element.$.form},c.ui.addButton("Save",{label:c.lang.save,command:b})}})}(),function(){function d(a,b){var c,d=0;for(c in b)if(b[c]==a){d=1;break}return d}var f="scaytcheck",g="",i=function(){var d=this,f=function(){var e=d.config,f={};f.srcNodeRef=d.document.getWindow().$.frameElement,f.assocApp="CKEDITOR."+a.version+"@"+a.revision,f.customerid=e.scayt_customerid||"1:WvF0D4-UtPqN1-43nkD4-NKvUm2-daQqk3-LmNiI-z7Ysb4-mwry24-T8YrS3-Q2tpq2",f.customDictionaryIds=e.scayt_customDictionaryIds||"",f.userDictionaryName=e.scayt_userDictionaryName||"",f.sLang=e.scayt_sLang||"en_US",f.onLoad=function(){c&&b.version<8||this.addStyle(this.selectorCss(),"padding-bottom: 2px !important;"),d.focusManager.hasFocus&&!k.isControlRestored(d)&&this.focus()},f.onBeforeChange=function(){k.getScayt(d)&&!d.checkDirty()&&setTimeout(function(){d.resetDirty()},0)};var g=window.scayt_custom_params;if("object"==typeof g)for(var i in g)f[i]=g[i];k.getControlId(d)&&(f.id=k.getControlId(d));var j=new window.scayt(f);j.afterMarkupRemove.push(function(a){new h(a,j.document).mergeSiblings()});var l=k.instances[d.name];l&&(j.sLang=l.sLang,j.option(l.option()),j.paused=l.paused),k.instances[d.name]=j;try{j.setDisabled(k.isPaused(d)===!1)}catch(m){}d.fire("showScaytState")};d.on("contentDom",f),d.on("contentDomUnload",function(){for(var b=a.document.getElementsByTag("script"),c=/^dojoIoScript(\d+)$/i,d=/^https?:\/\/svc\.webspellchecker\.net\/spellcheck\/script\/ssrv\.cgi/i,e=0;e<b.count();e++){var f=b.getItem(e),g=f.getId(),h=f.getAttribute("src");g&&h&&g.match(c)&&h.match(d)&&f.remove()}}),d.on("beforeCommandExec",function(a){if("source"!=a.data.name&&"newpage"!=a.data.name||"wysiwyg"!=d.mode)"source"==a.data.name&&"source"==d.mode&&k.markControlRestore(d);else{var b=k.getScayt(d);b&&(k.setPaused(d,!b.disabled),k.setControlId(d,b.id),b.destroy(!0),delete k.instances[d.name])}}),d.on("afterCommandExec",function(a){k.isScaytEnabled(d)&&("wysiwyg"!=d.mode||"undo"!=a.data.name&&"redo"!=a.data.name||window.setTimeout(function(){k.getScayt(d).refresh()},10))}),d.on("destroy",function(a){var b=a.editor,c=k.getScayt(b);c&&(delete k.instances[b.name],k.setControlId(b,c.id),c.destroy(!0))}),d.on("afterSetData",function(){k.isScaytEnabled(d)&&window.setTimeout(function(){var a=k.getScayt(d);a&&a.refresh()},10)}),d.on("insertElement",function(){var a=k.getScayt(d);k.isScaytEnabled(d)&&(c&&d.getSelection().unlock(!0),window.setTimeout(function(){a.focus(),a.refresh()},10))},this,null,50),d.on("insertHtml",function(){var a=k.getScayt(d);k.isScaytEnabled(d)&&(c&&d.getSelection().unlock(!0),window.setTimeout(function(){a.focus(),a.refresh()},10))},this,null,50),d.on("scaytDialog",function(a){a.data.djConfig=window.djConfig,a.data.scayt_control=k.getScayt(d),a.data.tab=g,a.data.scayt=window.scayt});var i=d.dataProcessor,l=i&&i.htmlFilter;l&&l.addRules({elements:{span:function(a){return a.attributes["data-scayt_word"]&&a.attributes["data-scaytid"]?(delete a.name,a):void 0}}});var m=j.undo.Image.prototype;m.equals=e.override(m.equals,function(a){return function(b){var c=this,d=c.contents,e=b.contents,f=k.getScayt(c.editor);f&&k.isScaytReady(c.editor)&&(c.contents=f.reset(d)||"",b.contents=f.reset(e)||"");var g=a.apply(c,arguments);return c.contents=d,b.contents=e,g}}),d.document&&f()};j.scayt={engineLoaded:!1,instances:{},controlInfo:{},setControlInfo:function(a,b){a&&a.name&&"object"!=typeof this.controlInfo[a.name]&&(this.controlInfo[a.name]={});for(var c in b)this.controlInfo[a.name][c]=b[c]},isControlRestored:function(a){return a&&a.name&&this.controlInfo[a.name]?this.controlInfo[a.name].restored:!1},markControlRestore:function(a){this.setControlInfo(a,{restored:!0})},setControlId:function(a,b){this.setControlInfo(a,{id:b})},getControlId:function(a){return a&&a.name&&this.controlInfo[a.name]&&this.controlInfo[a.name].id?this.controlInfo[a.name].id:null},setPaused:function(a,b){this.setControlInfo(a,{paused:b})},isPaused:function(a){return a&&a.name&&this.controlInfo[a.name]?this.controlInfo[a.name].paused:void 0},getScayt:function(a){return this.instances[a.name]},isScaytReady:function(a){return this.engineLoaded===!0&&"undefined"!=typeof window.scayt&&this.getScayt(a)},isScaytEnabled:function(a){var b=this.getScayt(a);return b?b.disabled===!1:!1},getUiTabs:function(a){var b=[],c=a.config.scayt_uiTabs||"1,1,1";c=c.split(","),c[3]="1";for(var d=0;4>d;d++)b[d]="undefined"!=typeof window.scayt&&"undefined"!=typeof window.scayt.uiTags?parseInt(c[d],10)&&window.scayt.uiTags[d]:parseInt(c[d],10);return b},loadEngine:function(c){if(b.gecko&&b.version<10900||b.opera||b.air)return c.fire("showScaytState");if(this.engineLoaded===!0)return i.apply(c);if(-1==this.engineLoaded)return a.on("scaytReady",function(){i.apply(c)});a.on("scaytReady",i,c),a.on("scaytReady",function(){this.engineLoaded=!0},this,null,0),this.engineLoaded=-1;var d=document.location.protocol;d=-1!=d.search(/https?:/)?d:"http:";var e="svc.webspellchecker.net/scayt26/loader__base.js",f=c.config.scayt_srcUrl||d+"//"+e,g=k.parseUrl(f).path+"/";return void 0==window.scayt?(a._djScaytConfig={baseUrl:g,addOnLoad:[function(){a.fireOnce("scaytReady")}],isDebug:!1},a.document.getHead().append(a.document.createElement("script",{attributes:{
type:"text/javascript",async:"true",src:f}}))):a.fireOnce("scaytReady"),null},parseUrl:function(a){var b;return a.match&&(b=a.match(/(.*)[\/\\](.*?\.\w+)$/))?{path:b[1],file:b[2]}:a}};var k=j.scayt,l=function(a,b,c,d,e,f,g){a.addCommand(d,e),a.addMenuItem(d,{label:c,command:d,group:f,order:g})},m={preserveState:!0,editorFocus:!1,canUndo:!1,exec:function(a){if(k.isScaytReady(a)){var b=k.isScaytEnabled(a);this.setState(b?2:1);var c=k.getScayt(a);c.focus(),c.setDisabled(b)}else!a.config.scayt_autoStartup&&k.engineLoaded>=0&&(this.setState(0),k.loadEngine(a))}};j.add("scayt",{requires:["menubutton"],beforeInit:function(a){var b=a.config.scayt_contextMenuItemsOrder||"suggest|moresuggest|control",c="";if(b=b.split("|"),b&&b.length)for(var d=0;d<b.length;d++)c+="scayt_"+b[d]+(b.length!=parseInt(d,10)+1?",":"");a.config.menu_groups=c+","+a.config.menu_groups},init:function(c){var e=c.dataProcessor&&c.dataProcessor.dataFilter,h={elements:{span:function(a){var b=a.attributes;b&&b["data-scaytid"]&&delete a.name}}};e&&e.addRules(h);var i={},j={},n=c.addCommand(f,m);a.dialog.add(f,a.getUrl(this.path+"dialogs/options.js"));var o=k.getUiTabs(c),p="scaytButton";c.addMenuGroup(p);var q={},r=c.lang.scayt;q.scaytToggle={label:r.enable,command:f,group:p},1==o[0]&&(q.scaytOptions={label:r.options,group:p,onClick:function(){g="options",c.openDialog(f)}}),1==o[1]&&(q.scaytLangs={label:r.langs,group:p,onClick:function(){g="langs",c.openDialog(f)}}),1==o[2]&&(q.scaytDict={label:r.dictionariesTab,group:p,onClick:function(){g="dictionaries",c.openDialog(f)}}),q.scaytAbout={label:c.lang.scayt.about,group:p,onClick:function(){g="about",c.openDialog(f)}},c.addMenuItems(q),c.ui.add("Scayt","menubutton",{label:r.title,title:b.opera?r.opera_title:r.title,className:"cke_button_scayt",modes:{wysiwyg:1},onRender:function(){n.on("state",function(){this.setState(n.state)},this)},onMenu:function(){var a=k.isScaytEnabled(c);c.getMenuItem("scaytToggle").label=r[a?"disable":"enable"];var b=k.getUiTabs(c);return{scaytToggle:2,scaytOptions:a&&b[0]?2:0,scaytLangs:a&&b[1]?2:0,scaytDict:a&&b[2]?2:0,scaytAbout:a&&b[3]?2:0}}}),c.contextMenu&&c.addMenuItems&&c.contextMenu.addListener(function(a,b){if(!k.isScaytEnabled(c)||b.getRanges()[0].checkReadOnly())return null;var e=k.getScayt(c),f=e.getScaytNode();if(!f)return null;var g=e.getWord(f);if(!g)return null;var h=e.getLang(),m={},n=window.scayt.getSuggestion(g,h);if(!n||!n.length)return null;for(var o in i)delete c._.menuItems[o],delete c._.commands[o];for(o in j)delete c._.menuItems[o],delete c._.commands[o];i={},j={};var p=c.config.scayt_moreSuggestions||"on",q=!1,s=c.config.scayt_maxSuggestions;"number"!=typeof s&&(s=5),!s&&(s=n.length);var t=c.config.scayt_contextCommands||"all";t=t.split("|");for(var u=0,v=n.length;v>u;u+=1){var w="scayt_suggestion_"+n[u].replace(" ","_"),x=function(a,b){return{exec:function(){e.replace(a,b)}}}(f,n[u]);s>u?(l(c,"button_"+w,n[u],w,x,"scayt_suggest",u+1),m[w]=2,j[w]=2):"on"==p&&(l(c,"button_"+w,n[u],w,x,"scayt_moresuggest",u+1),i[w]=2,q=!0)}if(q&&(c.addMenuItem("scayt_moresuggest",{label:r.moreSuggestions,group:"scayt_moresuggest",order:10,getItems:function(){return i}}),j.scayt_moresuggest=2),d("all",t)||d("ignore",t)){var y={exec:function(){e.ignore(f)}};l(c,"ignore",r.ignore,"scayt_ignore",y,"scayt_control",1),j.scayt_ignore=2}if(d("all",t)||d("ignoreall",t)){var z={exec:function(){e.ignoreAll(f)}};l(c,"ignore_all",r.ignoreAll,"scayt_ignore_all",z,"scayt_control",2),j.scayt_ignore_all=2}if(d("all",t)||d("add",t)){var A={exec:function(){window.scayt.addWordToUserDictionary(f)}};l(c,"add_word",r.addWord,"scayt_add_word",A,"scayt_control",3),j.scayt_add_word=2}return e.fireOnContextMenu&&e.fireOnContextMenu(c),j});var s=function(){c.removeListener("showScaytState",s),n.setState(b.opera||b.air?0:k.isScaytEnabled(c)?1:2)};c.on("showScaytState",s),(b.opera||b.air)&&c.on("instanceReady",function(){s()}),c.config.scayt_autoStartup&&c.on("instanceReady",function(){k.loadEngine(c)})},afterInit:function(a){var b,c=function(a){return a.hasAttribute("data-scaytid")?!1:void 0};a._.elementsPath&&(b=a._.elementsPath.filters)&&b.push(c),a.addRemoveFormatFilter&&a.addRemoveFormatFilter(c)}})}(),j.add("smiley",{requires:["dialog"],init:function(b){b.config.smiley_path=b.config.smiley_path||this.path+"images/",b.addCommand("smiley",new a.dialogCommand("smiley")),b.ui.addButton("Smiley",{label:b.lang.smiley.toolbar,command:"smiley"}),a.dialog.add("smiley",this.path+"dialogs/smiley.js")}}),i.smiley_images=["regular_smile.gif","sad_smile.gif","wink_smile.gif","teeth_smile.gif","confused_smile.gif","tounge_smile.gif","embaressed_smile.gif","omg_smile.gif","whatchutalkingabout_smile.gif","angry_smile.gif","angel_smile.gif","shades_smile.gif","devil_smile.gif","cry_smile.gif","lightbulb.gif","thumbs_down.gif","thumbs_up.gif","heart.gif","broken_heart.gif","kiss.gif","envelope.gif"],i.smiley_descriptions=["smiley","sad","wink","laugh","frown","cheeky","blush","surprise","indecision","angry","angel","cool","devil","crying","enlightened","no","yes","heart","broken heart","kiss","mail"],function(){var b=".%2 p,.%2 div,.%2 pre,.%2 address,.%2 blockquote,.%2 h1,.%2 h2,.%2 h3,.%2 h4,.%2 h5,.%2 h6{background-repeat: no-repeat;background-position: top %3;border: 1px dotted gray;padding-top: 8px;padding-%3: 8px;}.%2 p{%1p.png);}.%2 div{%1div.png);}.%2 pre{%1pre.png);}.%2 address{%1address.png);}.%2 blockquote{%1blockquote.png);}.%2 h1{%1h1.png);}.%2 h2{%1h2.png);}.%2 h3{%1h3.png);}.%2 h4{%1h4.png);}.%2 h5{%1h5.png);}.%2 h6{%1h6.png);}",c=/%1/g,d=/%2/g,e=/%3/g,f={readOnly:1,preserveState:!0,editorFocus:!1,exec:function(a){this.toggleState(),this.refresh(a)},refresh:function(a){if(a.document){var b=1==this.state?"addClass":"removeClass";a.document.getBody()[b]("cke_show_blocks")}}};j.add("showblocks",{requires:["wysiwygarea"],init:function(g){var h=g.addCommand("showblocks",f);h.canUndo=!1,g.config.startupOutlineBlocks&&h.setState(1),g.addCss(b.replace(c,"background-image: url("+a.getUrl(this.path)+"images/block_").replace(d,"cke_show_blocks ").replace(e,"rtl"==g.lang.dir?"right":"left")),g.ui.addButton("ShowBlocks",{label:g.lang.showBlocks,command:"showblocks"}),g.on("mode",function(){0!=h.state&&h.refresh(g)}),g.on("contentDom",function(){0!=h.state&&h.refresh(g)})}})}(),function(){var c,d="cke_show_border",f=(b.ie6Compat?[".%1 table.%2,",".%1 table.%2 td, .%1 table.%2 th","{","border : #d3d3d3 1px dotted","}"]:[".%1 table.%2,",".%1 table.%2 > tr > td, .%1 table.%2 > tr > th,",".%1 table.%2 > tbody > tr > td, .%1 table.%2 > tbody > tr > th,",".%1 table.%2 > thead > tr > td, .%1 table.%2 > thead > tr > th,",".%1 table.%2 > tfoot > tr > td, .%1 table.%2 > tfoot > tr > th","{","border : #d3d3d3 1px dotted","}"]).join("");c=f.replace(/%2/g,d).replace(/%1/g,"cke_show_borders ");var g={preserveState:!0,editorFocus:!1,readOnly:1,exec:function(a){this.toggleState(),this.refresh(a)},refresh:function(a){if(a.document){var b=1==this.state?"addClass":"removeClass";a.document.getBody()[b]("cke_show_borders")}}};j.add("showborders",{requires:["wysiwygarea"],modes:{wysiwyg:1},init:function(a){var b=a.addCommand("showborders",g);b.canUndo=!1,a.config.startupShowBorders!==!1&&b.setState(1),a.addCss(c),a.on("mode",function(){0!=b.state&&b.refresh(a)},null,null,100),a.on("contentDom",function(){0!=b.state&&b.refresh(a)}),a.on("removeFormatCleanup",function(b){var c=b.data;1==a.getCommand("showborders").state&&c.is("table")&&(!c.hasAttribute("border")||parseInt(c.getAttribute("border"),10)<=0)&&c.addClass(d)})},afterInit:function(a){var b=a.dataProcessor,c=b&&b.dataFilter,e=b&&b.htmlFilter;c&&c.addRules({elements:{table:function(a){var b=a.attributes,c=b["class"],e=parseInt(b.border,10);e&&!(0>=e)||c&&-1!=c.indexOf(d)||(b["class"]=(c||"")+" "+d)}}}),e&&e.addRules({elements:{table:function(a){var b=a.attributes,c=b["class"];c&&(b["class"]=c.replace(d,"").replace(/\s{2}/," ").replace(/^\s+|\s+$/,""))}}})}}),a.on("dialogDefinition",function(a){var b=a.data.name;if("table"==b||"tableProperties"==b){var c=a.data.definition,f=c.getContents("info"),g=f.get("txtBorder"),h=g.commit;g.commit=e.override(h,function(a){return function(b,c){a.apply(this,arguments);var e=parseInt(this.getValue(),10);c[!e||0>=e?"addClass":"removeClass"](d)}});var i=c.getContents("advanced"),j=i&&i.get("advCSSClasses");j&&(j.setup=e.override(j.setup,function(a){return function(){a.apply(this,arguments),this.setValue(this.getValue().replace(/cke_show_border/,""))}}),j.commit=e.override(j.commit,function(a){return function(b,c){a.apply(this,arguments),parseInt(c.getAttribute("border"),10)||c.addClass("cke_show_border")}}))}})}(),j.add("sourcearea",{requires:["editingblock"],init:function(d){var e=j.sourcearea,f=a.document.getWindow();d.on("editingBlockReady",function(){var a,e;d.addMode("source",{load:function(g,i){c&&b.version<8&&g.setStyle("position","relative"),d.textarea=a=new h("textarea"),a.setAttributes({dir:"ltr",tabIndex:b.webkit?-1:d.tabIndex,role:"textbox","aria-label":d.lang.editorTitle.replace("%1",d.name)}),a.addClass("cke_source"),a.addClass("cke_enable_context_menu"),d.readOnly&&a.setAttribute("readOnly","readonly");var j={width:b.ie7Compat?"99%":"100%",height:"100%",resize:"none",outline:"none","text-align":"left"};c&&(e=function(){a.hide(),a.setStyle("height",g.$.clientHeight+"px"),a.setStyle("width",g.$.clientWidth+"px"),a.show()},d.on("resize",e),f.on("resize",e),setTimeout(e,0)),g.setHtml(""),g.append(a),a.setStyles(j),d.fire("ariaWidget",a),a.on("blur",function(){d.focusManager.blur()}),a.on("focus",function(){d.focusManager.focus()}),d.mayBeDirty=!0,this.loadData(i);var k=d.keystrokeHandler;k&&k.attach(a),setTimeout(function(){d.mode="source",d.fire("mode",{previousMode:d._.previousMode})},b.gecko||b.webkit?100:0)},loadData:function(b){a.setValue(b),d.fire("dataReady")},getData:function(){return a.getValue()},getSnapshotData:function(){return a.getValue()},unload:function(g){a.clearCustomData(),d.textarea=a=null,e&&(d.removeListener("resize",e),f.removeListener("resize",e)),c&&b.version<8&&g.removeStyle("position")},focus:function(){a.focus()}})}),d.on("readOnly",function(){"source"==d.mode&&(d.readOnly?d.textarea.setAttribute("readOnly","readonly"):d.textarea.removeAttribute("readOnly"))}),d.addCommand("source",e.commands.source),d.ui.addButton&&d.ui.addButton("Source",{label:d.lang.source,command:"source"}),d.on("mode",function(){d.getCommand("source").setState("source"==d.mode?1:2)})}}),j.sourcearea={commands:{source:{modes:{wysiwyg:1,source:1},editorFocus:!1,readOnly:1,exec:function(a){"wysiwyg"==a.mode&&a.fire("saveSnapshot"),a.getCommand("source").setState(0),a.setMode("source"==a.mode?"wysiwyg":"source")},canUndo:!1}}},function(){function e(a,b){var c=a.type,d=b.type;return c==d?0:3==c?-1:3==d?1:1==d?1:-1}j.add("stylescombo",{requires:["richcombo","styles"],init:function(f){function g(b){f.getStylesSet(function(c){if(!l.length){for(var d,f,g=0,h=c.length;h>g;g++){var j=c[g];f=j.name,d=k[f]=new a.style(j),d._name=f,d._.enterMode=i.enterMode,l.push(d)}l.sort(e)}b&&b()})}var h,i=f.config,j=f.lang.stylesCombo,k={},l=[];f.ui.addRichCombo("Styles",{label:j.label,title:j.panelTitle,className:"cke_styles",panel:{css:f.skin.editor.css.concat(i.contentsCss),multiSelect:!0,attributes:{"aria-label":j.panelTitle}},init:function(){h=this,g(function(){var a,b,c,d,e,f;for(e=0,f=l.length;f>e;e++)a=l[e],b=a._name,d=a.type,d!=c&&(h.startGroup(j["panelTitle"+String(d)]),c=d),h.add(b,3==a.type?b:a.buildPreview(),b);h.commit()})},onClick:function(a){f.focus(),f.fire("saveSnapshot");var b=k[a],c=f.getSelection(),e=new d.elementPath(c.getStartElement());b[b.checkActive(e)?"remove":"apply"](f.document),f.fire("saveSnapshot")},onRender:function(){f.on("selectionChange",function(a){for(var b,c=this.getValue(),d=a.data.path,e=d.elements,f=0,g=e.length;g>f;f++){b=e[f];for(var h in k)if(k[h].checkElementRemovable(b,!0))return void(h!=c&&this.setValue(h))}this.setValue("")},this)},onOpen:function(){var a=this;(c||b.webkit)&&f.focus();var e=f.getSelection(),g=e.getSelectedElement(),h=new d.elementPath(g||e.getStartElement()),i=[0,0,0,0];a.showAll(),a.unmarkAll();for(var l in k){var m=k[l],n=m.type;m.checkActive(h)?a.mark(l):3!=n||m.checkApplicable(h)||(a.hideItem(l),i[n]--),i[n]++}i[1]||a.hideGroup(j["panelTitle"+String(1)]),i[2]||a.hideGroup(j["panelTitle"+String(2)]),i[3]||a.hideGroup(j["panelTitle"+String(3)])},reset:function(){h&&(delete h._.panel,delete h._.list,h._.committed=0,h._.items={},h._.state=2),k={},l=[],g()}}),f.on("instanceReady",function(){g()})}})}(),j.add("table",{requires:["dialog"],init:function(b){var c=(j.table,b.lang.table);b.addCommand("table",new a.dialogCommand("table")),b.addCommand("tableProperties",new a.dialogCommand("tableProperties")),b.ui.addButton("Table",{label:c.toolbar,command:"table"}),a.dialog.add("table",this.path+"dialogs/table.js"),a.dialog.add("tableProperties",this.path+"dialogs/table.js"),b.addMenuItems&&b.addMenuItems({table:{label:c.menu,command:"tableProperties",group:"table",order:5},tabledelete:{label:c.deleteTable,command:"tableDelete",group:"table",order:1}}),b.on("doubleclick",function(a){var b=a.data.element;b.is("table")&&(a.data.dialog="tableProperties")}),b.contextMenu&&b.contextMenu.addListener(function(a,b){if(!a||a.isReadOnly())return null;var c=a.hasAscendant("table",1);return c?{tabledelete:2,table:2}:null})}}),function(){function b(a){function b(a){e.length>0||1==a.type&&x.test(a.getName())&&!a.getCustomData("selected_cell")&&(h.setMarker(f,a,"selected_cell",!0),e.push(a))}for(var c=a.getRanges(),e=[],f={},g=0;g<c.length;g++){var i=c[g];if(i.collapsed){var j=i.getCommonAncestor(),k=j.getAscendant("td",!0)||j.getAscendant("th",!0);k&&e.push(k)}else{var l,m=new d.walker(i);for(m.guard=b;l=m.next();){var n=l.getAscendant("td")||l.getAscendant("th");n&&!n.getCustomData("selected_cell")&&(h.setMarker(f,n,"selected_cell",!0),e.push(n))}}}return h.clearAllMarkers(f),e}function f(a){for(var b,c,d,e=0,f=a.length-1,g={};b=a[e++];)h.setMarker(g,b,"delete_cell",!0);for(e=0;b=a[e++];)if((c=b.getPrevious())&&!c.getCustomData("delete_cell")||(c=b.getNext())&&!c.getCustomData("delete_cell"))return h.clearAllMarkers(g),c;return h.clearAllMarkers(g),d=a[0].getParent(),(d=d.getPrevious())?d.getLast():(d=a[f].getParent(),(d=d.getNext())?d.getChild(0):null)}function g(a,d){for(var f=b(a),g=f[0],i=g.getAscendant("table"),j=g.getDocument(),k=f[0].getParent(),l=k.$.rowIndex,m=f[f.length-1],n=m.getParent().$.rowIndex+m.$.rowSpan-1,o=new h(i.$.rows[n]),p=d?l:n,q=d?k:o,r=e.buildTableMap(i),s=r[p],t=d?r[p-1]:r[p+1],u=r[0].length,v=j.createElement("tr"),w=0;s[w]&&u>w;w++){var x;s[w].rowSpan>1&&t&&s[w]==t[w]?(x=s[w],x.rowSpan+=1):(x=new h(s[w]).clone(),x.removeAttribute("rowSpan"),!c&&x.appendBogus(),v.append(x),x=x.$),w+=x.colSpan-1}d?v.insertBefore(q):v.insertAfter(q)}function i(a){if(a instanceof d.selection){for(var c=b(a),f=c[0],g=f.getAscendant("table"),j=e.buildTableMap(g),k=c[0].getParent(),l=k.$.rowIndex,m=c[c.length-1],n=m.getParent().$.rowIndex+m.$.rowSpan-1,o=[],p=l;n>=p;p++){for(var q=j[p],r=new h(g.$.rows[p]),s=0;s<q.length;s++){var t=new h(q[s]),u=t.getParent().$.rowIndex;if(1==t.$.rowSpan)t.remove();else if(t.$.rowSpan-=1,u==p){var v=j[p+1];v[s-1]?t.insertAfter(new h(v[s-1])):new h(g.$.rows[p+1]).append(t,1)}s+=t.$.colSpan-1}o.push(r)}var w=g.$.rows,x=new h(w[n+1]||(l>0?w[l-1]:null)||g.$.parentNode);for(p=o.length;p>=0;p--)i(o[p]);return x}return a instanceof h&&(g=a.getAscendant("table"),1==g.$.rows.length?g.remove():a.remove()),null}function k(a,b){for(var c=a.getParent(),d=c.$.cells,e=0,f=0;f<d.length;f++){var g=d[f];if(e+=b?1:g.colSpan,g==a.$)break}return e-1}function l(a,b){for(var c=b?1/0:0,d=0;d<a.length;d++){var e=k(a[d],b);(b?c>e:e>c)&&(c=e)}return c}function m(a,d){for(var f=b(a),g=f[0],i=g.getAscendant("table"),j=l(f,1),k=l(f),m=d?j:k,n=e.buildTableMap(i),o=[],p=[],q=n.length,r=0;q>r;r++){o.push(n[r][m]);var s=d?n[r][m-1]:n[r][m+1];p.push(s)}for(r=0;q>r;r++){var t;o[r]&&(o[r].colSpan>1&&p[r]==o[r]?(t=o[r],t.colSpan+=1):(t=new h(o[r]).clone(),t.removeAttribute("colSpan"),!c&&t.appendBogus(),t[d?"insertBefore":"insertAfter"].call(t,new h(o[r])),t=t.$),r+=t.rowSpan-1)}}function n(a){for(var c,d,f=b(a),g=f[0],i=f[f.length-1],j=g.getAscendant("table"),k=e.buildTableMap(j),l=[],m=0,n=k.length;n>m;m++)for(var o=0,p=k[m].length;p>o;o++)k[m][o]==g.$&&(c=o),k[m][o]==i.$&&(d=o);for(m=c;d>=m;m++)for(o=0;o<k.length;o++){var q=k[o],r=new h(j.$.rows[o]),s=new h(q[m]);s.$&&(1==s.$.colSpan?s.remove():s.$.colSpan-=1,o+=s.$.rowSpan-1,r.$.cells.length||l.push(r))}var t=j.$.rows[0]&&j.$.rows[0].cells,u=new h(t[c]||(c?t[c-1]:j.$.parentNode));return l.length==n&&j.remove(),u}function o(a,b){var d=a.getStartElement(),e=d.getAscendant("td",1)||d.getAscendant("th",1);if(e){var f=e.clone();c||f.appendBogus(),b?f.insertBefore(e):f.insertAfter(e)}}function p(a){if(a instanceof d.selection){for(var c=b(a),e=c[0]&&c[0].getAscendant("table"),g=f(c),i=c.length-1;i>=0;i--)p(c[i]);g?r(g,!0):e&&e.remove()}else if(a instanceof h){var j=a.getParent();1==j.getChildCount()?j.remove():a.remove()}}function q(a){var b=a.getBogus();b&&b.remove(),a.trim()}function r(a,b){var c=new d.range(a.getDocument());c["moveToElementEdit"+(b?"End":"Start")](a)||(c.selectNodeContents(a),c.collapse(b?!1:!0)),c.select(!0)}function s(a,b,c){var d=a[b];if("undefined"==typeof c)return d;for(var e=0;d&&e<d.length;e++){if(c.is&&d[e]==c.$)return e;if(e==c)return new h(d[e])}return c.is?-1:null}function t(a,b){for(var c=[],d=0;d<a.length;d++){var e=a[d];c.push(e[b]),e[b].rowSpan>1&&(d+=e[b].rowSpan-1)}return c}function u(a,f,g){var i,j=b(a);if((f?1!=j.length:j.length<2)||(i=a.getCommonAncestor())&&1==i.type&&i.is("table"))return!1;var k,l=j[0],m=l.getAscendant("table"),n=e.buildTableMap(m),o=n.length,p=n[0].length,r=l.getParent().$.rowIndex,t=s(n,r,l);if(f){var u;try{var v=parseInt(l.getAttribute("rowspan"),10)||1,w=parseInt(l.getAttribute("colspan"),10)||1;u=n["up"==f?r-v:"down"==f?r+v:r]["left"==f?t-w:"right"==f?t+w:t]}catch(x){return!1}if(!u||l.$==u)return!1;j["up"==f||"left"==f?"unshift":"push"](new h(u))}for(var y=l.getDocument(),z=r,A=0,B=0,C=!g&&new d.documentFragment(y),D=0,E=0;E<j.length;E++){k=j[E];var F=k.getParent(),G=k.getFirst(),H=k.$.colSpan,I=k.$.rowSpan,J=F.$.rowIndex,K=s(n,J,k);if(D+=H*I,B=Math.max(B,K-t+H),A=Math.max(A,J-r+I),!g){if(q(k),k.getChildren().count()){if(J!=z&&G&&(!G.isBlockBoundary||!G.isBlockBoundary({br:1}))){var L=C.getLast(d.walker.whitespaces(!0));!L||L.is&&L.is("br")||C.append("br")}k.moveChildren(C)}E?k.remove():k.setHtml("")}z=J}if(g)return A*B==D;C.moveChildren(l),c||l.appendBogus(),B>=p?l.removeAttribute("rowSpan"):l.$.rowSpan=A,A>=o?l.removeAttribute("colSpan"):l.$.colSpan=B;var M=new d.nodeList(m.$.rows),N=M.count();for(E=N-1;E>=0;E--){var O=M.getItem(E);O.$.cells.length||(O.remove(),N++)}return l}function v(a,d){var f=b(a);if(f.length>1)return!1;if(d)return!0;var g,i,j,k,l=f[0],m=l.getParent(),n=m.getAscendant("table"),o=e.buildTableMap(n),p=m.$.rowIndex,q=s(o,p,l),r=l.$.rowSpan;if(r>1){i=Math.ceil(r/2),j=Math.floor(r/2),k=p+i;var t,u=new h(n.$.rows[k]),v=s(o,k);g=l.clone();for(var w=0;w<v.length;w++){if(t=v[w],t.parentNode==u.$&&w>q){g.insertBefore(new h(t));break}t=null}t||u.append(g,!0)}else{j=i=1,u=m.clone(),u.insertAfter(m),u.append(g=l.clone());for(var x=s(o,p),y=0;y<x.length;y++)x[y].rowSpan++}return c||g.appendBogus(),l.$.rowSpan=i,g.$.rowSpan=j,1==i&&l.removeAttribute("rowSpan"),1==j&&g.removeAttribute("rowSpan"),g}function w(a,d){var f=b(a);if(f.length>1)return!1;if(d)return!0;var g,h,i,j=f[0],k=j.getParent(),l=k.getAscendant("table"),m=e.buildTableMap(l),n=k.$.rowIndex,o=s(m,n,j),p=j.$.colSpan;if(p>1)h=Math.ceil(p/2),i=Math.floor(p/2);else{i=h=1;for(var q=t(m,o),r=0;r<q.length;r++)q[r].colSpan++}return g=j.clone(),g.insertAfter(j),c||g.appendBogus(),j.$.colSpan=h,g.$.colSpan=i,1==h&&j.removeAttribute("colSpan"),1==i&&g.removeAttribute("colSpan"),g}var x=/^(?:td|th)$/,y={thead:1,tbody:1,tfoot:1,td:1,tr:1,th:1};j.tabletools={requires:["table","dialog"],init:function(c){var e=c.lang.table;c.addCommand("cellProperties",new a.dialogCommand("cellProperties")),a.dialog.add("cellProperties",this.path+"dialogs/tableCell.js"),c.addCommand("tableDelete",{exec:function(a){var b=a.getSelection(),c=b&&b.getStartElement(),e=c&&c.getAscendant("table",1);if(e){var f=e.getParent();1!=f.getChildCount()||f.is("body","td","th")||(e=f);var g=new d.range(a.document);g.moveToPosition(e,3),e.remove(),g.select()}}}),c.addCommand("rowDelete",{exec:function(a){var b=a.getSelection();r(i(b))}}),c.addCommand("rowInsertBefore",{exec:function(a){var b=a.getSelection();g(b,!0)}}),c.addCommand("rowInsertAfter",{exec:function(a){var b=a.getSelection();g(b)}}),c.addCommand("columnDelete",{exec:function(a){var b=a.getSelection(),c=n(b);c&&r(c,!0)}}),c.addCommand("columnInsertBefore",{exec:function(a){var b=a.getSelection();m(b,!0)}}),c.addCommand("columnInsertAfter",{exec:function(a){var b=a.getSelection();m(b)}}),c.addCommand("cellDelete",{exec:function(a){var b=a.getSelection();p(b)}}),c.addCommand("cellMerge",{exec:function(a){r(u(a.getSelection()),!0)}}),c.addCommand("cellMergeRight",{exec:function(a){r(u(a.getSelection(),"right"),!0)}}),c.addCommand("cellMergeDown",{exec:function(a){r(u(a.getSelection(),"down"),!0)}}),c.addCommand("cellVerticalSplit",{exec:function(a){r(v(a.getSelection()))}}),c.addCommand("cellHorizontalSplit",{exec:function(a){r(w(a.getSelection()))}}),c.addCommand("cellInsertBefore",{exec:function(a){var b=a.getSelection();o(b,!0)}}),c.addCommand("cellInsertAfter",{exec:function(a){var b=a.getSelection();o(b)}}),c.addMenuItems&&c.addMenuItems({tablecell:{label:e.cell.menu,group:"tablecell",order:1,getItems:function(){var a=c.getSelection(),d=b(a);return{tablecell_insertBefore:2,tablecell_insertAfter:2,tablecell_delete:2,tablecell_merge:u(a,null,!0)?2:0,tablecell_merge_right:u(a,"right",!0)?2:0,tablecell_merge_down:u(a,"down",!0)?2:0,tablecell_split_vertical:v(a,!0)?2:0,tablecell_split_horizontal:w(a,!0)?2:0,tablecell_properties:d.length>0?2:0}}},tablecell_insertBefore:{label:e.cell.insertBefore,group:"tablecell",command:"cellInsertBefore",order:5},tablecell_insertAfter:{label:e.cell.insertAfter,group:"tablecell",command:"cellInsertAfter",order:10},tablecell_delete:{label:e.cell.deleteCell,group:"tablecell",command:"cellDelete",order:15},tablecell_merge:{label:e.cell.merge,group:"tablecell",command:"cellMerge",order:16},tablecell_merge_right:{label:e.cell.mergeRight,group:"tablecell",command:"cellMergeRight",order:17},tablecell_merge_down:{label:e.cell.mergeDown,group:"tablecell",command:"cellMergeDown",order:18},tablecell_split_horizontal:{label:e.cell.splitHorizontal,group:"tablecell",command:"cellHorizontalSplit",order:19},tablecell_split_vertical:{label:e.cell.splitVertical,group:"tablecell",command:"cellVerticalSplit",order:20},tablecell_properties:{label:e.cell.title,group:"tablecellproperties",command:"cellProperties",order:21},tablerow:{label:e.row.menu,group:"tablerow",order:1,getItems:function(){return{tablerow_insertBefore:2,tablerow_insertAfter:2,tablerow_delete:2}}},tablerow_insertBefore:{label:e.row.insertBefore,group:"tablerow",command:"rowInsertBefore",order:5},tablerow_insertAfter:{label:e.row.insertAfter,group:"tablerow",command:"rowInsertAfter",order:10},tablerow_delete:{label:e.row.deleteRow,group:"tablerow",command:"rowDelete",order:15},tablecolumn:{label:e.column.menu,group:"tablecolumn",order:1,getItems:function(){return{tablecolumn_insertBefore:2,tablecolumn_insertAfter:2,tablecolumn_delete:2}}},tablecolumn_insertBefore:{label:e.column.insertBefore,group:"tablecolumn",command:"columnInsertBefore",order:5},tablecolumn_insertAfter:{label:e.column.insertAfter,group:"tablecolumn",command:"columnInsertAfter",order:10},tablecolumn_delete:{label:e.column.deleteColumn,group:"tablecolumn",command:"columnDelete",order:15}}),c.contextMenu&&c.contextMenu.addListener(function(a,b){if(!a||a.isReadOnly())return null;for(;a;){if(a.getName()in y)return{tablecell:2,tablerow:2,tablecolumn:2};a=a.getParent()}return null})},getSelectedCells:b},j.add("tabletools",j.tabletools)}(),e.buildTableMap=function(a){for(var b=a.$.rows,c=-1,d=[],e=0;e<b.length;e++){c++,!d[c]&&(d[c]=[]);for(var f=-1,g=0;g<b[e].cells.length;g++){var h=b[e].cells[g];for(f++;d[c][f];)f++;for(var i=isNaN(h.colSpan)?1:h.colSpan,j=isNaN(h.rowSpan)?1:h.rowSpan,k=0;j>k;k++){d[c+k]||(d[c+k]=[]);for(var l=0;i>l;l++)d[c+k][f+l]=b[e].cells[g]}f+=i-1}}return d},j.add("specialchar",{requires:["dialog"],availableLangs:{cs:1,cy:1,de:1,el:1,en:1,eo:1,et:1,fa:1,fi:1,fr:1,he:1,hr:1,it:1,nb:1,nl:1,no:1,"pt-br":1,tr:1,ug:1,"zh-cn":1},init:function(b){var c="specialchar",d=this;a.dialog.add(c,this.path+"dialogs/specialchar.js"),b.addCommand(c,{exec:function(){var f=b.langCode;f=d.availableLangs[f]?f:"en",a.scriptLoader.load(a.getUrl(d.path+"lang/"+f+".js"),function(){e.extend(b.lang.specialChar,d.langEntries[f]),b.openDialog(c)})},modes:{wysiwyg:1},canUndo:!1}),b.ui.addButton("SpecialChar",{label:b.lang.specialChar.toolbar,command:c})}}),i.specialChars=["!","&quot;","#","$","%","&amp;","'","(",")","*","+","-",".","/","0","1","2","3","4","5","6","7","8","9",":",";","&lt;","=","&gt;","?","@","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","[","]","^","_","`","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","{","|","}","~","&euro;","&lsquo;","&rsquo;","&ldquo;","&rdquo;","&ndash;","&mdash;","&iexcl;","&cent;","&pound;","&curren;","&yen;","&brvbar;","&sect;","&uml;","&copy;","&ordf;","&laquo;","&not;","&reg;","&macr;","&deg;","&sup2;","&sup3;","&acute;","&micro;","&para;","&middot;","&cedil;","&sup1;","&ordm;","&raquo;","&frac14;","&frac12;","&frac34;","&iquest;","&Agrave;","&Aacute;","&Acirc;","&Atilde;","&Auml;","&Aring;","&AElig;","&Ccedil;","&Egrave;","&Eacute;","&Ecirc;","&Euml;","&Igrave;","&Iacute;","&Icirc;","&Iuml;","&ETH;","&Ntilde;","&Ograve;","&Oacute;","&Ocirc;","&Otilde;","&Ouml;","&times;","&Oslash;","&Ugrave;","&Uacute;","&Ucirc;","&Uuml;","&Yacute;","&THORN;","&szlig;","&agrave;","&aacute;","&acirc;","&atilde;","&auml;","&aring;","&aelig;","&ccedil;","&egrave;","&eacute;","&ecirc;","&euml;","&igrave;","&iacute;","&icirc;","&iuml;","&eth;","&ntilde;","&ograve;","&oacute;","&ocirc;","&otilde;","&ouml;","&divide;","&oslash;","&ugrave;","&uacute;","&ucirc;","&uuml;","&yacute;","&thorn;","&yuml;","&OElig;","&oelig;","&#372;","&#374","&#373","&#375;","&sbquo;","&#8219;","&bdquo;","&hellip;","&trade;","&#9658;","&bull;","&rarr;","&rArr;","&hArr;","&diams;","&asymp;"],function(){function a(a){return{editorFocus:!1,canUndo:!1,modes:{wysiwyg:1},exec:function(b){if(b.focusManager.hasFocus){var f,g=b.getSelection(),i=g.getCommonAncestor();if(f=i.getAscendant("td",!0)||i.getAscendant("th",!0)){var j=new d.range(b.document),k=e.tryThese(function(){var b=f.getParent(),c=b.$.cells[f.$.cellIndex+(a?-1:1)];return c.parentNode.parentNode,c},function(){var b=f.getParent(),c=b.getAscendant("table"),d=c.$.rows[b.$.rowIndex+(a?-1:1)];return d.cells[a?d.cells.length-1:0]});if(k||a){if(!k)return!0;k=new h(k),j.moveToElementEditStart(k),j.checkStartOfBlock()&&j.checkEndOfBlock()||j.selectNodeContents(k)}else{for(var l=f.getAscendant("table").$,m=f.getParent().$.cells,n=new h(l.insertRow(-1),b.document),o=0,p=m.length;p>o;o++){var q=n.append(new h(m[o],b.document).clone(!1,!1));!c&&q.appendBogus()}j.moveToElementEditStart(n)}return j.select(!0),!0}}return!1}}}var f={editorFocus:!1,modes:{wysiwyg:1,source:1}},g={exec:function(a){a.container.focusNext(!0,a.tabIndex)}},i={exec:function(a){a.container.focusPrevious(!0,a.tabIndex)}};j.add("tab",{requires:["keystrokes"],init:function(c){for(var d=c.config.enableTabKeyTools!==!1,h=c.config.tabSpaces||0,j="";h--;)j+=" ";j&&c.on("key",function(a){9==a.data.keyCode&&(c.insertHtml(j),a.cancel())}),d&&c.on("key",function(a){(9==a.data.keyCode&&c.execCommand("selectNextCell")||2228233==a.data.keyCode&&c.execCommand("selectPreviousCell"))&&a.cancel()}),(b.webkit||b.gecko)&&c.on("key",function(a){var b=a.data.keyCode;9!=b||j||(a.cancel(),c.execCommand("blur")),2228233==b&&(c.execCommand("blurBack"),a.cancel())}),c.addCommand("blur",e.extend(g,f)),c.addCommand("blurBack",e.extend(i,f)),c.addCommand("selectNextCell",a()),c.addCommand("selectPreviousCell",a(!0))}})}(),h.prototype.focusNext=function(a,b){var c,d,e,f,g,h,i=this,j=(i.$,void 0===b?i.getTabIndex():b);if(0>=j)for(g=i.getNextSourceNode(a,1);g;){if(g.isVisible()&&0===g.getTabIndex()){e=g;break}g=g.getNextSourceNode(!1,1)}else for(g=i.getDocument().getBody().getFirst();g=g.getNextSourceNode(!1,1);){if(!c)if(!d&&g.equals(i)){if(d=!0,a){if(!(g=g.getNextSourceNode(!0,1)))break;c=1}}else d&&!i.contains(g)&&(c=1);if(g.isVisible()&&!((h=g.getTabIndex())<0)){if(c&&h==j){e=g;break}h>j&&(!e||!f||f>h)?(e=g,f=h):e||0!==h||(e=g,f=h)}}e&&e.focus()},h.prototype.focusPrevious=function(a,b){for(var c,d,e,f,g=this,h=(g.$,void 0===b?g.getTabIndex():b),i=0,j=g.getDocument().getBody().getLast();j=j.getPreviousSourceNode(!1,1);){if(!c)if(!d&&j.equals(g)){if(d=!0,a){if(!(j=j.getPreviousSourceNode(!0,1)))break;c=1}}else d&&!g.contains(j)&&(c=1);if(j.isVisible()&&!((f=j.getTabIndex())<0))if(0>=h){if(c&&0===f){e=j;break}f>i&&(e=j,i=f)}else{if(c&&f==h){e=j;break}h>f&&(!e||f>i)&&(e=j,i=f)}}e&&e.focus()},function(){j.add("templates",{requires:["dialog"],init:function(b){a.dialog.add("templates",a.getUrl(this.path+"dialogs/templates.js")),b.addCommand("templates",new a.dialogCommand("templates")),b.ui.addButton("Templates",{label:b.lang.templates.button,command:"templates"})}});var b={},c={};a.addTemplates=function(a,c){b[a]=c},a.getTemplates=function(a){return b[a]},a.loadTemplates=function(b,d){for(var e=[],f=0,g=b.length;g>f;f++)c[b[f]]||(e.push(b[f]),c[b[f]]=1);e.length?a.scriptLoader.load(e,d):setTimeout(d,0)}}(),i.templates_files=[a.getUrl("plugins/templates/templates/default.js")],i.templates_replaceContent=!0,function(){var d=function(){this.toolbars=[],this.focusCommandExecuted=!1};d.prototype.focus=function(){for(var a,b=0;a=this.toolbars[b++];)for(var c,d=0;c=a.items[d++];)if(c.focus)return void c.focus()};var f={toolbarFocus:{modes:{wysiwyg:1,source:1},readOnly:1,exec:function(a){a.toolbox&&(a.toolbox.focusCommandExecuted=!0,c||b.air?setTimeout(function(){a.toolbox.focus()},100):a.toolbox.focus())}}};j.add("toolbar",{requires:["button"],init:function(b){var c,g=function(a,d){var e,f,h="rtl"==b.lang.dir,i=b.config.toolbarGroupCycling;switch(i=void 0===i||i,d){case 9:case 2228233:for(;!f||!f.items.length;)if(f=9==d?(f?f.next:a.toolbar.next)||b.toolbox.toolbars[0]:(f?f.previous:a.toolbar.previous)||b.toolbox.toolbars[b.toolbox.toolbars.length-1],f.items.length)for(a=f.items[c?f.items.length-1:0];a&&!a.focus;)a=c?a.previous:a.next,a||(f=0);return a&&a.focus(),!1;case h?37:39:case 40:e=a;do e=e.next,!e&&i&&(e=a.toolbar.items[0]);while(e&&!e.focus);return e?e.focus():g(a,9),!1;case h?39:37:case 38:e=a;do e=e.previous,!e&&i&&(e=a.toolbar.items[a.toolbar.items.length-1]);while(e&&!e.focus);return e?e.focus():(c=1,g(a,2228233),c=0),!1;case 27:return b.focus(),!1;case 13:case 32:return a.execute(),!1}return!0};b.on("themeSpace",function(c){if(c.data.space==b.config.toolbarLocation){b.toolbox=new d;var f,h=e.getNextId(),i=['<div class="cke_toolbox" role="group" aria-labelledby="',h,'" onmousedown="return false;"'],j=b.config.toolbarStartupExpanded!==!1;i.push(j?">":' style="display:none">'),i.push('<span id="',h,'" class="cke_voice_label">',b.lang.toolbars,"</span>");for(var k=b.toolbox.toolbars,l=b.config.toolbar instanceof Array?b.config.toolbar:b.config["toolbar_"+b.config.toolbar],m=0;m<l.length;m++){var n,o,p,q=0,r=l[m];if(r)if(f&&(i.push("</div>"),f=0),"/"!==r){p=r.items||r;for(var s=0;s<p.length;s++){var t,u,v=p[s];if(t=b.ui.create(v)){if(u=t.canGroup!==!1,!q){n=e.getNextId(),q={id:n,items:[]},o=r.name&&(b.lang.toolbarGroups[r.name]||r.name),i.push('<span id="',n,'" class="cke_toolbar"',o?' aria-labelledby="'+n+'_label"':"",' role="toolbar">'),
o&&i.push('<span id="',n,'_label" class="cke_voice_label">',o,"</span>"),i.push('<span class="cke_toolbar_start"></span>');var w=k.push(q)-1;w>0&&(q.previous=k[w-1],q.previous.next=q)}u?f||(i.push('<span class="cke_toolgroup" role="presentation">'),f=1):f&&(i.push("</span>"),f=0);var x=t.render(b,i);w=q.items.push(x)-1,w>0&&(x.previous=q.items[w-1],x.previous.next=x),x.toolbar=q,x.onkey=g,x.onfocus=function(){b.toolbox.focusCommandExecuted||b.focus()}}}f&&(i.push("</span>"),f=0),q&&i.push('<span class="cke_toolbar_end"></span></span>')}else i.push('<div class="cke_break"></div>')}if(i.push("</div>"),b.config.toolbarCanCollapse){var y=e.addFunction(function(){b.execCommand("toolbarCollapse")});b.on("destroy",function(){e.removeFunction(y)});var z=e.getNextId();b.addCommand("toolbarCollapse",{readOnly:1,exec:function(b){var c=a.document.getById(z),d=c.getPrevious(),e=b.getThemeSpace("contents"),f=d.getParent(),g=parseInt(e.$.style.height,10),h=f.$.offsetHeight,i=!d.isVisible();i?(d.show(),c.removeClass("cke_toolbox_collapser_min"),c.setAttribute("title",b.lang.toolbarCollapse)):(d.hide(),c.addClass("cke_toolbox_collapser_min"),c.setAttribute("title",b.lang.toolbarExpand)),c.getFirst().setText(i?"▲":"◀");var j=f.$.offsetHeight-h;e.setStyle("height",g-j+"px"),b.fire("resize")},modes:{wysiwyg:1,source:1}}),i.push('<a title="'+(j?b.lang.toolbarCollapse:b.lang.toolbarExpand)+'" id="'+z+'" tabIndex="-1" class="cke_toolbox_collapser'),j||i.push(" cke_toolbox_collapser_min"),i.push('" onclick="CKEDITOR.tools.callFunction('+y+')">',"<span>&#9650;</span>","</a>")}c.data.html+=i.join("")}}),b.on("destroy",function(){var a,b,c,d,f=0;for(a=this.toolbox.toolbars;f<a.length;f++)for(c=a[f].items,b=0;b<c.length;b++)d=c[b],d.clickFn&&e.removeFunction(d.clickFn),d.keyDownFn&&e.removeFunction(d.keyDownFn)}),b.addCommand("toolbarFocus",f.toolbarFocus),b.ui.add("-",a.UI_SEPARATOR,{}),b.ui.addHandler(a.UI_SEPARATOR,{create:function(){return{render:function(a,b){return b.push('<span class="cke_separator" role="separator"></span>'),{}}}}})}})}(),a.UI_SEPARATOR="separator",i.toolbarLocation="top",i.toolbar_Basic=[["Bold","Italic","-","NumberedList","BulletedList","-","Link","Unlink","-","About"]],i.toolbar_Full=[{name:"document",items:["Source","-","Save","NewPage","DocProps","Preview","Print","-","Templates"]},{name:"clipboard",items:["Cut","Copy","Paste","PasteText","PasteFromWord","-","Undo","Redo"]},{name:"editing",items:["Find","Replace","-","SelectAll","-","SpellChecker","Scayt"]},{name:"forms",items:["Form","Checkbox","Radio","TextField","Textarea","Select","Button","ImageButton","HiddenField"]},"/",{name:"basicstyles",items:["Bold","Italic","Underline","Strike","Subscript","Superscript","-","RemoveFormat"]},{name:"paragraph",items:["NumberedList","BulletedList","-","Outdent","Indent","-","Blockquote","CreateDiv","-","JustifyLeft","JustifyCenter","JustifyRight","JustifyBlock","-","BidiLtr","BidiRtl"]},{name:"links",items:["Link","Unlink","Anchor"]},{name:"insert",items:["Image","Flash","Table","HorizontalRule","Smiley","SpecialChar","PageBreak","Iframe"]},"/",{name:"styles",items:["Styles","Format","Font","FontSize"]},{name:"colors",items:["TextColor","BGColor"]},{name:"tools",items:["Maximize","ShowBlocks","-","About"]}],i.toolbar="Full",i.toolbarCanCollapse=!0,function(){function a(a){this.editor=a,this.reset()}j.add("undo",{requires:["selection","wysiwygarea"],init:function(b){function c(a){d.enabled&&a.data.command.canUndo!==!1&&d.save()}var d=new a(b),e=b.addCommand("undo",{exec:function(){d.undo()&&(b.selectionChange(),this.fire("afterUndo"))},state:0,canUndo:!1}),f=b.addCommand("redo",{exec:function(){d.redo()&&(b.selectionChange(),this.fire("afterRedo"))},state:0,canUndo:!1});d.onChange=function(){e.setState(d.undoable()?2:0),f.setState(d.redoable()?2:0)},b.on("beforeCommandExec",c),b.on("afterCommandExec",c),b.on("saveSnapshot",function(a){d.save(a.data&&a.data.contentOnly)}),b.on("contentDom",function(){b.document.on("keydown",function(a){a.data.$.ctrlKey||a.data.$.metaKey||d.type(a)})}),b.on("beforeModeUnload",function(){"wysiwyg"==b.mode&&d.save(!0)}),b.on("mode",function(){d.enabled=b.readOnly?!1:"wysiwyg"==b.mode,d.onChange()}),b.ui.addButton("Undo",{label:b.lang.undo,command:"undo"}),b.ui.addButton("Redo",{label:b.lang.redo,command:"redo"}),b.resetUndo=function(){d.reset(),b.fire("saveSnapshot")},b.on("updateSnapshot",function(){d.currentImage&&d.update()})}}),j.undo={};var d=j.undo.Image=function(a){this.editor=a,a.fire("beforeUndoImage");var b=a.getSnapshot(),d=b&&a.getSelection();c&&b&&(b=b.replace(/\s+data-cke-expando=".*?"/g,"")),this.contents=b,this.bookmarks=d&&d.createBookmarks2(!0),a.fire("afterUndoImage")},f=/\b(?:href|src|name)="[^"]*?"/gi;d.prototype={equals:function(a,d){var g=this.contents,h=a.contents;if(c&&(b.ie7Compat||b.ie6Compat)&&(g=g.replace(f,""),h=h.replace(f,"")),g!=h)return!1;if(d)return!0;var i=this.bookmarks,j=a.bookmarks;if(i||j){if(!i||!j||i.length!=j.length)return!1;for(var k=0;k<i.length;k++){var l=i[k],m=j[k];if(l.startOffset!=m.startOffset||l.endOffset!=m.endOffset||!e.arrayCompare(l.start,m.start)||!e.arrayCompare(l.end,m.end))return!1}}return!0}};var g={8:1,46:1},h={16:1,17:1,18:1},i={37:1,38:1,39:1,40:1};a.prototype={type:function(a){var b=a&&a.data.getKey(),f=b in h,j=b in g,k=this.lastKeystroke in g,l=j&&b==this.lastKeystroke,m=b in i,n=this.lastKeystroke in i,o=!j&&!m,p=j&&!l,q=!(f||this.typing)||o&&(k||n);if(q||p){var r=new d(this.editor),s=this.snapshots.length;e.setTimeout(function(){var a=this,b=a.editor.getSnapshot();c&&(b=b.replace(/\s+data-cke-expando=".*?"/g,"")),r.contents!=b&&s==a.snapshots.length&&(a.typing=!0,a.save(!1,r,!1)||a.snapshots.splice(a.index+1,a.snapshots.length-a.index-1),a.hasUndo=!0,a.hasRedo=!1,a.typesCount=1,a.modifiersCount=1,a.onChange())},0,this)}this.lastKeystroke=b,j?(this.typesCount=0,this.modifiersCount++,this.modifiersCount>25&&(this.save(!1,null,!1),this.modifiersCount=1)):m||(this.modifiersCount=0,this.typesCount++,this.typesCount>25&&(this.save(!1,null,!1),this.typesCount=1))},reset:function(){var a=this;a.lastKeystroke=0,a.snapshots=[],a.index=-1,a.limit=a.editor.config.undoStackSize||20,a.currentImage=null,a.hasUndo=!1,a.hasRedo=!1,a.resetType()},resetType:function(){var a=this;a.typing=!1,delete a.lastKeystroke,a.typesCount=0,a.modifiersCount=0},fireChange:function(){var a=this;a.hasUndo=!!a.getNextImage(!0),a.hasRedo=!!a.getNextImage(!1),a.resetType(),a.onChange()},save:function(a,b,c){var e=this,f=e.snapshots;return b||(b=new d(e.editor)),b.contents===!1?!1:e.currentImage&&b.equals(e.currentImage,a)?!1:(f.splice(e.index+1,f.length-e.index-1),f.length==e.limit&&f.shift(),e.index=f.push(b)-1,e.currentImage=b,c!==!1&&e.fireChange(),!0)},restoreImage:function(a){var b,d=this,e=d.editor;if(a.bookmarks&&(e.focus(),b=e.getSelection()),d.editor.loadSnapshot(a.contents),a.bookmarks)b.selectBookmarks(a.bookmarks);else if(c){var f=d.editor.document.getBody().$.createTextRange();f.collapse(!0),f.select()}d.index=a.index,d.update(),d.fireChange()},getNextImage:function(a){var b,c,d=this,e=d.snapshots,f=d.currentImage;if(f)if(a){for(c=d.index-1;c>=0;c--)if(b=e[c],!f.equals(b,!0))return b.index=c,b}else for(c=d.index+1;c<e.length;c++)if(b=e[c],!f.equals(b,!0))return b.index=c,b;return null},redoable:function(){return this.enabled&&this.hasRedo},undoable:function(){return this.enabled&&this.hasUndo},undo:function(){var a=this;if(a.undoable()){a.save(!0);var b=a.getNextImage(!0);if(b)return a.restoreImage(b),!0}return!1},redo:function(){var a=this;if(a.redoable()&&(a.save(!0),a.redoable())){var b=a.getNextImage(!1);if(b)return a.restoreImage(b),!0}return!1},update:function(){var a=this;a.snapshots.splice(a.index,1,a.currentImage=new d(a.editor))}}}(),function(){function i(a){return a.isBlockBoundary()&&f.$empty[a.getName()]}function k(a){return function(b){if("wysiwyg"==this.mode){this.focus();var c=this.getSelection(),d=c.isLocked;d&&c.unlock(),this.fire("saveSnapshot"),a.call(this,b.data),d&&this.getSelection().lock();var e=this;setTimeout(function(){try{e.fire("saveSnapshot")}catch(a){setTimeout(function(){e.fire("saveSnapshot")},200)}},0)}}}function l(e){var f=this;if(f.dataProcessor&&(e=f.dataProcessor.toHtml(e)),e){var g=f.getSelection(),h=g.getRanges()[0];if(!h.checkReadOnly()){if(b.opera){var i=new d.elementPath(h.startContainer);if(i.block)for(var j=a.htmlParser.fragment.fromHtml(e,!1).children,k=0,l=j.length;l>k;k++)if(j[k]._.isBlockLike){h.splitBlock(3==f.enterMode?"div":"p"),h.insertNode(h.document.createText("")),h.select();break}}if(c){var m=g.getNative();if("Control"==m.type)m.clear();else if(2==g.getType()){h=g.getRanges()[0];var n=h&&h.endContainer;n&&1==n.type&&"false"==n.getAttribute("contenteditable")&&h.checkBoundaryOfElement(n,2)&&(h.setEndAfter(h.endContainer),h.deleteContents())}m.createRange().pasteHTML(e)}else f.document.$.execCommand("inserthtml",!1,e);b.webkit&&(g=f.getSelection(),g.scrollIntoView())}}}function m(a){var g=this.getSelection(),h=g.getStartElement().hasAscendant("pre",!0)?2:this.config.enterMode,i=2==h,j=e.htmlEncode(a.replace(/\r\n|\r/g,"\n"));j=j.replace(/^[ \t]+|[ \t]+$/g,function(a,b,c){return 1==a.length?"&nbsp;":b?" "+e.repeat("&nbsp;",a.length-1):e.repeat("&nbsp;",a.length-1)+" "}),j=j.replace(/[ \t]{2,}/g,function(a){return e.repeat("&nbsp;",a.length-1)+" "});var k=1==h?"p":"div";if(i||(j=j.replace(/(\n{2})([\s\S]*?)(?:$|\1)/g,function(a,b,c){return"<"+k+">"+c+"</"+k+">"})),j=j.replace(/\n/g,"<br>"),i||c||(j=j.replace(new RegExp("<br>(?=</"+k+">)"),function(a){return e.repeat(a,2)})),b.gecko||b.webkit){for(var m=new d.elementPath(g.getStartElement()),n=[],o=0;o<m.elements.length;o++){var p=m.elements[o].getName();if(p in f.$inline)n.unshift(m.elements[o].getOuterHtml().match(/^<.*?>/));else if(p in f.$block)break}j=n.join("")+j}l.call(this,j)}function n(a){var b=this.getSelection(),c=b.getRanges(),d=a.getName(),e=f.$block[d],g=b.isLocked;g&&b.unlock();for(var h,i,j,k=c.length-1;k>=0;k--)if(h=c[k],!h.checkReadOnly()){h.deleteContents(1),i=!k&&a||a.clone(1);var l,m;if(e)for(;(l=h.getCommonAncestor(0,1))&&(m=f[l.getName()])&&(!m||!m[d]);)l.getName()in f.span?h.splitElement(l):h.checkStartOfBlock()&&h.checkEndOfBlock()?(h.setStartBefore(l),h.collapse(!0),l.remove()):h.splitBlock();h.insertNode(i),j||(j=i)}if(j&&(h.moveToPosition(j,4),e)){var n=j.getNext(x),o=n&&1==n.type&&n.getName();o&&f.$block[o]?f[o]["#"]?h.moveToElementEditStart(n):h.moveToElementEditEnd(j):n||(n=h.fixBlock(!0,3==this.config.enterMode?"div":"p"),h.moveToElementEditStart(n))}b.selectRanges([h]),g&&this.getSelection().lock()}function o(a){a.checkDirty()||setTimeout(function(){a.resetDirty()},0)}function p(a){return y(a)&&z(a)}function q(a){return 3==a.type&&e.trim(a.getText()).match(/^(?:&nbsp;|\xa0)$/)}function r(a){return a.getOuterHtml().match(u)}function s(a){var b=a.window,c=a.document,e=a.document.getBody(),f=e.getFirst(),g=e.getChildren().count();if(!g||1==g&&1==f.type&&f.hasAttribute("_moz_editor_bogus_node")){o(a);var h=a.element.getDocument(),i=h.getDocumentElement(),j=i.$.scrollTop,k=i.$.scrollLeft,l=c.$.createEvent("KeyEvents");l.initKeyEvent("keypress",!0,!0,b.$,!1,!1,!1,!1,0,32),c.$.dispatchEvent(l),(j!=i.$.scrollTop||k!=i.$.scrollLeft)&&h.getWindow().$.scrollTo(k,j),g&&e.getFirst().remove(),c.getBody().appendBogus();var m=new d.range(c);m.setStartAt(e,1),m.select()}}function t(a){var e=a.editor,f=a.data.path,g=f.blockLimit,h=a.data.selection,j=h.getRanges()[0],k=e.document.getBody(),l=e.config.enterMode;if(b.gecko){var m=f.block||f.blockLimit,n=m&&m.getLast(p);!m||!m.isBlockBoundary()||n&&1==n.type&&n.isBlockBoundary()||m.is("pre")||m.getBogus()||m.appendBogus()}if(e.config.autoParagraph!==!1&&2!=l&&j.collapsed&&"body"==g.getName()&&!f.block){var o=j.fixBlock(!0,3==e.config.enterMode?"div":"p");if(c){var s=o.getFirst(p);s&&q(s)&&s.remove()}if(r(o)){var t=o.getNext(y);t&&1==t.type&&!i(t)?(j.moveToElementEditStart(t),o.remove()):(t=o.getPrevious(y),t&&1==t.type&&!i(t)&&(j.moveToElementEditEnd(t),o.remove()))}j.select(),a.cancel()}var u=new d.range(e.document);u.moveToElementEditEnd(e.document.getBody());var v=new d.elementPath(u.startContainer);if(!v.blockLimit.is("body")){var w;w=2!=l?k.append(e.document.createElement(1==l?"p":"div")):k,c||w.appendBogus()}}var u=/(^|<body\b[^>]*>)\s*<(p|div|address|h\d|center|pre)[^>]*>\s*(?:<br[^>]*>|&nbsp;|\u00A0|&#160;)?\s*(:?<\/\2>)?\s*(?=$|<\/body>)/gi,v=d.walker.whitespaces(!0),w=d.walker.bogus(!0),x=function(a){return v(a)&&w(a)},y=d.walker.whitespaces(!0),z=d.walker.bookmark(!1,!0);y=d.walker.whitespaces(!0),j.add("wysiwygarea",{requires:["editingblock"],init:function(i){var j=2!=i.config.enterMode&&i.config.autoParagraph!==!1?3==i.config.enterMode?"div":"p":!1,o=i.lang.editorTitle.replace("%1",i.name),p=i.lang.editorHelp;c&&(o+=", "+p);var q,r=a.document.getWindow();if(i.on("editingBlockReady",function(){function f(a){if(A){A=0,i.fire("ariaWidget",x);var f=a.document,h=f.body,j=f.getElementById("cke_actscrpt");j&&j.parentNode.removeChild(j),h.spellcheck=!i.config.disableNativeSpellChecker;var k=!i.readOnly;c?(h.hideFocus=!0,h.disabled=!0,h.contentEditable=k,h.removeAttribute("disabled")):setTimeout(function(){b.gecko&&b.version>=10900||b.opera?f.$.body.contentEditable=k:b.webkit?f.$.body.parentNode.contentEditable=k:f.$.designMode=k?"off":"on"},0),k&&b.gecko&&e.setTimeout(s,0,null,i),a=i.window=new d.window(a),f=i.document=new g(f),k&&f.on("dblclick",function(a){var b=a.data.getTarget(),c={element:b,dialog:""};i.fire("doubleclick",c),c.dialog&&i.openDialog(c.dialog)}),c&&f.on("click",function(a){var b=a.data.getTarget();if(b.is("input")){var c=b.getAttribute("type");("submit"==c||"reset"==c)&&a.data.preventDefault()}}),c||b.opera||f.on("mousedown",function(a){var b=a.data.getTarget();b.is("img","hr","input","textarea","select")&&i.getSelection().selectElement(b)}),b.gecko&&f.on("mouseup",function(a){if(2==a.data.$.button){var b=a.data.getTarget();if(!b.getOuterHtml().replace(u,"")){var c=new d.range(f);c.moveToElementEditStart(b),c.select(!0)}}}),f.on("click",function(a){a=a.data,a.getTarget().is("a")&&2!=a.$.button&&a.preventDefault()}),b.webkit&&(f.on("mousedown",function(){m=1}),f.on("click",function(a){a.data.getTarget().is("input","select")&&a.data.preventDefault()}),f.on("mouseup",function(a){a.data.getTarget().is("input","textarea")&&a.data.preventDefault()}));var l=c?x:a;l.on("blur",function(){i.focusManager.blur()});var m;l.on("focus",function(){var a=i.document;b.gecko||b.opera?a.getBody().focus():b.webkit&&(m||(i.document.getDocumentElement().focus(),m=1)),i.focusManager.focus()});var n=i.keystrokeHandler;if(n.blockedKeystrokes[8]=!k,n.attach(f),f.getDocumentElement().addClass(f.$.compatMode),i.on("key",function(c){if("wysiwyg"==i.mode){var e=c.data.keyCode;if(e in{8:1,46:1}){var g,h,j,k=i.getSelection(),l=k.getSelectedElement(),m=k.getRanges()[0],n=new d.elementPath(m.startContainer),o=8==e;l?(i.fire("saveSnapshot"),m.moveToPosition(l,3),l.remove(),m.select(),i.fire("saveSnapshot"),c.cancel()):m.collapsed&&((g=n.block)&&m[o?"checkStartOfBlock":"checkEndOfBlock"]()&&(j=g[o?"getPrevious":"getNext"](v))&&j.is("table")?(i.fire("saveSnapshot"),m[o?"checkEndOfBlock":"checkStartOfBlock"]()&&g.remove(),m["moveToElementEdit"+(o?"End":"Start")](j),m.select(),i.fire("saveSnapshot"),c.cancel()):n.blockLimit.is("td")&&(h=n.blockLimit.getAscendant("table"))&&m.checkBoundaryOfElement(h,o?1:2)&&(j=h[o?"getPrevious":"getNext"](v))&&(i.fire("saveSnapshot"),m["moveToElementEdit"+(o?"End":"Start")](j),m.checkStartOfBlock()&&m.checkEndOfBlock()?j.remove():m.select(),i.fire("saveSnapshot"),c.cancel()))}if((33==e||34==e)&&b.gecko){var p=f.getBody();a.$.innerHeight>p.$.offsetHeight&&(m=new d.range(f),m[33==e?"moveToElementEditStart":"moveToElementEditEnd"](p),m.select(),c.cancel())}}}),c&&"CSS1Compat"==f.$.compatMode){var o={33:1,34:1};f.on("keydown",function(a){a.data.getKeystroke()in o&&setTimeout(function(){i.getSelection().scrollIntoView()},0)})}c&&1!=i.config.enterMode&&f.on("selectionchange",function(){var a=f.getBody(),b=i.getSelection(),c=b&&b.getRanges()[0];c&&a.getHtml().match(/^<p>&nbsp;<\/p>$/i)&&c.startContainer.equals(a)&&setTimeout(function(){c=i.getSelection().getRanges()[0],c.startContainer.equals("body")||(a.getFirst().remove(1),c.moveToElementEditEnd(a),c.select(1))},0)}),i.contextMenu&&i.contextMenu.addTarget(f,i.config.browserContextMenuOnCtrl!==!1),setTimeout(function(){i.fire("contentDom"),B&&(i.mode="wysiwyg",i.fire("mode",{previousMode:i._.previousMode}),B=!1),y=!1,z&&(i.focus(),z=!1),setTimeout(function(){i.fire("dataReady")},0);try{i.document.$.execCommand("2D-position",!1,!0)}catch(a){}try{i.document.$.execCommand("enableInlineTableEditing",!1,!i.config.disableNativeTableHandles)}catch(b){}if(i.config.disableObjectResizing)try{i.document.$.execCommand("enableObjectResizing",!1,!1)}catch(d){i.document.getBody().on(c?"resizestart":"resize",function(a){a.data.preventDefault()})}c&&setTimeout(function(){if(i.document){var a=i.document.$.body;a.runtimeStyle.marginBottom="0px",a.runtimeStyle.marginBottom=""}},1e3)},0)}}var w,x,y,z,A,B,C,D=b.isCustomDomain(),E=function(d){x&&x.remove();var g="document.open();"+(D?'document.domain="'+document.domain+'";':"")+"document.close();";g=b.air?"javascript:void(0)":c?"javascript:void(function(){"+encodeURIComponent(g)+"}())":"";var j=e.getNextId();x=h.createFromHtml('<iframe style="width:100%;height:100%" frameBorder="0" aria-describedby="'+j+'" title="'+o+'" src="'+g+'" tabIndex="'+(b.webkit?-1:i.tabIndex)+'" allowTransparency="true"></iframe>'),"chrome:"==document.location.protocol&&(a.event.useCapture=!0),x.on("load",function(a){A=1,a.removeListener();var c=x.getFrameDocument();c.write(d),b.air&&f(c.getWindow().$)}),"chrome:"==document.location.protocol&&(a.event.useCapture=!1),w.append(h.createFromHtml('<span id="'+j+'" class="cke_voice_label">'+p+"</span>")),w.append(x),b.webkit&&(C=function(){w.setStyle("width","100%"),x.hide(),x.setSize("width",w.getSize("width")),w.removeStyle("width"),x.show()},r.on("resize",C))};q=e.addFunction(f);var F='<script id="cke_actscrpt" type="text/javascript" data-cke-temp="1">'+(D?'document.domain="'+document.domain+'";':"")+"window.parent.CKEDITOR.tools.callFunction( "+q+", window );</script>";i.addMode("wysiwyg",{load:function(a,d,e){w=a,c&&b.quirks&&a.setStyle("position","relative"),i.mayBeDirty=!0,B=!0,e?this.loadSnapshotData(d):this.loadData(d)},loadData:function(a){y=!0,i._.dataStore={id:1};var c=i.config,d=c.fullPage,f=c.docType,g='<style type="text/css" data-cke-temp="1">'+i._.styles.join("\n")+"</style>";!d&&(g=e.buildStyleHtml(i.config.contentsCss)+g);var h=c.baseHref?'<base href="'+c.baseHref+'" data-cke-temp="1" />':"";d&&(a=a.replace(/<!DOCTYPE[^>]*>/i,function(a){return i.docType=f=a,""}).replace(/<\?xml\s[^\?]*\?>/i,function(a){return i.xmlDeclaration=a,""})),i.dataProcessor&&(a=i.dataProcessor.toHtml(a,j)),d?(/<body[\s|>]/.test(a)||(a="<body>"+a),/<html[\s|>]/.test(a)||(a="<html>"+a+"</html>"),/<head[\s|>]/.test(a)?/<title[\s|>]/.test(a)||(a=a.replace(/<head[^>]*>/,"$&<title></title>")):a=a.replace(/<html[^>]*>/,"$&<head><title></title></head>"),h&&(a=a.replace(/<head>/,"$&"+h)),a=a.replace(/<\/head\s*>/,g+"$&"),a=f+a):a=c.docType+'<html dir="'+c.contentsLangDirection+'" lang="'+(c.contentsLanguage||i.langCode)+'"><head><title>'+o+"</title>"+h+g+"</head><body"+(c.bodyId?' id="'+c.bodyId+'"':"")+(c.bodyClass?' class="'+c.bodyClass+'"':"")+">"+a+"</html>",b.gecko&&(a=a.replace(/<br \/>(?=\s*<\/(:?html|body)>)/,'$&<br type="_moz" />')),a+=F,this.onDispose(),E(a)},getData:function(){var a=i.config,c=a.fullPage,d=c&&i.docType,e=c&&i.xmlDeclaration,f=x.getFrameDocument(),g=c?f.getDocumentElement().getOuterHtml():f.getBody().getHtml();return b.gecko&&(g=g.replace(/<br>(?=\s*(:?$|<\/body>))/,"")),i.dataProcessor&&(g=i.dataProcessor.toDataFormat(g,j)),a.ignoreEmptyParagraph&&(g=g.replace(u,function(a,b){return b})),e&&(g=e+"\n"+g),d&&(g=d+"\n"+g),g},getSnapshotData:function(){return x.getFrameDocument().getBody().getHtml()},loadSnapshotData:function(a){x.getFrameDocument().getBody().setHtml(a)},onDispose:function(){i.document&&(i.document.getDocumentElement().clearCustomData(),i.document.getBody().clearCustomData(),i.window.clearCustomData(),i.document.clearCustomData(),x.clearCustomData(),x.remove())},unload:function(a){this.onDispose(),C&&r.removeListener("resize",C),i.window=i.document=x=w=z=null,i.fire("contentDomUnload")},focus:function(){var a=i.window;if(y)z=!0;else if(a){var c=i.getSelection(),d=c&&c.getNative();if(d&&"Control"==d.type)return;b.air?setTimeout(function(){a.focus()},0):a.focus(),i.selectionChange()}}}),i.on("insertHtml",k(l),null,null,20),i.on("insertElement",k(n),null,null,20),i.on("insertText",k(m),null,null,20),i.on("selectionChange",function(a){if(!i.readOnly){var b=i.getSelection();if(b&&!b.isLocked){var c=i.checkDirty();i.fire("saveSnapshot",{contentOnly:1}),t.call(this,a),i.fire("updateSnapshot"),!c&&i.resetDirty()}}},null,null,1)}),i.on("contentDom",function(){var a=i.document.getElementsByTag("title").getItem(0);a.data("cke-title",i.document.$.title),c&&(i.document.$.title=o)}),i.on("readOnly",function(){if("wysiwyg"==i.mode){var a=i.getMode();a.loadData(a.getData())}}),a.document.$.documentMode>=8){i.addCss("html.CSS1Compat [contenteditable=false]{ min-height:0 !important;}");var w=[];for(var x in f.$removeEmpty)w.push("html.CSS1Compat "+x+"[contenteditable=false]");i.addCss(w.join(",")+"{ display:inline-block;}")}else b.gecko&&(i.addCss("html { height: 100% !important; }"),i.addCss("img:-moz-broken { -moz-force-broken-image-icon : 1;	min-width : 24px; min-height : 24px; }"));i.addCss("html {	_overflow-y: scroll; cursor: text;	*cursor:auto;}"),i.addCss("img, input, textarea { cursor: default;}"),i.on("insertElement",function(a){var b=a.data;if(1==b.type&&(b.is("input")||b.is("textarea"))){var c="false"==b.getAttribute("contenteditable");c||(b.data("cke-editable",b.hasAttribute("contenteditable")?"true":"1"),b.setAttribute("contenteditable",!1))}})}}),b.gecko&&function(){var a=document.body;if(a){var b=a.getAttribute("onpageshow");a.setAttribute("onpageshow",(b?b+";":"")+'event.persisted && (function(){var allInstances = CKEDITOR.instances, editor, doc;for ( var i in allInstances ){	editor = allInstances[ i ];	doc = editor.document;	if ( doc )	{		doc.$.designMode = "off";		doc.$.designMode = "on";	}}})();')}else window.addEventListener("load",arguments.callee,!1)}()}(),i.disableObjectResizing=!1,i.disableNativeTableHandles=!0,i.disableNativeSpellChecker=!0,i.ignoreEmptyParagraph=!0,j.add("wsc",{requires:["dialog"],init:function(c){var d="checkspell",e=c.addCommand(d,new a.dialogCommand(d));e.modes={wysiwyg:!b.opera&&!b.air&&document.domain==window.location.hostname},c.ui.addButton("SpellChecker",{label:c.lang.spellCheck.toolbar,command:d}),a.dialog.add(d,this.path+"dialogs/wsc.js")}}),i.wsc_customerId=i.wsc_customerId||"1:ua3xw1-2XyGJ3-GWruD3-6OFNT1-oXcuB1-nR6Bp4-hgQHc-EcYng3-sdRXG3-NOfFk",i.wsc_customLoaderScript=i.wsc_customLoaderScript||null,a.DIALOG_RESIZE_NONE=0,a.DIALOG_RESIZE_WIDTH=1,a.DIALOG_RESIZE_HEIGHT=2,a.DIALOG_RESIZE_BOTH=3,function(){function f(a){return!!this._.tabs[a][0].$.offsetHeight}function i(){for(var a=this,b=a._.currentTabId,c=a._.tabIdList.length,d=e.indexOf(a._.tabIdList,b)+c,g=d-1;g>d-c;g--)if(f.call(a,a._.tabIdList[g%c]))return a._.tabIdList[g%c];return null}function j(){for(var a=this,b=a._.currentTabId,c=a._.tabIdList.length,d=e.indexOf(a._.tabIdList,b),g=d+1;d+c>g;g++)if(f.call(a,a._.tabIdList[g%c]))return a._.tabIdList[g%c];return null}function l(a,b){for(var c=a.$.getElementsByTagName("input"),d=0,e=c.length;e>d;d++){var f=new h(c[d]);"text"==f.getAttribute("type").toLowerCase()&&(b?(f.setAttribute("value",f.getCustomData("fake_value")||""),f.removeCustomData("fake_value")):(f.setCustomData("fake_value",f.getAttribute("value")),f.setAttribute("value","")))}}function m(a,b){var c=this,d=c.getInputElement();d&&(a?d.removeAttribute("aria-invalid"):d.setAttribute("aria-invalid",!0)),a||(c.select?c.select():c.focus()),b&&alert(b),c.fire("validated",{valid:a,msg:b})}function n(){var a=this.getInputElement();a&&a.removeAttribute("aria-invalid")}function o(a,b,c){this.element=b,this.focusIndex=c,this.tabIndex=0,this.isFocusable=function(){return!b.getAttribute("disabled")&&b.isVisible()},this.focus=function(){a._.currentFocusIndex=this.focusIndex,this.element.focus()},b.on("keydown",function(a){a.data.getKeystroke()in{32:1,13:1}&&this.fire("click")}),b.on("focus",function(){this.fire("mouseover")}),b.on("blur",function(){this.fire("mouseout")})}function p(b){function c(){b.layout()}var d=a.document.getWindow();d.on("resize",c),b.on("hide",function(){d.removeListener("resize",c)})}function q(a,b){this._={dialog:a},e.extend(this,b)}function r(c){function d(b){var d,e,k=c.getSize(),l=a.document.getWindow().getViewPaneSize(),m=b.data.$.screenX,n=b.data.$.screenY,o=m-f.x,p=n-f.y;f={x:m,y:n},g.x+=o,g.y+=p,d=g.x+j[3]<i?-j[3]:g.x-j[1]>l.width-k.width-i?l.width-k.width+("rtl"==h.lang.dir?0:j[1]):g.x,e=g.y+j[0]<i?-j[0]:g.y-j[2]>l.height-k.height-i?l.height-k.height+j[2]:g.y,c.move(d,e,1),b.data.preventDefault()}function e(c){if(a.document.removeListener("mousemove",d),a.document.removeListener("mouseup",e),b.ie6Compat){var f=E.getChild(0).getFrameDocument();f.removeListener("mousemove",d),f.removeListener("mouseup",e)}}var f=null,g=null,h=(c.getElement().getFirst(),c.getParentEditor()),i=h.config.dialog_magnetDistance,j=h.skin.margins||[0,0,0,0];"undefined"==typeof i&&(i=20),c.parts.title.on("mousedown",function(h){if(f={x:h.data.$.screenX,y:h.data.$.screenY},a.document.on("mousemove",d),a.document.on("mouseup",e),g=c.getPosition(),b.ie6Compat){var i=E.getChild(0).getFrameDocument();i.on("mousemove",d),i.on("mouseup",e)}h.data.preventDefault()},c)}function s(d){function f(a){var b="rtl"==q.lang.dir,c=(a.data.$.screenX-n.x)*(b?-1:1),e=a.data.$.screenY-n.y,f=o.width,g=o.height,h=f+c*(d._.moved?1:2),p=g+e*(d._.moved?1:2),r=d._.element.getFirst(),s=b&&r.getComputedStyle("right"),t=d.getPosition();t.y+p>m.height&&(p=m.height-t.y),(b?s:t.x)+h>m.width&&(h=m.width-(b?s:t.x)),(1==j||3==j)&&(f=Math.max(i.minWidth||0,h-k)),(2==j||3==j)&&(g=Math.max(i.minHeight||0,p-l)),d.resize(f,g),d._.moved||d.layout(),a.data.preventDefault()}function g(){if(a.document.removeListener("mouseup",g),a.document.removeListener("mousemove",f),p&&(p.remove(),p=null),b.ie6Compat){var c=E.getChild(0).getFrameDocument();c.removeListener("mouseup",g),c.removeListener("mousemove",f)}}var i=d.definition,j=i.resizable;if(0!=j){var k,l,m,n,o,p,q=d.getParentEditor(),r=e.addFunction(function(e){o=d.getSize();var i=d.parts.contents,j=i.$.getElementsByTagName("iframe").length;if(j&&(p=h.createFromHtml('<div class="cke_dialog_resize_cover" style="height: 100%; position: absolute; width: 100%;"></div>'),i.append(p)),l=o.height-d.parts.contents.getSize("height",!(b.gecko||b.opera||c&&b.quirks)),k=o.width-d.parts.contents.getSize("width",1),n={x:e.screenX,y:e.screenY},m=a.document.getWindow().getViewPaneSize(),a.document.on("mousemove",f),a.document.on("mouseup",g),b.ie6Compat){var q=E.getChild(0).getFrameDocument();q.on("mousemove",f),q.on("mouseup",g)}e.preventDefault&&e.preventDefault()});d.on("load",function(){var a="";1==j?a=" cke_resizer_horizontal":2==j&&(a=" cke_resizer_vertical");var b=h.createFromHtml('<div class="cke_resizer'+a+" cke_resizer_"+q.lang.dir+'" title="'+e.htmlEncode(q.lang.resize)+'" onmousedown="CKEDITOR.tools.callFunction('+r+', event )"></div>');d.parts.footer.append(b,1)}),q.on("destroy",function(){e.removeFunction(r)})}}function t(a){a.data.preventDefault(1)}function u(c){var d=a.document.getWindow(),f=c.config,g=f.dialog_backgroundCoverColor||"white",i=f.dialog_backgroundCoverOpacity,j=f.baseFloatZIndex,k=e.genKey(g,i,j),l=F[k];if(l)l.show();else{var m=['<div tabIndex="-1" style="position: ',b.ie6Compat?"absolute":"fixed","; z-index: ",j,"; top: 0px; left: 0px; ",b.ie6Compat?"":"background-color: "+g,'" class="cke_dialog_background_cover">'];if(b.ie6Compat){var n=b.isCustomDomain(),o="<html><body style=\\'background-color:"+g+";\\'></body></html>";m.push('<iframe hidefocus="true" frameborder="0" id="cke_dialog_background_iframe" src="javascript:'),m.push("void((function(){document.open();"+(n?"document.domain='"+document.domain+"';":"")+"document.write( '"+o+"' );document.close();})())"),m.push('" style="position:absolute;left:0;top:0;width:100%;height: 100%;progid:DXImageTransform.Microsoft.Alpha(opacity=0)"></iframe>')}m.push("</div>"),l=h.createFromHtml(m.join("")),l.setOpacity(void 0!=i?i:.5),l.on("keydown",t),l.on("keypress",t),l.on("keyup",t),l.appendTo(a.document.getBody()),F[k]=l}E=l;var p=function(){var a=d.getViewPaneSize();l.setStyles({width:a.width+"px",height:a.height+"px"})},q=function(){var b=d.getScrollPosition(),c=a.dialog._.currentTop;if(l.setStyles({left:b.x+"px",top:b.y+"px"}),c)do{var e=c.getPosition();c.move(e.x,e.y)}while(c=c._.parentDialog)};if(D=p,d.on("resize",p),p(),b.mac&&b.webkit||l.focus(),b.ie6Compat){var r=function(){q(),arguments.callee.prevScrollHandler.apply(this,arguments)};d.$.setTimeout(function(){r.prevScrollHandler=window.onscroll||function(){},window.onscroll=r},0),q()}}function v(){if(E){var c=a.document.getWindow();E.hide(),c.removeListener("resize",D),b.ie6Compat&&c.$.setTimeout(function(){var a=window.onscroll&&window.onscroll.prevScrollHandler;window.onscroll=a||null},0),D=null}}function w(){for(var a in F)F[a].remove();F={}}var x=e.cssLength;a.dialog=function(f,h){function k(){var a=H._.focusList;a.sort(function(a,b){return a.tabIndex!=b.tabIndex?b.tabIndex-a.tabIndex:a.focusIndex-b.focusIndex});for(var b=a.length,c=0;b>c;c++)a[c].focusIndex=c}function l(a){var b=H._.focusList;if(a=a||0,!(b.length<1)){var c=H._.currentFocusIndex;try{b[c].getInputElement().$.blur()}catch(d){}for(var e=(c+a+b.length)%b.length,f=e;a&&!b[f].isFocusable()&&(f=(f+a+b.length)%b.length,f!=e););b[f].focus(),"text"==b[f].type&&b[f].select()}}function o(b){var c=this;if(H==a.dialog._.currentTop){var d,g=b.data.getKeystroke(),h="rtl"==f.lang.dir;if(t=u=0,9==g||2228233==g){var k=2228233==g;if(H._.tabBarMode){var m=k?i.call(H):j.call(H);H.selectPage(m),H._.tabs[m][0].focus()}else l(k?-1:1);t=1}else if(4456569==g&&!H._.tabBarMode&&H.getPageCount()>1)H._.tabBarMode=!0,H._.tabs[H._.currentTabId][0].focus(),t=1;else if(37!=g&&39!=g||!H._.tabBarMode)if(13!=g&&32!=g||!H._.tabBarMode)if(13==g){var n=b.data.getTarget();n.is("a","button","select","textarea")||n.is("input")&&"button"==n.$.type||(d=c.getButton("ok"),d&&e.setTimeout(d.click,0,d),t=1),u=1}else{if(27!=g)return;d=c.getButton("cancel"),d?e.setTimeout(d.click,0,d):c.fire("cancel",{hide:!0}).hide!==!1&&c.hide(),u=1}else c.selectPage(c._.currentTabId),c._.tabBarMode=!1,c._.currentFocusIndex=-1,l(1),t=1;else m=g==(h?39:37)?i.call(H):j.call(H),H.selectPage(m),H._.tabs[m][0].focus(),t=1;p(b)}}function p(a){t?a.data.preventDefault(1):u&&a.data.stopPropagation()}var q,t,u,v=a.dialog._.dialogDefinitions[h],w=e.clone(y),x=f.config.dialog_buttonsOrder||"OS",z=f.lang.dir,A={};("OS"==x&&b.mac||"rtl"==x&&"ltr"==z||"ltr"==x&&"rtl"==z)&&w.buttons.reverse(),v=e.extend(v(f),w),v=e.clone(v),v=new C(this,v);var B=(a.document,f.theme.buildDialog(f));this._={editor:f,element:B.element,name:h,contentSize:{width:0,height:0},size:{width:0,height:0},contents:{},buttons:{},accessKeyMap:{},tabs:{},tabIdList:[],currentTabId:null,currentTabIndex:null,pageCount:0,lastTab:null,tabBarMode:!1,focusList:[],currentFocusIndex:0,hasFocus:!1},this.parts=B.parts,e.setTimeout(function(){f.fire("ariaWidget",this.parts.contents)},0,this);var D={position:b.ie6Compat?"absolute":"fixed",top:0,visibility:"hidden"};if(D["rtl"==z?"right":"left"]=0,this.parts.dialog.setStyles(D),a.event.call(this),this.definition=v=a.fire("dialogDefinition",{name:h,definition:v},f).definition,!("removeDialogTabs"in f._)&&f.config.removeDialogTabs){var E=f.config.removeDialogTabs.split(";");for(q=0;q<E.length;q++){var F=E[q].split(":");

if(2==F.length){var G=F[0];A[G]||(A[G]=[]),A[G].push(F[1])}}f._.removeDialogTabs=A}if(f._.removeDialogTabs&&(A=f._.removeDialogTabs[h]))for(q=0;q<A.length;q++)v.removeContents(A[q]);v.onLoad&&this.on("load",v.onLoad),v.onShow&&this.on("show",v.onShow),v.onHide&&this.on("hide",v.onHide),v.onOk&&this.on("ok",function(a){f.fire("saveSnapshot"),setTimeout(function(){f.fire("saveSnapshot")},0),v.onOk.call(this,a)===!1&&(a.data.hide=!1)}),v.onCancel&&this.on("cancel",function(a){v.onCancel.call(this,a)===!1&&(a.data.hide=!1)});var H=this,I=function(a){var b=H._.contents,c=!1;for(var d in b)for(var e in b[d])if(c=a.call(this,b[d][e]))return};this.on("ok",function(a){I(function(b){if(b.validate){var c=b.validate(this),d="string"==typeof c||c===!1;return d&&(a.data.hide=!1,a.stop()),m.call(b,!d,"string"==typeof c?c:void 0),d}})},this,null,0),this.on("cancel",function(a){I(function(b){return b.isChanged()?(confirm(f.lang.common.confirmCancel)||(a.data.hide=!1),!0):void 0})},this,null,0),this.parts.close.on("click",function(a){this.fire("cancel",{hide:!0}).hide!==!1&&this.hide(),a.data.preventDefault()},this),this.changeFocus=l;var J=this._.element;for(this.on("show",function(){J.on("keydown",o,this),(b.opera||b.gecko)&&J.on("keypress",p,this)}),this.on("hide",function(){J.removeListener("keydown",o),(b.opera||b.gecko)&&J.removeListener("keypress",p),I(function(a){n.apply(a)})}),this.on("iframeAdded",function(a){var b=new g(a.data.iframe.$.contentWindow.document);b.on("keydown",o,this,null,0)}),this.on("show",function(){var a=this;if(k(),f.config.dialog_startupFocusTab&&H._.pageCount>1)H._.tabBarMode=!0,H._.tabs[H._.currentTabId][0].focus();else if(!a._.hasFocus){if(a._.currentFocusIndex=-1,v.onFocus){var b=v.onFocus.call(a);b&&b.focus()}else l(1);if("wysiwyg"==a._.editor.mode&&c){var d=f.document.$.selection,e=d.createRange();if(e&&(e.parentElement&&e.parentElement().ownerDocument==f.document.$||e.item&&e.item(0).ownerDocument==f.document.$)){var g=document.body.createTextRange();g.moveToElementText(a.getElement().getFirst().$),g.collapse(!0),g.select()}}}},this,null,4294967295),b.ie6Compat&&this.on("load",function(a){var b=this.getElement(),c=b.getFirst();c.remove(),c.appendTo(b)},this),r(this),s(this),new d.text(v.title,a.document).appendTo(this.parts.title),q=0;q<v.contents.length;q++){var K=v.contents[q];K&&this.addPage(K)}this.parts.tabs.on("click",function(a){var b=this,c=a.data.getTarget();if(c.hasClass("cke_dialog_tab")){var d=c.$.id;b.selectPage(d.substring(4,d.lastIndexOf("_"))),b._.tabBarMode&&(b._.tabBarMode=!1,b._.currentFocusIndex=-1,l(1)),a.data.preventDefault()}},this);var L=[],M=a.dialog._.uiElementBuilders.hbox.build(this,{type:"hbox",className:"cke_dialog_footer_buttons",widths:[],children:v.buttons},L).getChild();for(this.parts.footer.setHtml(L.join("")),q=0;q<M.length;q++)this._.buttons[M[q].id]=M[q]},a.dialog.prototype={destroy:function(){this.hide(),this._.element.remove()},resize:function(){return function(b,c){var d=this;d._.contentSize&&d._.contentSize.width==b&&d._.contentSize.height==c||(a.dialog.fire("resize",{dialog:d,skin:d._.editor.skinName,width:b,height:c},d._.editor),d.fire("resize",{skin:d._.editor.skinName,width:b,height:c},d._.editor),"rtl"==d._.editor.lang.dir&&d._.position&&(d._.position.x=a.document.getWindow().getViewPaneSize().width-d._.contentSize.width-parseInt(d._.element.getFirst().getStyle("right"),10)),d._.contentSize={width:b,height:c})}}(),getSize:function(){var a=this._.element.getFirst();return{width:a.$.offsetWidth||0,height:a.$.offsetHeight||0}},move:function(b,c,d){var e=this,f=e._.element.getFirst(),g="rtl"==e._.editor.lang.dir,h="fixed"==f.getComputedStyle("position");if(!h||!e._.position||e._.position.x!=b||e._.position.y!=c){if(e._.position={x:b,y:c},!h){var i=a.document.getWindow().getScrollPosition();b+=i.x,c+=i.y}if(g){var j=e.getSize(),k=a.document.getWindow().getViewPaneSize();b=k.width-j.width-b}var l={top:(c>0?c:0)+"px"};l[g?"right":"left"]=(b>0?b:0)+"px",f.setStyles(l),d&&(e._.moved=1)}},getPosition:function(){return e.extend({},this._.position)},show:function(){var c=this._.element,d=this.definition;if(c.getParent()&&c.getParent().equals(a.document.getBody())?c.setStyle("display","block"):c.appendTo(a.document.getBody()),b.gecko&&b.version<10900){var f=this.parts.dialog;f.setStyle("position","absolute"),setTimeout(function(){f.setStyle("position","fixed")},0)}if(this.resize(this._.contentSize&&this._.contentSize.width||d.width||d.minWidth,this._.contentSize&&this._.contentSize.height||d.height||d.minHeight),this.reset(),this.selectPage(this.definition.contents[0].id),null===a.dialog._.currentZIndex&&(a.dialog._.currentZIndex=this._.editor.config.baseFloatZIndex),this._.element.getFirst().setStyle("z-index",a.dialog._.currentZIndex+=10),null===a.dialog._.currentTop)a.dialog._.currentTop=this,this._.parentDialog=null,u(this._.editor);else{this._.parentDialog=a.dialog._.currentTop;var g=this._.parentDialog.getElement().getFirst();g.$.style.zIndex-=Math.floor(this._.editor.config.baseFloatZIndex/2),a.dialog._.currentTop=this}c.on("keydown",H),c.on(b.opera?"keypress":"keyup",I),this._.hasFocus=!1,e.setTimeout(function(){this.layout(),p(this),this.parts.dialog.setStyle("visibility",""),this.fireOnce("load",{}),k.fire("ready",this),this.fire("show",{}),this._.editor.fire("dialogShow",this),this.foreach(function(a){a.setInitValue&&a.setInitValue()})},100,this)},layout:function(){var c=this,d=c.parts.dialog,e=c.getSize(),f=a.document.getWindow(),g=f.getViewPaneSize(),h=(g.width-e.width)/2,i=(g.height-e.height)/2;b.ie6Compat||(e.height+(i>0?i:0)>g.height||e.width+(h>0?h:0)>g.width?d.setStyle("position","absolute"):d.setStyle("position","fixed")),c.move(c._.moved?c._.position.x:h,c._.moved?c._.position.y:i)},foreach:function(a){var b=this;for(var c in b._.contents)for(var d in b._.contents[c])a.call(b,b._.contents[c][d]);return b},reset:function(){var a=function(a){a.reset&&a.reset(1)};return function(){return this.foreach(a),this}}(),setupContent:function(){var a=arguments;this.foreach(function(b){b.setup&&b.setup.apply(b,a)})},commitContent:function(){var a=arguments;this.foreach(function(b){c&&this._.currentFocusIndex==b.focusIndex&&b.getInputElement().$.blur(),b.commit&&b.commit.apply(b,a)})},hide:function(){if(this.parts.dialog.isVisible()){this.fire("hide",{}),this._.editor.fire("dialogHide",this),this.selectPage(this._.tabIdList[0]);var d=this._.element;for(d.setStyle("display","none"),this.parts.dialog.setStyle("visibility","hidden"),K(this);a.dialog._.currentTop!=this;)a.dialog._.currentTop.hide();if(this._.parentDialog){var e=this._.parentDialog.getElement().getFirst();e.setStyle("z-index",parseInt(e.$.style.zIndex,10)+Math.floor(this._.editor.config.baseFloatZIndex/2))}else v();if(a.dialog._.currentTop=this._.parentDialog,this._.parentDialog)a.dialog._.currentZIndex-=10;else{a.dialog._.currentZIndex=null,d.removeListener("keydown",H),d.removeListener(b.opera?"keypress":"keyup",I);var f=this._.editor;if(f.focus(),"wysiwyg"==f.mode&&c){var g=f.getSelection();g&&g.unlock(!0)}}delete this._.parentDialog,this.foreach(function(a){a.resetInitValue&&a.resetInitValue()})}},addPage:function(c){var d=this,f=[],g=c.label?' title="'+e.htmlEncode(c.label)+'"':"",i=(c.elements,a.dialog._.uiElementBuilders.vbox.build(d,{type:"vbox",className:"cke_dialog_page_contents",children:c.elements,expand:!!c.expand,padding:c.padding,style:c.style||"width: 100%;height:100%"},f)),j=h.createFromHtml(f.join(""));j.setAttribute("role","tabpanel");var k=b,l="cke_"+c.id+"_"+e.getNextNumber(),m=h.createFromHtml(['<a class="cke_dialog_tab"',d._.pageCount>0?" cke_last":"cke_first",g,c.hidden?' style="display:none"':"",' id="',l,'"',k.gecko&&k.version>=10900&&!k.hc?"":' href="javascript:void(0)"',' tabIndex="-1"',' hidefocus="true"',' role="tab">',c.label,"</a>"].join(""));j.setAttribute("aria-labelledby",l),d._.tabs[c.id]=[m,j],d._.tabIdList.push(c.id),!c.hidden&&d._.pageCount++,d._.lastTab=m,d.updateStyle();for(var n,o=d._.contents[c.id]={},p=i.getChild();n=p.shift();)o[n.id]=n,"function"==typeof n.getChild&&p.push.apply(p,n.getChild());j.setAttribute("name",c.id),j.appendTo(d.parts.contents),m.unselectable(),d.parts.tabs.append(m),c.accessKey&&(J(d,d,"CTRL+"+c.accessKey,M,L),d._.accessKeyMap["CTRL+"+c.accessKey]=c.id)},selectPage:function(a){if(this._.currentTabId!=a&&this.fire("selectPage",{page:a,currentPage:this._.currentTabId})!==!0){for(var c in this._.tabs){var d=this._.tabs[c][0],f=this._.tabs[c][1];c!=a&&(d.removeClass("cke_dialog_tab_selected"),f.hide()),f.setAttribute("aria-hidden",c!=a)}var g=this._.tabs[a];g[0].addClass("cke_dialog_tab_selected"),b.ie6Compat||b.ie7Compat?(l(g[1]),g[1].show(),setTimeout(function(){l(g[1],1)},0)):g[1].show(),this._.currentTabId=a,this._.currentTabIndex=e.indexOf(this._.tabIdList,a)}},updateStyle:function(){this.parts.dialog[(1===this._.pageCount?"add":"remove")+"Class"]("cke_single_page")},hidePage:function(a){var b=this,c=b._.tabs[a]&&b._.tabs[a][0];c&&1!=b._.pageCount&&c.isVisible()&&(a==b._.currentTabId&&b.selectPage(i.call(b)),c.hide(),b._.pageCount--,b.updateStyle())},showPage:function(a){var b=this,c=b._.tabs[a]&&b._.tabs[a][0];c&&(c.show(),b._.pageCount++,b.updateStyle())},getElement:function(){return this._.element},getName:function(){return this._.name},getContentElement:function(a,b){var c=this._.contents[a];return c&&c[b]},getValueOf:function(a,b){return this.getContentElement(a,b).getValue()},setValueOf:function(a,b,c){return this.getContentElement(a,b).setValue(c)},getButton:function(a){return this._.buttons[a]},click:function(a){return this._.buttons[a].click()},disableButton:function(a){return this._.buttons[a].disable()},enableButton:function(a){return this._.buttons[a].enable()},getPageCount:function(){return this._.pageCount},getParentEditor:function(){return this._.editor},getSelectedElement:function(){return this.getParentEditor().getSelection().getSelectedElement()},addFocusable:function(a,b){var c=this;if("undefined"==typeof b)b=c._.focusList.length,c._.focusList.push(new o(c,a,b));else{c._.focusList.splice(b,0,new o(c,a,b));for(var d=b+1;d<c._.focusList.length;d++)c._.focusList[d].focusIndex++}}},e.extend(a.dialog,{add:function(a,b){this._.dialogDefinitions[a]&&"function"!=typeof b||(this._.dialogDefinitions[a]=b)},exists:function(a){return!!this._.dialogDefinitions[a]},getCurrent:function(){return a.dialog._.currentTop},okButton:function(){var a=function(a,b){return b=b||{},e.extend({id:"ok",type:"button",label:a.lang.common.ok,"class":"cke_dialog_ui_button_ok",onClick:function(a){var b=a.data.dialog;b.fire("ok",{hide:!0}).hide!==!1&&b.hide()}},b,!0)};return a.type="button",a.override=function(b){return e.extend(function(c){return a(c,b)},{type:"button"},!0)},a}(),cancelButton:function(){var a=function(a,b){return b=b||{},e.extend({id:"cancel",type:"button",label:a.lang.common.cancel,"class":"cke_dialog_ui_button_cancel",onClick:function(a){var b=a.data.dialog;b.fire("cancel",{hide:!0}).hide!==!1&&b.hide()}},b,!0)};return a.type="button",a.override=function(b){return e.extend(function(c){return a(c,b)},{type:"button"},!0)},a}(),addUIElement:function(a,b){this._.uiElementBuilders[a]=b}}),a.dialog._={uiElementBuilders:{},dialogDefinitions:{},currentTop:null,currentZIndex:null},a.event.implementOn(a.dialog),a.event.implementOn(a.dialog.prototype,!0);var y={resizable:3,minWidth:600,minHeight:400,buttons:[a.dialog.okButton,a.dialog.cancelButton]},z=function(a,b,c){for(var d,e=0;d=a[e];e++){if(d.id==b)return d;if(c&&d[c]){var f=z(d[c],b,c);if(f)return f}}return null},A=function(a,b,c,d,e){if(c){for(var f,g=0;f=a[g];g++){if(f.id==c)return a.splice(g,0,b),b;if(d&&f[d]){var h=A(f[d],b,c,d,!0);if(h)return h}}if(e)return null}return a.push(b),b},B=function(a,b,c){for(var d,e=0;d=a[e];e++){if(d.id==b)return a.splice(e,1);if(c&&d[c]){var f=B(d[c],b,c);if(f)return f}}return null},C=function(a,b){this.dialog=a;for(var c,d=b.contents,f=0;c=d[f];f++)d[f]=c&&new q(a,c);e.extend(this,b)};C.prototype={getContents:function(a){return z(this.contents,a)},getButton:function(a){return z(this.buttons,a)},addContents:function(a,b){return A(this.contents,a,b)},addButton:function(a,b){return A(this.buttons,a,b)},removeContents:function(a){B(this.contents,a)},removeButton:function(a){B(this.buttons,a)}},q.prototype={get:function(a){return z(this.elements,a,"children")},add:function(a,b){return A(this.elements,a,b,"children")},remove:function(a){B(this.elements,a,"children")}};var D,E,F={},G={},H=function(a){var b=a.data.$.ctrlKey||a.data.$.metaKey,c=a.data.$.altKey,d=a.data.$.shiftKey,e=String.fromCharCode(a.data.$.keyCode),f=G[(b?"CTRL+":"")+(c?"ALT+":"")+(d?"SHIFT+":"")+e];f&&f.length&&(f=f[f.length-1],f.keydown&&f.keydown.call(f.uiElement,f.dialog,f.key),a.data.preventDefault())},I=function(a){var b=a.data.$.ctrlKey||a.data.$.metaKey,c=a.data.$.altKey,d=a.data.$.shiftKey,e=String.fromCharCode(a.data.$.keyCode),f=G[(b?"CTRL+":"")+(c?"ALT+":"")+(d?"SHIFT+":"")+e];f&&f.length&&(f=f[f.length-1],f.keyup&&(f.keyup.call(f.uiElement,f.dialog,f.key),a.data.preventDefault()))},J=function(a,b,c,d,e){var f=G[c]||(G[c]=[]);f.push({uiElement:a,dialog:b,key:c,keyup:e||a.accessKeyUp,keydown:d||a.accessKeyDown})},K=function(a){for(var b in G){for(var c=G[b],d=c.length-1;d>=0;d--)(c[d].dialog==a||c[d].uiElement==a)&&c.splice(d,1);0===c.length&&delete G[b]}},L=function(a,b){a._.accessKeyMap[b]&&a.selectPage(a._.accessKeyMap[b])},M=function(a,b){};!function(){k.dialog={uiElement:function(d,f,g,h,i,j,k){if(!(arguments.length<4)){{var l,m=(h.call?h(f):h)||"div",n=["<",m," "],o=(i&&i.call?i(f):i)||{},p=(j&&j.call?j(f):j)||{},q=(k&&k.call?k.call(this,d,f):k)||"",r=this.domId=p.id||e.getNextId()+"_uiElement";this.id=f.id}p.id=r;var s={};f.type&&(s["cke_dialog_ui_"+f.type]=1),f.className&&(s[f.className]=1),f.disabled&&(s.cke_disabled=1);var t=p["class"]&&p["class"].split?p["class"].split(" "):[];for(l=0;l<t.length;l++)t[l]&&(s[t[l]]=1);var u=[];for(l in s)u.push(l);p["class"]=u.join(" "),f.title&&(p.title=f.title);var v=(f.style||"").split(";");if(f.align){var w=f.align;o["margin-left"]="left"==w?0:"auto",o["margin-right"]="right"==w?0:"auto"}for(l in o)v.push(l+":"+o[l]);for(f.hidden&&v.push("display:none"),l=v.length-1;l>=0;l--)""===v[l]&&v.splice(l,1);v.length>0&&(p.style=(p.style?p.style+"; ":"")+v.join("; "));for(l in p)n.push(l+'="'+e.htmlEncode(p[l])+'" ');n.push(">",q,"</",m,">"),g.push(n.join("")),(this._||(this._={})).dialog=d,"boolean"==typeof f.isChanged&&(this.isChanged=function(){return f.isChanged}),"function"==typeof f.isChanged&&(this.isChanged=f.isChanged),"function"==typeof f.setValue&&(this.setValue=e.override(this.setValue,function(a){return function(b){a.call(this,f.setValue.call(this,b))}})),"function"==typeof f.getValue&&(this.getValue=e.override(this.getValue,function(a){return function(){return f.getValue.call(this,a.call(this))}})),a.event.implementOn(this),this.registerEvents(f),this.accessKeyUp&&this.accessKeyDown&&f.accessKey&&J(this,d,"CTRL+"+f.accessKey);var x=this;d.on("load",function(){var a=x.getInputElement();if(a){var e=x.type in{checkbox:1,ratio:1}&&c&&b.version<8?"cke_dialog_ui_focused":"";a.on("focus",function(){d._.tabBarMode=!1,d._.hasFocus=!0,x.fire("focus"),e&&this.addClass(e)}),a.on("blur",function(){x.fire("blur"),e&&this.removeClass(e)})}}),this.keyboardFocusable&&(this.tabIndex=f.tabIndex||0,this.focusIndex=d._.focusList.push(this)-1,this.on("focus",function(){d._.currentFocusIndex=x.focusIndex})),e.extend(this,f)}},hbox:function(a,d,e,f,g){if(!(arguments.length<4)){this._||(this._={});var h,i=this._.children=d,j=g&&g.widths||null,l=g&&g.height||null,m={},n=function(){var a=['<tbody><tr class="cke_dialog_ui_hbox">'];for(h=0;h<e.length;h++){var d="cke_dialog_ui_hbox_child",f=[];0===h&&(d="cke_dialog_ui_hbox_first"),h==e.length-1&&(d="cke_dialog_ui_hbox_last"),a.push('<td class="',d,'" role="presentation" '),j?j[h]&&f.push("width:"+x(j[h])):f.push("width:"+Math.floor(100/e.length)+"%"),l&&f.push("height:"+x(l)),g&&void 0!=g.padding&&f.push("padding:"+x(g.padding)),c&&b.quirks&&i[h].align&&f.push("text-align:"+i[h].align),f.length>0&&a.push('style="'+f.join("; ")+'" '),a.push(">",e[h],"</td>")}return a.push("</tr></tbody>"),a.join("")},o={role:"presentation"};g&&g.align&&(o.align=g.align),k.dialog.uiElement.call(this,a,g||{type:"hbox"},f,"table",m,o,n)}},vbox:function(a,d,f,g,h){if(!(arguments.length<3)){this._||(this._={});var i=this._.children=d,j=h&&h.width||null,l=h&&h.heights||null,m=function(){var d=['<table role="presentation" cellspacing="0" border="0" '];d.push('style="'),h&&h.expand&&d.push("height:100%;"),d.push("width:"+x(j||"100%"),";"),d.push('"'),d.push('align="',e.htmlEncode(h&&h.align||("ltr"==a.getParentEditor().lang.dir?"left":"right")),'" '),d.push("><tbody>");for(var g=0;g<f.length;g++){var k=[];d.push('<tr><td role="presentation" '),j&&k.push("width:"+x(j||"100%")),l?k.push("height:"+x(l[g])):h&&h.expand&&k.push("height:"+Math.floor(100/f.length)+"%"),h&&void 0!=h.padding&&k.push("padding:"+x(h.padding)),c&&b.quirks&&i[g].align&&k.push("text-align:"+i[g].align),k.length>0&&d.push('style="',k.join("; "),'" '),d.push(' class="cke_dialog_ui_vbox_child">',f[g],"</td></tr>")}return d.push("</tbody></table>"),d.join("")};k.dialog.uiElement.call(this,a,h||{type:"vbox"},g,"div",null,{role:"presentation"},m)}}}}(),k.dialog.uiElement.prototype={getElement:function(){return a.document.getById(this.domId)},getInputElement:function(){return this.getElement()},getDialog:function(){return this._.dialog},setValue:function(a,b){return this.getInputElement().setValue(a),!b&&this.fire("change",{value:a}),this},getValue:function(){return this.getInputElement().getValue()},isChanged:function(){return!1},selectParentTab:function(){for(var a,b=this,c=b.getInputElement(),d=c;(d=d.getParent())&&-1==d.$.className.search("cke_dialog_page_contents"););return d?(a=d.getAttribute("name"),b._.dialog._.currentTabId!=a&&b._.dialog.selectPage(a),b):b},focus:function(){return this.selectParentTab().getInputElement().focus(),this},registerEvents:function(a){var b,c=/^on([A-Z]\w+)/,d=function(a,b,c,d){b.on("load",function(){a.getInputElement().on(c,d,a)})};for(var e in a)(b=e.match(c))&&(this.eventProcessors[e]?this.eventProcessors[e].call(this,this._.dialog,a[e]):d(this,this._.dialog,b[1].toLowerCase(),a[e]));return this},eventProcessors:{onLoad:function(a,b){a.on("load",b,this)},onShow:function(a,b){a.on("show",b,this)},onHide:function(a,b){a.on("hide",b,this)}},accessKeyDown:function(a,b){this.focus()},accessKeyUp:function(a,b){},disable:function(){var a=this.getElement(),b=this.getInputElement();b.setAttribute("disabled","true"),a.addClass("cke_disabled")},enable:function(){var a=this.getElement(),b=this.getInputElement();b.removeAttribute("disabled"),a.removeClass("cke_disabled")},isEnabled:function(){return!this.getElement().hasClass("cke_disabled")},isVisible:function(){return this.getInputElement().isVisible()},isFocusable:function(){return this.isEnabled()&&this.isVisible()?!0:!1}},k.dialog.hbox.prototype=e.extend(new k.dialog.uiElement,{getChild:function(a){var b=this;return arguments.length<1?b._.children.concat():(a.splice||(a=[a]),a.length<2?b._.children[a[0]]:b._.children[a[0]]&&b._.children[a[0]].getChild?b._.children[a[0]].getChild(a.slice(1,a.length)):null)}},!0),k.dialog.vbox.prototype=new k.dialog.hbox,function(){var b={build:function(b,c,d){for(var e,f=c.children,g=[],h=[],i=0;i<f.length&&(e=f[i]);i++){var j=[];g.push(j),h.push(a.dialog._.uiElementBuilders[e.type].build(b,e,j))}return new k.dialog[c.type](b,h,g,d,c)}};a.dialog.addUIElement("hbox",b),a.dialog.addUIElement("vbox",b)}(),a.dialogCommand=function(a){this.dialogName=a},a.dialogCommand.prototype={exec:function(a){b.opera?e.setTimeout(function(){a.openDialog(this.dialogName)},0,this):a.openDialog(this.dialogName)},canUndo:!1,editorFocus:c||b.webkit},function(){var b=/^([a]|[^a])+$/,c=/^\d*$/,d=/^\d*(?:\.\d+)?$/,f=/^(((\d*(\.\d+))|(\d*))(px|\%)?)?$/,g=/^(((\d*(\.\d+))|(\d*))(px|em|ex|in|cm|mm|pt|pc|\%)?)?$/i,h=/^(\s*[\w-]+\s*:\s*[^:;]+(?:;|$))*$/;a.VALIDATE_OR=1,a.VALIDATE_AND=2,a.dialog.validate={functions:function(){var a=arguments;return function(){var b,c=this&&this.getValue?this.getValue():a[0],d=void 0,e=2,f=[];for(b=0;b<a.length&&"function"==typeof a[b];b++)f.push(a[b]);b<a.length&&"string"==typeof a[b]&&(d=a[b],b++),b<a.length&&"number"==typeof a[b]&&(e=a[b]);var g=2==e?!0:!1;for(b=0;b<f.length;b++)g=2==e?g&&f[b](c):g||f[b](c);return g?!0:d}},regex:function(a,b){return function(){var c=this&&this.getValue?this.getValue():arguments[0];return a.test(c)?!0:b}},notEmpty:function(a){return this.regex(b,a)},integer:function(a){return this.regex(c,a)},number:function(a){return this.regex(d,a)},cssLength:function(a){return this.functions(function(a){return g.test(e.trim(a))},a)},htmlLength:function(a){return this.functions(function(a){return f.test(e.trim(a))},a)},inlineStyle:function(a){return this.functions(function(a){return h.test(e.trim(a))},a)},equals:function(a,b){return this.functions(function(b){return b==a},b)},notEqual:function(a,b){return this.functions(function(b){return b!=a},b)}},a.on("instanceDestroyed",function(b){if(e.isEmpty(a.instances)){for(var c;c=a.dialog._.currentTop;)c.hide();w()}var d=b.editor._.storedDialogs;for(var f in d)d[f].destroy()})}(),e.extend(a.editor.prototype,{openDialog:function(b,d){function e(c){var e=a.dialog._.dialogDefinitions[b],f=k.skin.dialog;!f._isLoaded||l&&"undefined"==typeof c||("function"!=typeof e&&(a.dialog._.dialogDefinitions[b]="failed"),k.openDialog(b,d))}if("wysiwyg"==this.mode&&c){var f=this.getSelection();f&&f.lock()}var g=a.dialog._.dialogDefinitions[b],h=this.skin.dialog;if(null===a.dialog._.currentTop&&u(this),"function"==typeof g&&h._isLoaded){var i=this._.storedDialogs||(this._.storedDialogs={}),j=i[b]||(i[b]=new a.dialog(this,b));return d&&d.call(j,j),j.show(),j}if("failed"==g)throw v(),new Error('[CKEDITOR.dialog.openDialog] Dialog "'+b+'" failed when loading definition.');var k=this;if("string"==typeof g){var l=1;a.scriptLoader.load(a.getUrl(g),e,null,0,1)}return a.skins.load(this,"dialog",e),null}})}(),j.add("dialog",{requires:["dialogui"]}),j.add("styles",{requires:["selection"],init:function(a){a.on("contentDom",function(){a.document.setCustomData("cke_includeReadonly",!a.config.disableReadonlyStyling)})}}),a.editor.prototype.attachStyleStateChange=function(a,b){var c=this._.styleStateChangeCallbacks;c||(c=this._.styleStateChangeCallbacks=[],this.on("selectionChange",function(a){for(var b=0;b<c.length;b++){var d=c[b],e=d.style.checkActive(a.data.path)?1:2;d.fn.call(this,e)}})),c.push({style:a,fn:b})},a.STYLE_BLOCK=1,a.STYLE_INLINE=2,a.STYLE_OBJECT=3,function(){function b(a){for(var b,c;(a=a.getParent())&&"body"!=a.getName();)if(a.getAttribute("data-nostyle"))b=a;else if(!c){var d=a.getAttribute("contentEditable");"false"==d?b=a:"true"==d&&(c=1)}return b}function g(a){var e=this,g=a.document;if(a.collapsed){var i=x(e,g);return a.insertNode(i),void a.moveToPosition(i,2)}var j,k=e.element,l=e._.definition,m=l.ignoreReadonly,n=m||l.includeReadonly;void 0==n&&(n=g.getCustomData("cke_includeReadonly"));var o=f[k]||(j=!0,f.span);a.enlarge(1,1),a.trim();var p,q=a.createBookmark(),r=q.startNode,s=q.endNode,t=r;if(!m){var v=b(r),w=b(s);v&&(t=v.getNextSourceNode(!0)),w&&(s=w)}for(2==t.getPosition(s)&&(t=0);t;){var y=!1;if(t.equals(s))t=null,y=!0;else{var z=t.type,A=1==z?t.getName():null,B=A&&"false"==t.getAttribute("contentEditable"),C=A&&t.getAttribute("data-nostyle");if(A&&t.data("cke-bookmark")){t=t.getNextSourceNode(!0);continue}if(A&&(!o[A]||C||B&&!n||12!=(4|t.getPosition(s)|0|8)||l.childRule&&!l.childRule(t)))y=!0;else{var D=t.getParent();if(!D||!(D.getDtd()||f.span)[k]&&!j||l.parentRule&&!l.parentRule(D))y=!0;else if(p||A&&f.$removeEmpty[A]&&12!=(4|t.getPosition(s)|0|8)||(p=new d.range(g),p.setStartBefore(t)),3==z||B||1==z&&!t.getChildCount()){for(var E,F=t;(y=!F.getNext(L))&&(E=F.getParent(),o[E.getName()])&&10==(2|E.getPosition(r)|0|8)&&(!l.childRule||l.childRule(E));)F=E;p.setEndAfter(F)}}t=t.getNextSourceNode(C||B)}if(y&&p&&!p.collapsed){for(var G,H,I,J=x(e,g),K=J.hasAttributes(),M=p.getCommonAncestor(),N={styles:{},attrs:{},blockedStyles:{},blockedAttrs:{}};J&&M;){if(M.getName()==k){for(G in l.attributes)!N.blockedAttrs[G]&&(I=M.getAttribute(H))&&(J.getAttribute(G)==I?N.attrs[G]=1:N.blockedAttrs[G]=1);for(H in l.styles)!N.blockedStyles[H]&&(I=M.getStyle(H))&&(J.getStyle(H)==I?N.styles[H]=1:N.blockedStyles[H]=1)}M=M.getParent()}for(G in N.attrs)J.removeAttribute(G);for(H in N.styles)J.removeStyle(H);K&&!J.hasAttributes()&&(J=null),J?(p.extractContents().appendTo(J),u(e,J),p.insertNode(J),J.mergeSiblings(),c||J.$.normalize()):(J=new h("span"),p.extractContents().appendTo(J),p.insertNode(J),u(e,J),J.remove(!0)),p=null}}a.moveToBookmark(q),a.shrink(2)}function i(a){function b(){for(var a=new d.elementPath(e.getParent()),b=new d.elementPath(m.getParent()),c=null,f=null,g=0;g<a.elements.length;g++){var h=a.elements[g];if(h==a.block||h==a.blockLimit)break;n.checkElementRemovable(h)&&(c=h)}for(g=0;g<b.elements.length&&(h=b.elements[g],h!=b.block&&h!=b.blockLimit);g++)n.checkElementRemovable(h)&&(f=h);f&&m.breakParent(f),c&&e.breakParent(c)}a.enlarge(1,1);var c=a.createBookmark(),e=c.startNode;if(a.collapsed){for(var f,g,h=new d.elementPath(e.getParent()),i=0;i<h.elements.length&&(g=h.elements[i])&&(g!=h.block&&g!=h.blockLimit);i++)if(this.checkElementRemovable(g)){var j;a.collapsed&&(a.checkBoundaryOfElement(g,2)||(j=a.checkBoundaryOfElement(g,1)))?(f=g,f.match=j?"start":"end"):(g.mergeSiblings(),g.getName()==this.element?t(this,g):v(g,B(this)[g.getName()]))}if(f){var k=e;for(i=0;!0;i++){var l=h.elements[i];if(l.equals(f))break;l.match||(l=l.clone(),l.append(k),k=l)}k["start"==f.match?"insertBefore":"insertAfter"](f)}}else{var m=c.endNode,n=this;b();for(var o=e;!o.equals(m);){var p=o.getNextSourceNode();1==o.type&&this.checkElementRemovable(o)&&(o.getName()==this.element?t(this,o):v(o,B(this)[o.getName()]),1==p.type&&p.contains(e)&&(b(),p=e.getNext())),o=p}}a.moveToBookmark(c)}function j(a){var b=a.getCommonAncestor(!0,!0),c=b.getAscendant(this.element,!0);c&&!c.isReadOnly()&&y(c,this)}function k(a){var b=a.getCommonAncestor(!0,!0),c=b.getAscendant(this.element,!0);if(c){var d=this,e=d._.definition,f=e.attributes;if(f)for(var g in f)c.removeAttribute(g,f[g]);if(e.styles)for(var h in e.styles)e.styles.hasOwnProperty(h)&&c.removeStyle(h)}}function l(a){var b=a.createBookmark(!0),c=a.createIterator();c.enforceRealBlocks=!0,this._.enterMode&&(c.enlargeBr=2!=this._.enterMode);for(var d,e=a.document;d=c.getNextParagraph();)if(!d.isReadOnly()){var f=x(this,e,d);n(d,f)}a.moveToBookmark(b)}function m(a){var b=this,c=a.createBookmark(1),d=a.createIterator();d.enforceRealBlocks=!0,d.enlargeBr=2!=b._.enterMode;for(var e;e=d.getNextParagraph();)if(b.checkElementRemovable(e))if(e.is("pre")){var f=2==b._.enterMode?null:a.document.createElement(1==b._.enterMode?"p":"div");f&&e.copyAttributes(f),n(e,f)}else t(b,e,1);a.moveToBookmark(c)}function n(a,b){var c=!b;c&&(b=a.getDocument().createElement("div"),a.copyAttributes(b));var d=b&&b.is("pre"),e=a.is("pre"),f=d&&!e,g=!d&&e;f?b=s(a,b):g?b=r(c?[a.getHtml()]:p(a),b):a.moveChildren(b),b.replace(a),d?o(b):c&&w(b)}function o(a){var b;if((b=a.getPrevious(M))&&b.is&&b.is("pre")){var d=q(b.getHtml(),/\n$/,"")+"\n\n"+q(a.getHtml(),/^\n/,"");c?a.$.outerHTML="<pre>"+d+"</pre>":a.setHtml(d),b.remove()}}function p(a){var b=/(\S\s*)\n(?:\s|(<span[^>]+data-cke-bookmark.*?\/span>))*\n(?!$)/gi,c=(a.getName(),q(a.getOuterHtml(),b,function(a,b,c){return b+"</pre>"+c+"<pre>"})),d=[];return c.replace(/<pre\b.*?>([\s\S]*?)<\/pre>/gi,function(a,b){d.push(b)}),d}function q(a,b,c){var d="",e="";return a=a.replace(/(^<span[^>]+data-cke-bookmark.*?\/span>)|(<span[^>]+data-cke-bookmark.*?\/span>$)/gi,function(a,b,c){return b&&(d=b),c&&(e=c),""}),d+a.replace(b,c)+e}function r(a,b){var c;a.length>1&&(c=new d.documentFragment(b.getDocument()));for(var f=0;f<a.length;f++){var g=a[f];if(g=g.replace(/(\r\n|\r)/g,"\n"),g=q(g,/^[ \t]*\n/,""),g=q(g,/\n$/,""),g=q(g,/^[ \t]+|[ \t]+$/g,function(a,b,c){return 1==a.length?"&nbsp;":b?" "+e.repeat("&nbsp;",a.length-1):e.repeat("&nbsp;",a.length-1)+" "}),g=g.replace(/\n/g,"<br>"),g=g.replace(/[ \t]{2,}/g,function(a){return e.repeat("&nbsp;",a.length-1)+" "}),c){var h=b.clone();h.setHtml(g),c.append(h)}else b.setHtml(g)}return c||b}function s(a,b){var d=a.getBogus();d&&d.remove();var e=a.getHtml();if(e=q(e,/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g,""),e=e.replace(/[ \t\r\n]*(<br[^>]*>)[ \t\r\n]*/gi,"$1"),e=e.replace(/([ \t\n\r]+|&nbsp;)/g," "),e=e.replace(/<br\b[^>]*>/gi,"\n"),c){var f=a.getDocument().createElement("div");f.append(b),b.$.outerHTML="<pre>"+e+"</pre>",b.copyAttributes(f.getFirst()),b=f.getFirst().remove()}else b.setHtml(e);return b}function t(a,b){var c=a._.definition,d=c.attributes,g=c.styles,h=B(a)[b.getName()],i=e.isEmpty(d)&&e.isEmpty(g);for(var j in d)("class"!=j&&!a._.definition.fullMatch||b.getAttribute(j)==C(j,d[j]))&&(i=b.hasAttribute(j),b.removeAttribute(j));for(var k in g)a._.definition.fullMatch&&b.getStyle(k)!=C(k,g[k],!0)||(i=i||!!b.getStyle(k),b.removeStyle(k));v(b,h,H[b.getName()]),i&&(!f.$block[b.getName()]||2==a._.enterMode&&!b.hasAttributes()?w(b):b.renameNode(1==a._.enterMode?"p":"div"))}function u(a,b){for(var c=a._.definition,d=(c.attributes,c.styles,B(a)),e=b.getElementsByTag(a.element),f=e.count();--f>=0;)t(a,e.getItem(f));for(var g in d)if(g!=a.element)for(e=b.getElementsByTag(g),f=e.count()-1;f>=0;f--){var h=e.getItem(f);v(h,d[g])}}function v(a,b,c){var d=b&&b.attributes;if(d)for(var e=0;e<d.length;e++){var f,g=d[e][0];if(f=a.getAttribute(g)){var h=d[e][1];(null===h||h.test&&h.test(f)||"string"==typeof h&&f==h)&&a.removeAttribute(g)}}c||w(a)}function w(a){if(!a.hasAttributes())if(f.$block[a.getName()]){var b=a.getPrevious(M),c=a.getNext(M);!b||3!=b.type&&b.isBlockBoundary({br:1})||a.append("br",1),!c||3!=c.type&&c.isBlockBoundary({br:1})||a.append("br"),a.remove(!0)}else{var d=a.getFirst(),e=a.getLast();a.remove(!0),d&&(1==d.type&&d.mergeSiblings(),e&&!d.equals(e)&&1==e.type&&e.mergeSiblings())}}function x(a,b,c){var d,e=(a._.definition,a.element);return"*"==e&&(e="span"),d=new h(e,b),c&&c.copyAttributes(d),d=y(d,a),b.getCustomData("doc_processing_style")&&d.hasAttribute("id")?d.removeAttribute("id"):b.setCustomData("doc_processing_style",1),d}function y(b,c){var d=c._.definition,e=d.attributes,f=a.style.getStyleText(d);if(e)for(var g in e)b.setAttribute(g,e[g]);return f&&b.setAttribute("style",f),b}function z(a,b){for(var c in a)a[c]=a[c].replace(K,function(a,c){return b[c]})}function A(b){var c=b._AC;if(c)return c;c={};var d=0,e=b.attributes;if(e)for(var f in e)d++,c[f]=e[f];var g=a.style.getStyleText(b);return g&&(c.style||d++,c.style=g),c._length=d,b._AC=c}function B(a){if(a._.overrides)return a._.overrides;var b=a._.overrides={},c=a._.definition.overrides;if(c){e.isArray(c)||(c=[c]);for(var d=0;d<c.length;d++){var f,g,h,i=c[d];if("string"==typeof i?f=i.toLowerCase():(f=i.element?i.element.toLowerCase():a.element,h=i.attributes),g=b[f]||(b[f]={}),h){var j=g.attributes=g.attributes||[];for(var k in h)j.push([k.toLowerCase(),h[k]])}}}return b}function C(a,b,c){var d=new h("span");return d[c?"setStyle":"setAttribute"](a,b),d[c?"getStyle":"getAttribute"](a)}function D(a,b){var c;if(b!==!1){var d=new h("span");d.setAttribute("style",a),c=d.getAttribute("style")||""}else c=a;return c=c.replace(/(font-family:)(.*?)(?=;|$)/,function(a,b,c){for(var d=c.split(","),f=0;f<d.length;f++)d[f]=e.trim(d[f].replace(/["']/g,""));return b+d.join(",")}),c.replace(/\s*([;:])\s*/,"$1").replace(/([^\s;])$/,"$1;").replace(/,\s+/g,",").replace(/\"/g,"").toLowerCase()}function E(a){var b={};return a.replace(/&quot;/g,'"').replace(/\s*([^ :;]+)\s*:\s*([^;]+)\s*(?=;|$)/g,function(a,c,d){b[c]=d}),b}function F(a,b){"string"==typeof a&&(a=E(a)),"string"==typeof b&&(b=E(b));for(var c in a)if(!(c in b)||b[c]!=a[c]&&"inherit"!=a[c]&&"inherit"!=b[c])return!1;

return!0}function G(a,b){for(var c,d=a.getSelection(),e=d.createBookmarks(1),f=d.getRanges(),g=b?this.removeFromRange:this.applyToRange,h=f.createIterator();c=h.getNextRange();)g.call(this,c);1==e.length&&e[0].collapsed?(d.selectRanges(f),a.getById(e[0].startNode).remove()):d.selectBookmarks(e),a.removeCustomData("doc_processing_style")}var H={address:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,p:1,pre:1,section:1,header:1,footer:1,nav:1,article:1,aside:1,figure:1,dialog:1,hgroup:1,time:1,meter:1,menu:1,command:1,keygen:1,output:1,progress:1,details:1,datagrid:1,datalist:1},I={a:1,embed:1,hr:1,img:1,li:1,object:1,ol:1,table:1,td:1,tr:1,th:1,ul:1,dl:1,dt:1,dd:1,form:1,audio:1,video:1},J=/\s*(?:;\s*|$)/,K=/#\((.+?)\)/g,L=d.walker.bookmark(0,1),M=d.walker.whitespaces(1);a.style=function(a,b){var c=this,d=a.attributes;d&&d.style&&(a.styles=e.extend({},a.styles,E(d.style)),delete d.style),b&&(a=e.clone(a),z(a.attributes,b),z(a.styles,b));var f=c.element=a.element?"string"==typeof a.element?a.element.toLowerCase():a.element:"*";c.type=H[f]?1:I[f]?3:2,"object"==typeof c.element&&(c.type=3),c._={definition:a}},a.style.prototype={apply:function(a){G.call(this,a,!1)},remove:function(a){G.call(this,a,!0)},applyToRange:function(a){var b=this;return(b.applyToRange=2==b.type?g:1==b.type?l:3==b.type?j:null).call(b,a)},removeFromRange:function(a){var b=this;return(b.removeFromRange=2==b.type?i:1==b.type?m:3==b.type?k:null).call(b,a)},applyToObject:function(a){y(a,this)},checkActive:function(a){var b=this;switch(b.type){case 1:return b.checkElementRemovable(a.block||a.blockLimit,!0);case 3:case 2:for(var c,d=a.elements,e=0;e<d.length;e++)if(c=d[e],2!=b.type||c!=a.block&&c!=a.blockLimit){if(3==b.type){var f=c.getName();if(!("string"==typeof b.element?f==b.element:f in b.element))continue}if(b.checkElementRemovable(c,!0))return!0}}return!1},checkApplicable:function(a){switch(this.type){case 2:case 1:break;case 3:return a.lastElement.getAscendant(this.element,!0)}return!0},checkElementMatch:function(a,b){var c=this,d=c._.definition;if(!a||!d.ignoreReadonly&&a.isReadOnly())return!1;var e,f=a.getName();if("string"==typeof c.element?f==c.element:f in c.element){if(!b&&!a.hasAttributes())return!0;if(e=A(d),!e._length)return!0;for(var g in e)if("_length"!=g){var h=a.getAttribute(g)||"";if("style"==g?F(e[g],D(h,!1)):e[g]==h){if(!b)return!0}else if(b)return!1}if(b)return!0}return!1},checkElementRemovable:function(a,b){if(this.checkElementMatch(a,b))return!0;var c=B(this)[a.getName()];if(c){var d,e;if(!(d=c.attributes))return!0;for(var f=0;f<d.length;f++){e=d[f][0];var g=a.getAttribute(e);if(g){var h=d[f][1];if(null===h||"string"==typeof h&&g==h||h.test(g))return!0}}}return!1},buildPreview:function(b){var c=this._.definition,d=[],e=c.element;"bdo"==e&&(e="span"),d=["<",e];var f=c.attributes;if(f)for(var g in f)d.push(" ",g,'="',f[g],'"');var h=a.style.getStyleText(c);return h&&d.push(' style="',h,'"'),d.push(">",b||c.name,"</",e,">"),d.join("")}},a.style.getStyleText=function(a){var b=a._ST;if(b)return b;b=a.styles;var c=a.attributes&&a.attributes.style||"",d="";c.length&&(c=c.replace(J,";"));for(var e in b){var f=b[e],g=(e+":"+f).replace(J,";");"inherit"==f?d+=g:c+=g}return c.length&&(c=D(c)),c+=d,a._ST=c}}(),a.styleCommand=function(a){this.style=a},a.styleCommand.prototype.exec=function(a){var b=this;a.focus();var c=a.document;return c&&(2==b.state?b.style.apply(c):1==b.state&&b.style.remove(c)),!!c},a.stylesSet=new a.resourceManager("","stylesSet"),a.addStylesSet=e.bind(a.stylesSet.add,a.stylesSet),a.loadStylesSet=function(b,c,d){a.stylesSet.addExternal(b,c,""),a.stylesSet.load(b,d)},a.editor.prototype.getStylesSet=function(b){if(this._.stylesDefinitions)b(this._.stylesDefinitions);else{var c=this,d=c.config.stylesCombo_stylesSet||c.config.stylesSet||"default";if(d instanceof Array)return c._.stylesDefinitions=d,void b(d);var e=d.split(":"),f=e[0],g=e[1],h=j.registered.styles.path;a.stylesSet.addExternal(f,g?e.slice(1).join(":"):h+"styles/"+f+".js",""),a.stylesSet.load(f,function(a){c._.stylesDefinitions=a[f],b(c._.stylesDefinitions)})}},j.add("domiterator"),function(){function a(a){var b=this;arguments.length<1||(b.range=a,b.forceBrBreak=0,b.enlargeBr=1,b.enforceRealBlocks=0,b._||(b._={}))}function b(a,b,c){for(var d=a.getNextSourceNode(b,null,c);!g(d);)d=d.getNextSourceNode(b,null,c);return d}var f=/^[\r\n\t ]+$/,g=d.walker.bookmark(!1,!0),h=d.walker.whitespaces(!0),i=function(a){return g(a)&&h(a)};a.prototype={getNextParagraph:function(a){var h,j,k,l,m,n,o=this;if(!o._.started){if(j=o.range.clone(),j.shrink(1,!0),l=j.endContainer.hasAscendant("pre",!0)||j.startContainer.hasAscendant("pre",!0),j.enlarge(o.forceBrBreak&&!l||!o.enlargeBr?3:2),!j.collapsed){var p=new d.walker(j.clone()),q=d.walker.bookmark(!0,!0);p.evaluator=q,o._.nextNode=p.next(),p=new d.walker(j.clone()),p.evaluator=q;var r=p.previous();if(o._.lastNode=r.getNextSourceNode(!0),o._.lastNode&&3==o._.lastNode.type&&!e.trim(o._.lastNode.getText())&&o._.lastNode.getParent().isBlockBoundary()){var s=new d.range(j.document);if(s.moveToPosition(o._.lastNode,4),s.checkEndOfBlock()){var t=new d.elementPath(s.endContainer),u=t.block||t.blockLimit;o._.lastNode=u.getNextSourceNode(!0)}}o._.lastNode||(o._.lastNode=o._.docEndMarker=j.document.createText(""),o._.lastNode.insertAfter(r)),j=null}o._.started=1}var v=o._.nextNode;for(r=o._.lastNode,o._.nextNode=null;v;){var w=0,x=v.hasAscendant("pre"),y=1!=v.type,z=0;if(y)3==v.type&&f.test(v.getText())&&(y=0);else{var A=v.getName();if(v.isBlockBoundary(o.forceBrBreak&&!x&&{br:1})){if("br"==A)y=1;else if(!j&&!v.getChildCount()&&"hr"!=A){h=v,k=v.equals(r);break}j&&(j.setEndAt(v,3),"br"!=A&&(o._.nextNode=v)),w=1}else{if(v.getFirst()){j||(j=new d.range(o.range.document),j.setStartAt(v,3)),v=v.getFirst();continue}y=1}}if(y&&!j&&(j=new d.range(o.range.document),j.setStartAt(v,3)),k=(!w||y)&&v.equals(r),j&&!w)for(;!v.getNext(i)&&!k;){var B=v.getParent();if(B.isBlockBoundary(o.forceBrBreak&&!x&&{br:1})){w=1,y=0,k=k||B.equals(r),j.setEndAt(B,2);break}v=B,y=1,k=v.equals(r),z=1}if(y&&j.setEndAt(v,4),v=b(v,z,r),k=!v,k||w&&j)break}if(!h){if(!j)return o._.docEndMarker&&o._.docEndMarker.remove(),o._.nextNode=null,null;var C=new d.elementPath(j.startContainer),D=C.blockLimit,E={div:1,th:1,td:1};if(h=C.block,!h&&!o.enforceRealBlocks&&E[D.getName()]&&j.checkStartOfBlock()&&j.checkEndOfBlock())h=D;else if(!h||o.enforceRealBlocks&&"li"==h.getName())h=o.range.document.createElement(a||"p"),j.extractContents().appendTo(h),h.trim(),j.insertNode(h),m=n=!0;else if("li"!=h.getName()){if(!j.checkStartOfBlock()||!j.checkEndOfBlock()){h=h.clone(!1),j.extractContents().appendTo(h),h.trim();var F=j.splitBlock();m=!F.wasStartOfBlock,n=!F.wasEndOfBlock,j.insertNode(h)}}else k||(o._.nextNode=h.equals(r)?null:b(j.getBoundaryNodes().endNode,1,r))}if(m){var G=h.getPrevious();G&&1==G.type&&("br"==G.getName()?G.remove():G.getLast()&&"br"==G.getLast().$.nodeName.toLowerCase()&&G.getLast().remove())}if(n){var H=h.getLast();H&&1==H.type&&"br"==H.getName()&&(c||H.getPrevious(g)||H.getNext(g))&&H.remove()}return o._.nextNode||(o._.nextNode=k||h.equals(r)||!r?null:b(h,1,r)),h}},d.range.prototype.createIterator=function(){return new a(this)}}(),j.add("panelbutton",{requires:["button"],onLoad:function(){function b(a){var b=this,c=b._;return 0!=c.state?(b.createPanel(a),c.on?void c.panel.hide():void c.panel.showBlock(b._.id,b.document.getById(b._.id),4)):void 0}k.panelButton=e.createClass({base:k.button,$:function(c){var d=this,e=c.panel;delete c.panel,d.base(c),d.document=e&&e.parent&&e.parent.getDocument()||a.document,e.block={attributes:e.attributes},d.hasArrow=!0,d.click=b,d._={panelDefinition:e}},statics:{handler:{create:function(a){return new k.panelButton(a)}}},proto:{createPanel:function(b){var c=this._;if(!c.panel){var d=this._.panelDefinition||{},e=this._.panelDefinition.block,f=d.parent||a.document.getBody(),g=this._.panel=new k.floatPanel(b,f,d),h=g.addBlock(c.id,e),i=this;g.onShow=function(){i.className&&this.element.getFirst().addClass(i.className+"_panel"),i.setState(1),c.on=1,i.onOpen&&i.onOpen()},g.onHide=function(a){i.className&&this.element.getFirst().removeClass(i.className+"_panel"),i.setState(i.modes&&i.modes[b.mode]?2:0),c.on=0,!a&&i.onClose&&i.onClose()},g.onEscape=function(){g.hide(),i.document.getById(c.id).focus()},this.onBlock&&this.onBlock(g,h),h.onHide=function(){c.on=0,i.setState(2)}}}}})},beforeInit:function(a){a.ui.addHandler("panelbutton",k.panelButton.handler)}}),a.UI_PANELBUTTON="panelbutton",j.add("floatpanel",{requires:["panel"]}),function(){function f(a,b,c,d,f){var i=e.genKey(b.getUniqueId(),c.getUniqueId(),a.skinName,a.lang.dir,a.uiColor||"",d.css||"",f||""),j=g[i];return j||(j=g[i]=new k.panel(b,d),j.element=c.append(h.createFromHtml(j.renderHtml(a),b)),j.element.setStyles({display:"none",position:"absolute"})),j}var g={},i=!1;k.floatPanel=e.createClass({$:function(a,b,c,d){c.forceIFrame=1;var e=b.getDocument(),g=f(a,e,b,c,d||0),h=g.element,i=h.getFirst().getFirst();h.disableContextMenu(),this.element=h,this._={editor:a,panel:g,parentElement:b,definition:c,document:e,iframe:i,children:[],dir:a.lang.dir},a.on("mode",function(){this.hide()},this)},proto:{addBlock:function(a,b){return this._.panel.addBlock(a,b)},addListBlock:function(a,b){return this._.panel.addListBlock(a,b)},getBlock:function(a){return this._.panel.getBlock(a)},showBlock:function(f,g,j,k,l){var m=this._.panel,n=m.showBlock(f);this.allowBlur(!1),i=1,this._.returnFocus=this._.editor.focusManager.hasFocus?this._.editor:new h(a.document.$.activeElement);var o=this.element,p=this._.iframe,q=(this._.definition,g.getDocumentPosition(o.getDocument())),r="rtl"==this._.dir,s=q.x+(k||0),t=q.y+(l||0);if(!r||1!=j&&4!=j?r||2!=j&&3!=j||(s+=g.$.offsetWidth-1):s+=g.$.offsetWidth,(3==j||4==j)&&(t+=g.$.offsetHeight-1),this._.panel._.offsetParentId=g.getId(),o.setStyles({top:t+"px",left:0,display:""}),o.setOpacity(0),o.getFirst().removeStyle("width"),!this._.blurSet){var u=c?p:new d.window(p.$.contentWindow);a.event.useCapture=!0,u.on("blur",function(a){var b=this;if(b.allowBlur()){var c=a.data.getTarget();c.getName&&"iframe"!=c.getName()||!b.visible||b._.activeChild||i||(delete b._.returnFocus,b.hide())}},this),u.on("focus",function(){this._.focused=!0,this.hideChild(),this.allowBlur(!0)},this),a.event.useCapture=!1,this._.blurSet=1}m.onEscape=e.bind(function(a){return this.onEscape&&this.onEscape(a)===!1?!1:void 0},this),e.setTimeout(function(){var a=e.bind(function(){var a=o.getFirst();if(n.autoSize){var d=n.element.$;(b.gecko||b.opera)&&(d=d.parentNode),c&&(d=d.document.body);var e=d.scrollWidth;c&&b.quirks&&e>0&&(e+=(a.$.offsetWidth||0)-(a.$.clientWidth||0)+3),e+=4,a.setStyle("width",e+"px"),n.element.addClass("cke_frameLoaded");var f=n.element.$.scrollHeight;c&&b.quirks&&f>0&&(f+=(a.$.offsetHeight||0)-(a.$.clientHeight||0)+3),a.setStyle("height",f+"px"),m._.currentBlock.element.setStyle("display","none").removeStyle("display")}else a.removeStyle("height");r&&(s-=o.$.offsetWidth),o.setStyle("left",s+"px");var g=m.element,i=g.getWindow(),j=o.$.getBoundingClientRect(),k=i.getViewPaneSize(),l=j.width||j.right-j.left,p=j.height||j.bottom-j.top,q=r?j.right:k.width-j.left,u=r?k.width-j.right:j.left;r?l>q&&(u>l?s+=l:k.width>l?s-=j.left:s=s-j.right+k.width):l>q&&(u>l?s-=l:k.width>l?s=s-j.right+k.width:s-=j.left);var v=k.height-j.top,w=j.top;if(p>v&&(w>p?t-=p:k.height>p?t=t-j.bottom+k.height:t-=j.top),c){var x=new h(o.$.offsetParent),y=x;"html"==y.getName()&&(y=y.getDocument().getBody()),"rtl"==y.getComputedStyle("direction")&&(s-=b.ie8Compat?2*o.getDocument().getDocumentElement().$.scrollLeft:x.$.scrollWidth-x.$.clientWidth)}var z,A=o.getFirst();(z=A.getCustomData("activePanel"))&&z.onHide&&z.onHide.call(this,1),A.setCustomData("activePanel",this),o.setStyles({top:t+"px",left:s+"px"}),o.setOpacity(1)},this);m.isLoaded?a():m.onLoad=a,e.setTimeout(function(){p.$.contentWindow.focus(),this.allowBlur(!0)},0,this)},b.air?200:0,this),this.visible=1,this.onShow&&this.onShow.call(this),i=0},hide:function(a){var c=this;if(c.visible&&(!c.onHide||c.onHide.call(c)!==!0)){c.hideChild(),b.gecko&&c._.iframe.getFrameDocument().$.activeElement.blur(),c.element.setStyle("display","none"),c.visible=0,c.element.getFirst().removeCustomData("activePanel");var d=a!==!1&&c._.returnFocus;d&&(b.webkit&&d.type&&d.getWindow().$.focus(),d.focus())}},allowBlur:function(a){var b=this._.panel;return void 0!=a&&(b.allowBlur=a),b.allowBlur},showAsChild:function(a,c,d,f,g,h){(this._.activeChild!=a||a._.panel._.offsetParentId!=d.getId())&&(this.hideChild(),a.onHide=e.bind(function(){e.setTimeout(function(){this._.focused||this.hide()},0,this)},this),this._.activeChild=a,this._.focused=!1,a.showBlock(c,d,f,g,h),(b.ie7Compat||b.ie8&&b.ie6Compat)&&setTimeout(function(){a.element.getChild(0).$.style.cssText+=""},100))},hideChild:function(){var a=this._.activeChild;a&&(delete a.onHide,delete a._.returnFocus,delete this._.activeChild,a.hide())}}}),a.on("instanceDestroyed",function(){var b=e.isEmpty(a.instances);for(var c in g){var d=g[c];b?d.destroy():d.element.hide()}b&&(g={})})}(),j.add("menu",{beforeInit:function(b){for(var c=b.config.menu_groups.split(","),d=b._.menuGroups={},e=b._.menuItems={},f=0;f<c.length;f++)d[c[f]]=f+1;b.addMenuGroup=function(a,b){d[a]=b||100},b.addMenuItem=function(b,c){d[c.group]&&(e[b]=new a.menuItem(this,b,c))},b.addMenuItems=function(a){for(var b in a)this.addMenuItem(b,a[b])},b.getMenuItem=function(a){return e[a]},b.removeMenuItem=function(a){delete e[a]}},requires:["floatpanel"]}),function(){function d(a){a.sort(function(a,b){return a.group<b.group?-1:a.group>b.group?1:a.order<b.order?-1:a.order>b.order?1:0})}a.menu=e.createClass({$:function(a,b){var c=this;b=c._.definition=b||{},c.id=e.getNextId(),c.editor=a,c.items=[],c._.listeners=[],c._.level=b.level||1;var d=e.extend({},b.panel,{css:a.skin.editor.css,level:c._.level-1,block:{}}),f=d.block.attributes=d.attributes||{};!f.role&&(f.role="menu"),c._.panelDefinition=d},_:{onShow:function(){var a=this,b=a.editor.getSelection();c&&b&&b.lock();var d=b&&b.getStartElement(),e=a._.listeners;a.removeAll();for(var f=0;f<e.length;f++){var g=e[f](d,b);if(g)for(var h in g){var i=a.editor.getMenuItem(h);!i||i.command&&!a.editor.getCommand(i.command).state||(i.state=g[h],a.add(i))}}},onClick:function(a){this.hide(!1),a.onClick?a.onClick():a.command&&this.editor.execCommand(a.command)},onEscape:function(a){var b=this.parent;if(b){b._.panel.hideChild();var c=b._.panel._.panel._.currentBlock,d=c._.focusIndex;c._.markItem(d)}else 27==a&&this.hide();return!1},onHide:function(){var a=this;if(c&&!a.parent){var b=a.editor.getSelection();b&&b.unlock(!0)}a.onHide&&a.onHide()},showSubMenu:function(b){var c=this,d=c._.subMenu,f=c.items[b],g=f.getItems&&f.getItems();if(!g)return void c._.panel.hideChild();var h=c._.panel.getBlock(c.id);h._.focusIndex=b,d?d.removeAll():(d=c._.subMenu=new a.menu(c.editor,e.extend({},c._.definition,{level:c._.level+1},!0)),d.parent=c,d._.onClick=e.bind(c._.onClick,c));for(var i in g){var j=c.editor.getMenuItem(i);j&&(j.state=g[i],d.add(j))}var k=c._.panel.getBlock(c.id).element.getDocument().getById(c.id+String(b));d.show(k,2)}},proto:{add:function(a){a.order||(a.order=this.items.length),this.items.push(a)},removeAll:function(){this.items=[]},show:function(b,f,g,h){if(this.parent||(this._.onShow(),this.items.length)){f=f||("rtl"==this.editor.lang.dir?2:1);var i=this.items,j=this.editor,l=this._.panel,m=this._.element;if(!l){l=this._.panel=new k.floatPanel(this.editor,a.document.getBody(),this._.panelDefinition,this._.level),l.onEscape=e.bind(function(a){return this._.onEscape(a)===!1?!1:void 0},this),l.onHide=e.bind(function(){this._.onHide&&this._.onHide()},this);var n=l.addBlock(this.id,this._.panelDefinition.block);n.autoSize=!0;var o=n.keys;o[40]="next",o[9]="next",o[38]="prev",o[2228233]="prev",o["rtl"==j.lang.dir?37:39]=c?"mouseup":"click",o[32]=c?"mouseup":"click",c&&(o[13]="mouseup"),m=this._.element=n.element,m.addClass(j.skinClass);var p=m.getDocument();p.getBody().setStyle("overflow","hidden"),p.getElementsByTag("html").getItem(0).setStyle("overflow","hidden"),this._.itemOverFn=e.addFunction(function(a){var b=this;clearTimeout(b._.showSubTimeout),b._.showSubTimeout=e.setTimeout(b._.showSubMenu,j.config.menu_subMenuDelay||400,b,[a])},this),this._.itemOutFn=e.addFunction(function(a){clearTimeout(this._.showSubTimeout)},this),this._.itemClickFn=e.addFunction(function(a){var b=this,c=b.items[a];return 0==c.state?void b.hide():void(c.getItems?b._.showSubMenu(a):b._.onClick(c))},this)}d(i);for(var q=j.container.getChild(1),r=q.hasClass("cke_mixed_dir_content")?" cke_mixed_dir_content":"",s=['<div class="cke_menu'+r+'" role="presentation">'],t=i.length,u=t&&i[0].group,v=0;t>v;v++){var w=i[v];u!=w.group&&(s.push('<div class="cke_menuseparator" role="separator"></div>'),u=w.group),w.render(this,v,s)}s.push("</div>"),m.setHtml(s.join("")),k.fire("ready",this),this.parent?this.parent._.panel.showAsChild(l,this.id,b,f,g,h):l.showBlock(this.id,b,f,g,h),j.fire("menuShow",[l])}},addListener:function(a){this._.listeners.push(a)},hide:function(a){var b=this;b._.onHide&&b._.onHide(),b._.panel&&b._.panel.hide(a)}}}),a.menuItem=e.createClass({$:function(a,b,c){var d=this;e.extend(d,c,{order:0,className:"cke_button_"+b}),d.group=a._.menuGroups[d.group],d.editor=a,d.name=b},proto:{render:function(d,e,f){var g=this,h=d.id+String(e),i="undefined"==typeof g.state?2:g.state,j=" cke_"+(1==i?"on":0==i?"disabled":"off"),k=g.label;g.className&&(j+=" "+g.className);var l=g.getItems;f.push('<span class="cke_menuitem'+(g.icon&&-1==g.icon.indexOf(".png")?" cke_noalphafix":"")+'"><a id="',h,'" class="',j,'" href="javascript:void(\'',(g.label||"").replace("'",""),'\')" title="',g.label,'" tabindex="-1"_cke_focus=1 hidefocus="true" role="menuitem"'+(l?'aria-haspopup="true"':"")+(0==i?'aria-disabled="true"':"")+(1==i?'aria-pressed="true"':"")),(b.opera||b.gecko&&b.mac)&&f.push(' onkeypress="return false;"'),b.gecko&&f.push(' onblur="this.style.cssText = this.style.cssText;"');var m=-16*(g.iconOffset||0);f.push(' onmouseover="CKEDITOR.tools.callFunction(',d._.itemOverFn,",",e,');" onmouseout="CKEDITOR.tools.callFunction(',d._.itemOutFn,",",e,');" '+(c?'onclick="return false;" onmouseup':"onclick")+'="CKEDITOR.tools.callFunction(',d._.itemClickFn,",",e,'); return false;"><span class="cke_icon_wrapper"><span class="cke_icon"'+(g.icon?' style="background-image:url('+a.getUrl(g.icon)+");background-position:0 "+m+'px;"':"")+'></span></span><span class="cke_label">'),l&&f.push('<span class="cke_menuarrow">',"<span>&#","rtl"==g.editor.lang.dir?"9668":"9658",";</span>","</span>"),f.push(k,"</span></a></span>")}}})}(),i.menu_groups="clipboard,form,tablecell,tablecellproperties,tablerow,tablecolumn,table,anchor,link,image,flash,checkbox,radio,textfield,hiddenfield,imagebutton,button,select,textarea,div",function(){var c;j.add("editingblock",{init:function(d){d.config.editingBlock&&(d.on("themeSpace",function(a){"contents"==a.data.space&&(a.data.html+="<br>")}),d.on("themeLoaded",function(){d.fireOnce("editingBlockReady")}),d.on("uiReady",function(){d.setMode(d.config.startupMode)}),d.on("afterSetData",function(){function a(){c=!0,d.getMode().loadData(d.getData()),c=!1}c||(d.mode?a():d.on("mode",function(){d.mode&&(a(),d.removeListener("mode",arguments.callee))}))}),d.on("beforeGetData",function(){!c&&d.mode&&(c=!0,d.setData(d.getMode().getData(),null,1),c=!1)}),d.on("getSnapshot",function(a){d.mode&&(a.data=d.getMode().getSnapshotData())}),d.on("loadSnapshot",function(a){d.mode&&d.getMode().loadSnapshotData(a.data)}),d.on("mode",function(c){c.removeListener(),b.webkit&&d.container.on("focus",function(){d.focus()}),d.config.startupFocus&&d.focus(),setTimeout(function(){d.fireOnce("instanceReady"),a.fire("instanceReady",null,d)},0)}),d.on("destroy",function(){var a=this;a.mode&&a._.modes[a.mode].unload(a.getThemeSpace("contents"))}))}}),a.editor.prototype.mode="",a.editor.prototype.addMode=function(a,b){b.name=a,(this._.modes||(this._.modes={}))[a]=b},a.editor.prototype.setMode=function(a){this.fire("beforeSetMode",{newMode:a});var b,c=this.getThemeSpace("contents"),d=this.checkDirty();if(this.mode){if(a==this.mode)return;this._.previousMode=this.mode,this.fire("beforeModeUnload");var e=this.getMode();b=e.getData(),e.unload(c),this.mode=""}c.setHtml("");var f=this.getMode(a);if(!f)throw'[CKEDITOR.editor.setMode] Unknown mode "'+a+'".';d||this.on("mode",function(){this.resetDirty(),this.removeListener("mode",arguments.callee)}),f.load(c,"string"!=typeof b?this.getData():b)},a.editor.prototype.getMode=function(a){return this._.modes&&this._.modes[a||this.mode]},a.editor.prototype.focus=function(){this.forceNextSelectionCheck();var a=this.getMode();a&&a.focus()}}(),i.startupMode="wysiwyg",i.editingBlock=!0,function(){function i(){var a=this;try{var b=a.getSelection();if(!b||!b.document.getWindow().$)return;var c=b.getStartElement(),e=new d.elementPath(c);e.compare(a._.selectionPreviousPath)||(a._.selectionPreviousPath=e,a.fire("selectionChange",{selection:b,path:e,element:c}))}catch(f){}}function k(){t=!0,s||(l.call(this),s=e.setTimeout(l,200,this))}function l(){s=null,t&&(e.setTimeout(i,0,this),t=!1)}function m(a){function b(b,c){if(!b||3==b.type)return!1;var d=a.clone();return d["moveToElementEdit"+(c?"End":"Start")](b)}var c=a.startContainer,d=a.getPreviousNode(x,null,c),e=a.getNextNode(x,null,c);return b(d)||b(e,1)?!0:d||e||1==c.type&&c.isBlockBoundary()&&c.getBogus()?!1:!0}function n(a){q(a);var b=a.createText("​");return a.setCustomData("cke-fillingChar",b),b}function o(a){return a&&a.getCustomData("cke-fillingChar")}function p(a){var b=a&&o(a);b&&(b.getCustomData("ready")?q(a):b.setCustomData("ready",1))}function q(a){var b=a&&a.removeCustomData("cke-fillingChar");if(b){var c,d=a.getSelection().getNative(),e=d&&"None"!=d.type&&d.getRangeAt(0);if(b.getLength()>1&&e&&e.intersectsNode(b.$)){c=[d.anchorOffset,d.focusOffset];var f=d.anchorNode==b.$&&d.anchorOffset>0,g=d.focusNode==b.$&&d.focusOffset>0;f&&c[0]--,g&&c[1]--,r(d)&&c.unshift(c.pop())}if(b.setText(b.getText().replace(/\u200B/g,"")),c){var h=d.getRangeAt(0);h.setStart(h.startContainer,c[0]),h.setEnd(h.startContainer,c[1]),d.removeAllRanges(),d.addRange(h)}}}function r(a){if(!a.isCollapsed){var b=a.getRangeAt(0);return b.setStart(a.anchorNode,a.anchorOffset),b.setEnd(a.focusNode,a.focusOffset),b.collapsed}}var s,t,u={modes:{wysiwyg:1,source:1},readOnly:c||b.webkit,exec:function(a){switch(a.mode){case"wysiwyg":a.document.$.execCommand("SelectAll",!1,null),a.forceNextSelectionCheck(),a.selectionChange();break;case"source":var b=a.textarea.$;c?b.createTextRange().execCommand("SelectAll"):(b.selectionStart=0,b.selectionEnd=b.value.length),b.focus()}},canUndo:!1};j.add("selection",{init:function(d){function f(){var a=d.document,b=o(a);if(b){var c=a.$.defaultView.getSelection();"Caret"==c.type&&c.anchorNode==b.$&&(j=1),h=b.getText(),b.setText(h.replace(/\u200B/g,""))}}function g(){var a=d.document,b=o(a);b&&(b.setText(h),j&&(a.$.defaultView.getSelection().setPosition(b.$,b.getLength()),j=0))}if(b.webkit){d.on("selectionChange",function(){p(d.document)}),d.on("beforeSetMode",function(){q(d.document)});var h,j;d.on("beforeUndoImage",f),d.on("afterUndoImage",g),d.on("beforeGetData",f,null,null,0),d.on("getData",g)}d.on("contentDom",function(){function f(a,b,c){try{a.moveToPoint(b,c)}catch(d){}}function g(){m.removeListener("mouseup",h),o.removeListener("mouseup",h)}function h(){g();var b=a.document.$.selection,c=b.createRange();"None"!=b.type&&c.parentElement().ownerDocument==l.$&&c.select()}function i(){r=0}function j(a){if(r){var b=d.document,c=d.getSelection(),f=c&&c.getNative();if(a&&f&&"None"==f.type&&!b.$.queryCommandEnabled("InsertImage"))return void e.setTimeout(j,50,this,!0);var g;if(f&&f.type&&"Control"!=f.type&&(g=f.createRange())&&(g=g.parentElement())&&(g=g.nodeName)&&g.toLowerCase()in{input:1,textarea:1})return;try{p=f&&c.getRanges()[0]}catch(h){}k.call(d)}}var l=d.document,m=a.document,n=l.getBody(),o=l.getDocumentElement();if(c){var p,r,s=1;n.on("focusin",function(a){if("BODY"==a.data.$.srcElement.nodeName){var b=l.getCustomData("cke_locked_selection");if(b)b.unlock(1),b.lock();else if(p&&s){try{p.select()}catch(c){}p=null}}}),n.on("focus",function(){r=1,j()}),n.on("beforedeactivate",function(a){a.data.$.toElement||(r=0,s=1)}),c&&d.on("blur",function(){try{l.$.selection.empty()}catch(a){}}),o.on("mousedown",function(){s=0}),o.on("mouseup",function(){s=1});var t;n.on("mousedown",function(a){if(2==a.data.$.button){var b=d.document.$.selection;"None"==b.type&&(t=d.window.getScrollPosition())}i()}),n.on("mouseup",function(a){2==a.data.$.button&&t&&(d.document.$.documentElement.scrollLeft=t.x,d.document.$.documentElement.scrollTop=t.y),t=null,r=1,setTimeout(function(){j(!0)},0)}),n.on("keydown",i),n.on("keyup",function(){r=1,j()}),"BackCompat"!=l.$.compatMode&&((b.ie7Compat||b.ie6Compat)&&o.on("mousedown",function(a){function b(a){if(a=a.data.$,e){var b=n.$.createTextRange();f(b,a.x,a.y),e.setEndPoint(g.compareEndPoints("StartToStart",b)<0?"EndToEnd":"StartToStart",b),e.select()}}function c(){m.removeListener("mouseup",d),o.removeListener("mouseup",d)}function d(){o.removeListener("mousemove",b),c(),e.select()}if(a=a.data,a.getTarget().is("html")&&a.$.x<o.$.clientWidth&&a.$.y<o.$.clientHeight){var e=n.$.createTextRange();f(e,a.$.x,a.$.y);var g=e.duplicate();o.on("mousemove",b),m.on("mouseup",d),o.on("mouseup",d)}}),b.ie8&&o.on("mousedown",function(a){a.data.getTarget().is("html")&&(m.on("mouseup",h),o.on("mouseup",h))})),l.on("selectionchange",j)}else l.on("mouseup",k,d),l.on("keyup",k,d),l.on("selectionchange",k,d);b.webkit&&l.on("keydown",function(a){var b=a.data.getKey();switch(b){case 13:case 33:case 34:case 35:case 36:case 37:case 39:case 8:case 45:case 46:q(d.document)}},null,null,-1)}),d.on("contentDomUnload",d.forceNextSelectionCheck,d),d.addCommand("selectAll",u),d.ui.addButton("SelectAll",{label:d.lang.selectAll,command:"selectAll"}),d.selectionChange=function(a){(a?i:k).call(this)},b.ie9Compat&&d.on("destroy",function(){var a=d.getSelection();a&&a.getNative().clear()},null,null,9)}}),a.editor.prototype.getSelection=function(){return this.document&&this.document.getSelection()},a.editor.prototype.forceNextSelectionCheck=function(){delete this._.selectionPreviousPath},g.prototype.getSelection=function(){var a=new d.selection(this);return!a||a.isInvalid?null:a},a.SELECTION_NONE=1,a.SELECTION_TEXT=2,a.SELECTION_ELEMENT=3,d.selection=function(a){var b=this,d=a.getCustomData("cke_locked_selection");if(d)return d;if(b.document=a,b.isLocked=0,b._={cache:{}},c)try{var e=b.getNative().createRange();if(!e||e.item&&e.item(0).ownerDocument!=b.document.$||e.parentElement&&e.parentElement().ownerDocument!=b.document.$)throw 0}catch(f){b.isInvalid=!0}return b};var v={img:1,hr:1,li:1,table:1,tr:1,td:1,th:1,embed:1,object:1,ol:1,ul:1,a:1,input:1,form:1,select:1,textarea:1,button:1,fieldset:1,thead:1,tfoot:1};d.selection.prototype={getNative:c?function(){return this._.cache.nativeSel||(this._.cache.nativeSel=this.document.$.selection)}:function(){return this._.cache.nativeSel||(this._.cache.nativeSel=this.document.getWindow().$.getSelection())},getType:c?function(){var a=this._.cache;if(a.type)return a.type;var b=1;try{var c=this.getNative(),d=c.type;"Text"==d&&(b=2),"Control"==d&&(b=3),c.createRange().parentElement&&(b=2)}catch(e){}return a.type=b}:function(){var a=this._.cache;if(a.type)return a.type;var b=2,c=this.getNative();if(c){if(1==c.rangeCount){var d=c.getRangeAt(0),e=d.startContainer;e==d.endContainer&&1==e.nodeType&&d.endOffset-d.startOffset==1&&v[e.childNodes[d.startOffset].nodeName.toLowerCase()]&&(b=3)}}else b=1;return a.type=b},getRanges:function(){var a=c?function(){function a(a){return new d.node(a).getIndex()}var c=function(c,d){c=c.duplicate(),c.collapse(d);var e=c.parentElement(),f=e.ownerDocument;if(!e.hasChildNodes())return{container:e,offset:0};for(var g,h,i,j,k,l=e.children,m=c.duplicate(),n=0,o=l.length-1,p=-1;o>=n;)if(p=Math.floor((n+o)/2),g=l[p],m.moveToElementText(g),i=m.compareEndPoints("StartToStart",c),i>0)o=p-1;else{if(!(0>i)){if(b.ie9Compat&&"BR"==g.tagName){var q=f.defaultView.getSelection();return{container:q[d?"anchorNode":"focusNode"],offset:q[d?"anchorOffset":"focusOffset"]}}return{container:e,offset:a(g)}}n=p+1}if(-1==p||p==l.length-1&&0>i){if(m.moveToElementText(e),m.setEndPoint("StartToStart",c),j=m.text.replace(/(\r\n|\r)/g,"\n").length,l=e.childNodes,!j)return g=l[l.length-1],3!=g.nodeType?{container:e,offset:l.length}:{container:g,offset:g.nodeValue.length};for(var r=l.length;j>0&&r>0;)h=l[--r],3==h.nodeType&&(k=h,j-=h.nodeValue.length);return{container:k,offset:-j}}if(m.collapse(i>0?!0:!1),m.setEndPoint(i>0?"StartToStart":"EndToStart",c),j=m.text.replace(/(\r\n|\r)/g,"\n").length,!j)return{container:e,offset:a(g)+(i>0?0:1)};for(;j>0;)try{h=g[i>0?"previousSibling":"nextSibling"],3==h.nodeType&&(j-=h.nodeValue.length,k=h),g=h}catch(s){return{container:e,offset:a(g)}}return{container:k,offset:i>0?-j:k.nodeValue.length+j}};return function(){var a,b=this,e=b.getNative(),f=e&&e.createRange(),g=b.getType();if(!e)return[];if(2==g){a=new d.range(b.document);var h=c(f,!0);return a.setStart(new d.node(h.container),h.offset),h=c(f),a.setEnd(new d.node(h.container),h.offset),4&a.endContainer.getPosition(a.startContainer)&&a.endOffset<=a.startContainer.getIndex()&&a.collapse(),[a]}if(3==g){for(var i=[],j=0;j<f.length;j++){var k=f.item(j),l=k.parentNode,m=0;for(a=new d.range(b.document);m<l.childNodes.length&&l.childNodes[m]!=k;m++);a.setStart(new d.node(l),m),a.setEnd(new d.node(l),m+1),i.push(a)}return i}return[]}}():function(){var a,b=[],c=this.document,e=this.getNative();if(!e)return b;e.rangeCount||(a=new d.range(c),a.moveToElementEditStart(c.getBody()),b.push(a));for(var f=0;f<e.rangeCount;f++){var g=e.getRangeAt(f);a=new d.range(c),a.setStart(new d.node(g.startContainer),g.startOffset),a.setEnd(new d.node(g.endContainer),g.endOffset),b.push(a)}return b};return function(b){var c=this._.cache;if(c.ranges&&!b)return c.ranges;if(c.ranges||(c.ranges=new d.rangeList(a.call(this))),b)for(var e=c.ranges,f=0;f<e.length;f++){var g=e[f],h=g.getCommonAncestor();if(h.isReadOnly()&&e.splice(f,1),!g.collapsed){if(g.startContainer.isReadOnly())for(var i=g.startContainer;i&&!i.is("body")&&i.isReadOnly();)1==i.type&&"false"==i.getAttribute("contentEditable")&&g.setStartAfter(i),i=i.getParent();var j=g.startContainer,k=g.endContainer,l=g.startOffset,m=g.endOffset,n=g.clone();j&&3==j.type&&(l>=j.getLength()?n.setStartAfter(j):n.setStartBefore(j)),k&&3==k.type&&(m?n.setEndAfter(k):n.setEndBefore(k));var o=new d.walker(n);o.evaluator=function(a){if(1==a.type&&a.isReadOnly()){var b=g.clone();return g.setEndBefore(a),g.collapsed&&e.splice(f--,1),16&a.getPosition(n.endContainer)||(b.setStartAfter(a),b.collapsed||e.splice(f+1,0,b)),!0}return!1},o.next()}}return c.ranges}}(),getStartElement:function(){var a=this,b=a._.cache;if(void 0!==b.startElement)return b.startElement;{var c;a.getNative()}switch(a.getType()){case 3:return a.getSelectedElement();case 2:var d=a.getRanges()[0];if(d){if(d.collapsed)c=d.startContainer,1!=c.type&&(c=c.getParent());else{for(d.optimize();;){var e=d.startContainer,f=d.startOffset;if(f!=(e.getChildCount?e.getChildCount():e.getLength())||e.isBlockBoundary())break;d.setStartAfter(e)}if(c=d.startContainer,1!=c.type)return c.getParent();if(c=c.getChild(d.startOffset),c&&1==c.type)for(var g=c.getFirst();g&&1==g.type;)c=g,g=g.getFirst();else c=d.startContainer}c=c.$}}return b.startElement=c?new h(c):null},getSelectedElement:function(){var a=this._.cache;if(void 0!==a.selectedElement)return a.selectedElement;var b=this,c=e.tryThese(function(){return b.getNative().createRange().item(0)},function(){var a,c,g=b.getRanges()[0],h=g.getCommonAncestor(1,1),i={table:1,ul:1,ol:1,dl:1};for(var j in i)if(a=h.getAscendant(j,1))break;if(a){var k=new d.range(this.document);k.setStartAt(a,1),k.setEnd(g.startContainer,g.startOffset);

var l=e.extend(i,f.$listItem,f.$tableContent),m=new d.walker(k),n=function(a,b){return function(c,d){if(3==c.type&&(!e.trim(c.getText())||c.getParent().data("cke-bookmark")))return!0;var g;if(1==c.type){if(g=c.getName(),"br"==g&&b&&c.equals(c.getParent().getBogus()))return!0;if(d&&g in l||g in f.$removeEmpty)return!0}return a.halted=1,!1}};m.guard=n(m),m.checkBackward()&&!m.halted&&(m=new d.walker(k),k.setStart(g.endContainer,g.endOffset),k.setEndAt(a,2),m.guard=n(m,1),m.checkForward()&&!m.halted&&(c=a.$))}if(!c)throw 0;return c},function(){for(var a,c,d=b.getRanges()[0],e=2;e&&!((a=d.getEnclosedNode())&&1==a.type&&v[a.getName()]&&(c=a));e--)d.shrink(1);return c.$});return a.selectedElement=c?new h(c):null},getSelectedText:function(){var a=this._.cache;if(void 0!==a.selectedText)return a.selectedText;var b="",d=this.getNative();return 2==this.getType()&&(b=c?d.createRange().text:d.toString()),a.selectedText=b},lock:function(){var a=this;a.getRanges(),a.getStartElement(),a.getSelectedElement(),a.getSelectedText(),a._.cache.nativeSel={},a.isLocked=1,a.document.setCustomData("cke_locked_selection",a)},unlock:function(a){var b=this,c=b.document,d=c.getCustomData("cke_locked_selection");if(d&&(c.setCustomData("cke_locked_selection",null),a)){var e=d.getSelectedElement(),f=!e&&d.getRanges();b.isLocked=0,b.reset(),e?b.selectElement(e):b.selectRanges(f)}d&&a||(b.isLocked=0,b.reset())},reset:function(){this._.cache={}},selectElement:function(a){var b=this;if(b.isLocked){var c=new d.range(b.document);return c.setStartBefore(a),c.setEndAfter(a),b._.cache.selectedElement=a,b._.cache.startElement=a,b._.cache.ranges=new d.rangeList(c),void(b._.cache.type=3)}c=new d.range(a.getDocument()),c.setStartBefore(a),c.setEndAfter(a),c.select(),b.document.fire("selectionchange"),b.reset()},selectRanges:function(a){var e=this;if(e.isLocked)return e._.cache.selectedElement=null,e._.cache.startElement=a[0]&&a[0].getTouchedStartNode(),e._.cache.ranges=new d.rangeList(a),void(e._.cache.type=2);if(c){if(a.length>1){var f=a[a.length-1];a[0].setEnd(f.endContainer,f.endOffset),a.length=1}a[0]&&a[0].select(),e.reset()}else{var g=e.getNative();if(!g)return;a.length&&(g.removeAllRanges(),b.webkit&&q(e.document));for(var h=0;h<a.length;h++){if(h<a.length-1){var i=a[h],j=a[h+1],k=i.clone();if(k.setStart(i.endContainer,i.endOffset),k.setEnd(j.startContainer,j.startOffset),!k.collapsed){k.shrink(1,!0);var l=k.getCommonAncestor(),o=k.getEnclosedNode();if(l.isReadOnly()||o&&o.isReadOnly()){j.setStart(i.startContainer,i.startOffset),a.splice(h--,1);continue}}}var p=a[h],r=e.document.$.createRange(),s=p.startContainer;if(p.collapsed&&(b.opera||b.gecko&&b.version<10900)&&1==s.type&&!s.getChildCount()&&s.appendText(""),p.collapsed&&b.webkit&&m(p)){var t=n(e.document);p.insertNode(t);var u=t.getNext();u&&!t.getPrevious()&&1==u.type&&"br"==u.getName()?(q(e.document),p.moveToPosition(u,3)):p.moveToPosition(t,4)}r.setStart(p.startContainer.$,p.startOffset);try{r.setEnd(p.endContainer.$,p.endOffset)}catch(v){if(!(v.toString().indexOf("NS_ERROR_ILLEGAL_VALUE")>=0))throw v;p.collapse(1),r.setEnd(p.endContainer.$,p.endOffset)}g.addRange(r)}e.document.fire("selectionchange"),e.reset()}},createBookmarks:function(a){return this.getRanges().createBookmarks(a)},createBookmarks2:function(a){return this.getRanges().createBookmarks2(a)},selectBookmarks:function(a){for(var b=[],c=0;c<a.length;c++){var e=new d.range(this.document);e.moveToBookmark(a[c]),b.push(e)}return this.selectRanges(b),this},getCommonAncestor:function(){var a=this.getRanges(),b=a[0].startContainer,c=a[a.length-1].endContainer;return b.getCommonAncestor(c)},scrollIntoView:function(){var a=this.getStartElement();a.scrollIntoView()}};var w=d.walker.whitespaces(!0),x=d.walker.invisible(1),y=/\ufeff|\u00a0/,z={table:1,tbody:1,tr:1};d.range.prototype.select=c?function(a){var b,c,d,e=this,f=e.collapsed,g=e.getEnclosedNode();if(g)try{return d=e.document.$.body.createControlRange(),d.addElement(g.$),void d.select()}catch(h){}(1==e.startContainer.type&&e.startContainer.getName()in z||1==e.endContainer.type&&e.endContainer.getName()in z)&&e.shrink(1,!0);var i,j=e.createBookmark(),k=j.startNode;if(f||(i=j.endNode),d=e.document.$.body.createTextRange(),d.moveToElementText(k.$),d.moveStart("character",1),i){var l=e.document.$.body.createTextRange();l.moveToElementText(i.$),d.setEndPoint("EndToEnd",l),d.moveEnd("character",-1)}else{var m=k.getNext(w);b=!(m&&m.getText&&m.getText().match(y))&&(a||!k.hasPrevious()||k.getPrevious().is&&k.getPrevious().is("br")),c=e.document.createElement("span"),c.setHtml("&#65279;"),c.insertBefore(k),b&&e.document.createText("\ufeff").insertBefore(k)}e.setStartBefore(k),k.remove(),f?(b?(d.moveStart("character",-1),d.select(),e.document.$.selection.clear()):d.select(),e.moveToPosition(c,3),c.remove()):(e.setEndBefore(i),i.remove(),d.select()),e.document.fire("selectionchange")}:function(){this.document.getSelection().selectRanges([this])}}(),function(){function c(a,b){var c=g.exec(a),d=g.exec(b);if(c){if(!c[2]&&"px"==d[2])return d[1];if("px"==c[2]&&!d[2])return d[1]+"px"}return b}var d=a.htmlParser.cssStyle,f=e.cssLength,g=/^((?:\d*(?:\.\d+))|(?:\d+))(.*)?$/i,i={elements:{$:function(b){var e=b.attributes,f=e&&e["data-cke-realelement"],g=f&&new a.htmlParser.fragment.fromHtml(decodeURIComponent(f)),h=g&&g.children[0];if(h&&b.attributes["data-cke-resizable"]){var i=new d(b).rules,j=h.attributes,k=i.width,l=i.height;k&&(j.width=c(j.width,k)),l&&(j.height=c(j.height,l))}return h}}};j.add("fakeobjects",{requires:["htmlwriter"],afterInit:function(a){var b=a.dataProcessor,c=b&&b.htmlFilter;c&&c.addRules(i)}}),a.editor.prototype.createFakeElement=function(c,e,g,h){var i=this.lang.fakeobjects,j=i[g]||i.unknown,k={"class":e,"data-cke-realelement":encodeURIComponent(c.getOuterHtml()),"data-cke-real-node-type":c.type,alt:j,title:j,align:c.getAttribute("align")||""};if(b.hc||(k.src=a.getUrl("images/spacer.gif")),g&&(k["data-cke-real-element-type"]=g),h){k["data-cke-resizable"]=h;var l=new d,m=c.getAttribute("width"),n=c.getAttribute("height");m&&(l.rules.width=f(m)),n&&(l.rules.height=f(n)),l.populate(k)}return this.document.createElement("img",{attributes:k})},a.editor.prototype.createFakeParserElement=function(c,e,g,h){var i,j=this.lang.fakeobjects,k=j[g]||j.unknown,l=new a.htmlParser.basicWriter;c.writeHtml(l),i=l.getHtml();var m={"class":e,"data-cke-realelement":encodeURIComponent(i),"data-cke-real-node-type":c.type,alt:k,title:k,align:c.attributes.align||""};if(b.hc||(m.src=a.getUrl("images/spacer.gif")),g&&(m["data-cke-real-element-type"]=g),h){m["data-cke-resizable"]=h;var n=c.attributes,o=new d,p=n.width,q=n.height;void 0!=p&&(o.rules.width=f(p)),void 0!=q&&(o.rules.height=f(q)),o.populate(m)}return new a.htmlParser.element("img",m)},a.editor.prototype.restoreRealElement=function(a){if(1!=a.data("cke-real-node-type"))return null;var b=h.createFromHtml(decodeURIComponent(a.data("cke-realelement")),this.document);if(a.data("cke-resizable")){var d=a.getStyle("width"),e=a.getStyle("height");d&&b.setAttribute("width",c(b.getAttribute("width"),d)),e&&b.setAttribute("height",c(b.getAttribute("height"),e))}return b}}(),j.add("richcombo",{requires:["floatpanel","listblock","button"],beforeInit:function(a){a.ui.addHandler("richcombo",k.richCombo.handler)}}),a.UI_RICHCOMBO="richcombo",k.richCombo=e.createClass({$:function(b){var c=this;e.extend(c,b,{title:b.label,modes:{wysiwyg:1}});var d=c.panel||{};delete c.panel,c.id=e.getNextNumber(),c.document=d&&d.parent&&d.parent.getDocument()||a.document,d.className=(d.className||"")+" cke_rcombopanel",d.block={multiSelect:d.multiSelect,attributes:d.attributes},c._={panelDefinition:d,items:{},state:2}},statics:{handler:{create:function(a){return new k.richCombo(a)}}},proto:{renderHtml:function(a){var b=[];return this.render(a,b),b.join("")},render:function(f,g){function i(){var a=this,b=a.modes[f.mode]?2:0;a.setState(f.readOnly&&!a.readOnly?0:b),a.setValue("")}var j=b,k="cke_"+this.id,l=e.addFunction(function(a){var b=this,c=b._;if(0!=c.state){if(b.createPanel(f),c.on)return void c.panel.hide();b.commit();var d=b.getValue();d?c.list.mark(d):c.list.unmarkAll(),c.panel.showBlock(b.id,new h(a),4)}},this),m={id:k,combo:this,focus:function(){var b=a.document.getById(k).getChild(1);b.focus()},clickFn:l};f.on("mode",i,this),!this.readOnly&&f.on("readOnly",i,this);var n=e.addFunction(function(a,b){a=new d.event(a);var c=a.getKeystroke();switch(c){case 13:case 32:case 40:e.callFunction(l,b);break;default:m.onkey(m,c)}a.preventDefault()}),o=e.addFunction(function(){m.onfocus&&m.onfocus()});return m.keyDownFn=n,g.push('<span class="cke_rcombo" role="presentation">',"<span id=",k),this.className&&g.push(' class="',this.className,' cke_off"'),g.push(' role="presentation">','<span id="'+k+'_label" class=cke_label>',this.label,"</span>",'<a hidefocus=true title="',this.title,'" tabindex="-1"',j.gecko&&j.version>=10900&&!j.hc?"":" href=\"javascript:void('"+this.label+"')\"",' role="button" aria-labelledby="',k,'_label" aria-describedby="',k,'_text" aria-haspopup="true"'),(b.opera||b.gecko&&b.mac)&&g.push(' onkeypress="return false;"'),b.gecko&&g.push(' onblur="this.style.cssText = this.style.cssText;"'),g.push(' onkeydown="CKEDITOR.tools.callFunction( ',n,', event, this );" onfocus="return CKEDITOR.tools.callFunction(',o,', event);" '+(c?'onclick="return false;" onmouseup':"onclick")+'="CKEDITOR.tools.callFunction(',l,', this); return false;"><span><span id="'+k+'_text" class="cke_text cke_inline_label">'+this.label+"</span></span><span class=cke_openbutton><span class=cke_icon>"+(b.hc?"&#9660;":b.air?"&nbsp;":"")+"</span></span></a></span></span>"),this.onRender&&this.onRender(),m},createPanel:function(b){if(!this._.panel){var c=this._.panelDefinition,d=this._.panelDefinition.block,e=c.parent||a.document.getBody(),f=new k.floatPanel(b,e,c),g=f.addListBlock(this.id,d),h=this;f.onShow=function(){h.className&&this.element.getFirst().addClass(h.className+"_panel"),h.setState(1),g.focus(!h.multiSelect&&h.getValue()),h._.on=1,h.onOpen&&h.onOpen()},f.onHide=function(a){h.className&&this.element.getFirst().removeClass(h.className+"_panel"),h.setState(h.modes&&h.modes[b.mode]?2:0),h._.on=0,!a&&h.onClose&&h.onClose()},f.onEscape=function(){f.hide()},g.onClick=function(a,b){h.document.getWindow().focus(),h.onClick&&h.onClick.call(h,a,b),b?h.setValue(a,h._.items[a]):h.setValue(""),f.hide(!1)},this._.panel=f,this._.list=g,f.getBlock(this.id).onHide=function(){h._.on=0,h.setState(2)},this.init&&this.init()}},setValue:function(a,b){var c=this;c._.value=a;var d=c.document.getById("cke_"+c.id+"_text");d&&(a||b?d.removeClass("cke_inline_label"):(b=c.label,d.addClass("cke_inline_label")),d.setHtml("undefined"!=typeof b?b:a))},getValue:function(){return this._.value||""},unmarkAll:function(){this._.list.unmarkAll()},mark:function(a){this._.list.mark(a)},hideItem:function(a){this._.list.hideItem(a)},hideGroup:function(a){this._.list.hideGroup(a)},showAll:function(){this._.list.showAll()},add:function(a,b,c){this._.items[a]=c||a,this._.list.add(a,b,c)},startGroup:function(a){this._.list.startGroup(a)},commit:function(){var a=this;a._.committed||(a._.list.commit(),a._.committed=1,k.fire("ready",a)),a._.committed=1},setState:function(a){var b=this;b._.state!=a&&(b.document.getById("cke_"+b.id).setState(a),b._.state=a)}}}),k.prototype.addRichCombo=function(a,b){this.add(a,"richcombo",b)},j.add("htmlwriter"),a.htmlWriter=e.createClass({base:a.htmlParser.basicWriter,$:function(){var a=this;a.base(),a.indentationChars="	",a.selfClosingEnd=" />",a.lineBreakChars="\n",a.forceSimpleAmpersand=0,a.sortAttributes=1,a._.indent=0,a._.indentation="",a._.inPre=0,a._.rules={};var b=f;for(var c in e.extend({},b.$nonBodyContent,b.$block,b.$listItem,b.$tableContent))a.setRules(c,{indent:1,breakBeforeOpen:1,breakAfterOpen:1,breakBeforeClose:!b[c]["#"],breakAfterClose:1});a.setRules("br",{breakAfterOpen:1}),a.setRules("title",{indent:0,breakAfterOpen:0}),a.setRules("style",{indent:0,breakBeforeClose:1}),a.setRules("pre",{indent:0})},proto:{openTag:function(a,b){var c=this,d=c._.rules[a];c._.indent?c.indentation():d&&d.breakBeforeOpen&&(c.lineBreak(),c.indentation()),c._.output.push("<",a)},openTagClose:function(a,b){var c=this,d=c._.rules[a];b?c._.output.push(c.selfClosingEnd):(c._.output.push(">"),d&&d.indent&&(c._.indentation+=c.indentationChars)),d&&d.breakAfterOpen&&c.lineBreak(),"pre"==a&&(c._.inPre=1)},attribute:function(a,b){"string"==typeof b&&(this.forceSimpleAmpersand&&(b=b.replace(/&amp;/g,"&")),b=e.htmlEncodeAttr(b)),this._.output.push(" ",a,'="',b,'"')},closeTag:function(a){var b=this,c=b._.rules[a];c&&c.indent&&(b._.indentation=b._.indentation.substr(b.indentationChars.length)),b._.indent?b.indentation():c&&c.breakBeforeClose&&(b.lineBreak(),b.indentation()),b._.output.push("</",a,">"),"pre"==a&&(b._.inPre=0),c&&c.breakAfterClose&&b.lineBreak()},text:function(a){var b=this;b._.indent&&(b.indentation(),!b._.inPre&&(a=e.ltrim(a))),b._.output.push(a)},comment:function(a){this._.indent&&this.indentation(),this._.output.push("<!--",a,"-->")},lineBreak:function(){var a=this;!a._.inPre&&a._.output.length>0&&a._.output.push(a.lineBreakChars),a._.indent=1},indentation:function(){var a=this;a._.inPre||a._.output.push(a._.indentation),a._.indent=0},setRules:function(a,b){var c=this._.rules[a];c?e.extend(c,b,!0):this._.rules[a]=b}}}),j.add("menubutton",{requires:["button","menu"],beforeInit:function(a){a.ui.addHandler("menubutton",k.menuButton.handler)}}),a.UI_MENUBUTTON="menubutton",function(){var b=function(b){var c=this._;if(0!==c.state){c.previousState=c.state;var d=c.menu;if(d||(d=c.menu=new a.menu(b,{panel:{className:b.skinClass+" cke_contextmenu",attributes:{"aria-label":b.lang.common.options}}}),d.onHide=e.bind(function(){this.setState(this.modes&&this.modes[b.mode]?c.previousState:0)},this),this.onMenu&&d.addListener(this.onMenu)),c.on)return void d.hide();this.setState(1),d.show(a.document.getById(this._.id),4)}};k.menuButton=e.createClass({base:k.button,$:function(a){a.panel;delete a.panel,this.base(a),this.hasArrow=!0,this.click=b},statics:{handler:{create:function(a){return new k.menuButton(a)}}}})}(),j.add("dialogui"),function(){var f=function(a){var b=this;b._||(b._={}),b._["default"]=b._.initValue=a["default"]||"",b._.required=a.required||!1;for(var c=[b._],d=1;d<arguments.length;d++)c.push(arguments[d]);return c.push(!0),e.extend.apply(e,c),b._},g={build:function(a,b,c){return new k.dialog.textInput(a,b,c)}},i={build:function(a,b,c){return new k.dialog[b.type](a,b,c)}},j={build:function(b,c,d){for(var e,f=c.children,g=[],h=[],i=0;i<f.length&&(e=f[i]);i++){var j=[];g.push(j),h.push(a.dialog._.uiElementBuilders[e.type].build(b,e,j))}return new k.dialog[c.type](b,h,g,d,c)}},l={isChanged:function(){return this.getValue()!=this.getInitValue()},reset:function(a){this.setValue(this.getInitValue(),a)},setInitValue:function(){this._.initValue=this.getValue()},resetInitValue:function(){this._.initValue=this._["default"]},getInitValue:function(){return this._.initValue}},m=e.extend({},k.dialog.uiElement.prototype.eventProcessors,{onChange:function(a,b){this._.domOnChangeRegistered||(a.on("load",function(){this.getInputElement().on("change",function(){a.parts.dialog.isVisible()&&this.fire("change",{value:this.getValue()})},this)},this),this._.domOnChangeRegistered=!0),this.on("change",b)}},!0),n=/^on([A-Z]\w+)/,o=function(a){for(var b in a)(n.test(b)||"title"==b||"type"==b)&&delete a[b];return a};e.extend(k.dialog,{labeledElement:function(b,c,d,g){if(!(arguments.length<4)){var h=f.call(this,c);h.labelId=e.getNextId()+"_label";var i=(this._.children=[],function(){var d=[],f=c.required?" cke_required":"";if("horizontal"!=c.labelLayout)d.push('<label class="cke_dialog_ui_labeled_label'+f+'" ',' id="'+h.labelId+'"',h.inputId?' for="'+h.inputId+'"':"",(c.labelStyle?' style="'+c.labelStyle+'"':"")+">",c.label,"</label>",'<div class="cke_dialog_ui_labeled_content"'+(c.controlStyle?' style="'+c.controlStyle+'"':"")+' role="presentation">',g.call(this,b,c),"</div>");else{var i={type:"hbox",widths:c.widths,padding:0,children:[{type:"html",html:'<label class="cke_dialog_ui_labeled_label'+f+'" id="'+h.labelId+'" for="'+h.inputId+'"'+(c.labelStyle?' style="'+c.labelStyle+'"':"")+">"+e.htmlEncode(c.label)+"</span>"},{type:"html",html:'<span class="cke_dialog_ui_labeled_content"'+(c.controlStyle?' style="'+c.controlStyle+'"':"")+">"+g.call(this,b,c)+"</span>"}]};a.dialog._.uiElementBuilders.hbox.build(b,i,d)}return d.join("")});k.dialog.uiElement.call(this,b,c,d,"div",null,{role:"presentation"},i)}},textInput:function(a,b,c){if(!(arguments.length<3)){f.call(this,b);var d=this._.inputId=e.getNextId()+"_textInput",g={"class":"cke_dialog_ui_input_"+b.type,id:d,type:b.type};b.validate&&(this.validate=b.validate),b.maxLength&&(g.maxlength=b.maxLength),b.size&&(g.size=b.size),b.inputStyle&&(g.style=b.inputStyle);var h=function(){var a=['<div class="cke_dialog_ui_input_',b.type,'" role="presentation"'];b.width&&a.push('style="width:'+b.width+'" '),a.push("><input "),g["aria-labelledby"]=this._.labelId,this._.required&&(g["aria-required"]=this._.required);for(var c in g)a.push(c+'="'+g[c]+'" ');return a.push(" /></div>"),a.join("")};k.dialog.labeledElement.call(this,a,b,c,h)}},textarea:function(a,b,c){if(!(arguments.length<3)){f.call(this,b);var d=this,g=this._.inputId=e.getNextId()+"_textarea",h={};b.validate&&(this.validate=b.validate),h.rows=b.rows||5,h.cols=b.cols||20,"undefined"!=typeof b.inputStyle&&(h.style=b.inputStyle);var i=function(){h["aria-labelledby"]=this._.labelId,this._.required&&(h["aria-required"]=this._.required);var a=['<div class="cke_dialog_ui_input_textarea" role="presentation"><textarea class="cke_dialog_ui_input_textarea" id="',g,'" '];for(var b in h)a.push(b+'="'+e.htmlEncode(h[b])+'" ');return a.push(">",e.htmlEncode(d._["default"]),"</textarea></div>"),a.join("")};k.dialog.labeledElement.call(this,a,b,c,i)}},checkbox:function(a,b,c){if(!(arguments.length<3)){var d=f.call(this,b,{"default":!!b["default"]});b.validate&&(this.validate=b.validate);var g=function(){var c=e.extend({},b,{id:b.id?b.id+"_checkbox":e.getNextId()+"_checkbox"},!0),f=[],g=e.getNextId()+"_label",h={"class":"cke_dialog_ui_checkbox_input",type:"checkbox","aria-labelledby":g};return o(c),b["default"]&&(h.checked="checked"),"undefined"!=typeof c.inputStyle&&(c.style=c.inputStyle),d.checkbox=new k.dialog.uiElement(a,c,f,"input",null,h),f.push(' <label id="',g,'" for="',h.id,'"'+(b.labelStyle?' style="'+b.labelStyle+'"':"")+">",e.htmlEncode(b.label),"</label>"),f.join("")};k.dialog.uiElement.call(this,a,b,c,"span",null,null,g)}},radio:function(a,b,c){if(!(arguments.length<3)){f.call(this,b),this._["default"]||(this._["default"]=this._.initValue=b.items[0][1]),b.validate&&(this.validate=b.valdiate);var d=[],g=this,h=function(){for(var c=[],f=[],h=({"class":"cke_dialog_ui_radio_item","aria-labelledby":this._.labelId},b.id?b.id+"_radio":e.getNextId()+"_radio"),i=0;i<b.items.length;i++){var j=b.items[i],l=void 0!==j[2]?j[2]:j[0],m=void 0!==j[1]?j[1]:j[0],n=e.getNextId()+"_radio_input",p=n+"_label",q=e.extend({},b,{id:n,title:null,type:null},!0),r=e.extend({},q,{title:l},!0),s={type:"radio","class":"cke_dialog_ui_radio_input",name:h,value:m,"aria-labelledby":p},t=[];g._["default"]==m&&(s.checked="checked"),o(q),o(r),"undefined"!=typeof q.inputStyle&&(q.style=q.inputStyle),d.push(new k.dialog.uiElement(a,q,t,"input",null,s)),t.push(" "),new k.dialog.uiElement(a,r,t,"label",null,{id:p,"for":s.id},j[0]),c.push(t.join(""))}return new k.dialog.hbox(a,d,c,f),f.join("")};k.dialog.labeledElement.call(this,a,b,c,h),this._.children=d}},button:function(b,c,d){if(arguments.length){"function"==typeof c&&(c=c(b.getParentEditor())),f.call(this,c,{disabled:c.disabled||!1}),a.event.implementOn(this);var g=this;b.on("load",function(a){var b=this.getElement();!function(){b.on("click",function(a){g.fire("click",{dialog:g.getDialog()}),a.data.preventDefault()}),b.on("keydown",function(a){a.data.getKeystroke()in{32:1}&&(g.click(),a.data.preventDefault())})}(),b.unselectable()},this);var h=e.extend({},c);delete h.style;var i=e.getNextId()+"_label";k.dialog.uiElement.call(this,b,h,d,"a",null,{style:c.style,href:"javascript:void(0)",title:c.label,hidefocus:"true","class":c["class"],role:"button","aria-labelledby":i},'<span id="'+i+'" class="cke_dialog_ui_button">'+e.htmlEncode(c.label)+"</span>")}},select:function(a,b,c){if(!(arguments.length<3)){var d=f.call(this,b);b.validate&&(this.validate=b.validate),d.inputId=e.getNextId()+"_select";var g=function(){var c=e.extend({},b,{id:b.id?b.id+"_select":e.getNextId()+"_select"},!0),f=[],g=[],h={id:d.inputId,"class":"cke_dialog_ui_input_select","aria-labelledby":this._.labelId};void 0!=b.size&&(h.size=b.size),void 0!=b.multiple&&(h.multiple=b.multiple),o(c);for(var i,j=0;j<b.items.length&&(i=b.items[j]);j++)g.push('<option value="',e.htmlEncode(void 0!==i[1]?i[1]:i[0]).replace(/"/g,"&quot;"),'" /> ',e.htmlEncode(i[0]));return"undefined"!=typeof c.inputStyle&&(c.style=c.inputStyle),d.select=new k.dialog.uiElement(a,c,f,"select",null,h,g.join("")),f.join("")};k.dialog.labeledElement.call(this,a,b,c,g)}},file:function(c,d,g){if(!(arguments.length<3)){void 0===d["default"]&&(d["default"]="");var h=e.extend(f.call(this,d),{definition:d,buttons:[]});d.validate&&(this.validate=d.validate);var i=function(){h.frameId=e.getNextId()+"_fileInput";var a=b.isCustomDomain(),c=['<iframe frameborder="0" allowtransparency="0" class="cke_dialog_ui_input_file" role="presentation" id="',h.frameId,'" title="',d.label,'" src="javascript:void('];return c.push(a?"(function(){document.open();document.domain='"+document.domain+"';document.close();})()":"0"),c.push(')"></iframe>'),c.join("")};c.on("load",function(){var b=a.document.getById(h.frameId),c=b.getParent();c.addClass("cke_dialog_ui_input_file")}),k.dialog.labeledElement.call(this,c,d,g,i)}},fileButton:function(a,b,c){if(!(arguments.length<3)){var d=(f.call(this,b),this);b.validate&&(this.validate=b.validate);var g=e.extend({},b),h=g.onClick;g.className=(g.className?g.className+" ":"")+"cke_dialog_ui_button",g.onClick=function(c){var d=b["for"];h&&h.call(this,c)===!1||(a.getContentElement(d[0],d[1]).submit(),this.disable())},a.on("load",function(){a.getContentElement(b["for"][0],b["for"][1])._.buttons.push(d)}),k.dialog.button.call(this,a,g,c)}},html:function(){var a=/^\s*<[\w:]+\s+([^>]*)?>/,b=/^(\s*<[\w:]+(?:\s+[^>]*)?)((?:.|\r|\n)+)$/,c=/\/$/;return function(d,e,f){if(!(arguments.length<3)){var g,h,i,j=[],l=e.html;"<"!=l.charAt(0)&&(l="<span>"+l+"</span>");var m=e.focus;if(m){var n=this.focus;if(this.focus=function(){n.call(this),"function"==typeof m&&m.call(this),this.fire("focus")},e.isFocusable){var o=this.isFocusable;this.isFocusable=o}this.keyboardFocusable=!0}k.dialog.uiElement.call(this,d,e,j,"span",null,null,""),g=j.join(""),h=g.match(a),i=l.match(b)||["","",""],c.test(i[1])&&(i[1]=i[1].slice(0,-1),i[2]="/"+i[2]),f.push([i[1]," ",h[1]||"",i[2]].join(""))}}}(),fieldset:function(a,b,c,d,e){var f=e.label,g=function(){var a=[];f&&a.push("<legend"+(e.labelStyle?' style="'+e.labelStyle+'"':"")+">"+f+"</legend>");for(var b=0;b<c.length;b++)a.push(c[b]);return a.join("")};this._={children:b},k.dialog.uiElement.call(this,a,e,d,"fieldset",null,null,g)}},!0),k.dialog.html.prototype=new k.dialog.uiElement,k.dialog.labeledElement.prototype=e.extend(new k.dialog.uiElement,{setLabel:function(b){var c=a.document.getById(this._.labelId);return c.getChildCount()<1?new d.text(b,a.document).appendTo(c):c.getChild(0).$.nodeValue=b,this},getLabel:function(){var b=a.document.getById(this._.labelId);return!b||b.getChildCount()<1?"":b.getChild(0).getText()},eventProcessors:m},!0),k.dialog.button.prototype=e.extend(new k.dialog.uiElement,{click:function(){var a=this;return a._.disabled?(a.getElement().$.blur(),!1):a.fire("click",{dialog:a._.dialog})},enable:function(){this._.disabled=!1;var a=this.getElement();a&&a.removeClass("cke_disabled")},disable:function(){this._.disabled=!0,this.getElement().addClass("cke_disabled")},isVisible:function(){return this.getElement().getFirst().isVisible()},isEnabled:function(){return!this._.disabled},eventProcessors:e.extend({},k.dialog.uiElement.prototype.eventProcessors,{onClick:function(a,b){this.on("click",function(){this.getElement().focus(),b.apply(this,arguments)})}},!0),accessKeyUp:function(){this.click()},accessKeyDown:function(){this.focus()},keyboardFocusable:!0},!0),k.dialog.textInput.prototype=e.extend(new k.dialog.labeledElement,{getInputElement:function(){return a.document.getById(this._.inputId)},focus:function(){var a=this.selectParentTab();setTimeout(function(){var b=a.getInputElement();b&&b.$.focus()},0)},select:function(){var a=this.selectParentTab();setTimeout(function(){var b=a.getInputElement();b&&(b.$.focus(),b.$.select())},0)},accessKeyUp:function(){this.select()},setValue:function(a){return!a&&(a=""),k.dialog.uiElement.prototype.setValue.apply(this,arguments)},keyboardFocusable:!0},l,!0),k.dialog.textarea.prototype=new k.dialog.textInput,k.dialog.select.prototype=e.extend(new k.dialog.labeledElement,{getInputElement:function(){return this._.select.getElement()},add:function(a,b,d){var e=new h("option",this.getDialog().getParentEditor().document),f=this.getInputElement().$;return e.$.text=a,e.$.value=void 0===b||null===b?a:b,void 0===d||null===d?c?f.add(e.$):f.add(e.$,null):f.add(e.$,d),this},remove:function(a){var b=this.getInputElement().$;return b.remove(a),this},clear:function(){for(var a=this.getInputElement().$;a.length>0;)a.remove(0);return this},keyboardFocusable:!0},l,!0),k.dialog.checkbox.prototype=e.extend(new k.dialog.uiElement,{getInputElement:function(){return this._.checkbox.getElement()},setValue:function(a,b){this.getInputElement().$.checked=a,!b&&this.fire("change",{value:a})},getValue:function(){return this.getInputElement().$.checked},accessKeyUp:function(){this.setValue(!this.getValue())},eventProcessors:{onChange:function(a,b){return c?(a.on("load",function(){var a=this._.checkbox.getElement();a.on("propertychange",function(b){b=b.data.$,"checked"==b.propertyName&&this.fire("change",{value:a.$.checked})},this)},this),this.on("change",b),null):m.onChange.apply(this,arguments)}},keyboardFocusable:!0},l,!0),k.dialog.radio.prototype=e.extend(new k.dialog.uiElement,{setValue:function(a,b){for(var c,d=this._.children,e=0;e<d.length&&(c=d[e]);e++)c.getElement().$.checked=c.getValue()==a;!b&&this.fire("change",{value:a})},getValue:function(){for(var a=this._.children,b=0;b<a.length;b++)if(a[b].getElement().$.checked)return a[b].getValue();return null},accessKeyUp:function(){var a,b=this._.children;for(a=0;a<b.length;a++)if(b[a].getElement().$.checked)return void b[a].getElement().focus();b[0].getElement().focus()},eventProcessors:{onChange:function(a,b){return c?(a.on("load",function(){for(var a=this._.children,b=this,c=0;c<a.length;c++){var d=a[c].getElement();d.on("propertychange",function(a){a=a.data.$,"checked"==a.propertyName&&this.$.checked&&b.fire("change",{value:this.getAttribute("value")})})}},this),this.on("change",b),null):m.onChange.apply(this,arguments)}},keyboardFocusable:!0},l,!0),k.dialog.file.prototype=e.extend(new k.dialog.labeledElement,l,{getInputElement:function(){var b=a.document.getById(this._.frameId).getFrameDocument();return b.$.forms.length>0?new h(b.$.forms[0].elements[0]):this.getElement()},submit:function(){return this.getInputElement().getParent().$.submit(),this},getAction:function(){return this.getInputElement().getParent().$.action},registerEvents:function(a){var b,c=/^on([A-Z]\w+)/,d=function(a,b,c,d){a.on("formLoaded",function(){a.getInputElement().on(c,d,a)})};for(var e in a)(b=e.match(c))&&(this.eventProcessors[e]?this.eventProcessors[e].call(this,this._.dialog,a[e]):d(this,this._.dialog,b[1].toLowerCase(),a[e]));return this},reset:function(){function d(){h.$.open(),b.isCustomDomain()&&(h.$.domain=document.domain);var a="";i.size&&(a=i.size-(c?7:0));var d=f.frameId+"_input";h.$.write(['<html dir="'+m+'" lang="'+n+'"><head><title></title></head><body style="margin: 0; overflow: hidden; background: transparent;">','<form enctype="multipart/form-data" method="POST" dir="'+m+'" lang="'+n+'" action="',e.htmlEncode(i.action),'">','<label id="',f.labelId,'" for="',d,'" style="display:none">',e.htmlEncode(i.label),"</label>",'<input id="',d,'" aria-labelledby="',f.labelId,'" type="file" name="',e.htmlEncode(i.id||"cke_upload"),'" size="',e.htmlEncode(a>0?a:""),'" />',"</form>","</body></html>","<script>window.parent.CKEDITOR.tools.callFunction("+k+");","window.onbeforeunload = function() {window.parent.CKEDITOR.tools.callFunction("+l+")}</script>"].join("")),h.$.close();for(var g=0;g<j.length;g++)j[g].enable()}var f=this._,g=a.document.getById(f.frameId),h=g.getFrameDocument(),i=f.definition,j=f.buttons,k=this.formLoadedNumber,l=this.formUnloadNumber,m=f.dialog._.editor.lang.dir,n=f.dialog._.editor.langCode;k||(k=this.formLoadedNumber=e.addFunction(function(){this.fire("formLoaded")},this),l=this.formUnloadNumber=e.addFunction(function(){this.getInputElement().clearCustomData()},this),this.getDialog()._.editor.on("destroy",function(){e.removeFunction(k),e.removeFunction(l)})),b.gecko?setTimeout(d,500):d()},getValue:function(){return this.getInputElement().$.value||""},setInitValue:function(){this._.initValue=""},eventProcessors:{onChange:function(a,b){this._.domOnChangeRegistered||(this.on("formLoaded",function(){this.getInputElement().on("change",function(){this.fire("change",{value:this.getValue()})},this)},this),this._.domOnChangeRegistered=!0),this.on("change",b)}},keyboardFocusable:!0},!0),k.dialog.fileButton.prototype=new k.dialog.button,k.dialog.fieldset.prototype=e.clone(k.dialog.hbox.prototype),a.dialog.addUIElement("text",g),a.dialog.addUIElement("password",g),a.dialog.addUIElement("textarea",i),a.dialog.addUIElement("checkbox",i),a.dialog.addUIElement("radio",i),a.dialog.addUIElement("button",i),a.dialog.addUIElement("select",i),a.dialog.addUIElement("file",i),a.dialog.addUIElement("fileButton",i),a.dialog.addUIElement("html",i),a.dialog.addUIElement("fieldset",j)}(),j.add("panel",{beforeInit:function(a){a.ui.addHandler("panel",k.panel.handler)}}),a.UI_PANEL="panel",k.panel=function(a,b){var c=this;b&&e.extend(c,b),e.extend(c,{className:"",css:[]}),c.id=e.getNextId(),c.document=a,c._={blocks:{}}},k.panel.handler={create:function(a){return new k.panel(a)}},k.panel.prototype={renderHtml:function(a){var b=[];return this.render(a,b),b.join("")},render:function(a,c){var d=this,e=d.id;return c.push('<div class="',a.skinClass,'" lang="',a.langCode,'" role="presentation" style="display:none;z-index:'+(a.config.baseFloatZIndex+1)+'"><div id=',e," dir=",a.lang.dir,' role="presentation" class="cke_panel cke_',a.lang.dir),d.className&&c.push(" ",d.className),c.push('">'),(d.forceIFrame||d.css.length)&&(c.push('<iframe id="',e,'_frame" frameborder="0" role="application" src="javascript:void('),c.push(b.isCustomDomain()?"(function(){document.open();document.domain='"+document.domain+"';document.close();})()":"0"),c.push(')"></iframe>')),c.push("</div></div>"),e},getHolderElement:function(){var c=this._.holder;if(!c){if(this.forceIFrame||this.css.length){var d=this.document.getById(this.id+"_frame"),f=d.getParent(),g=f.getAttribute("dir"),h=f.getParent().getAttribute("class"),i=f.getParent().getAttribute("lang"),j=d.getFrameDocument();b.iOS&&f.setStyles({overflow:"scroll","-webkit-overflow-scrolling":"touch"});var k=e.addFunction(e.bind(function(a){this.isLoaded=!0,this.onLoad&&this.onLoad()},this)),l='<!DOCTYPE html><html dir="'+g+'" class="'+h+'_container" lang="'+i+'"><head><style>.'+h+"_container{visibility:hidden}</style>"+e.buildStyleHtml(this.css)+'</head><body class="cke_'+g+" cke_panel_frame "+b.cssClass+'" style="margin:0;padding:0" onload="( window.CKEDITOR || window.parent.CKEDITOR ).tools.callFunction('+k+');"></body></html>';j.write(l);var m=j.getWindow();m.$.CKEDITOR=a,
j.on("key"+(b.opera?"press":"down"),function(a){var b=this,c=a.data.getKeystroke(),d=b.document.getById(b.id).getAttribute("dir");return b._.onKeyDown&&b._.onKeyDown(c)===!1?void a.data.preventDefault():void((27==c||c==("rtl"==d?39:37))&&b.onEscape&&b.onEscape(c)===!1&&a.data.preventDefault())},this),c=j.getBody(),c.unselectable(),b.air&&e.callFunction(k)}else c=this.document.getById(this.id);this._.holder=c}return c},addBlock:function(a,b){var c=this;return b=c._.blocks[a]=b instanceof k.panel.block?b:new k.panel.block(c.getHolderElement(),b),c._.currentBlock||c.showBlock(a),b},getBlock:function(a){return this._.blocks[a]},showBlock:function(b){var d=this,f=d._.blocks,g=f[b],h=d._.currentBlock,i=!d.forceIFrame||c?d._.holder:d.document.getById(d.id+"_frame");return h&&(i.removeAttributes(h.attributes),h.hide()),d._.currentBlock=g,i.setAttributes(g.attributes),a.fire("ariaWidget",i),g._.focusIndex=-1,d._.onKeyDown=g.onKeyDown&&e.bind(g.onKeyDown,g),g.show(),g},destroy:function(){this.element&&this.element.remove()}},k.panel.block=e.createClass({$:function(a,b){var c=this;c.element=a.append(a.getDocument().createElement("div",{attributes:{tabIndex:-1,"class":"cke_panel_block",role:"presentation"},styles:{display:"none"}})),b&&e.extend(c,b),c.attributes.title||(c.attributes.title=c.attributes["aria-label"]),c.keys={},c._.focusIndex=-1,c.element.disableContextMenu()},_:{markItem:function(a){var c=this;if(-1!=a){var d=c.element.getElementsByTag("a"),e=d.getItem(c._.focusIndex=a);(b.webkit||b.opera)&&e.getDocument().getWindow().focus(),e.focus(),c.onMark&&c.onMark(e)}}},proto:{show:function(){this.element.setStyle("display","")},hide:function(){var a=this;a.onHide&&a.onHide.call(a)===!0||a.element.setStyle("display","none")},onKeyDown:function(a){var b=this,c=b.keys[a];switch(c){case"next":for(var d,e=b._.focusIndex,f=b.element.getElementsByTag("a");d=f.getItem(++e);)if(d.getAttribute("_cke_focus")&&d.$.offsetWidth){b._.focusIndex=e,d.focus();break}return!1;case"prev":for(e=b._.focusIndex,f=b.element.getElementsByTag("a");e>0&&(d=f.getItem(--e));)if(d.getAttribute("_cke_focus")&&d.$.offsetWidth){b._.focusIndex=e,d.focus();break}return!1;case"click":case"mouseup":return e=b._.focusIndex,d=e>=0&&b.element.getElementsByTag("a").getItem(e),d&&(d.$[c]?d.$[c]():d.$["on"+c]()),!1}return!0}}}),j.add("listblock",{requires:["panel"],onLoad:function(){k.panel.prototype.addListBlock=function(a,b){return this.addBlock(a,new k.listBlock(this.getHolderElement(),b))},k.listBlock=e.createClass({base:k.panel.block,$:function(a,b){var d=this;b=b||{};var e=b.attributes||(b.attributes={});(d.multiSelect=!!b.multiSelect)&&(e["aria-multiselectable"]=!0),!e.role&&(e.role="listbox"),d.base.apply(d,arguments);var f=d.keys;f[40]="next",f[9]="next",f[38]="prev",f[2228233]="prev",f[32]=c?"mouseup":"click",c&&(f[13]="mouseup"),d._.pendingHtml=[],d._.items={},d._.groups={}},_:{close:function(){this._.started&&(this._.pendingHtml.push("</ul>"),delete this._.started)},getClick:function(){return this._.click||(this._.click=e.addFunction(function(a){var b=this,c=!0;b.multiSelect?c=b.toggle(a):b.mark(a),b.onClick&&b.onClick(a,c)},this)),this._.click}},proto:{add:function(a,b,d){var f=this,g=f._.pendingHtml,h=e.getNextId();f._.started||(g.push('<ul role="presentation" class=cke_panel_list>'),f._.started=1,f._.size=f._.size||0),f._.items[a]=h,g.push("<li id=",h,' class=cke_panel_listItem role=presentation><a id="',h,'_option" _cke_focus=1 hidefocus=true title="',d||a,'" href="javascript:void(\'',a,"')\" "+(c?'onclick="return false;" onmouseup':"onclick")+'="CKEDITOR.tools.callFunction(',f._.getClick(),",'",a,"'); return false;\"",' role="option">',b||a,"</a></li>")},startGroup:function(a){this._.close();var b=e.getNextId();this._.groups[a]=b,this._.pendingHtml.push('<h1 role="presentation" id=',b," class=cke_panel_grouptitle>",a,"</h1>")},commit:function(){var a=this;a._.close(),a.element.appendHtml(a._.pendingHtml.join("")),delete a._.size,a._.pendingHtml=[]},toggle:function(a){var b=this.isMarked(a);return b?this.unmark(a):this.mark(a),!b},hideGroup:function(a){var b=this.element.getDocument().getById(this._.groups[a]),c=b&&b.getNext();b&&(b.setStyle("display","none"),c&&"ul"==c.getName()&&c.setStyle("display","none"))},hideItem:function(a){this.element.getDocument().getById(this._.items[a]).setStyle("display","none")},showAll:function(){var a=this._.items,b=this._.groups,c=this.element.getDocument();for(var d in a)c.getById(a[d]).setStyle("display","");for(var e in b){var f=c.getById(b[e]),g=f.getNext();f.setStyle("display",""),g&&"ul"==g.getName()&&g.setStyle("display","")}},mark:function(a){var b=this;b.multiSelect||b.unmarkAll();var c=b._.items[a],d=b.element.getDocument().getById(c);d.addClass("cke_selected"),b.element.getDocument().getById(c+"_option").setAttribute("aria-selected",!0),b.onMark&&b.onMark(d)},unmark:function(a){var b=this,c=b.element.getDocument(),d=b._.items[a],e=c.getById(d);e.removeClass("cke_selected"),c.getById(d+"_option").removeAttribute("aria-selected"),b.onUnmark&&b.onUnmark(e)},unmarkAll:function(){var a=this,b=a._.items,c=a.element.getDocument();for(var d in b){var e=b[d];c.getById(e).removeClass("cke_selected"),c.getById(e+"_option").removeAttribute("aria-selected")}a.onUnmark&&a.onUnmark()},isMarked:function(a){return this.element.getDocument().getById(this._.items[a]).hasClass("cke_selected")},focus:function(a){if(this._.focusIndex=-1,a){for(var b,c=this.element.getDocument().getById(this._.items[a]).getFirst(),d=this.element.getElementsByTag("a"),e=-1;b=d.getItem(++e);)if(b.equals(c)){this._.focusIndex=e;break}setTimeout(function(){c.focus()},0)}}}})}}),a.themes.add("default",function(){function d(c,d){var e,f;if(f=c.config.sharedSpaces,f=f&&f[d],f=f&&a.document.getById(f)){var g='<span class="cke_shared " dir="'+c.lang.dir+'"><span class="'+c.skinClass+" "+c.id+" cke_editor_"+c.name+'"><span class="'+b.cssClass+'"><span class="cke_wrapper cke_'+c.lang.dir+'"><span class="cke_editor"><div class="cke_'+d+'"></div></span></span></span></span></span>',i=f.append(h.createFromHtml(g,f.getDocument()));f.getCustomData("cke_hasshared")?i.hide():f.setCustomData("cke_hasshared",1),e=i.getChild([0,0,0,0]),!c.sharedSpaces&&(c.sharedSpaces={}),c.sharedSpaces[d]=e,c.on("focus",function(){for(var a,b=0,c=f.getChildren();a=c.getItem(b);b++)1==a.type&&!a.equals(i)&&a.hasClass("cke_shared")&&a.hide();i.show()}),c.on("destroy",function(){i.remove()})}return e}var f={};return{build:function(a,c){var e=a.name,g=a.element,i=a.elementMode;if(g&&0!=i){1==i&&g.hide();var j=a.fire("themeSpace",{space:"top",html:""}).html,k=a.fire("themeSpace",{space:"contents",html:""}).html,l=a.fireOnce("themeSpace",{space:"bottom",html:""}).html,m=k&&a.config.height,n=a.config.tabIndex||a.element.getAttribute("tabindex")||0;k?isNaN(m)||(m+="px"):m="auto";var o="",p=a.config.width;p&&(isNaN(p)||(p+="px"),o+="width: "+p+";");var q=j&&d(a,"top"),r=d(a,"bottom");q&&(q.setHtml(j),j=""),r&&(r.setHtml(l),l="");var s="<style>."+a.skinClass+"{visibility:hidden;}</style>";f[a.skinClass]?s="":f[a.skinClass]=1;var t=h.createFromHtml(['<span id="cke_',e,'" class="',a.skinClass," ",a.id," cke_editor_",e,'" dir="',a.lang.dir,'" title="',b.gecko?" ":"",'" lang="',a.langCode,'"'+(b.webkit?' tabindex="'+n+'"':"")+' role="application" aria-labelledby="cke_',e,'_arialbl"'+(o?' style="'+o+'"':"")+'><span id="cke_',e,'_arialbl" class="cke_voice_label">'+a.lang.editor+'</span><span class="',b.cssClass,'" role="presentation"><span class="cke_wrapper cke_',a.lang.dir,'" role="presentation"><table class="cke_editor" border="0" cellspacing="0" cellpadding="0" role="presentation"><tbody><tr',j?"":' style="display:none"',' role="presentation"><td id="cke_top_',e,'" class="cke_top" role="presentation">',j,"</td></tr><tr",k?"":' style="display:none"',' role="presentation"><td id="cke_contents_',e,'" class="cke_contents" style="height:',m,'" role="presentation">',k,"</td></tr><tr",l?"":' style="display:none"',' role="presentation"><td id="cke_bottom_',e,'" class="cke_bottom" role="presentation">',l,"</td></tr></tbody></table>"+s+"</span></span></span>"].join(""));t.getChild([1,0,0,0,0]).unselectable(),t.getChild([1,0,0,0,2]).unselectable(),1==i?t.insertAfter(g):g.append(t),a.container=t,t.disableContextMenu(),a.on("contentDirChanged",function(b){var c=(a.lang.dir!=b.data?"add":"remove")+"Class";t.getChild(1)[c]("cke_mixed_dir_content");var d=this.sharedSpaces&&this.sharedSpaces[this.config.toolbarLocation];d&&d.getParent().getParent()[c]("cke_mixed_dir_content")}),a.fireOnce("themeLoaded"),a.fireOnce("uiReady")}},buildDialog:function(a){var d=e.getNextNumber(),f=h.createFromHtml(['<div class="',a.id,"_dialog cke_editor_",a.name.replace(".","\\."),"_dialog cke_skin_",a.skinName,'" dir="',a.lang.dir,'" lang="',a.langCode,'" role="dialog" aria-labelledby="%title#"><table class="cke_dialog'," "+b.cssClass," cke_",a.lang.dir,'" style="position:absolute" role="presentation"><tr><td role="presentation"><div class="%body" role="presentation"><div id="%title#" class="%title" role="presentation"></div><a id="%close_button#" class="%close_button" href="javascript:void(0)" title="'+a.lang.common.close+'" role="button"><span class="cke_label">X</span></a><div id="%tabs#" class="%tabs" role="tablist"></div><table class="%contents" role="presentation"><tr><td id="%contents#" class="%contents" role="presentation"></td></tr><tr><td id="%footer#" class="%footer" role="presentation"></td></tr></table></div><div id="%tl#" class="%tl"></div><div id="%tc#" class="%tc"></div><div id="%tr#" class="%tr"></div><div id="%ml#" class="%ml"></div><div id="%mr#" class="%mr"></div><div id="%bl#" class="%bl"></div><div id="%bc#" class="%bc"></div><div id="%br#" class="%br"></div></td></tr></table>',c?"":"<style>.cke_dialog{visibility:hidden;}</style>","</div>"].join("").replace(/#/g,"_"+d).replace(/%/g,"cke_dialog_")),g=f.getChild([0,0,0,0,0]),i=g.getChild(0),j=g.getChild(1);if(c&&!b.ie6Compat){var k=b.isCustomDomain(),l="javascript:void(function(){"+encodeURIComponent("document.open();"+(k?'document.domain="'+document.domain+'";':"")+"document.close();")+"}())",m=h.createFromHtml('<iframe frameBorder="0" class="cke_iframe_shim" src="'+l+'" tabIndex="-1"></iframe>');m.appendTo(g.getParent())}return i.unselectable(),j.unselectable(),{element:f,parts:{dialog:f.getChild(0),title:i,close:j,tabs:g.getChild(2),contents:g.getChild([3,0,0,0]),footer:g.getChild([3,0,1,0])}}},destroy:function(a){var b=a.container,c=a.element;b&&(b.clearCustomData(),b.remove()),c&&(c.clearCustomData(),1==a.elementMode&&c.show(),delete a.element)}}}()),a.editor.prototype.getThemeSpace=function(b){var c="cke_"+b,d=this._[c]||(this._[c]=a.document.getById(c+"_"+this.name));return d},a.editor.prototype.resize=function(c,d,e,f){var g=this,h=g.container,i=a.document.getById("cke_contents_"+g.name),j=b.webkit&&g.document&&g.document.getWindow().$.frameElement,k=f?h.getChild(1):h;k.setSize("width",c,!0),j&&(j.style.width="1%");var l=e?0:(k.$.offsetHeight||0)-(i.$.clientHeight||0);i.setStyle("height",Math.max(d-l,0)+"px"),j&&(j.style.width="100%"),g.fire("resize")},a.editor.prototype.getResizable=function(b){return b?a.document.getById("cke_contents_"+this.name):this.container}}}(),function(){CKEDITOR.config.jqueryOverrideVal="undefined"==typeof CKEDITOR.config.jqueryOverrideVal?!0:CKEDITOR.config.jqueryOverrideVal;var a=window.jQuery;"undefined"!=typeof a&&(a.extend(a.fn,{ckeditorGet:function(){var a=this.eq(0).data("ckeditorInstance");if(!a)throw"CKEditor not yet initialized, use ckeditor() with callback.";return a},ckeditor:function(b,c){if(!CKEDITOR.env.isCompatible)return this;if(!a.isFunction(b)){var d=c;c=b,b=d}return c=c||{},this.filter("textarea, div, p").each(function(){var d=a(this),e=d.data("ckeditorInstance"),f=d.data("_ckeditorInstanceLock"),g=this;e&&!f?b&&b.apply(e,[this]):f?CKEDITOR.on("instanceReady",function(a){var c=a.editor;setTimeout(function(){return c.element?void(c.element.$==g&&b&&b.apply(c,[g])):void setTimeout(arguments.callee,100)},0)},null,null,9999):((c.autoUpdateElement||"undefined"==typeof c.autoUpdateElement&&CKEDITOR.config.autoUpdateElement)&&(c.autoUpdateElementJquery=!0),c.autoUpdateElement=!1,d.data("_ckeditorInstanceLock",!0),e=CKEDITOR.replace(g,c),d.data("ckeditorInstance",e),e.on("instanceReady",function(a){var c=a.editor;setTimeout(function(){if(!c.element)return void setTimeout(arguments.callee,100);if(a.removeListener("instanceReady",this.callee),c.on("dataReady",function(){d.trigger("setData.ckeditor",[c])}),c.on("getData",function(a){d.trigger("getData.ckeditor",[c,a.data])},999),c.on("destroy",function(){d.trigger("destroy.ckeditor",[c])}),c.config.autoUpdateElementJquery&&d.is("textarea")&&d.parents("form").length){var e=function(){d.ckeditor(function(){c.updateElement()})};d.parents("form").submit(e),d.parents("form").bind("form-pre-serialize",e),d.bind("destroy.ckeditor",function(){d.parents("form").unbind("submit",e),d.parents("form").unbind("form-pre-serialize",e)})}c.on("destroy",function(){d.data("ckeditorInstance",null)}),d.data("_ckeditorInstanceLock",null),d.trigger("instanceReady.ckeditor",[c]),b&&b.apply(c,[g])},0)},null,null,9999))}),this}}),CKEDITOR.config.jqueryOverrideVal&&(a.fn.val=CKEDITOR.tools.override(a.fn.val,function(b){return function(c,d){var e,f="undefined"!=typeof c;return this.each(function(){var g=a(this),h=g.data("ckeditorInstance");if(!d&&g.is("textarea")&&h){if(!f)return e=h.getData(),null;h.setData(c)}else{if(!f)return e=b.call(g),null;b.call(g,c)}return!0}),f?this:e}})))}(),function(){function a(a){return d.instances[a]}function b(a){var b=this;b.id=a.name;var c=a.element.getDocument().getWindow().$,e=d.oC.getWindow().$;b.inPopup=!(!c||!c.opener),b.inIframe=!b.inPopup&&c!=e.top&&"iframe"==c.frameElement.nodeName.toLowerCase(),b.inFrame=!b.inPopup&&c!=e.top&&"frame"==c.frameElement.nodeName.toLowerCase(),b.inUrlPopup=!(!b.inPopup||!e.opener)}function c(a,b,c){b.on("appReady",function(d){d.removeListener(),a.document=b.document.$,a.folders=b.folders,a.files=b.aG["filesview.filesview"].data().files,a.basketFiles=b.basketFiles,a.resourceTypes=b.resourceTypes,a.connector=b.connector,a.lang=b.lang,a.langCode=b.langCode,a.config=b.config,b.aG["foldertree.foldertree"].on("afterAddFolder",function(b){b.removeListener(),c&&c(a)},a)},a,null,999)}var d=function(){var a={jY:"C7OA1WG",_:{},status:"unloaded",basePath:function(){var a=window.CKFINDER_BASEPATH||"";if(!a)for(var b=document.getElementsByTagName("script"),c=0;c<b.length;c++){var d=b[c].src.match(/(^|.*[\\\/])CKFINDER(?:_basic)?(?:_v2)?(?:_source)?.js(?:\?.*)?$/i);if(d){a=d[1];break}}return-1==a.indexOf("://")&&(a=0===a.indexOf("/")?location.href.match(/^.*?:\/\/[^\/]*/)[0]+a:location.href.match(/^[^\?]*\/(?:)/)[0]+a),a}(),getUrl:function(a){return-1==a.indexOf("://")&&0!==a.indexOf("/")&&(a=this.basePath+a),this.jY&&"/"!=a.charAt(a.length-1)&&(a+=(a.indexOf("?")>=0?"&":"?")+"t="+this.jY),a}},b=window.CKFINDER_GETURL;if(b){var c=a.getUrl;a.getUrl=function(d){return b.call(a,d)||c.call(a,d)}}return a}(),e={callback:1,selectThumbnailActionFunction:1,selectActionFunction:1};d.jd=function(){var a=this,b={};for(var c in a)a.hasOwnProperty(c)&&("function"==typeof a[c]&&!e[c]||"undefined"==typeof a[c]||(b[c]=a[c]));return a.callback&&(b.callback=a.callback),b},d.lj=function(a){var b=this;a=a||b.basePath;var c="";a&&0!==a.length||(a=CKFinder.DEFAULT_basePath),"/"!=a.substr(a.length-1,1)&&(a+="/"),a+="ckfinder.html";var d;return b.hh&&(d=b.hh,"function"==typeof d&&(d=d.toString().match(/function ([^(]+)/)[1]),c+="?action=js&amp;func="+d),b.jx&&(c+=c?"&amp;":"?",c+="data="+encodeURIComponent(b.jx)),b.disableThumbnailSelection?(c+=c?"&amp;":"?",c+="dts=1"):(b.lH||b.hh)&&(d=b.lH||b.hh,"function"==typeof d&&(d=d.toString().match(/function ([^(]+)/)[1]),c+=c?"&amp;":"?",c+="thumbFunc="+d,b.nm?c+="&amp;tdata="+encodeURIComponent(b.nm):!b.lH&&b.jx&&(c+="&amp;tdata="+encodeURIComponent(b.jx))),b.startupPath&&(c+=c?"&amp;":"?",c+="start="+encodeURIComponent(b.startupPath+(b.startupFolderExpanded?":1":":0"))),void 0===b.rememberLastFolder||b.rememberLastFolder||(c+=c?"&amp;":"?",c+="rlf=0"),b.id&&(c+=c?"&amp;":"?",c+="id="+encodeURIComponent(b.id)),b.skin&&(c+=c?"&amp;":"?",c+="skin="+encodeURIComponent(b.skin)),a+c},b.prototype={_:{},addFileContextMenuOption:function(b,c,e){var f=a(this.id),g="FileContextMenu_"+b.command;f.bD(g,{exec:function(a){var b=a.aG["filesview.filesview"].tools.dH();c(a.cg,b)}}),b.command=g,b.group||(b.group="file1"),f.gp(g,b),f.aG["filesview.filesview"].on("beforeContextMenu",function(a){if(e){var b=e(this.tools.dH());b&&(a.data.bj[g]=-1==b?d.aY:d.aS)}else a.data.bj[g]=d.aS})},disableFileContextMenuOption:function(b,c){var d=a(this.id),e=c?"FileContextMenu_"+b:b,f=function(a){delete a.data.bj[e]};return d.aG["filesview.filesview"].on("beforeContextMenu",f),function(){d.aG["filesview.filesview"].removeListener("beforeContextMenu",f)}},addFolderContextMenuOption:function(b,c,e){var f=a(this.id),g="FolderContextMenu_"+b.command;f.bD(g,{exec:function(a){c(a.cg,a.aV)}}),b.command=g,b.group||(b.group="folder1"),f.gp(g,b),f.aG["foldertree.foldertree"].on("beforeContextMenu",function(a){if(e){var b=e(this.app.aV);b&&(a.data.bj[g]=-1==b?d.aY:d.aS)}else a.data.bj[g]=d.aS})},disableFolderContextMenuOption:function(b,c){var d=a(this.id),e=c?"FolderContextMenu_"+b:b,f=function(a){delete a.data.bj[e]};return d.aG["foldertree.foldertree"].on("beforeContextMenu",f),function(){d.aG["foldertree.foldertree"].removeListener("beforeContextMenu",f)}},addFolderDropMenuOption:function(b,c,e){var f=a(this.id),g="FolderDropMenu_"+b.command;f.bD(g,{exec:function(a){c(a.cg,a.cK.oa())}}),b.command=g;var h=new d.iD(f,g,b);f.aG["foldertree.foldertree"].on("beforeDropMenu",function(a){(e?e.call(f.cg,a.data.folder):1)&&(a.data.iG[g]=h)})},disableFolderDropMenuOption:function(b,c){var d=a(this.id),e=c?"FolderDropMenu_"+b:b,f=function(a){delete a.data.iG[e]};return d.aG["foldertree.foldertree"].on("beforeDropMenu",f),function(){d.aG["foldertree.foldertree"].removeListener("beforeDropMenu",f)}},getSelectedFile:function(){return a(this.id).aG["filesview.filesview"].tools.dH()},getSelectedFiles:function(){return a(this.id).aG["filesview.filesview"].tools.oO()},getSelectedFolder:function(){return a(this.id).aV},setUiColor:function(b){return a(this.id).setUiColor(b)},destroy:function(b){a(this.id).destroy(),b&&b()},openDialog:function(b,c){{var e=this,f=new d.dom.document(window.document).getHead();a(e.id).document.getWindow()}return(e.inFrame||e.inPopup||e.inIframe)&&(d.document=a(e.id).document),a(e.id).openDialog(b,c,f)},openMsgDialog:function(b,c){a(this.id).msgDialog(b,c)},openConfirmDialog:function(b,c,d){a(this.id).fe(b,c,d)},openInputDialog:function(b,c,d,e){a(this.id).hs(b,c,d,e)},openSkippedFilesDialog:function(b,c,d,e){a(this.id).skippedFilesDialog(b,c,d,e)},addTool:function(b){return a(this.id).plugins.tools.addTool(b)},addToolPanel:function(b){return a(this.id).plugins.tools.addToolPanel(b)},removeTool:function(b){a(this.id).plugins.tools.removeTool(b)},showTool:function(b){a(this.id).plugins.tools.showTool(b)},hideTool:function(b){a(this.id).plugins.tools.hideTool(b)},getResourceType:function(b){return a(this.id).getResourceType(b)},log:function(a){d.log.apply(d.log,arguments)},getLog:function(){return d.mZ()},emptyBasket:function(){a(this.id).execCommand("TruncateBasket")},replaceUploadForm:function(b,c,e,f){var g=a(this.id);return f||(f=10),f>=(g.dC||20)?void 0:(g.dC=f,g.aG["formpanel.formpanel"].on("beforeUploadFileForm",function(a){if(2==a.data.step&&!(f>g.dC)){a.cancel(!0);{var h=this.data();a.data.folder}try{"upload"==h.dc?this.oW("requestUnloadForm",function(){this.app.cS("upload").bR(d.aS)}):(this.data().dc&&this.oW("requestUnloadForm"),e||this.eh.removeClass("show_border"),this.oW("requestLoadForm",{html:b,command:"upload"}),c&&c())}catch(i){throw this.oW("failedUploadFileForm",a.data),this.oW("afterUploadFileForm",a.data),d.ba(i)}}}),{hide:function(){g.oW("requestUnloadForm",function(){g.cS("upload").bR(d.aS)})}})},resizeFormPanel:function(b){var c=a(this.id);if("undefined"==typeof b)c.document.getById("panel_view").setStyle("height",""),c.document.getById("panel_widget").setStyle("height","");else{var d=Math.min(b,Math.max(90,c.document.getById("main_container").$.offsetHeight-300));c.document.getById("panel_view").setStyle("height",d+"px"),c.document.getById("panel_widget").setStyle("height",d-3+"px")}c.layout.ea(!0)},refreshOpenedFolder:function(){var b=a(this.id),c=b.aG["filesview.filesview"].tools.currentFolder();b.oW("requestSelectFolder",{folder:c})},selectFile:function(b){var c=a(this.id);c.oW("requestSelectFile",{file:b,scrollTo:1})},closePopup:function(){this.inPopup&&a(this.id).element.getDocument().getWindow().$.close()},openFolder:function(b,c){var d=a(this.id);c=c.replace(/\/$/,""),b=b.toLowerCase();for(var e=0;e<d.folders.length;e++){var f=d.folders[e];if(f.getPath().replace(/\/$/,"")==c&&b==f.type.toLowerCase())return d.oW("requestSelectFolder",{folder:f}),void d.oW("requestShowFolderFiles",{folder:f})}},setUiColor:function(b){a(this.id).setUiColor(b)},execCommand:function(b){a(this.id).execCommand(b)}},function(){function a(a){for(var b=1;CKFinder._.instanceConfig[b];)b++;return CKFinder._.instanceConfig[b]=a,b}window.CKFinder=function(a,b){if(a)for(var c in a)a.hasOwnProperty(c)&&("function"!=typeof a[c]||"callback"==c)&&(this[c]=a[c]);this.callback=b},CKFinder.prototype={create:function(a){var b="ckf"+Math.random().toString().substr(2,9);document.write('<span id="'+b+'"></span>'),a=d.tools.extend(d.jd.call(this),a,!0);var c=d.replace(b,a,CKFinder);return this.api=c.cg,c.cg},appendTo:function(a,b){b=d.tools.extend(d.jd.call(this),b,!0);var c=d.appendTo(a,b,CKFinder);return this.api=c.cg,c.cg},replace:function(a,b){b=d.tools.extend(d.jd.call(this),b,!0);var c=d.replace(a,b,CKFinder);return this.api=c.cg,c.cg},popup:function(a,b){var c=this;a=a||"80%",b=b||"70%","string"==typeof a&&a.length>1&&"%"==a.substr(a.length-1,1)&&(a=parseInt(window.screen.width*parseInt(a,10)/100,10)),"string"==typeof b&&b.length>1&&"%"==b.substr(b.length-1,1)&&(b=parseInt(window.screen.height*parseInt(b,10)/100,10)),200>a&&(a=200),200>b&&(b=200);var e=parseInt((window.screen.height-b)/2,10),f=parseInt((window.screen.width-a)/2,10),g="location=no,menubar=no,toolbar=no,dependent=yes,minimizable=no,modal=yes,alwaysRaised=yes,resizable=yes,width="+a+",height="+b+",top="+e+",left="+f,h=d.env.webkit?"about:blank":"",i=window.open(h,"CKFinderpopup",g,!0);if(!i)return!1;c.width=c.height="100%";var j='<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"><html><head><title>CKFinder 2</title><style type="text/css">body, html, iframe, #ckfinder { margin: 0; padding: 0; border: 0; width: 100%; height: 100%; overflow: hidden; }</style></head><body></body></html>',k=new d.dom.document(i.document);k.$.open(),d.env.isCustomDomain()&&(k.$.domain=window.document.domain),k.$.write(j),k.$.close();try{var l=navigator.userAgent.toLowerCase();return-1==l.indexOf(" chrome/")&&(i.moveTo(f,e),i.resizeTo(a,b)),i.focus(),c.appendTo(k.bH())}catch(m){return c.appendTo(k.bH())}return!1}},CKFinder._={},CKFinder._.instanceConfig=[],CKFinder.lang={},CKFinder.version="2.3",CKFinder.revision="2464",CKFinder.addPlugin=function(a,b,c){var e={bM:c||[]};"function"==typeof b&&(b={appReady:b});for(var f in b)b.hasOwnProperty(f)&&"connectorInitialized"!=f&&"uiReady"!=f&&(e[f]=b[f]);e.bz=function(a){return a.config.readOnly&&e.readOnly===!1?null:(b.connectorInitialized&&a.on("connectorInitialized",function(c){var d=b.connectorInitialized;d&&d.call(d,a.cg,c.data.xml)},null,null,1e3),b.connectorResponse&&a.on("connectorResponse",function(c){var d=b.connectorResponse;d&&d.call(d,a.cg,c.data.xml)}),b.galleryCallback&&a.on("launchGallery",function(c){var d=b.galleryCallback;d&&(c.data.bx=d.call(d,a.cg,c.data.selected,c.data.files))}),b.uiReady&&a.on("uiReady",function(){var c=b.uiReady;c.call(c,a.cg)},null,null,1e3),void(b.appReady&&a.on("appReady",function(){var c=b.appReady;c.call(c,a.cg)},null,null,1e3)))},d.plugins.add(a,e)},CKFinder.getPluginPath=function(a){return d.plugins.getPath(a)},CKFinder.addExternalPlugin=function(a,b,c){d.plugins.tR(a,b,c)},CKFinder.setPluginLang=function(a,b,c){d.plugins.rX(a,b,c)},CKFinder.dialog={add:function(a,b){"function"==typeof b&&(b=d.tools.override(b,function(a){return function(b){return a(b.cg)}})),d.dialog.add(a,b)}},CKFinder.tools={},CKFinder.env={},CKFinder.dom={},CKFinder.create=function(a,b,c,d,e){var f;if(null!==a&&"object"==typeof a){f=new CKFinder;for(var g in a)f[g]=a[g]}else f=new CKFinder,f.basePath=a,b&&(f.width=b),c&&(f.height=b),d&&(f.selectActionFunction=d),e&&(f.callback=e);return f.create()},CKFinder.popup=function(a,b,c,d,e){var f;if(null!==a&&"object"==typeof a){f=new CKFinder;for(var g in a)f[g]=a[g]}else f=new CKFinder,f.basePath=a,d&&(f.selectActionFunction=d),e&&(f.callback=e);return f.popup(b,c)},CKFinder.setupFCKeditor=function(b,c,e,f){var g,h;if(null!==c&&"object"==typeof c){h=a(c),g=new CKFinder;for(var i in c)if(g[i]=c[i],"width"==i){var j=g[i]||800;"string"==typeof j&&j.length>1&&"%"==j.substr(j.length-1,1)&&(j=parseInt(window.screen.width*parseInt(j,10)/100,10)),b.Config.LinkBrowserWindowWidth=j,b.Config.ImageBrowserWindowWidth=j,b.Config.FlashBrowserWindowWidth=j}else if("height"==i){var k=g[i]||600;"string"==typeof k&&k.length>1&&"%"==k.substr(k.length-1,1)&&(k=parseInt(window.screen.height*parseInt(k,10)/100,10)),b.Config.LinkBrowserWindowHeight=k,b.Config.ImageBrowserWindowHeight=k,b.Config.FlashBrowserWindowHeight=k}}else g=new CKFinder,g.basePath=c;var l=g.basePath;"/"!=l.substr(0,1)&&-1==l.indexOf("://")&&(l=document.location.pathname.substring(0,document.location.pathname.lastIndexOf("/")+1)+l),l=d.lj.call(g,l);var m=-1!==l.indexOf("?")?"&":"?";h&&(l+=m+"configId="+h,m="&"),b.Config.LinkBrowserURL=l,b.Config.ImageBrowserURL=l+m+"type="+(e||"Images"),b.Config.FlashBrowserURL=l+m+"type="+(f||"Flash");var n=l.substring(0,1+l.lastIndexOf("/"));b.Config.LinkUploadURL=n+"core/connector/"+CKFinder.config.connectorLanguage+"/connector."+CKFinder.config.connectorLanguage+"?command=QuickUpload&type=Files",b.Config.ImageUploadURL=n+"core/connector/"+CKFinder.config.connectorLanguage+"/connector."+CKFinder.config.connectorLanguage+"?command=QuickUpload&type="+(e||"Images"),b.Config.FlashUploadURL=n+"core/connector/"+CKFinder.config.connectorLanguage+"/connector."+CKFinder.config.connectorLanguage+"?command=QuickUpload&type="+(f||"Flash")},CKFinder.setupCKEditor=function(b,c,e,f){if(null===b){for(var g in CKEDITOR.instances)CKFinder.setupCKEditor(CKEDITOR.instances[g],c,e,f);return void CKEDITOR.on("instanceCreated",function(a){CKFinder.setupCKEditor(a.editor,c,e,f)})}var h,i;if(null!==c&&"object"==typeof c){i=a(c),h=new CKFinder;for(var j in c)if(h[j]=c[j],"width"==j){var k=h[j]||800;"string"==typeof k&&k.length>1&&"%"==k.substr(k.length-1,1)&&(k=parseInt(window.screen.width*parseInt(k,10)/100,10)),b.config.filebrowserWindowWidth=k}else if("height"==j){var l=h[j]||600;"string"==typeof l&&l.length>1&&"%"==l.substr(l.length-1,1)&&(l=parseInt(window.screen.height*parseInt(l,10)/100,10)),b.config.filebrowserWindowHeight=l}}else h=new CKFinder,h.basePath=c;var m=h.basePath;"/"!=m.substr(0,1)&&-1==m.indexOf("://")&&(m=document.location.pathname.substring(0,document.location.pathname.lastIndexOf("/")+1)+m),m=d.lj.call(h,m);var n=-1!==m.indexOf("?")?"&":"?";i&&(m+=n+"configId="+i,n="&"),b.config.filebrowserBrowseUrl=m,b.config.filebrowserImageBrowseUrl=m+n+"type="+(e||"Images"),b.config.filebrowserFlashBrowseUrl=m+n+"type="+(f||"Flash");var o=m.substring(0,1+m.lastIndexOf("/"));b.config.filebrowserUploadUrl=o+"core/connector/"+CKFinder.config.connectorLanguage+"/connector."+CKFinder.config.connectorLanguage+"?command=QuickUpload&type=Files",b.config.filebrowserImageUploadUrl=o+"core/connector/"+CKFinder.config.connectorLanguage+"/connector."+CKFinder.config.connectorLanguage+"?command=QuickUpload&type="+(e||"Images"),b.config.filebrowserFlashUploadUrl=o+"core/connector/"+CKFinder.config.connectorLanguage+"/connector."+CKFinder.config.connectorLanguage+"?command=QuickUpload&type="+(f||"Flash")}}(),d.event||(d.event=function(){},d.event.du=function(a,b){var c=d.event.prototype;for(var e in c)void 0==a[e]&&(a[e]=c[e])},d.event.prototype=function(){var a=function(a){var b=a.kk&&a.kk()||a._||(a._={});return b.cC||(b.cC={})},b=function(a){this.name=a,this.dF=[]};return b.prototype={mi:function(a){for(var b=0,c=this.dF;b<c.length;b++)if(c[b].fn==a)return b;return-1}},{on:function(c,d,e,f,g){var h=a(this),i=h[c]||(h[c]=new b(c));if(i.mi(d)<0){var j=i.dF;e||(e=this),isNaN(g)&&(g=10);var k=this,l=function(a,b,g,h){var i={name:c,jN:this,application:a,data:b,jO:f,stop:g,cancel:h,removeListener:function(){k.removeListener(c,d)}};return d.call(e,i),i.data};l.fn=d,l.nT=g;for(var m=j.length-1;m>=0;m--)if(j[m].nT<=g)return void j.splice(m+1,0,l);j.unshift(l)}},oW:function(){var b=!1,c=function(){b=!0},e=!1,f=function(a){e=a?2:!0};return function(g,h,i,j){"function"==typeof h?(j=h,h=null):"function"==typeof i&&(j=i,i=null),"mousemove"!=g&&d.log("[EVENT] "+g,h,j);var k=a(this)[g],l=b,m=e;if(b=e=!1,k){var n=k.dF;if(n.length){n=n.slice(0);for(var o=0;o<n.length;o++){var p=n[o].call(this,i,h,c,f);if("undefined"!=typeof p&&(h=p),b||e&&2!=e)break}}}var q=e||("undefined"==typeof h?!1:h&&"undefined"!=typeof h.result?h.result:h);return"function"==typeof j&&2!=e&&(q=j.call(this,e,h)||q),b=l,e=m,q}}(),cr:function(b,c,d){var e=this.oW(b,c,d);return delete a(this)[b],e},removeListener:function(b,c){var d=a(this)[b];if(d){var e=d.mi(c);e>=0&&d.dF.splice(e,1)}},mF:function(){for(var b=a(this),c=0;c<b.length;c++)b[c].dF=[]},rC:function(b){var c=a(this)[b];return c&&c.dF.length>0}}}()),d.application||(d.kZ=0,d.fc=1,d.qE=2,d.application=function(a,b,c,e){var f=this;f._={instanceConfig:a,element:b},f.ff=c||d.kZ,d.event.call(f),f.iI(e)},d.application.replace=function(a,b,c){var e=a;if("object"!=typeof e){if(e=document.getElementById(a),!e)for(var f=0,g=document.getElementsByName(a);(e=g[f++])&&"textarea"!=e.tagName.toLowerCase(););if(!e)throw'[CKFINDER.application.replace] The element with id or name "'+a+'" was not found.'}return new d.application(b,e,d.fc,c)},d.application.appendTo=function(a,b,c){if("object"!=typeof a&&(a=document.getElementById(a),!a))throw'[CKFINDER.application.appendTo] The element with id "'+a+'" was not found.';return new d.application(b,a,d.qE,c)},d.application.prototype={iI:function(){var a=d.application.eb||(d.application.eb=[]);a.push(this)},oW:function(a,b,c){return d.event.prototype.oW.call(this,a,b,this,c)},cr:function(a,b,c){return d.event.prototype.cr.call(this,a,b,this,c)}},d.event.du(d.application.prototype,!0)),d.env||(d.env=function(){var a=navigator.userAgent.toLowerCase(),b=window.opera,c={ie:!1,opera:!!b&&b.version,webkit:a.indexOf(" applewebkit/")>-1,air:a.indexOf(" adobeair/")>-1,mac:a.indexOf("macintosh")>-1,quirks:"BackCompat"==document.compatMode,isCustomDomain:function(){return this.ie&&document.domain!=window.location.hostname}};c.gecko="Gecko"==navigator.product&&!c.webkit&&!c.opera,c.chrome=!1,c.safari=!1,c.webkit&&(a.indexOf(" chrome/")>-1?c.chrome=!0:c.safari=!0);var d=0;if(c.ie&&(d=parseFloat(a.match(/msie (\d+)/)[1]),c.ie8=!!document.documentMode,c.ie8Compat=8==document.documentMode,c.ie7Compat=7==d&&!document.documentMode||7==document.documentMode,c.ie6Compat=7>d||c.quirks),c.gecko){var e=a.match(/rv:([\d\.]+)/);e&&(e=e[1].split("."),d=1e4*e[0]+100*(e[1]||0)+ +(e[2]||0)),c.isMobile=a.indexOf("fennec")>-1}return c.opera&&(d=parseFloat(b.version()),c.isMobile=a.indexOf("opera mobi")>-1),c.air&&(d=parseFloat(a.match(/ adobeair\/(\d+)/)[1])),c.webkit&&(d=parseFloat(a.match(/ applewebkit\/(\d+)/)[1]),c.isMobile=a.indexOf("mobile")>-1),c.version=d,c.isCompatible=c.ie&&d>=6||c.gecko&&d>=10801||c.opera&&d>=9.5||c.air&&d>=1||c.webkit&&d>=522||!1,c.cssClass="browser_"+(c.ie?"ie":c.gecko?"gecko":c.opera?"opera":c.air?"air":c.webkit?"webkit":"unknown"),
c.quirks&&(c.cssClass+=" browser_quirks"),c.ie&&(c.cssClass+=" browser_ie"+(c.version<7?"6":c.version>=8?"8":"7"),c.quirks&&(c.cssClass+=" browser_iequirks"),c.ie7Compat&&(c.cssClass+=" browser_ie7Compat")),c.gecko&&10900>d&&(c.cssClass+=" browser_gecko18"),c}(),CKFinder.env=d.env);var f=d.env,g=f.ie;"unloaded"==d.status&&function(){d.event.du(d),d.dO=function(){if("basic_ready"!=d.status)return void(d.dO.qr=!0);delete d.dO;var a=document.createElement("script");a.type="text/javascript",a.src=d.basePath+"ckfinder.js",document.getElementsByTagName("head")[0].appendChild(a)},d.mS=0,d.uQ="ckfinder",d.uM=!0;var a=function(a,b,c,e){if(f.isCompatible){d.dO&&d.dO();var g=c(a,b,e);return d.add(g),g}return null};d.replace=function(b,c,e){return a(b,c,d.application.replace,e)},d.appendTo=function(b,c,e){return a(b,c,d.application.appendTo,e)},d.add=function(a){var b=this._.io||(this._.io=[]);b.push(a)},d.uL=function(){for(var a=document.getElementsByTagName("textarea"),b=0;b<a.length;b++){{var c=null,d=a[b];d.name}if(d.name||d.id){if("string"==typeof arguments[0]){var e=new RegExp("(?:^| )"+arguments[0]+"(?:$| )");if(!e.test(d.className))continue}else if("function"==typeof arguments[0]&&(c={},arguments[0](d,c)===!1))continue;this.replace(d,c)}}},function(){var a=function(){var a=d.dO,b=d.mS;d.status="basic_ready",a&&a.qr?a():b&&setTimeout(function(){d.dO&&d.dO()},1e3*b)};window.addEventListener?window.addEventListener("load",a,!1):window.attachEvent&&window.attachEvent("onload",a)}(),d.status="basic_loaded"}(),d.dom={},CKFinder.dom=d.dom;var h=d.dom;d.ajax=function(){var a=function(){if(!g||"file:"!=location.protocol)try{return new XMLHttpRequest}catch(a){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(b){}try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(c){}return null},b=function(a){return 4==a.readyState&&(a.status>=200&&a.status<300||304==a.status||0===a.status||1223==a.status)},c=function(a){return b(a)?a.responseText:null},e=function(a){if(b(a)){var c=a.responseXML,e=new d.xml(c&&c.firstChild&&c.documentElement&&"parsererror"!=c.documentElement.nodeName?c:a.responseText.replace(/^[^<]+/,"").replace(/[^>]+$/,""));if(e&&e.mq&&e.mq.documentElement&&"parsererror"!=e.mq.documentElement.nodeName&&"html"!=e.mq.documentElement.nodeName&&"br"!=e.mq.documentElement.nodeName)return e}var f=d.nG||d.jt,g=a.responseText,h=f.lang.ErrorMsg[g?"XmlError":"XmlEmpty"]+"<br>";return e&&e.mq&&(e.mq.parseError&&e.mq.parseError.reason?h+=e.mq.parseError.reason:e.mq.documentElement&&"parsererror"==e.mq.documentElement.nodeName&&(h+=e.mq.documentElement.textContent)),g?((/text\/plain/.test(a.getResponseHeader("Content-Type"))||/<Connector\s*/.test(g))&&(g=d.tools.htmlEncode(g),g=g.replace(/\n/g,"<br>"),g='<div style="width:600px; overflow:scroll"><font>'+g+"</font></div>"),f.msgDialog(f.lang.SysErrorDlgTitle,h+"<br>"+f.lang.ErrorMsg.XmlRawResponse.replace("%s","<br><br>"+g))):f.msgDialog(f.lang.SysErrorDlgTitle,h),{}},f=function(b,c,e,f){var g=!!c;d.log("[AJAX] "+(f?"POST":"GET")+" "+b);var h=a();return h?(f?h.open("POST",b,g):h.open("GET",b,g),g&&(h.onreadystatechange=function(){4==h.readyState&&(c(e(h)),h=null)}),f?(h.setRequestHeader("Content-type","application/x-www-form-urlencoded"),h.send(f)):h.send(null),g?"":e(h)):null};return{load:function(a,b,d){return f(a,b,c,d)},loadXml:function(a,b,c){return f(a,b,e,c)}}}(),CKFinder.ajax=d.ajax,function(){var a=[];d.tools={arrayCompare:function(a,b){if(!a&&!b)return!0;if(!a||!b||a.length!=b.length)return!1;for(var c=0;c<a.length;c++)if(a[c]!=b[c])return!1;return!0},clone:function(a){var b;if(a&&a instanceof Array){b=[];for(var c=0;c<a.length;c++)b[c]=this.clone(a[c]);return b}if(null===a||"object"!=typeof a||a instanceof String||a instanceof Number||a instanceof Boolean||a instanceof Date)return a;b=new a.constructor;for(var d in a){var e=a[d];b[d]=this.clone(e)}return b},capitalize:function(a){return a.charAt(0).toUpperCase()+a.substring(1).toLowerCase()},extend:function(a){var b,c,d=arguments.length;"boolean"==typeof(b=arguments[d-1])?d--:"boolean"==typeof(b=arguments[d-2])&&(c=arguments[d-1],d-=2);for(var e=1;d>e;e++){var f=arguments[e];for(var g in f)(b===!0||void 0==a[g])&&(!c||g in c)&&(a[g]=f[g])}return a},prototypedCopy:function(a){var b=function(){};return b.prototype=a,new b},isArray:function(a){return!!a&&a instanceof Array},cssStyleToDomStyle:function(){var a=document.createElement("div").style,b="undefined"!=typeof a.cssFloat?"cssFloat":"undefined"!=typeof a.styleFloat?"styleFloat":"float";return function(a){return"float"==a?b:a.replace(/-./g,function(a){return a.substr(1).toUpperCase()})}}(),htmlEncode:function(a){var b=function(a){var b=new h.element("span");return b.setText(a),b.getHtml()},c="<br>"==b("\n").toLowerCase()?function(a){return b(a).replace(/<br>/gi,"\n")}:b,d=">"==b(">")?function(a){return c(a).replace(/>/g,"&gt;")}:c,e="&nbsp; "==b("  ")?function(a){return d(a).replace(/&nbsp;/g," ")}:d;return this.htmlEncode=e,this.htmlEncode(a)},getNextNumber:function(){var a=0;return function(){return++a}}(),override:function(a,b){return b(a)},setTimeout:function(a,b,c,d,e){return e||(e=window),c||(c=e),e.setTimeout(function(){d?a.apply(c,[].concat(d)):a.apply(c)},b||0)},trim:function(){var a=/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g;return function(b){return b?b.replace(a,""):null}}(),ltrim:function(){var a=/^[ \t\n\r]+/g;return function(b){return b?b.replace(a,""):null}}(),rtrim:function(){var a=/[ \t\n\r]+$/g;return function(b){return b?b.replace(a,""):null}}(),indexOf:Array.prototype.indexOf?function(a,b){return a.indexOf(b)}:function(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1},bind:function(a,b){return function(){return a.apply(b,arguments)}},createClass:function(a){var b=a.$,c=a.base,e=a.vd||a._,f=a.ej,g=a.statics;if(e){var h=b;b=function(){var a=this,b=a._||(a._={});for(var c in e){var f=e[c];b[c]="function"==typeof f?d.tools.bind(f,a):f}h.apply(a,arguments)}}return c&&(b.prototype=this.prototypedCopy(c.prototype),b.prototype.constructor=b,b.prototype.base=function(){this.base=c.prototype.base,c.apply(this,arguments),this.base=arguments.callee}),f&&this.extend(b.prototype,f,!0),g&&this.extend(b,g,!0),b},addFunction:function(b,c){return a.push(function(){b.apply(c||this,arguments)})-1},removeFunction:function(b){a[b]=null},callFunction:function(b){var c=a[b];return c.apply(window,Array.prototype.slice.call(arguments,1))},cssLength:function(){var a=/^\d+(?:\.\d+)?$/;return function(b){return b+(a.test(b)?"px":"")}}(),repeat:function(a,b){return new Array(b+1).join(a)},deepCopy:function(a){var b={};if("object"==typeof a){"undefined"!=typeof a.length&&(b=[]);for(var c in a)null===a[c]?b[c]=null:"object"==typeof a[c]?b[c]=d.tools.deepCopy(a[c]):b[c]=a[c]}return b},getUrlParam:function(a,b){var c=new RegExp("(?:[?&]|&amp;)"+a+"=([^&]+)","i"),d=(b||window).location.search.match(c);return d&&d.length>1?d[1]:null},htmlEncode:function(a){return a?(a="string"!=typeof a?a.toString():a,a=a.replace(/&/g,"&amp;"),a=a.replace(/</g,"&lt;"),a=a.replace(/>/g,"&gt;")):""},setCookie:function(a,b,c){document.cookie=a+"="+b+(c?"":"; expires=Thu, 6 Oct 2016 01:00:00 UTC; path=/")},getCookie:function(a){var b=document.cookie.match(new RegExp("(^|\\s|;)"+a+"=([^;]*)"));return b&&b.length>0?b[2]:""},mH:function(a){g?(a.$.onfocusin=function(){a.addClass("focus_inside")},a.$.onfocusout=function(){a.removeClass("focus_inside")}):(a.$.addEventListener("focus",function(){a.addClass("focus_inside")},!0),a.$.addEventListener("blur",function(){a.removeClass("focus_inside")},!0))},formatSize:function(a,b,c){return 0==a?"0":1>a?b.Kb.replace("%1",1):1024>a?(c||(a=a.toFixed(2)),b.Kb.replace("%1",a)):1048576>a?b.Mb.replace("%1",(a/1024).toFixed(2)):b.Gb.replace("%1",(a/1048576).toFixed(2))},formatSpeed:function(a,b){return b.SizePerSecond.replace("%1",this.formatSize(a,b))}},CKFinder._.callFunction=d.tools.callFunction,CKFinder.tools=d.tools}();var i=d.tools;h.event=function(a){this.$=a},h.event.prototype={oV:function(){return this.$.keyCode||this.$.which||0},db:function(){var a=this,b=a.oV();return(a.$.ctrlKey||a.$.metaKey)&&(b+=d.bP),a.$.shiftKey&&(b+=d.dy),a.$.altKey&&(b+=d.eJ),b},preventDefault:function(a){var b=this.$;b.preventDefault?b.preventDefault():b.returnValue=!1,a&&this.stopPropagation()},stopPropagation:function(){var a=this.$;a.stopPropagation?a.stopPropagation():a.cancelBubble=!0},bK:function(){var a=this.$.target||this.$.srcElement;return a?new h.bi(a):null},getButton:function(){if(this.$.which)return this.$.which;switch(this.$.button){case 1:return 1;case 4:return 2;case 2:return 3}},ov:function(){return 1==this.getButton()}},d.bP=1e3,d.dy=2e3,d.eJ=4e3,h.dE=function(a){a&&(this.$=a)},h.dE.prototype=function(){var a=function(a,b){return function(c){"undefined"!=typeof d&&a.oW(b,new h.event(c))}};return{kk:function(){var a;return(a=this.dw("_"))||this.fL("_",a={}),a},on:function(b){var c=this,e=c.dw("_cke_nativeListeners");if(e||(e={},c.fL("_cke_nativeListeners",e)),!e[b]){var f=e[b]=a(c,b);c.$.addEventListener?c.$.addEventListener(b,f,!!d.event.jP):c.$.attachEvent&&c.$.attachEvent("on"+b,f)}return d.event.prototype.on.apply(c,arguments)},removeListener:function(a){var b=this;if(d.event.prototype.removeListener.apply(b,arguments),!b.rC(a)){var c=b.dw("_cke_nativeListeners"),e=c&&c[a];e&&(b.$.removeEventListener?b.$.removeEventListener(a,e,!1):b.$.detachEvent&&b.$.detachEvent("on"+a,e),delete c[a])}}}}(),function(a){var b={};a.equals=function(a){return a&&a.$===this.$},a.fL=function(a,c){var d=this.iY(),e=b[d]||(b[d]={});return e[a]=c,this},a.dw=function(a){var c=this.$._ckf_expando,d=c&&b[c];return d&&d[a]},a.jF=function(a){var c=this.$._ckf_expando,d=c&&b[c],e=d&&d[a];return"undefined"!=typeof e&&delete d[a],e||null},a.iY=function(){return this.$._ckf_expando||(this.$._ckf_expando=i.getNextNumber())},d.event.du(a)}(h.dE.prototype),h.window=function(a){h.dE.call(this,a)},h.window.prototype=new h.dE,i.extend(h.window.prototype,{focus:function(){f.webkit&&this.$.parent&&this.$.parent.focus(),this.$.focus()},eR:function(){var a=this.$.document,b="CSS1Compat"==a.compatMode;return{width:(b?a.documentElement.clientWidth:a.body.clientWidth)||0,height:(b?a.documentElement.clientHeight:a.body.clientHeight)||0}},hV:function(){var a=this.$;if("pageXOffset"in a)return{x:a.pageXOffset||0,y:a.pageYOffset||0};var b=a.document;return{x:b.documentElement.scrollLeft||b.body.scrollLeft||0,y:b.documentElement.scrollTop||b.body.scrollTop||0}}}),h.document=function(a){h.dE.call(this,a)};var j=h.document;j.prototype=new h.dE,i.extend(j.prototype,{appendStyleSheet:function(a){if(this.$.createStyleSheet)this.$.createStyleSheet(a);else{var b=new h.element("link");b.setAttributes({rel:"stylesheet",type:"text/css",href:a}),this.getHead().append(b)}},createElement:function(a,b){var c=new h.element(a,this);return b&&(b.attributes&&c.setAttributes(b.attributes),b.gS&&c.setStyles(b.gS)),c},jT:function(a){return new h.text(a,this)},focus:function(){this.getWindow().focus()},getById:function(a){var b=this.$.getElementById(a);return b?new h.element(b):null},vu:function(a,b){for(var c=this.$.documentElement,d=0;c&&d<a.length;d++){var e=a[d];if(b)for(var f=-1,g=0;g<c.childNodes.length;g++){var i=c.childNodes[g];if((b!==!0||3!=i.nodeType||!i.previousSibling||3!=i.previousSibling.nodeType)&&(f++,f==e)){c=i;break}}else c=c.childNodes[e]}return c?new h.bi(c):null},eG:function(a,b){return!g&&b&&(a=b+":"+a),new h.iT(this.$.getElementsByTagName(a))},getHead:function(){var a=this.$.getElementsByTagName("head")[0];return a=new h.element(a),(this.getHead=function(){return a})()},bH:function(){var a=new h.element(this.$.body);return(this.bH=function(){return a})()},gT:function(){var a=new h.element(this.$.documentElement);return(this.gT=function(){return a})()},getWindow:function(){var a=new h.window(this.$.parentWindow||this.$.defaultView);return(this.getWindow=function(){return a})()}}),h.bi=function(a){if(a){switch(a.nodeType){case d.cv:return new h.element(a);case d.fl:return new h.text(a)}h.dE.call(this,a)}return this},h.bi.prototype=new h.dE,d.cv=1,d.fl=3,d.va=8,d.om=11,d.oh=0,d.op=1,d.gW=2,d.gX=4,d.mo=8,d.lF=16,i.extend(h.bi.prototype,{appendTo:function(a,b){return a.append(this,b),a},clone:function(a,b){var c=this.$.cloneNode(a);if(!b){var e=function(a){if(a.nodeType==d.cv){a.removeAttribute("id",!1),a.removeAttribute("_ckf_expando",!1);for(var b=a.childNodes,c=0;c<b.length;c++)e(b[c])}};e(c)}return new h.bi(c)},gE:function(){return!!this.$.previousSibling},ge:function(){return!!this.$.nextSibling},kB:function(a){return a.$.parentNode.insertBefore(this.$,a.$.nextSibling),a},insertBefore:function(a){return a.$.parentNode.insertBefore(this.$,a.$),a},vP:function(a){return this.$.parentNode.insertBefore(a.$,this.$),a},lU:function(a){for(var b=[],c=this.getDocument().$.documentElement,d=this.$;d&&d!=c;){for(var e=d.parentNode,f=-1,g=0;g<e.childNodes.length;g++){var h=e.childNodes[g];if(!(a&&3==h.nodeType&&h.previousSibling&&3==h.previousSibling.nodeType||(f++,h!=d)))break}b.unshift(f),d=d.parentNode}return b},getDocument:function(){var a=new j(this.$.ownerDocument||this.$.parentNode.ownerDocument);return(this.getDocument=function(){return a})()},vA:function(){for(var a=this.$,b=a.parentNode&&a.parentNode.firstChild,c=-1;b;){if(c++,b==a)return c;b=b.nextSibling}return-1},hL:function(a,b,c){if(c&&!c.call){var e=c;c=function(a){return!a.equals(e)}}var f,g=!a&&this.getFirst&&this.getFirst();if(!g){if(this.type==d.cv&&c&&c(this,!0)===!1)return null;g=this.dG()}for(;!g&&(f=(f||this).getParent());){if(c&&c(f,!0)===!1)return null;g=f.dG()}return g?c&&c(g)===!1?null:b&&b!=g.type?g.hL(!1,b,c):g:null},hZ:function(a,b,c){if(c&&!c.call){var e=c;c=function(a){return!a.equals(e)}}var f,g=!a&&this.dB&&this.dB();if(!g){if(this.type==d.cv&&c&&c(this,!0)===!1)return null;g=this.cf()}for(;!g&&(f=(f||this).getParent());){if(c&&c(f,!0)===!1)return null;g=f.cf()}return g?c&&c(g)===!1?null:b&&g.type!=b?g.hZ(!1,b,c):g:null},cf:function(a){var b,c=this.$;do c=c.previousSibling,b=c&&new h.bi(c);while(b&&a&&!a(b));return b},vs:function(){return this.cf(function(a){return 1==a.$.nodeType})},dG:function(a){var b,c=this.$;do c=c.nextSibling,b=c&&new h.bi(c);while(b&&a&&!a(b));return b},vk:function(){return this.dG(function(a){return 1==a.$.nodeType})},getParent:function(){var a=this.$.parentNode;return a&&1==a.nodeType?new h.bi(a):null},vn:function(a){var b=this,c=[];do c[a?"push":"unshift"](b);while(b=b.getParent());return c},vv:function(a){var b=this;if(a.equals(b))return b;if(a.contains&&a.contains(b))return a;var c=b.contains?b:b.getParent();do if(c.contains(a))return c;while(c=c.getParent());return null},gz:function(a){var b=this.$,c=a.$;if(b.compareDocumentPosition)return b.compareDocumentPosition(c);if(b==c)return d.oh;if(this.type==d.cv&&a.type==d.cv){if(b.contains){if(b.contains(c))return d.lF+d.gX;if(c.contains(b))return d.mo+d.gW}if("sourceIndex"in b)return b.sourceIndex<0||c.sourceIndex<0?d.op:b.sourceIndex<c.sourceIndex?d.gX:d.gW}for(var e=this.lU(),f=a.lU(),g=Math.min(e.length,f.length),h=0;g-1>=h;h++)if(e[h]!=f[h]){if(g>h)return e[h]<f[h]?d.gX:d.gW;break}return e.length<f.length?d.lF+d.gX:d.mo+d.gW},vw:function(a,b){var c=this.$;for(b||(c=c.parentNode);c;){if(c.nodeName&&c.nodeName.toLowerCase()==a)return new h.bi(c);c=c.parentNode}return null},vX:function(a,b){var c=this.$;for(b||(c=c.parentNode);c;){if(c.nodeName&&c.nodeName.toLowerCase()==a)return!0;c=c.parentNode}return!1},move:function(a,b){a.append(this.remove(),b)},remove:function(a){var b=this.$,c=b.parentNode;if(c){if(a)for(var d;d=b.firstChild;)c.insertBefore(b.removeChild(d),b);c.removeChild(b)}return this},replace:function(a){this.insertBefore(a),a.remove()},trim:function(){this.ltrim(),this.rtrim()},ltrim:function(){for(var a,b=this;b.getFirst&&(a=b.getFirst());){if(a.type==d.fl){var c=i.ltrim(a.getText()),e=a.hJ();if(!c){a.remove();continue}c.length<e&&(a.split(e-c.length),b.$.removeChild(b.$.firstChild))}break}},rtrim:function(){for(var a,b=this;b.dB&&(a=b.dB());){if(a.type==d.fl){var c=i.rtrim(a.getText()),e=a.hJ();if(!c){a.remove();continue}c.length<e&&(a.split(c.length),b.$.lastChild.parentNode.removeChild(b.$.lastChild))}break}g||f.opera||(a=b.$.lastChild,a&&1==a.type&&"br"==a.nodeName.toLowerCase()&&a.parentNode.removeChild(a))}}),h.iT=function(a){this.$=a},h.iT.prototype={count:function(){return this.$.length},getItem:function(a){var b=this.$[a];return b?new h.bi(b):null}},h.element=function(a,b){"string"==typeof a&&(a=(b?b.$:document).createElement(a)),h.dE.call(this,a)};var k=h.element;k.eB=function(a){return a&&(a.$?a:new k(a))},k.prototype=new h.bi,k.kE=function(a,b){var c=new k("div",b);return c.setHtml(a),c.getFirst().remove()},k.rS=function(a,b,c,d){var e=b.dw("list_marker_id")||b.fL("list_marker_id",i.getNextNumber()).dw("list_marker_id"),f=b.dw("list_marker_names")||b.fL("list_marker_names",{}).dw("list_marker_names");return a[e]=b,f[c]=1,b.fL(c,d)},k.sM=function(a){for(var b in a)k.qZ(a,a[b],!0)},k.qZ=function(a,b,c){var d=b.dw("list_marker_names"),e=b.dw("list_marker_id");for(var f in d)b.jF(f);b.jF("list_marker_names"),c&&(b.jF("list_marker_id"),delete a[e])},i.extend(k.prototype,{type:d.cv,addClass:function(a){var b=this.$.className;if(b){var c=new RegExp("(?:^|\\s)"+a+"(?:\\s|$)","");c.test(b)||(b+=" "+a)}this.$.className=b||a},removeClass:function(a){var b=this.getAttribute("class");if(b){var c=new RegExp("(?:^|\\s+)"+a+"(?=\\s|$)","i");c.test(b)&&(b=b.replace(c,"").replace(/^\s+/,""),b?this.setAttribute("class",b):this.removeAttribute("class"))}},hasClass:function(a){var b=new RegExp("(?:^|\\s+)"+a+"(?=\\s|$)","");return b.test(this.getAttribute("class"))},append:function(a,b){var c=this;return"string"==typeof a&&(a=c.getDocument().createElement(a)),b?c.$.insertBefore(a.$,c.$.firstChild):c.$.appendChild(a.$),d.log("[DOM] DOM flush into "+c.getName()),a},appendHtml:function(a){var b=this;if(b.$.childNodes.length){var c=new k("div",b.getDocument());c.setHtml(a),c.jg(b)}else b.setHtml(a)},appendText:function(a){void 0!=this.$.text?this.$.text+=a:this.append(new h.text(a))},pd:function(){for(var a=this,b=a.dB();b&&b.type==d.fl&&!i.rtrim(b.getText());)b=b.cf();b&&b.is&&b.is("br")||a.append(f.opera?a.getDocument().jT(""):a.getDocument().createElement("br"))},tV:function(a){var b=this,c=new h.mk(b.getDocument());c.setStartAfter(b),c.setEndAfter(a);var d=c.extractContents();c.insertNode(b.remove()),d.kA(b)},contains:g||f.webkit?function(a){var b=this.$;return a.type!=d.cv?b.contains(a.getParent().$):b!=a.$&&b.contains(a.$)}:function(a){return!!(16&this.$.compareDocumentPosition(a.$))},focus:function(){try{this.$.focus()}catch(a){}},getHtml:function(){return this.$.innerHTML},fH:function(){var a=this;if(a.$.outerHTML)return a.$.outerHTML.replace(/<\?[^>]*>/,"");var b=a.$.ownerDocument.createElement("div");return b.appendChild(a.$.cloneNode(!0)),b.innerHTML},setHtml:function(a){return d.log("[DOM] DOM flush into "+this.getName()),this.$.innerHTML=a},setText:function(a){return k.prototype.setText=void 0!=this.$.innerText?function(a){return d.log("[DOM] Text flush"),this.$.innerText=a}:function(a){return d.log("[DOM] Text flush"),this.$.textContent=a},this.setText(a)},getAttribute:function(){var a=function(a){return this.$.getAttribute(a,2)};return g&&(f.ie7Compat||f.ie6Compat)?function(b){var c=this;switch(b){case"class":b="className";break;case"tabindex":var d=a.call(c,b);return 0!==d&&0===c.$.tabIndex&&(d=null),d;case"checked":return c.$.checked;case"style":return c.$.style.cssText}return a.call(c,b)}:a}(),getChildren:function(){return new h.iT(this.$.childNodes)},getComputedStyle:g?function(a){return this.$.currentStyle[i.cssStyleToDomStyle(a)]}:function(a){return this.getWindow().$.getComputedStyle(this.$,"").getPropertyValue(a)},pf:function(){var a=d.ga[this.getName()];return this.pf=function(){return a},a},eG:j.prototype.eG,vp:g?function(){var a=this.$.tabIndex;return 0!==a||d.ga.ug[this.getName()]||0===parseInt(this.getAttribute("tabindex"),10)||(a=-1),a}:f.webkit?function(){var a=this.$.tabIndex;return void 0==a&&(a=parseInt(this.getAttribute("tabindex"),10),isNaN(a)&&(a=-1)),a}:function(){return this.$.tabIndex},getText:function(){return this.$.textContent||this.$.innerText||""},getWindow:function(){return this.getDocument().getWindow()},dS:function(){return this.$.id||null},data:function(a,b){return a="data-"+a,void 0===b?this.getAttribute(a):(b===!1?this.removeAttribute(a):this.setAttribute(a,b),null)},vm:function(){return this.$.name||null},getName:function(){var a=this.$.nodeName.toLowerCase();if(g&&!(document.documentMode>8)){var b=this.$.scopeName;"HTML"!=b&&(a=b.toLowerCase()+":"+a)}return(this.getName=function(){return a})()},getValue:function(){return this.$.value},getFirst:function(){var a=this.$.firstChild;return a?new h.bi(a):null},dB:function(a){var b=this.$.lastChild,c=b&&new h.bi(b);return c&&a&&!a(c)&&(c=c.cf(a)),c},rd:function(a){return this.$.style[i.cssStyleToDomStyle(a)]},is:function(){for(var a=this.getName(),b=0;b<arguments.length;b++)if(arguments[b]==a)return!0;return!1},vL:function(){var a=this.getName(),b=!d.ga.uj[a]&&(d.ga[a]||d.ga.span);return b&&b["#"]},isIdentical:function(a){if(this.getName()!=a.getName())return!1;var b=this.$.attributes,c=a.$.attributes,d=b.length,e=c.length;if(!g&&d!=e)return!1;for(var f=0;d>f;f++){var h=b[f];if((!g||h.specified&&"_ckf_expando"!=h.nodeName)&&h.nodeValue!=a.getAttribute(h.nodeName))return!1}if(g)for(f=0;e>f;f++)if(h=c[f],(!g||h.specified&&"_ckf_expando"!=h.nodeName)&&h.nodeValue!=b.getAttribute(h.nodeName))return!1;return!0},isVisible:function(){return this.$.offsetWidth&&"hidden"!=this.$.style.visibility},hasAttributes:g&&(f.ie7Compat||f.ie6Compat)?function(){for(var a=this.$.attributes,b=0;b<a.length;b++){var c=a[b];switch(c.nodeName){case"class":if(this.getAttribute("class"))return!0;case"_ckf_expando":continue;default:if(c.specified)return!0}}return!1}:function(){var a=this.$.attributes;return a.length>1||1==a.length&&"_ckf_expando"!=a[0].nodeName},hasAttribute:function(a){var b=this.$.attributes.getNamedItem(a);return!(!b||!b.specified)},hide:function(){this.setStyle("display","none")},jg:function(a,b){var c=this.$;if(a=a.$,c!=a){var d;if(b)for(;d=c.lastChild;)a.insertBefore(c.removeChild(d),a.firstChild);else for(;d=c.firstChild;)a.appendChild(c.removeChild(d))}},show:function(){this.setStyles({display:"",visibility:""})},setAttribute:function(){var a=function(a,b){return this.$.setAttribute(a,b),this};return g&&(f.ie7Compat||f.ie6Compat)?function(b,c){var d=this;return"class"==b?d.$.className=c:"style"==b?d.$.style.cssText=c:"tabindex"==b?d.$.tabIndex=c:"checked"==b?d.$.checked=c:a.apply(d,arguments),d}:a}(),setAttributes:function(a){for(var b in a)this.setAttribute(b,a[b]);return this},setValue:function(a){return this.$.value=a,this},removeAttribute:function(){var a=function(a){this.$.removeAttribute(a)};return g&&(f.ie7Compat||f.ie6Compat)?function(b){"class"==b?b="className":"tabindex"==b&&(b="tabIndex"),a.call(this,b)}:a}(),uW:function(a){for(var b=0;b<a.length;b++)this.removeAttribute(a[b])},removeStyle:function(a){var b=this;b.$.style.removeAttribute?b.$.style.removeAttribute(i.cssStyleToDomStyle(a)):b.setStyle(a,""),b.$.style.cssText||b.removeAttribute("style")},setStyle:function(a,b){return this.$.style[i.cssStyleToDomStyle(a)]=b,this},setStyles:function(a){for(var b in a)this.setStyle(b,a[b]);return this},setOpacity:function(a){g&&f.version<9?(a=Math.round(100*a),this.setStyle("filter",a>=100?"":"progid:DXImageTransform.Microsoft.Alpha(opacity="+a+")")):this.setStyle("opacity",a)},unselectable:f.gecko?function(){this.$.style.MozUserSelect="none"}:f.webkit?function(){this.$.style.uE="none"}:function(){if(g||f.opera){var a,b=this.$,c=0;for(b.unselectable="on";a=b.all[c++];)switch(a.tagName.toLowerCase()){case"iframe":case"textarea":case"input":case"select":break;default:a.unselectable="on"}}},vr:function(){for(var a=this;"html"!=a.getName();){if("static"!=a.getComputedStyle("position"))return a;a=a.getParent()}return null},ir:function(a){var b=this,c=0,d=0,e=b.getDocument().bH(),h="BackCompat"==b.getDocument().$.compatMode,i=b.getDocument();if(document.documentElement.getBoundingClientRect){var j=b.$.getBoundingClientRect(),l=i.$,m=l.documentElement,n=m.clientTop||e.$.clientTop||0,o=m.clientLeft||e.$.clientLeft||0,p=!0;if(g){var q=i.gT().contains(b),r=i.bH().contains(b);p=h&&r||!h&&q}p&&(c=j.left+(!h&&m.scrollLeft||e.$.scrollLeft),c-=o,d=j.top+(!h&&m.scrollTop||e.$.scrollTop),d-=n)}else for(var s,t=b,u=null;t&&"body"!=t.getName()&&"html"!=t.getName();){c+=t.$.offsetLeft-t.$.scrollLeft,d+=t.$.offsetTop-t.$.scrollTop,t.equals(b)||(c+=t.$.clientLeft||0,d+=t.$.clientTop||0);for(var v=u;v&&!v.equals(t);)c-=v.$.scrollLeft,d-=v.$.scrollTop,v=v.getParent();u=t,t=(s=t.$.offsetParent)?new k(s):null}if(a){var w=b.getWindow(),x=a.getWindow();if(!w.equals(x)&&w.$.frameElement){var y=new k(w.$.frameElement).ir(a);c+=y.x,d+=y.y}}return document.documentElement.getBoundingClientRect||f.gecko&&!h&&(c+=b.$.clientLeft?1:0,d+=b.$.clientTop?1:0),{x:c,y:d}},scrollIntoView:function(a){var b=this,c=b.getWindow(),d=c.eR().height,e=-1*d;a?e+=d:(e+=b.$.offsetHeight||0,e+=parseInt(b.getComputedStyle("marginBottom")||0,10)||0);var f=b.ir();e+=f.y,e=0>e?0:e;var g=c.hV().y;(e>g||g-d>e)&&c.$.scrollTo(0,e)},bR:function(a){var b=this;switch(a){case d.eV:b.addClass("cke_on"),b.removeClass("cke_off"),b.removeClass("cke_disabled");break;case d.aY:b.addClass("cke_disabled"),b.removeClass("cke_off"),b.removeClass("cke_on");break;default:b.addClass("cke_off"),b.removeClass("cke_on"),b.removeClass("cke_disabled")}},getFrameDocument:function(){var a=this.$;try{a.contentWindow.document}catch(b){a.src=a.src,g&&f.version<7&&window.showModalDialog('javascript:document.write("<script>window.setTimeout(function(){window.close();},50);</script>")')}return a&&new j(a.contentWindow.document)},qw:function(a,b){var c=this,d=c.$.attributes;b=b||{};for(var e=0;e<d.length;e++){var f=d[e];if(f.specified||g&&f.nodeValue&&"value"==f.nodeName.toLowerCase()){var h=f.nodeName;if(h in b)continue;var i=c.getAttribute(h);null===i&&(i=f.nodeValue),a.setAttribute(h,i)}}""!==c.$.style.cssText&&(a.$.style.cssText=c.$.style.cssText)},renameNode:function(a){var b=this;if(b.getName()!=a){var c=b.getDocument(),d=new k(a,c);b.qw(d),b.jg(d),b.$.parentNode.replaceChild(d.$,b.$),d.$._ckf_expando=b.$._ckf_expando,b.$=d.$}},getChild:function(a){var b=this.$;if(a.slice)for(;a.length>0&&b;)b=b.childNodes[a.shift()];else b=b.childNodes[a];return b?new h.bi(b):null},iu:function(){return this.$.childNodes.length},hX:function(){this.on("contextmenu",function(a){a.data.bK().hasClass("cke_enable_context_menu")||a.data.preventDefault()})},toString:function(){return this.getName()+"#"+this.dS()+"."+this.getAttribute("class")}}),function(){function a(a){for(var c=0,d=0,e=b[a].length;e>d;d++)c+=parseInt(this.getComputedStyle(b[a][d])||0,10)||0;return c}var b={width:["border-left-width","border-right-width","padding-left","padding-right"],height:["border-top-width","border-bottom-width","padding-top","padding-bottom"]};k.prototype.setSize=function(b,c,d){"number"==typeof c&&(!d||g&&f.quirks||(c-=a.call(this,b)),this.setStyle(b,c+"px"))},k.prototype.hR=function(b,c){var d=Math.max(this.$["offset"+i.capitalize(b)],this.$["client"+i.capitalize(b)])||0;return c&&(d-=a.call(this,b)),d}}(),d.command=function(a,b){this.pW=[],this.exec=function(c){return this.bu==d.aY||this.readOnly===!1&&a.config.readOnly?!1:(b.oD&&a.focus(),b.exec.call(this,a,c)!==!1)},i.extend(this,b,{iH:{qt:1},oD:!0,bu:d.aS}),d.event.call(this)},d.command.prototype={enable:function(){var a=this;a.bu==d.aY&&a.bR(a.vf&&"undefined"!=typeof a.lJ?a.lJ:d.aS)},disable:function(){this.bR(d.aY)},bR:function(a){var b=this;return b.bu==a?!1:(b.lJ=b.bu,b.bu=a,b.oW("bu"),!0)},rJ:function(){var a=this;a.bu==d.aS?a.bR(d.eV):a.bu==d.eV&&a.bR(d.aS)}},d.event.du(d.command.prototype,!0),d.config={customConfig:d.getUrl("config.js"),connectorLanguage:"php",language:"",defaultLanguage:"en",defaultViewType:"thumbnails",defaultSortBy:"filename",defaultDisplayFilename:!0,defaultDisplayDate:!0,defaultDisplayFilesize:!0,pO:"",height:400,plugins:"foldertree,folder,filebrowser,container,connector,resource,toolbar,formpanel,filesview,status,contextmenu,uploadform,keystrokes,dragdrop,basket,dialog,tools,resize,maximize,help,flashupload,mobile,html5upload,gallery",extraPlugins:"",fileIcons:"ai|avi|bmp|cs|dll|doc|docx|exe|fla|gif|jpg|js|mdb|mp3|ogg|pdf|ppt|pptx|rdp|swf|swt|txt|vsd|xls|xlsx|xml|zip",removePlugins:"",tabIndex:0,thumbnailDelay:50,theme:"default",skin:"kama",width:"100%",baseFloatZIndex:1e4,directDownload:!1,log:!1,logStackTrace:!1,rememberLastFolder:!0,id:null,startupPath:"",startupFolderExpanded:!0,selectActionFunction:null,selectActionData:null,selectThumbnailActionFunction:null,selectThumbnailActionData:null,disableThumbnailSelection:!1,thumbsUrl:null,thumbsDirectAccess:!1,imagesMaxWidth:0,imagesMaxHeight:0,selectActionType:"js",resourceType:null,disableHelpButton:!1,connectorPath:"",connectorInfo:"",uiColor:null,showContextMenuArrow:!1,useNativeIcons:!1,maxSimultaneousUploads:1,readOnly:!1,selectMultiple:!0},CKFinder.config=d.config;var l=d.config;d.dU=function(a,b){this.rG=a,this.message=b},d.fs=function(a){return a.fs?a.fs:(this.hasFocus=!1,this._={application:a},this)},d.fs.prototype={focus:function(){var a=this;if(a._.fW&&clearTimeout(a._.fW),!a.hasFocus){d.nG&&d.nG.fs.ly();var b=a._.application;b.container.getFirst().addClass("cke_focus"),a.hasFocus=!0,b.oW("focus")}},blur:function(){var a=this;a._.fW&&clearTimeout(a._.fW),a._.fW=setTimeout(function(){delete a._.fW,a.ly()},100)},ly:function(){if(this.hasFocus){var a=this._.application;a.container.getFirst().removeClass("cke_focus"),this.hasFocus=!1,a.oW("blur")}}},function(){d.lang={ko:{bg:1,ca:1,cs:1,cy:1,da:1,de:1,el:1,en:1,eo:1,es:1,"es-mx":1,et:1,fa:1,fi:1,fr:1,gu:1,he:1,hi:1,hr:1,hu:1,it:1,ja:1,lv:1,lt:1,nb:1,nl:1,no:1,nn:1,pl:1,"pt-br":1,ro:1,ru:1,sk:1,sl:1,sv:1,tr:1,vi:1,"zh-cn":1,"zh-tw":1},load:function(a,b,c){a&&d.lang.ko[a]||(a=this.jV(b,a)),this[a]?c(a,this[a]):d.scriptLoader.load(d.getUrl("lang/"+a+".js"),function(){c(a,CKFinder.lang[a])},this)},jV:function(a,b){var c=this.ko;b=b||navigator.userLanguage||navigator.language;var e=b.toLowerCase().match(/([a-z]+)(?:-([a-z]+))?/),f=e[1],g=e[2];return c[f+"-"+g]?f=f+"-"+g:c[f]||(f=null),d.lang.jV=f?function(){return f}:function(a){return a},f||a}}}(),function(){d.log=function(){if(l.log||window.CKFINDER_LOG){for(var a="",b=0;b<arguments.length;b++){var c=arguments[b];if(c)switch(a&&(a+="; "),typeof c){case"function":var e=/function (\w+?)\(/.exec(c.toString());e=e?e[1]:"anonymous func",a+=e;break;default:a+=c?c.toString():""}}d._.log.push(a),"object"==typeof window.console&&(console.log.apply?console.log.apply(console,arguments):console.log(a))}},d.ba=function(a){return l.logStackTrace&&d.log("[EXCEPTION] "+a.toString()),a},d.mZ=function(a){for(var b="",c=0;c<d._.log.length;c++)b+=c+1+". "+d._.log[c]+"\n";return b},d._.log=[]}(),d.scriptLoader=function(){var a={},b={};return{load:function(c,e,f,h,i){var j="string"==typeof c;j&&(c=[c]),f||(f=d);var l=c.length,m=[],n=[],o=function(a){e&&(j?e.call(f,a):e.call(f,m,n))};if(0===l)return void o(!0);for(var p=function(a,b){(b?m:n).push(a),--l<=0&&o(b)},q=function(c,d){a[c]=1;var e=b[c];delete b[c];for(var f=0;f<e.length;f++)e[f](c,d)},r=function(c){if(h!==!0&&a[c])return void p(c,!0);var f=b[c]||(b[c]=[]);if(f.push(p),!(f.length>1)){var j=new k("script");j.setAttributes({type:"text/javascript",src:c}),e&&(g?j.$.onreadystatechange=function(){("loaded"==j.$.readyState||"complete"==j.$.readyState)&&(j.$.onreadystatechange=null,d.log("[LOADED] "+c),q(c,!0))}:(j.$.onload=function(){setTimeout(function(){d.log("[LOADED] "+c),q(c,!0)},0)},j.$.onerror=function(){q(c,!1)})),j.appendTo(i?i:d.document.getHead())}},s=0,t=l;t>s;s++)r(c[s])},uq:function(a){var b=new k("script");b.setAttribute("type","text/javascript"),b.appendText(a),
b.appendTo(d.document.getHead())}}}(),CKFinder.scriptLoader=d.scriptLoader,d.fQ=function(a,b){var c=this;c.basePath=a,c.fileName=b,c.bX={},c.loaded={},c.jn={},c._={rZ:{}}},d.fQ.prototype={add:function(a,b){if(this.bX[a])throw'[CKFINDER.fQ.add] The resource name "'+a+'" is already bX.';this.bX[a]=b||{}},eB:function(a){return this.bX[a]||null},getPath:function(a){var b=this.jn[a];return d.getUrl(b&&b.dir||this.basePath+a+"/")},pi:function(a){var b=this.jn[a];return d.getUrl(this.getPath(a)+(b&&b.file||this.fileName+".js"))},tR:function(a,b,c){a=a.split(",");for(var d=0;d<a.length;d++){var e=a[d];this.jn[e]={dir:b,file:c}}},load:function(a,b,c){i.isArray(a)||(a=a?[a]:[]);for(var e=this.loaded,f=this.bX,g=[],h={},j={},k=0;k<a.length;k++){var l=a[k];if(l)if(e[l]||f[l])j[l]=this.eB(l);else{var m=this.pi(l);g.push(m),m in h||(h[m]=[]),h[m].push(l)}}d.scriptLoader.load(g,function(a,d){if(d.length)throw'[CKFINDER.fQ.load] Resource name "'+h[d[0]].join(",")+'" was not found at "'+d[0]+'".';for(var f=0;f<a.length;f++)for(var g=h[a[f]],i=0;i<g.length;i++){var k=g[i];j[k]=this.eB(k),e[k]=1}b.call(c,j)},this)}},d.plugins=new d.fQ("plugins/","plugin");var m=d.plugins;m.load=i.override(m.load,function(a){return function(b,c,d){var e={},f=function(b){a.call(this,b,function(a){i.extend(e,a);var b=[];for(var g in a){var h=a[g],j=h&&h.bM;if(j)for(var k=0;k<j.length;k++)e[j[k]]||b.push(j[k])}if(b.length)f.call(this,b);else{for(g in e)h=e[g],h.onLoad&&!h.onLoad.qK&&(h.onLoad(),h.onLoad.qK=1);c&&c.call(d||window,e)}},this)};f.call(this,b)}}),m.rX=function(a,b,c){var d=this.eB(a);d.lang[b]=c},function(){var a={},b=function(b,c){var d=function(){a[b]=1,c()},e=new k("img");e.on("load",d),e.on("error",d),e.setAttribute("src",b)};d.rw={load:function(c,d){for(var e=c.length,f=function(){0===--e&&d()},g=0;g<c.length;g++){var h=c[g];a[h]?f():b(h,f)}}}}(),d.skins=function(){var a={},b={},c={},e=function(f,g,h,i){var j=a[g];f.skin||(f.skin=j,j.bz&&j.bz(f));var k=function(a){for(var b=0;b<a.length;b++)a[b]=d.getUrl(c[g]+a[b])};if(!b[g]){var l=j.ls;if(l&&l.length>0)return k(l),void d.rw.load(l,function(){b[g]=1,e(f,g,h,i)});b[g]=1}h=j[h];var m=0;if(h?h.iB?h.iB[f.name]&&(m=1):h.iB=[]:m=1,m)i&&i();else{void 0===h.eb&&(h.eb=[]),void 0===h.eb[f.name]&&(h.eb[f.name]=[]);var n=h.eb[f.name];if(n.push(i),n.length>1)return;var o=!h.css||!h.css.length,p=!h.js||!h.js.length,q=function(){if(o&&p){h.iB[f.name]=1;for(var a=0;a<n.length;a++)n[a]&&n[a]()}};if(!o){if(h.rr||(k(h.css),h.rr=1),h.qx)for(var r=0;r<h.css.length;r++)d.oC.appendStyleSheet(h.css[r]);else f.on("themeSpace",function(a){if("head"==a.data.space)for(var b=0;b<h.css.length;b++)a.data.html+="<link rel='stylesheet' href='"+h.css[b]+"'>\n";a.removeListener()});o=1}p||(k(h.js),f.scriptLoader.load(h.js,function(){p=1,q()})),q()}};return{add:function(b,e){a[b]=e,e.fh=c[b]||(c[b]=d.getUrl("skins/"+b+"/"))},loaded:a,load:function(b,f,g){var h=b.gd,i=b.fh;if(a[h]){e(b,h,f,g);{a[h]}}else c[h]=i,d.scriptLoader.load(i+"skin.js",function(){e(b,h,f,g)})}}}(),d.gc=new d.fQ("gc/","theme"),d.bY=function(a){return a.bY?a.bY:(this._={jZ:{},items:{},application:a},this)};var n=d.bY;if(n.prototype={add:function(a,b,c){this._.items[a]={type:b,command:c.command||null,mp:Array.prototype.slice.call(arguments,2)}},create:function(a){var b=this,c=b._.items[a],d=c&&b._.jZ[c.type],e=c&&c.command&&b._.application.cS(c.command),f=d&&d.create.apply(b,c.mp);return e&&e.pW.push(f),f},kd:function(a,b){this._.jZ[a]=b}},function(){var a=0,e=function(){var b="ckfinder"+ ++a;return d.instances&&d.instances[b]?e():b},h={},o=function(a){var b=a.config.customConfig;if(!b)return!1;var c=h[b]||(h[b]={});return c.fn?(c.fn.call(a,a.config),a.config.customConfig!=b&&o(a)||a.cr("customConfigLoaded")):d.scriptLoader.load(b,function(){CKFinder.customConfig?c.fn=CKFinder.customConfig:c.fn=function(){},o(a)}),!0},p=function(a,b){a.on("customConfigLoaded",function(){if(b){if(b.on)for(var c in b.on)a.on(c,b.on[c]);i.extend(a.config,b,!0),delete a.config.on}q(a)}),b&&b.id&&(a.config.id=b.id),b&&void 0!=b.customConfig&&(a.config.customConfig=b.customConfig),o(a)||a.cr("customConfigLoaded")},q=function(a){var b=a.config.skin.split(","),c=b[0],e=d.getUrl(b[1]||"skins/"+c+"/");a.gd=c,a.fh=e,a.iy="cke_skin_"+c+" skin_"+c,a.qn=a.ox(),a.on("uiReady",function(){a.document.getWindow().on("lW",function(){i.setCookie("CKFinder_UTime",Math.round((new Date).getTime()/1e3),!0),i.setCookie("CKFinder_UId",encodeURIComponent(a.id?a.id:location.href),!0)})}),a.cr("configLoaded"),r(a)},r=function(a){d.lang.load(a.config.language,a.config.defaultLanguage,function(b,c){a.langCode=b,a.lang=i.prototypedCopy(c),a.lB=function(){var b="['"+a.lang.DateAmPm.join("','")+"']",c=a.lang.DateTime.replace(/dd|mm|yyyy|hh|HH|MM|aa|d|m|yy|h|H|M|a/g,function(a){var c;switch(a){case"d":c="day.replace(/^0/,'')";break;case"dd":c="day";break;case"m":c="month.replace(/^0/,'')";break;case"mm":c="month";break;case"yy":c="year.substr(2)";break;case"yyyy":c="year";break;case"H":c="hour.replace(/^0/,'')";break;case"HH":c="hour";break;case"h":c="( hour < 12 ? hour : ( ( hour - 12 ) + 100 ).toString().substr( 1 ) ).replace(/^0/,'')";break;case"hh":c="( hour < 12 ? hour : ( ( hour - 12 ) + 100 ).toString().substr( 1 ) )";break;case"M":c="minute.replace(/^0/,'')";break;case"MM":c="minute";break;case"a":c=b+"[ hour < 12 ? 0 : 1 ].charAt(0)";break;case"aa":c=b+"[ hour < 12 ? 0 : 1 ]";break;default:c="'"+a+"'"}return"',"+c+",'"});return c="'"+c+"'",c=c.replace(/('',)|,''$/g,""),new Function("day","month","year","hour","minute","return ["+c+"].join('');")}(),f.gecko&&f.version<10900&&"rtl"==a.lang.dir&&(a.lang.dir="ltr"),s(a)})},s=function(a){var b=a.config,c=b.plugins,e=b.extraPlugins,f=b.removePlugins;if(e){var g=new RegExp("(?:^|,)(?:"+e.replace(/\s*,\s*/g,"|")+")(?=,|$)","g");c=c.replace(g,""),c+=","+e}f&&(g=new RegExp("(?:^|,)(?:"+f.replace(/\s*,\s*/g,"|")+")(?=,|$)","g"),c=c.replace(g,"")),m.load(c.split(","),function(b){var c,e=[],f=[],g=[];if(a.config.readOnly)for(var c in b)b[c].readOnly===!1&&delete b[c];a.plugins=b;for(c in b){var h=b[c],j=h.lang,k=m.getPath(c),l=null;b[c].name=c,h.pathName=k,j&&(l=i.indexOf(j,a.langCode)>=0?a.langCode:j[0],h.lang[l]?(i.extend(a.lang,h.lang[l]),l=null):g.push(d.getUrl(k+"lang/"+l+".js"))),f.push(l),e.push(h)}d.scriptLoader.load(g,function(){for(var b=["eK","bz","gr"],c=0;c<b.length;c++)for(var g=0;g<e.length;g++){var h=e[g];0===c&&f[g]&&h.lang&&i.extend(a.lang,h.lang[f[g]]),h[b[c]]&&(d.log("[PLUGIN] "+h.name+"."+b[c]),h[b[c]](a))}a.oW("pluginsLoaded"),t(a)})})},t=function(a){d.skins.load(a,"application",function(){d.skins.load(a,"host",function(){u(a)})})},u=function(a){var b=a.config.theme;d.gc.load(b,function(){var c=a.theme=d.gc.eB(b);c.pathName=d.gc.getPath(b),a.oW("themeAvailable")})};d.application.prototype.iI=function(a){var h=k.eB(this._.element),m=this._.instanceConfig;if(delete this._.element,delete this._.instanceConfig,this._.ky={},this._.gS=[],h.getDocument().getWindow().$.CKFinder=a,this.element=h,this.document=null,this.rQ={},this.name=e(),this.name in d.instances)throw'[CKFINDER.application] The instance "'+this.name+'" already exists.';this.config=i.prototypedCopy(l),this.bY=new n(this),this.fs=new d.fs(this),this.aL={},this.aG={},this.on("uiReady",function(a){this.document.getWindow().on("lW",this.destroy,this);try{var b=this.document.getWindow();if(this.cg.inPopup&&(!g&&!f.opera||b.$.top.location.href.match(/ckfinder.html/)||"CKFinderpopup"==b.$.top.name)){var c=this,e=[d.oC];(b.$.top.location.href.match(/ckfinder.html/)||"CKFinderpopup"==b.$.top.name)&&(this.document.focus(),this.focus()),d.event.jP=!0,this.document.on("keydown",function(a){if(116==a.data.oV()||a.data.db()==d.bP+82){c.execCommand("refresh"),b.$.event&&b.$.event.keyCode&&(b.$.event.keyCode=5055);try{a.data.preventDefault()}catch(e){}}}),d.event.jP=!1,c.cg.inUrlPopup&&e.push(new j(d.oC.getWindow().$.opener.document));for(var h={},i=function(a,b){return h[b].push(a),function(){var b;return a&&(b=a.apply(this,arguments))?b:void(c.element&&c.element.getDocument().getWindow().$.close())}},k=function(){for(var a=0;a<e.length;a++)e[a].bH().$.onbeforeunload=h[a][0],e[a].getWindow().$.onunload=h[a][1],e[a].getWindow().$.onbeforeunload=h[a][2]},l=0;l<e.length;l++)h[l]={},e[l].bH().$.onbeforeunload=i(e[l].bH().$.onbeforeunload,l),e[l].getWindow().$.onunload=i(e[l].getWindow().$.onunload,l),e[l].getWindow().$.onbeforeunload=i(e[l].getWindow().$.onbeforeunload,l);b.getDocument().bH().$.onbeforeunload=k,b.$.onunload=k,b.$.onbeforeunload=k}}catch(a){}},this),this.cg=new b(this),this.on("configLoaded",function(a){var b=this;c(b.cg,b,b.config.callback),b.id=b.config.id},this),p(this,m),d.oW("instanceCreated",null,this)}}(),i.extend(d.application.prototype,{bD:function(a,b){return this._.ky[a]=new d.command(this,b)},destroy:function(){var a=this;a.theme.destroy(a),a.oW("destroy"),d.remove(a)},execCommand:function(a,b){d.log("[COMMAND] "+a);var c=this.cS(a),e={name:a,rm:b,command:c};return c&&c.bu!=d.aY&&this.oW("beforeCommandExec",e)!==!0&&(e.returnValue=c.exec(e.rm),!c.async&&this.oW("afterCommandExec",e)!==!0)?e.returnValue:!1},cS:function(a){return this._.ky[a]},ox:function(){var a=Math.round((new Date).getTime()/1e3),b=i.getCookie("CKFinder_UTime"),c=decodeURIComponent(i.getCookie("CKFinder_UId"));return c&&b&&c==(this.id?this.id:location.href)&&Math.abs(a-b)<5?1:0},bs:""}),function(){for(var a="",b=49;58>b;b++)a+=String.fromCharCode(b);for(b=65;91>b;b++)73!=b&&79!=b&&(a+=String.fromCharCode(b));d.bs=a,d.nd="lo",d.jG="ho",d.hf=new window.RegExp("^www\\."),d.hg=new window.RegExp(":\\d+$"),d.lS=function(a){return a.toLowerCase().replace(d.hf,"").replace(d.hg,"")}}(),d.on("loaded",function(){var a=d.application.eb;if(a){delete d.application.eb;for(var b=0;b<a.length;b++)a[b].iI()}}),delete d.dO,d.instances={},d.document=new j(document),d.oC=d.document.getWindow().$!=d.document.getWindow().$.top?new j(d.document.getWindow().$.top.document):d.document,d.add=function(a){d.instances[a.name]=a,d.jt=a,a.on("focus",function(){d.nG!=a&&(d.nG=a,d.oW("nG"))}),a.on("blur",function(){d.nG==a&&(d.nG=null,d.oW("nG"))})},d.remove=function(a){delete d.instances[a.name]},d.aL={},d.eV=1,d.aS=2,d.aY=0,d.bF="",function(){function a(a,b){return a+"."+(b.name||b||a)}d.aG={bX:{},hS:function(b,e,f){var g=a(b,e);if(void 0!==this.bX[g])throw"[CKFINDER] Widget "+g+" already bX!";return d.log("[WIDGET] bX "+g),this.bX[g]=new c(g,f),this.bX[g]},bz:function(b,c,e,f,g){var h=a(c,e),j=this.bX[h],l=i.deepCopy(j.hF),m=function(a,b,c){this.app=a,this.eh=b instanceof k?b:new k(b),this.hF=l?i.extend(l,c):c||{},this._={};var d=function(a){this.ib=a};d.prototype=this.tools,this.tools=new d(this);var e=j.dT;if(e.length)for(var f=0;f<e.length;f++)e[f].call(this,a,this)};m.prototype=j;var n=new m(b,f,g);for(var o in n.fw)n.fw[o].readOnly&&b.config.readOnly?n.ke(o):n.gA(o);if(b.aG[h])throw"[CKFINDER Widget "+h+" already inited.";return b.aG[h]=n,d.log("[WIDGET] instanced "+h),n}};var b={click:1,mouseover:1,mouseout:1,focus:1,blur:1,submit:1,dblclick:1,mousedown:1,mouseup:1,mousemove:1,keypress:1,keydown:1,keyup:1,load:1,lW:1,abort:1,error:1,resize:1,scroll:1,select:1,change:1,reset:1},c=function(a,b){var c=this;c.id=a,c.readOnly=!0,c.fw={},c.hF=b||{},c.dT=[],c.tools=new c.tools(c)};c.prototype={gA:function(a){var c=this;d.log("[WIDGET] Enabling behavior "+a);var e=c.fw[a];if(e)for(var f=c,g=0;g<e.cC.length;g++){var h=e.cC[g];b[h]?c.eh.on(h,e.fO,f):(c.on(h,e.fO,f),c.app.on(h,e.fO,f))}},ke:function(a){d.log("[WIDGET] Disabling behavior "+a);var c=this.fw[a];if(c)for(var e=0;e<c.cC.length;e++){var f=c.cC[e];b[f]?this.eh.removeListener(f,c.fO):this.removeListener(f,c.fO)}},bh:function(a,b,c,d){i.isArray(b)||(b=[b]),this.fw[a]={cC:b,fO:c,readOnly:d===!1},this.eh&&this.gA(a)},removeBehavior:function(a){delete this.fw[a]},ur:function(){return this.fw},bn:function(){return this.eh},oE:function(){return this.hF},data:function(){return this.hF},tools:function(){}},c.prototype.tools.prototype={kg:function(a){return a.target==this.ib.eh?1:void 0}},d.event.du(c.prototype)}(),d.xml=function(a){var b=null;if("object"==typeof a)b=a;else{var c=(a||"").replace(/&nbsp;/g," ");if(window.DOMParser)b=(new DOMParser).parseFromString(c,"text/xml");else if(window.ActiveXObject){try{b=new ActiveXObject("MSXML2.DOMDocument")}catch(d){try{b=new ActiveXObject("Microsoft.XmlDom")}catch(d){}}b&&(b.async=!1,b.resolveExternals=!1,b.validateOnParse=!1,b.loadXML(c))}}this.mq=b},d.xml.prototype={selectSingleNode:function(a,b){var c=this.mq;if(b||(b=c)){if("selectSingleNode"in b)return b.selectSingleNode(a);if(c.evaluate){var d=c.evaluate(a,b,null,9,null);return d&&d.singleNodeValue||null}if(b.querySelectorAll){var e=this.selectNodes(a,b);if(1==e.length){var d=a.match(/\/@(.*$)/);return d?e[0].getAttributeNode(d[1]):e[0]}}else alert("XPath is not supported in your browser")}return null},selectNodes:function(a,b){var c=this.mq,d=[];if(b||(b=c)){if("selectNodes"in b)return b.selectNodes(a);if(c.evaluate){var e=c.evaluate(a,b,null,5,null);if(e)for(var f;f=e.iterateNext();)d.push(f)}else{if(b.querySelectorAll){var g=a.replace(/\/@(.*$)/,"[$1]").replace(/\//gi,">");return b.querySelectorAll(g)}alert("XPath is not supported in your browser")}}return d},vB:function(a,b){var c=this.selectSingleNode(a,b),d=[];if(c)for(c=c.firstChild;c;)c.xml?d.push(c.xml):window.XMLSerializer&&d.push((new XMLSerializer).serializeToString(c)),c=c.nextSibling;return d.length?d.join(""):null}},function(){var a={address:1,tY:1,dl:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,p:1,pre:1,li:1,dt:1,de:1},b={body:1,div:1,table:1,tbody:1,tr:1,td:1,th:1,caption:1,form:1},c=function(a){for(var b=a.getChildren(),c=0,e=b.count();e>c;c++){var f=b.getItem(c);if(f.type==d.cv&&d.ga.um[f.getName()])return!0}return!1};h.qS=function(e){for(var f=this,h=null,i=null,j=[],k=e;k;){if(k.type==d.cv){f.qH||(f.qH=k);var l=k.getName();if(g&&"HTML"!=k.$.scopeName&&(l=k.$.scopeName.toLowerCase()+":"+l),i||(!h&&a[l]&&(h=k),b[l]&&(h||"div"!=l||c(k)?i=k:h=k)),j.push(k),"body"==l)break}k=k.getParent()}f.block=h,f.tX=i,f.elements=j}}(),h.qS.prototype={sJ:function(a){var b=this.elements,c=a&&a.elements;if(!c||b.length!=c.length)return!1;for(var d=0;d<b.length;d++)if(!b[d].equals(c[d]))return!1;return!0}},h.text=function(a,b){"string"==typeof a&&(a=(b?b.$:document).createTextNode(a)),this.$=a},h.text.prototype=new h.bi,i.extend(h.text.prototype,{type:d.fl,hJ:function(){return this.$.nodeValue.length},getText:function(){return this.$.nodeValue},split:function(a){var b=this;if(g&&a==b.hJ()){var c=b.getDocument().jT("");return c.kB(b),c}var d=b.getDocument(),e=new h.text(b.$.splitText(a),d);if(f.ie8){var i=new h.text("",d);i.kB(e),i.remove()}return e},substring:function(a,b){return"number"!=typeof b?this.$.nodeValue.substr(a):this.$.nodeValue.substring(a,b)}}),h.pa=function(a){a=a||d.document,this.$=a.$.createDocumentFragment()},i.extend(h.pa.prototype,k.prototype,{type:d.om,kA:function(a){a=a.$,a.parentNode.insertBefore(this.$,a.nextSibling)}},!0,{append:1,pd:1,getFirst:1,dB:1,appendTo:1,jg:1,insertBefore:1,kA:1,replace:1,trim:1,type:1,ltrim:1,rtrim:1,getDocument:1,iu:1,getChild:1,getChildren:1}),function(){function a(a,b){if(this._.end)return null;var c,e,f=this.mk,g=this.vR,h=this.type,i=a?"getPreviousSourceNode":"getNextSourceNode";if(!this._.start&&(this._.start=1,f.trim(),f.collapsed))return this.end(),null;if(!a&&!this._.kp){var j=f.endContainer,k=j.getChild(f.endOffset);this._.kp=function(a,b){return!(b&&j.equals(a)||k&&a.equals(k)||a.type==d.cv&&"body"==a.getName())}}if(a&&!this._.ka){var l=f.startContainer,m=f.startOffset>0&&l.getChild(f.startOffset-1);this._.ka=function(a,b){return!(b&&l.equals(a)||m&&a.equals(m)||a.type==d.cv&&"body"==a.getName())}}var n=a?this._.ka:this._.kp;for(e=g?function(a,b){return n(a,b)===!1?!1:g(a)}:n,this.current?c=this.current[i](!1,h,e):a?(c=f.endContainer,f.endOffset>0?(c=c.getChild(f.endOffset-1),e(c)===!1&&(c=null)):c=e(c)===!1?null:c.hZ(!0,h,e)):(c=f.startContainer,c=c.getChild(f.startOffset),c?e(c)===!1&&(c=null):c=e(f.startContainer)===!1?null:f.startContainer.hL(!0,h,e));c&&!this._.end;){if(this.current=c,this.lf&&this.lf(c)===!1){if(b&&this.lf)return!1}else if(!b)return c;c=c[i](!1,h,e)}return this.end(),this.current=null}function b(b){for(var c,d=null;c=a.call(this,b);)d=c;return d}h.gm=i.createClass({$:function(a){this.mk=a,this._={}},ej:{end:function(){this._.end=1},next:function(){return a.call(this)},previous:function(){return a.call(this,!0)},sC:function(){return a.call(this,!1,!0)!==!1},sD:function(){return a.call(this,!0,!0)!==!1},uF:function(){return b.call(this)},uB:function(){return b.call(this,!0)},reset:function(){delete this.current,this._={}}}});var c={block:1,"list-item":1,table:1,"table-row-group":1,"table-header-group":1,"table-footer-group":1,"table-row":1,"table-column-group":1,"table-column":1,"table-cell":1,"table-caption":1},e={hr:1};k.prototype.qy=function(a){var b=i.extend({},e,a||{});return c[this.getComputedStyle("display")]||b[this.getName()]},h.gm.pQ=function(a){return function(b,c){return!(b.type==d.cv&&b.qy(a))}},h.gm.us=function(){return this.pQ({br:1})},h.gm.tU=function(a){},h.gm.tW=function(a,b){function c(a){return a&&a.getName&&"span"==a.getName()&&a.hasAttribute("_fck_bookmark")}return function(d){var e,f;return e=d&&!d.getName&&(f=d.getParent())&&c(f),e=a?e:e||c(d),b^e}},h.gm.sf=function(a){return function(b){var c=b&&b.type==d.fl&&!i.trim(b.getText());return a^c}}}(),function(){if(f.webkit)return void(f.hc=!1);var a=k.kE('<div style="width:0px;height:0px;position:absolute;left:-10000px;border:1px solid;border-color:red blue;"></div>',d.document);a.appendTo(d.document.getHead());try{f.hc=a.getComputedStyle("border-top-color")==a.getComputedStyle("border-right-color")}catch(b){f.hc=!1}f.hc&&(f.cssClass+=" cke_hc"),a.remove()}(),m.load(l.pO.split(","),function(){d.status="loaded",d.oW("loaded");var a=d._.io;if(a){delete d._.io;for(var b=0;b<a.length;b++)d.add(a[b])}}),g)try{document.execCommand("BackgroundImageCache",!1,!0)}catch(o){}CKFinder.lang.en={appTitle:"CKFinder",common:{unavailable:'%1<span class="cke_accessibility">, unavailable</span>',confirmCancel:"Some of the options were changed. Are you sure you want to close the dialog window?",ok:"OK",cancel:"Cancel",confirmationTitle:"Confirmation",messageTitle:"Information",inputTitle:"Question",undo:"Undo",redo:"Redo",skip:"Skip",skipAll:"Skip all",makeDecision:"What action should be taken?",rememberDecision:"Remember my decision"},dir:"ltr",HelpLang:"en",LangCode:"en",DateTime:"m/d/yyyy h:MM aa",DateAmPm:["AM","PM"],FoldersTitle:"Folders",FolderLoading:"Loading...",FolderNew:"Please type the new folder name: ",FolderRename:"Please type the new folder name: ",FolderDelete:'Are you sure you want to delete the "%1" folder?',FolderRenaming:" (Renaming...)",FolderDeleting:" (Deleting...)",DestinationFolder:"Destination Folder",FileRename:"Please type the new file name: ",FileRenameExt:"Are you sure you want to change the file extension? The file may become unusable.",FileRenaming:"Renaming...",FileDelete:'Are you sure you want to delete the file "%1"?',FilesDelete:"Are you sure you want to delete %1 files?",FilesLoading:"Loading...",FilesEmpty:"The folder is empty.",DestinationFile:"Destination File",SkippedFiles:"List of skipped files:",BasketFolder:"Basket",BasketClear:"Clear Basket",BasketRemove:"Remove from Basket",BasketOpenFolder:"Open Parent Folder",BasketTruncateConfirm:"Do you really want to remove all files from the basket?",BasketRemoveConfirm:'Do you really want to remove the file "%1" from the basket?',BasketRemoveConfirmMultiple:"Do you really want to remove %1 files from the basket?",BasketEmpty:"No files in the basket, drag and drop some.",BasketCopyFilesHere:"Copy Files from Basket",BasketMoveFilesHere:"Move Files from Basket",OperationCompletedSuccess:"Operation completed successfully.",OperationCompletedErrors:"Operation completed with errors.",FileError:"%s: %e",MovedFilesNumber:"Number of files moved: %s.",CopiedFilesNumber:"Number of files copied: %s.",MoveFailedList:"The following files could not be moved:<br />%s",CopyFailedList:"The following files could not be copied:<br />%s",Upload:"Upload",UploadTip:"Upload New File",Refresh:"Refresh",Settings:"Settings",Help:"Help",HelpTip:"Help",Select:"Select",SelectThumbnail:"Select Thumbnail",View:"View",Download:"Download",NewSubFolder:"New Subfolder",Rename:"Rename",Delete:"Delete",DeleteFiles:"Delete Files",CopyDragDrop:"Copy Here",MoveDragDrop:"Move Here",RenameDlgTitle:"Rename",NewNameDlgTitle:"New Name",FileExistsDlgTitle:"File Already Exists",SysErrorDlgTitle:"System Error",FileOverwrite:"Overwrite",FileAutorename:"Auto-rename",ManuallyRename:"Manually rename",OkBtn:"OK",CancelBtn:"Cancel",CloseBtn:"ns",UploadTitle:"Upload New File",UploadSelectLbl:"Select a file to upload",UploadProgressLbl:"(Upload in progress, please wait...)",UploadBtn:"Upload Selected File",UploadBtnCancel:"Cancel",UploadNoFileMsg:"Please select a file from your computer.",UploadNoFolder:"Please select a folder before uploading.",UploadNoPerms:"File upload not allowed.",UploadUnknError:"Error sending the file.",UploadExtIncorrect:"File extension not allowed in this folder.",UploadLabel:"Files to Upload",UploadTotalFiles:"Total Files:",UploadTotalSize:"Total Size:",UploadSend:"Upload",UploadAddFiles:"Add Files",UploadClearFiles:"Clear Files",UploadCancel:"Cancel Upload",UploadRemove:"Remove",UploadRemoveTip:"Remove !f",UploadUploaded:"Uploaded !n%",UploadProcessing:"Processing...",SetTitle:"Settings",SetView:"View:",SetViewThumb:"Thumbnails",SetViewList:"List",SetDisplay:"Display:",SetDisplayName:"File Name",SetDisplayDate:"Date",SetDisplaySize:"File Size",SetSort:"Sorting:",SetSortName:"by File Name",SetSortDate:"by Date",SetSortSize:"by Size",SetSortExtension:"by Extension",FilesCountEmpty:"<Empty Folder>",FilesCountOne:"1 file",FilesCountMany:"%1 files",Kb:"%1 KB",Mb:"%1 MB",Gb:"%1 GB",SizePerSecond:"%1/s",ErrorUnknown:"It was not possible to complete the request. (Error %1)",Errors:{10:"Invalid command.",11:"The resource type was not specified in the request.",12:"The requested resource type is not valid.",102:"Invalid file or folder name.",103:"It was not possible to complete the request due to authorization restrictions.",104:"It was not possible to complete the request due to file system permission restrictions.",105:"Invalid file extension.",109:"Invalid request.",110:"Unknown error.",111:"It was not possible to complete the request due to resulting file size.",115:"A file or folder with the same name already exists.",116:"Folder not found. Please refresh and try again.",117:"File not found. Please refresh the files list and try again.",118:"Source and target paths are equal.",201:'A file with the same name is already available. The uploaded file was renamed to "%1".',202:"Invalid file.",203:"Invalid file. The file size is too big.",204:"The uploaded file is corrupt.",205:"No temporary folder is available for upload in the server.",206:"Upload cancelled due to security reasons. The file contains HTML-like data.",207:'The uploaded file was renamed to "%1".',300:"Moving file(s) failed.",301:"Copying file(s) failed.",500:"The file browser is disabled for security reasons. Please contact your system administrator and check the CKFinder configuration file.",501:"The thumbnails support is disabled."},ErrorMsg:{pg:"The file name cannot be empty.",FileExists:"File %s already exists.",FolderEmpty:"The folder name cannot be empty.",FolderExists:"Folder %s already exists.",FolderNameExists:"Folder already exists.",oP:'The file name cannot contain any of the following characters: \n\\ / : * ? " < > |',FolderInvChar:'The folder name cannot contain any of the following characters: \n\\ / : * ? " < > |',oo:"It was not possible to open the file in a new window. Please configure your browser and disable all popup blockers for this site.",XmlError:"It was not possible to properly load the XML response from the web server.",XmlEmpty:"It was not possible to load the XML response from the web server. The server returned an empty response.",XmlRawResponse:"Raw response from the server: %s"},Imageresize:{dialogTitle:"Resize %s",sizeTooBig:"Cannot set image height or width to a value bigger than the original size (%size).",resizeSuccess:"Image resized successfully.",thumbnailNew:"Create a new thumbnail",thumbnailSmall:"Small (%s)",thumbnailMedium:"Medium (%s)",thumbnailLarge:"Large (%s)",newSize:"Set a new size",width:"Width",height:"Height",invalidHeight:"Invalid height.",invalidWidth:"Invalid width.",invalidName:"Invalid file name.",newImage:"Create a new image",noExtensionChange:"File extension cannot be changed.",imageSmall:"Source image is too small.",contextMenuName:"Resize",lockRatio:"Lock ratio",resetSize:"Reset size"},Fileeditor:{save:"Save",fileOpenError:"Unable to open file.",fileSaveSuccess:"File saved successfully.",contextMenuName:"Edit",loadingFile:"Loading file, please wait..."},Maximize:{maximize:"Maximize",minimize:"Minimize"},Gallery:{current:"Image {current} of {total}"},Zip:{extractHereLabel:"Extract here",extractToLabel:"Extract to...",downloadZipLabel:"Download as zip",compressZipLabel:"Compress to zip",removeAndExtract:"Remove existing and extract",extractAndOverwrite:"Extract overwriting existing files",extractSuccess:"File extracted successfully."}},function(){var a=1,b=2,c=4,e=8,f=16,g=32,h=64,i=128;d.aL.Acl=function(d){var j=this;d||(d=0),j.folderView=(d&a)==a,j.folderCreate=(d&b)==b,j.folderRename=(d&c)==c,j.folderDelete=(d&e)==e,j.fileView=(d&f)==f,j.fileUpload=(d&g)==g,j.fileRename=(d&h)==h,j.fileDelete=(d&i)==i},m.add("acl")}(),function(){m.add("connector",{bM:[],bz:function(a){a.on("appReady",function(){a.connector=new d.aL.Connector(a);var b=a.config.resourceType,c=b?{type:b}:null;a.connector.sendCommand("Init",c,function(b){var c;if(!b.checkError()){var e="Connector/ConnectorInfo/";d.ed=b.selectSingleNode(e+"@s").value,d.bF=b.selectSingleNode(e+"@c").value+"----",a.config.thumbsEnabled="true"==b.selectSingleNode(e+"@thumbsEnabled").value,a.config.thumbsDirectAccess=!1,a.config.thumbsEnabled&&(c=b.selectSingleNode(e+"@thumbsUrl"),c&&(a.config.thumbsUrl=c.value),c=b.selectSingleNode(e+"@thumbsDirectAccess"),c&&(a.config.thumbsDirectAccess="true"==c.value),c=b.selectSingleNode(e+"@thumbsWidth"),a.config.thumbsWidth=(c?parseInt(c.value,10):100)||100,c=b.selectSingleNode(e+"@thumbsHeight"),a.config.thumbsHeight=(c?parseInt(c.value,10):100)||100),a.config.imagesMaxWidth=parseInt(b.selectSingleNode(e+"@imgWidth").value,10),a.config.imagesMaxHeight=parseInt(b.selectSingleNode(e+"@imgHeight").value,10),c=b.selectSingleNode(e+"@uploadMaxSize"),a.config.uploadMaxSize=c?parseInt(c.value,10):0,c=b.selectSingleNode(e+"@uploadCheckImages"),a.config.uploadCheckImages=c?"true"==c.value:!1;var f=b.selectSingleNode(e+"@plugins"),g=f&&f.value;g&&g.length?m.load(g.split(","),function(c){var e=[],f=[],g=[];for(var h in c){var j=c[h],k=j.lang,l=m.getPath(h),n=null;a.plugins[h]||(a.plugins[h]=c[h],c[h].name=h,j.pathName=l,k&&(n=i.indexOf(k,a.langCode)>=0?a.langCode:k[0],j.lang[n]?(i.extend(a.lang,j.lang[n]),n=null):g.push(d.getUrl(l+"lang/"+n+".js"))),f.push(n),e.push(j))}d.scriptLoader.load(g,function(){for(var c=["eK","bz","gr"],g=0;g<c.length;g++)for(var h=0;h<e.length;h++){var j=e[h];0===g&&f[h]&&j.lang&&i.extend(a.lang,j.lang[f[h]]),j[c[g]]&&(d.log("[PLUGIN] "+j.name+"."+c[g]),j[c[g]](a))}a.cr("uiReady"),a.cr("appReady"),a.oW("pluginsLoaded",{step:2,jN:a.connector}),a.cr("connectorInitialized",{xml:b})})}):(a.oW("pluginsLoaded",{step:2,jN:a.connector}),a.cr("connectorInitialized",{xml:b}))}})})}}),d.aL.Connector=function(a){this.app=a;var b=a.config.connectorLanguage||"php";a.config.connectorPath?this.oN=a.config.connectorPath:this.oN=d.basePath+"core/connector/"+b+"/connector."+b},d.aL.Connector.prototype={ERROR_NONE:0,ERROR_CUSTOMERROR:1,ERROR_INVALIDCOMMAND:10,ERROR_TYPENOTSPECIFIED:11,ERROR_INVALIDTYPE:12,ERROR_INVALIDNAME:102,ERROR_UNAUTHORIZED:103,ERROR_ACCESSDENIED:104,ERROR_INVALIDEXTENSION:105,ERROR_INVALIDREQUEST:109,ERROR_UNKNOWN:110,ERROR_ALREADYEXIST:115,ERROR_FOLDERNOTFOUND:116,ERROR_FILENOTFOUND:117,ERROR_SOURCE_AND_TARGET_PATH_EQUAL:118,ERROR_UPLOADEDFILERENAMED:201,ERROR_UPLOADEDINVALID:202,ERROR_UPLOADEDTOOBIG:203,ERROR_UPLOADEDCORRUPT:204,ERROR_UPLOADEDNOTMPDIR:205,ERROR_UPLOADEDWRONGHTMLFILE:206,ERROR_UPLOADEDINVALIDNAMERENAMED:207,ERROR_MOVE_FAILED:300,ERROR_COPY_FAILED:301,ERROR_CONNECTORDISABLED:500,ERROR_THUMBNAILSDISABLED:501,currentFolderUrl:function(){return this.app.aV?this.app.aV.getUrl():void 0},currentType:function(){return this.app.aV?this.app.aV.type:void 0},currentTypeHash:function(){return this.app.aV?d.getResourceType(this.app.aV.type).hash:void 0},currentResourceType:function(){return d.getResourceType(this.currentType())},sendCommand:function(b,c,e,f,g){var h=this.composeUrl(b,c,f,g),j=this;return e?d.ajax.loadXml(h,function(b){b.hy=j.app,j.app.oW("connectorResponse",{xml:b}),e(i.extend(b,a))}):d.ajax.loadXml(h,function(a){j.app.oW("connectorResponse",{xml:a})})},sendCommandPost:function(b,c,e,f,g,h){var j=this.composeUrl(b,c,g,h),k=this;return e||(e={}),e.CKFinderCommand=!0,f?d.ajax.loadXml(j,function(b){b.hy=k.app,k.app.oW("connectorResponse",{xml:b}),f(i.extend(b,a))},this.composeUrlParams(e)):d.ajax.loadXml(j,function(a){k.app.oW("connectorResponse",{xml:a})},this.composeUrlParams(e))},composeUrl:function(a,b,c,d){var e=this,f=e.oN+"?command="+encodeURIComponent(a);if("Init"!=a){var g="";d||(d=e.app.aV),g=c?e.app.getResourceType(c).hash:e.app.getResourceType(d.type).hash,f+="&type="+encodeURIComponent(c||e.app.aV.type)+"&currentFolder="+encodeURIComponent(d.getPath()||"")+"&langCode="+e.app.langCode+"&hash="+g}if(b){var h=e.composeUrlParams(b);h&&(f+="&"+h)}return e.app.id&&(f+="&id="+encodeURIComponent(e.app.id)),e.app.config.connectorInfo&&(f+=("&"!=e.app.config.connectorInfo.charAt(0)?"&":"")+e.app.config.connectorInfo),f},composeUrlParams:function(a){if(!a)return"";var b="";for(var c in a)b.length&&(b+="&"),b+=encodeURIComponent(c)+"="+encodeURIComponent(a[c]);return b}};var a={checkError:function(){var a=this,b=a.getErrorNumber(),c=a.hy.connector;if(b==c.ERROR_NONE)return!1;if(-1===b)return!0;var e=a.getErrorMessage();d.log("[ERROR] "+b);var f;if(b==c.ERROR_CUSTOMERROR)f=e;else if(f=a.hy.lang.Errors[b])for(var g=0;g<=arguments.length;g++){var h=0===g?e:arguments[g-1];f=f.replace(/%(\d+)/,h)}else f=a.hy.lang.ErrorUnknown.replace(/%1/,b);return a.hy.msgDialog("",f),b!=c.ERROR_UPLOADEDFILERENAMED},getErrorNumber:function(){var a=this.selectSingleNode&&this.selectSingleNode("Connector/Error/@number");return a?parseInt(a.value,10):-1},getErrorMessage:function(){var a=this.selectSingleNode&&this.selectSingleNode("Connector/Error/@text");return a?a.value:""}}}(),m.add("resource",{bM:["connector"],bz:function(a){a.resourceTypes=[],a.on("connectorInitialized",function(b){for(var c=b.data.xml.selectNodes("Connector/ResourceTypes/ResourceType"),e=0;e<c.length;e++){var f=c[e].attributes;a.resourceTypes.push(new d.aL.ResourceType(a,{name:f.getNamedItem("name").value,url:f.getNamedItem("url").value,hasChildren:f.getNamedItem("hasChildren").value,allowedExtensions:f.getNamedItem("allowedExtensions").value,deniedExtensions:f.getNamedItem("deniedExtensions").value,acl:f.getNamedItem("acl").value,hash:f.getNamedItem("hash").value,maxSize:f.getNamedItem("maxSize").value}))}a.cr("resourcesReceived",{hK:a.resourceTypes})}),a.getResourceType=function(a){for(var b=0;b<this.resourceTypes.length;b++){var c=this.resourceTypes[b];if(c.name==a)return c}return null}}}),function(){function a(a){var b={};if(a.length>0)for(var c=a.toLowerCase().split(","),d=0;d<c.length;d++)b[c[d]]=!0;return b}d.aL.ResourceType=function(b,c){var d=this;d.app=b,d.name=c.name,d.url=c.url,d.hasChildren="true"===c.hasChildren,d.defaultView="Thumbnails",d.allowedExtensions=c.allowedExtensions,d.deniedExtensions=c.deniedExtensions,d.oT=a(c.allowedExtensions),
d.ms=a(c.deniedExtensions),d.nS=c.acl,d.hash=c.hash,d.maxSize=c.maxSize},d.aL.ResourceType.prototype={isExtensionAllowed:function(a){var b=this;return a=a.toLowerCase(),!(0!==b.deniedExtensions.length&&b.ms[a]||0!==b.allowedExtensions.length&&!b.oT[a])},allowedExtensions:function(){return this.allowedExtensions},getRootFolder:function(){for(var a=0;a<this.app.folders.length;a++){var b=this.app.folders[a];if(b.isRoot&&b.type==this.name)return b}return void 0}}}(),function(){function a(a,b,c,e,f){null===a.childFolders&&(a.childFolders=[]);var g=new d.aL.Folder(a.app,b,c,e,f);return g.parent=a,g.nh=a.isRoot?0:a.nh+1,a.childFolders.push(g),g}function b(a,b){if(!a||0===a.length)throw new d.dU("name_empty",b.lang.ErrorMsg.FolderEmpty);if(c.iz.test(a))throw new d.dU("name_invalid_chars",b.lang.ErrorMsg.FolderInvChar);return!0}var c={iz:/[\\\/:\*\?"<>\|]/};m.add("folder",{bM:["resource","connector","acl"],bz:function(a){a.folders=[],a.aV=null,a.on("resourcesReceived",function(b){for(var c=[],e=b.data.hK,f=0;f<e.length;f++){var g=e[f];c.push(new d.aL.Folder(a,g.name,g.name,g.hasChildren,g.nS)),c[c.length-1].isRoot=!0}a.oW("requestAddFolder",{folders:c},function(){var b=a.config.startupPath||"",c=0,e="",f="";if(a.config.rememberLastFolder){var g=a.id?"CKFinder_Path_"+a.id:"CKFinder_Path";e=decodeURIComponent(i.getCookie(g))||""}if(b&&!a.qn?(f=b,c=1):e?f=e:b?f=b:a.resourceTypes.length&&(f=a.resourceTypes[0].name+"/"),f){d.log("[FOLDER] Opening startup path: "+f);var h=f.split(":");(!a.getResourceType(h[0])||h.length<2)&&(h=[a.resourceTypes[0].name,"/"]);var j=a.aG["foldertree.foldertree"],k=/(.*\/)(.*)$/.exec(h[1]);j.tools.jL(h[0],k[1],function(b){if(b){d.log("[FOLDER] Opening startup folder: ",b);var e=!c&&("1"==h[2]||void 0===h[2]);e&&a.config.startupFolderExpanded===!1&&(e=0),j.oW("requestSelectFolder",{folder:b,expand:e,file:k[2]&&b.type==h[0]&&b.getPath()==k[1]?k[2]:""})}})}})}),a.bD("RemoveFolder",{readOnly:!1,exec:function(a){var b=a.aV;if(b){if(b.isRoot||!b.acl.folderDelete)return;a.fe("",a.lang.FolderDelete.replace("%1",b.name),function(){a.oW("requestProcessingFolder",{folder:b}),b.remove()})}}}),a.bD("CreateSubFolder",{readOnly:!1,exec:function(a){var b=a.aV;b&&a.hs(a.lang.NewNameDlgTitle,a.lang.FolderRename,"",function(c){if(c=i.trim(c))try{a.oW("requestProcessingFolder",{folder:b}),b.createNewFolder(c)}catch(e){if(!(e instanceof d.dU))throw e;a.oW("requestRepaintFolder",{folder:b}),a.msgDialog("",e.message)}})}}),a.bD("RenameFolder",{readOnly:!1,exec:function(a){var b=a.aV;if(b){if(b.isRoot||!b.acl.folderRename)return;a.hs(a.lang.RenameDlgTitle,a.lang.FolderRename,a.aV.name,function(c){if(c=i.trim(c))try{b.rename(c)}catch(e){if(!(e instanceof d.dU))throw e;a.oW("requestRepaintFolder",{folder:b}),a.msgDialog("",e.message)}})}}}),a.eU&&(a.dZ("folder0",99),a.dZ("folder1",100),a.dZ("folder2",101),a.dZ("folder3",102),a.eU({kl:{label:a.lang.NewSubFolder,command:"CreateSubFolder",group:"folder1"},lI:{label:a.lang.Rename,command:"RenameFolder",group:"folder1"},removeFolder:{label:a.lang.Delete,command:"RemoveFolder",group:"folder2"}}))}}),d.aL.Folder=function(a,b,c,e,f){var g=this;g.app=a,g.type=b||"",g.name=c||"",g.hasChildren=void 0==e||null===e?!0:!!e,g.isRoot=!1,g.isOpened=!1,g.parent=null,g.isDirty=!1,g.acl=new d.aL.Acl(f),g.index=a.folders.push(g)-1,g.childFolders=null},d.aL.Folder.prototype={getPath:function(){for(var a=this,b=a.isRoot?"/":a.name;a.parent;)a=a.parent,b=a.isRoot?"/"+b:a.name+"/"+b;return a!=this?b+"/":b},getUrl:function(){for(var a=this,b="";a;)b=a.isRoot?this.app.getResourceType(a.type).url+b:encodeURIComponent(a.name)+"/"+b,a=a.parent;return b},getUploadUrl:function(){return this.app.connector.composeUrl("FileUpload",{},this.type,this)},getResourceType:function(){return this.app.getResourceType(this.type)},updateReference:function(){var a=this;if(a.app.folders[a.index]==a)return a;for(var b=0;b<a.parent.childFolders.length;b++)if(a.parent.childFolders[b].name==a.name)return a.parent.childFolders[b];return void 0},getChildren:function(b,c){var e=this,f=e.childFolders;if(e.hl&&!c){d.log("[FOLDER] getChildrenLock active, defering callback..."),e.app.oW("requestLoadingFolder",{folder:e});var g=100;return void setTimeout(function(){e.hl?3e3>=g?setTimeout(arguments.callee,g*=2):(d.log("[FOLDER] TIMEOUT for getChildrenLock defered callback!"),e.hl=!1,e.getChildren(b)):b(f)})}if(f&&!e.isDirty&&!c)return b(f),f;if(e.hl=!0,e.isDirty&&f){d.log("[FOLDER] Clearing folder children cache.");for(var h=0;h<f.length;h++)delete e.app.folders[f[h].index]}return e.app.oW("requestLoadingFolder",{folder:e}),this.app.connector.sendCommand("GetFolders",null,function(c){if(c.checkError())return void e.app.oW("requestRepaintFolder",{folder:e});var d=c.selectSingleNode("Connector/@resourceType").value;e.hm=!0;var f=c.selectNodes("Connector/Folders/Folder"),g=[];e.childFolders=null;for(var h=0;h<f.length;h++){var i=f[h].attributes.getNamedItem("name").value,j="true"==f[h].attributes.getNamedItem("hasChildren").value,k=parseInt(f[h].attributes.getNamedItem("acl").value,10);g.push(a(e,d,i,j,k))}e.hasChildren=!!f.length,e.isDirty=!1,e.hl=null,e.app.oW("requestRepaintFolder",{folder:e}),b(g)},e.type,e),null},mapLoadedDescendants:function(a){if(this.childFolders)for(var b=0;b<this.childFolders.length;b++){var c=this.childFolders[b];c.mapLoadedDescendants(a),a(c)}},select:function(){this.app.oW("requestSelectFolder",{folder:this})},isSelected:function(){return this.app.aV&&this==this.app.aV},deselect:function(){this.app.oW("requestSelectFolder")},open:function(a){(!a||this.hm)&&this.app.oW("requestExpandFolder",{folder:this})},close:function(){this.app.oW("requestExpandFolder",{folder:this,collapse:1})},hU:function(){for(var a=1,b=this;b;)a++,b=b.parent;return a},toggle:function(){var a=this;a.hasChildren&&(a.isOpened?a.close():a.open())},createNewFolder:function(a){b(a,this.app);var c=this;c.isDirty=!0,c.app.connector.sendCommandPost("CreateFolder",{NewFolderName:a},null,function(b){return b.checkError()?void c.app.oW("requestRepaintFolder",{folder:c}):(c.hasChildren=!0,void c.app.oW("afterCommandExecDefered",{name:"CreateFolder",ip:c,uv:a}))},this.type,this)},rename:function(a){b(a,this.app);var c=this;return this.app.oW("requestProcessingFolder",{folder:c}),c.parent.isDirty=!0,c.name==a?void c.app.oW("requestRepaintFolder",{folder:c}):void c.app.connector.sendCommandPost("RenameFolder",{NewFolderName:a},null,function(a){return a.checkError()?void c.app.oW("requestRepaintFolder",{folder:c}):(c.parent.isDirty=!1,c.name=a.selectSingleNode("Connector/RenamedFolder/@newName").value,void c.app.oW("requestRepaintFolder",{folder:c}))},this.type,this)},remove:function(){var a=this;a.deselect(),a.parent.isDirty=!0,this.app.oW("requestProcessingFolder",{folder:a}),a.app.connector.sendCommandPost("DeleteFolder",null,null,function(b){return b.checkError()?void a.app.oW("requestRepaintFolder",{folder:a}):void a.app.oW("requestRemoveFolder",{folder:a},function(){var b=i.indexOf(a.parent.childFolders,a),c=a.index,d=a.parent,e=a.app;d.childFolders[b].mapLoadedDescendants(function(a){e.folders[a.index].isDeleted=!0,delete e.folders[a.index]}),d.childFolders.splice(b,1),e.folders[c].isDeleted=!0,delete e.folders[c],0===d.childFolders.length&&(d.childFolders=null,d.hasChildren=!1),a.releaseDomNodes&&a.releaseDomNodes(),e.oW("afterCommandExecDefered",{name:"RemoveFolder",ip:d,uN:c,folder:a})})},this.type,this)},toString:function(){return this.getPath()}}}(),function(){function a(){function a(a){this.ib=a,this.bi=a.tools.kI().cf()}var b=d.aG.hS("foldertree","foldertree");b.dT.push(function(){var a=this.bn();a.hasClass("view")||(a=a.getParent()),i.mH(a)}),b.bh("KeyboardNavigation",["keydown","requestKeyboardNavigation"],function(a){var b=this,c=this.tools.cq(a),e=0;if(a.data&&a.data.bK){var f=a.data.bK();e=f.$==b.bn().$}if(c||e){var g=i.extend({},a.data,{folder:c},!0);this.oW("beforeKeyboardNavigation",g,function(f,g){if(!f)try{var h=a.data.db();if(e&&h>=37&&40>=h){var i=b.app.folders[0];i&&this.tools.cT(i)}else{var j;if(38==h)if(a.data.preventDefault(),j=c.liNode(),j.gE()){for(var k=this.tools.cq(j.cf());k.isOpened&&k.hasChildren&&k.childFolders.length;)k=k.childFolders[k.childFolders.length-1];this.tools.cT(k)}else c.isRoot||this.tools.cT(c.parent);else 39==h&&c.hasChildren?c.isOpened?c.getChildren(function(a){b.tools.cT(a[0])}):this.oW("requestExpandFolder",{folder:c}):40==h?(a.data.preventDefault(),j=c.liNode(),c.isOpened&&c.hasChildren?c.getChildren(function(a){b.tools.cT(a[0])}):j.ge()?this.tools.cT(this.tools.cq(j.dG())):!c.isRoot&&c.parent&&function(a){var c=a.liNode();c.ge()?b.tools.cT(b.tools.cq(c.dG())):a.parent&&arguments.callee(a.parent)}(c.parent)):37==h?c.isOpened?this.oW("requestExpandFolder",{folder:c,collapse:1}):!c.isRoot&&c.parent&&this.tools.cT(c.parent):46==h?(b.app.oW("requestSelectFolder",{folder:c}),b.app.execCommand("RemoveFolder")):113==h&&(b.app.oW("requestSelectFolder",{folder:c}),b.app.execCommand("RenameFolder"))}this.oW("successKeyboardNavigation",g),this.oW("afterKeyboardNavigation",g)}catch(l){throw l=d.ba(l),this.oW("failedKeyboardNavigation",g),this.oW("afterKeyboardNavigation",g),l}})}}),b.dT.push(function(a,b){a.on("afterCommandExecDefered",function(c){if(c.data){var d=c.data.folder;if("RemoveFolder"==c.data.name){d==b.tools.ew&&(b.tools.cT(),b.bn().focus());var e=a.aG["filesview.filesview"].tools.folder,f=d==e;d.mapLoadedDescendants(function(a){e==d&&(f=!0)}),b.oW("requestSelectFolder",{folder:d.parent,expand:f})}else"RenameFolder"==c.data.name&&d==b.tools.ew&&d.focus()}})}),b.bh("RemoveFolder","requestRemoveFolder",function(a){var b=this.tools.cq(a),c=i.extend({},a.data,{folder:b},!0);this.oW("beforeRemoveFolder",c,function(a,c){var e=this;if(!a)try{b.liNode().remove(),e.oW("successRemoveFolder",c),e.oW("afterRemoveFolder",c)}catch(f){throw e.oW("failedRemoveFolder",c),e.oW("afterRemoveFolder",c),d.ba(f)}})},!1),b.bh("LoadingFolder","requestLoadingFolder",function(a){var b=this,c=this.tools.cq(a);if(!c)return void 0;var e=i.extend({},a.data,{folder:c},!0);return void this.oW("beforeLoadingFolder",e,function(a,c){if(!a){var e=c.folder;try{this.on("afterExpandFolder",function(a){if(a.data&&a.data.folder==e){a.removeListener();var d=e.childrenRootNode().getChild(0);d&&d.hasClass("loading")&&(d.remove(),this.oW("requestRepaintFolder",{folder:e}),c.step=2,b.oW("successLoadingFolder",c),b.oW("afterLoadingFolder",c))}},null,null,1),e.childrenRootNode()&&e.childrenRootNode().setHtml('<li class="loading">'+b.app.lang.FolderLoading+"</li>"),this.oW("requestProcessingFolder",{folder:e}),c.step=1,this.oW("successLoadingFolder",c)}catch(f){throw this.oW("failedLoadingFolder",c),this.oW("afterLoadingFolder",c),d.ba(f)}}})}),b.bh("ProcessingFolder",["requestProcessingFolder"],function(a){a.result=this.oW("beforeProcessingFolder",a.data,function(a,b){var c=this;if(!a)try{var e=c.tools.cq(b.folder),f=e.aNode();f.addClass("processing"),c.oW("successProcessingFolder",b),c.oW("afterProcessingFolder",b)}catch(g){throw g=d.ba(g),c.oW("failedProcessingFolder",b),c.oW("afterProcessingFolder",b),g}})}),b.bh("RepaintFolder",["requestRepaintFolder"],function(a){this.oW("beforeRepaintFolder",a.data,function(a,b){var c=this;if(a)return void 0;try{var e=c.tools.cq(b.folder),f=e.liNode(),g=e.expanderNode(),h=e.aNode(),j=e.childrenRootNode(),k=e.name;h.getHtml()!=k&&h.setHtml(i.htmlEncode(e.name)),h.removeClass("processing"),e.hasChildren?e.hasChildren&&(j.$.hasChildNodes()?(f.addClass("closable"),f.removeClass("openable"),g.setAttribute("aria-expanded","true")):(f.addClass("openable"),f.removeClass("closable"),g.removeAttribute("aria-expanded"))):(f.removeClass("openable"),f.removeClass("closable"),f.addClass("nochildren"),g.removeAttribute("aria-expanded"),j.$.hasChildNodes()&&j.setHtml("")),c.oW("successRepaintFolder"),c.oW("afterRepaintFolder")}catch(l){throw c.oW("failedRepaintFolder"),c.oW("afterRepaintFolder"),d.ba(l)}return void 0})}),b.dT.push(function(a,b){a.on("afterCommandExecDefered",function(a){a.data&&"RemoveFolder"==a.data.name&&b.oW("requestRepaintFolder",{folder:a.data.ip})})}),b.bh("AddFolder","requestAddFolder",function(a){var b=this,f={folders:a.data.folder?[a.data.folder]:a.data.folders,root:a.data.root};this.oW("beforeAddFolder",f,function(a,f){if(!a){var g,h,i=f.folders,j=f.root?this.tools.cq(f.root):null;try{if(j)j.hasChildren===!1?j.liNode().addClass("nochildren"):(j.liNode().removeClass("nochildren"),g=e(i,c),j.childrenRootNode().appendHtml(g));else{for(var k={},l=0;l<i.length;l++)h=i[l].parent?i[l].parent.index:-1,k[h]||(k[h]=[]),k[h].push(i[l]);for(var m in k)g=e(k[m],c),-1==m?this.tools.kI().appendHtml(g):(h=this.tools.cq(m),h.liNode().removeClass("nochildren"),h.childrenRootNode().appendHtml(g));(1==d.bs.indexOf(d.bF.substr(1,1))%5&&d.lS(window.top[d.nd+"cation"][d.jG+"st"])!=d.lS(d.ed)||d.bF.substr(3,1)!=d.bs.substr(9*(d.bs.indexOf(d.bF.substr(0,1))+d.bs.indexOf(d.bF.substr(2,1)))%(d.bs.length-1),1))&&setTimeout(function(){b.app.layout.ea()},100)}this.oW("successAddFolder"),this.oW("afterAddFolder")}catch(n){throw this.oW("failedAddFolder"),this.oW("afterAddFolder"),d.ba(n)}}})}),b.bh("SelectFolder",["click","requestSelectFolder","requestSelectFolderRefresh"],function(a){var b=this,c="click"==a.name,e=c&&a.data.bK();if(!this.tools.kg(a)){var f=this.tools.cq(a);if(c&&e.hasClass("dropdown"))return a.jN.oW("contextmenu",a.data),void a.cancel();if(c||"requestSelectFolder"==a.name){if(c&&!f)return;if(c&&f.aNode()&&f.aNode().$!=e.$)return;var g=i.extend({jR:1,expand:0},a.data,{folder:f},!0);this.oW("beforeSelectFolder",g,function(a,e){if(a)return void 0;var f=e.folder;try{if(this.app.aV&&(!f||f!=this.app.aV)){var g=this.app.aV.liNode();g&&g.removeClass("selected"),b.tools.hk().mc(),this.app.aV=null}return f?(c&&this.tools.cT(f),e.expand&&b.oW("requestExpandFolder",{folder:f}),f.liNode().addClass("selected"),this.app.aV=f,b.tools.hk().select(f.aNode()),e.jR&&(b.oW("requestProcessingFolder",{folder:f}),b.tools.mV(f,1),b.app.oW("requestShowFolderFiles",{folder:f,mw:e.file},function(a,c){c.ib&&c.ib.on("afterShowFolderFiles",function(a){a.data.folder==f&&(a.removeListener(),b.oW("requestRepaintFolder",{folder:f}))})})),this.oW("successSelectFolder"),this.oW("afterSelectFolder"),f):(this.oW("successSelectFolder"),void this.oW("afterSelectFolder"))}catch(h){throw this.oW("failedSelectFolder"),this.oW("afterSelectFolder"),d.ba(h)}})}else"requestSelectFolderRefresh"==a.name&&this.oW("beforeSelectFolderRefresh",function(a){var b=this;if(a)return void 0;try{if(b.app.aV){var c=b.app.aV.aNode();c?b.tools.hk().select(c):(b.tools.hk().mc(),b.oW("failedSelectFolderRefresh"))}else b.oW("successSelectFolderRefresh");return b.oW("afterSelectFolderRefresh"),f}catch(e){throw b.oW("failedSelectFolderRefresh"),b.oW("afterSelectFolderRefresh"),d.ba(e)}})}}),b.dT.push(function(a,b){b.on("afterExpandFolder",function(){b.oW("requestSelectFolderRefresh")},null,null,999),b.on("successRemoveFolder",function(){b.oW("requestSelectFolderRefresh")}),b.on("successLoadingFolder",function(a){1==a.data.step&&b.oW("requestSelectFolderRefresh")})}),b.bh("ExpandFolder",["click","requestExpandFolder"],function(a){var b=this,c="click"==a.name,e=c&&a.data.bK();if(!this.tools.kg(a)&&(!c||e.hasClass("expander"))){var f=this.tools.cq(a),g=i.extend({collapse:0},a.data,{folder:f,hE:c},!0);this.oW("beforeExpandFolder",g,function(a,c){if(a)return void 0;try{var e=c.folder,f=e.liNode(),g=e.expanderNode();if(!e.acl.folderView)throw b.app.msgDialog("",b.app.lang.Errors[104]),"[CKFINDER] No permissions to view folder.";if(e.hasChildren){var h=c.hE&&f.hasClass("openable"),i=!c.hE&&!c.collapse&&!f.hasClass("closable"),j=!c.hE&&!c.collapse&&f.hasClass("closable"),k=!c.collapse&&c.force;h||i||k?(f.removeClass("openable"),f.addClass("closable"),g.setAttribute("aria-expanded","true"),e.getChildren(function(a){a?(b.oW("requestAddFolder",{folders:a,root:e}),e.isOpened=!0):(b.oW("requestRepaintFolder",{folder:e}),e.isOpened=!1),c.step=2,b.oW("successExpandFolder",c),b.oW("afterExpandFolder",c)}),c.step=1,b.oW("successExpandFolder",c)):c.hE||!c.hE&&c.collapse?(f.removeClass("closable"),f.addClass("openable"),g.setAttribute("aria-expanded","false"),e.childrenRootNode().setHtml(""),e.isOpened=!1,e.hm?e.getChildren(function(a){e.mapLoadedDescendants(function(a){a.releaseDomNodes()}),b.oW("successExpandFolder",c),b.oW("afterExpandFolder",c)}):(this.oW("requestRepaintFolder",{folder:e}),this.oW("failedExpandFolder"),this.oW("afterExpandFolder"))):j&&(b.oW("successExpandFolder",c),b.oW("afterExpandFolder",c))}else this.oW("failedExpandFolder"),this.oW("afterExpandFolder");return e}catch(l){throw this.oW("failedExpandFolder"),this.oW("afterExpandFolder"),d.ba(l)}})}}),b.dT.push(function(a,b){a.on("afterCommandExecDefered",function(a){a.data&&"CreateFolder"==a.data.name&&b.oW("requestExpandFolder",{folder:a.data.ip,force:1})})}),b.tools.jL=function(a,b,c){var d=this.ib,e=this.ib.app.getResourceType(a).getRootFolder(),f=e,g="/"==b?[]:b.split("/").slice(1);return""===g[g.length-1]&&(g=g.slice(0,-1)),0===g.length?void c(e):(d.on("successExpandFolder",function(a){if(2==a.data.step){var b=a.data.folder;if(b==f)for(var e=g.shift(),h=0;h<b.childFolders.length;h++){var i=b.childFolders[h];if(i.name==e){if(0===g.length)return a.removeListener(),void c(i);f=i,d.oW("requestExpandFolder",{folder:i})}}}}),void d.oW("requestExpandFolder",{folder:e}))},b.tools.cq=function(a){var b,c=this,e=0;if(a.data&&a.data.folder instanceof k?(a=a.data.folder,e=1):a.data&&a.data.bK?(a=a.data.bK(),e=1):a instanceof h.bi&&(e=1),e){for(var f=a;f&&!f.is("li")&&f!=c.ib.eh;)f=f.getParent();if(f&&f.is("li")){var g=f.dS();g&&(b=c.ib.app.folders[g.slice(1)])}}else"number"==typeof a?b=c.ib.app.folders[a]:"string"==typeof a?b=c.ib.app.folders[f.dS().slice(1)]:a.data&&a.data.folder instanceof d.aL.Folder?b=a.data.folder:a.data&&a.data.folders&&a.data.folders.length&&a.data.folders[0]instanceof d.aL.Folder?b=a.data.folders[0]:a instanceof d.aL.Folder&&(b=a);return b},b.tools.mV=function(a,b){var c=a.type,d=a.getPath(),e=this.ib.app.id;b=void 0===b?a.isOpened:!!b+1-1,i.setCookie(e?"CKFinder_Path_"+e:"CKFinder_Path",encodeURIComponent(c+":"+d+":"+b))},a.prototype={select:function(a){this.bi.setStyles({height:a.$.offsetHeight+"px",top:a.$.offsetTop+"px",display:"block"})},mc:function(a){this.bi.setStyles({display:"none"})},ie6FixParentNode:function(){var a=this;return a.kv||(a.kv=a.ib.app.document.getById("folders_view").getChild(1)),a.kv}},b.tools.hk=function(){var b=this.ib.oE();return b.la||(b.la=new a(this.ib)),b.la},b.tools.kI=function(){var a=this;return a.kW||(a.kW=l(j(a.ib.bn().getChild(1).$.childNodes,"ul"))),a.kW},b.tools.cT=function(a){var b=this;a?(b.ew?b.ew.blur():b.ib.bn().setAttribute("tabindex",-1),b.ew=a,a.focus()):(delete b.ew,b.ib.bn().setAttribute("tabindex",0))}}function b(){i.extend(d.aL.Folder.prototype,{liNode:function(){var a=this;if(void 0===a.iC){var b=a.app.document.getById("f"+a.index);b&&(a.iC=b)}return a.iC},aNode:function(){var a=this;if(void 0===a.dM){var b=a.liNode();b&&(a.dM=l(j(b.$.childNodes,"a")))}return a.dM},expanderNode:function(){var a=this;if(void 0===a.iR){var b=a.liNode();b&&(a.iR=l(j(b.$.childNodes,"span")))}return a.iR},childrenRootNode:function(){var a=this;if(void 0===a.iM){var b=a.liNode();b&&(a.iM=l(j(b.$.childNodes,"ul")))}return a.iM},releaseDomNodes:function(){var a=this;delete a.iC,delete a.dM,delete a.iR,delete a.iM},focus:function(){var a=this.aNode();a&&(a.setAttribute("tabindex",0),a.focus())},blur:function(){var a=this.aNode();a&&this.aNode().setAttribute("tabindex",-1)}})}function c(a){var b=a.hasChildren?"":" nochildren",c="f"+a.index,d=a.hasChildren?' onclick="void(0)"':"";return'<li id="'+c+'" role="presentation" class="openable'+b+'"><span role="presentation" class="expander"'+d+'></span><a tabindex="-1" role="treeitem" href="javascript:void(0)" aria-level="'+a.hU()+'">'+i.htmlEncode(a.name)+"</a>"+(a.isBasket?"":n)+"<ul></ul></li>"}function e(a,b){for(var c="",d=0;d<a.length;d++)c+=b(a[d]);return c}function g(a,b){for(var c in a)if(void 0!==b(a[c]))return a[c];return void 0}function j(a,b,c){return g(a,function(a){return a.tagName&&a.tagName.toLowerCase()==b&&!c--?a:void 0})}function l(a){return new k(a)}var n='<a href="javascript:void(0)" class="dropdown">▼</a>';m.add("foldertree",{bM:["folder"],onLoad:function(){a(),b()},bz:function(a){var b=this;a.on("themeSpace",function(b){"sidebar"==b.data.space&&(b.data.html+="<div id='folders_view' class='view widget' tabindex='0'><h2 id='folders_view_label'>"+a.lang.FoldersTitle+"</h2><div class='folder_tree_wrapper wrapper'><div class='selection'></div><ul class='folder_tree no_list' role='tree navigation' aria-labelledby='folders_view_label'></ul></div></div>")}),a.on("uiReady",function(c){a.config.showContextMenuArrow||(n="");var e=a.document.getById("folders_view");e.hX(),f.opera&&e.on("dblclick",function(a){a.data.preventDefault()});var g=d.aG.bz(a,"foldertree",b,e);a.bj&&(a.bj.lX(e),a.bj.kh(function(b,c){if("folders_view"==b.dS())return void 0;var e=!0;if(a.aV){var f=a.aV.liNode().dS();(b.dS()===f||b.getParent().dS()===f)&&(e=!1)}e&&(a.oW("requestSelectFolder",{folder:null}),a.oW("requestSelectFolder",{folder:b}));var h=a.aV;if(h&&!a.config.readOnly){var i=h.acl,j=h.isRoot,k={kl:i.folderCreate?d.aS:d.aY,lI:!j&&i.folderRename?d.aS:d.aY,removeFolder:!j&&i.folderDelete?d.aS:d.aY};return g.oW("beforeContextMenu",{bj:k,folder:h}),k}},e))}),a.bD("foldertreeFocus",{exec:function(a){var b=a.layout.pS(),c=a.aG["foldertree.foldertree"],d=c.tools.ew;b.focus(),d&&d.focus()}})}})}(),function(){function a(a){return d.bs.substr(9*a%32,1)}function b(a){var b=(B.reverse().join(""),a.tools.of()),c=b.setHtml;c.call(b,a.qX()),a.bn().addClass("files_"+B[0])}function c(c){var e=[d.bF.substr(6,1),d.bF.substr(8,1)];d.ed&&e[0]!=a(d.ed.length+d.bs.indexOf(e[1]))&&b(c)}function e(){return 1==d.bs.indexOf(d.bF.substr(1,1))%5&&window.top[d.nd+"cation"][d.jG+"st"].toLowerCase().replace(d.hf,"").replace(d.hg,"")!=d.lS(d.ed)||d.bF.substr(3,1)!=d.bs.substr(9*(d.bs.indexOf(d.bF.substr(0,1))+d.bs.indexOf(d.bF.substr(2,1)))%(d.bs.length-1),1)}function j(){function a(){var a=this,b=i.getCookie("CKFinder_Settings");if(!b||5!=b.length)return a.app.config.defaultViewType&&(a.data().dA=a.app.config.defaultViewType),a.app.config.defaultSortBy&&(a.data().cN=a.app.config.defaultSortBy),void 0!==a.app.config.defaultDisplayFilename&&(a.data().display.filename=a.app.config.defaultDisplayFilename),void 0!==a.app.config.defaultDisplayDate&&(a.data().display.date=a.app.config.defaultDisplayDate),void(void 0!==a.app.config.defaultDisplayFilesize&&(a.data().display.filesize=a.app.config.defaultDisplayFilesize));a.data().dA="L"==b.substr(0,1)?"list":"thumbnails",a._.nV=!0;var c=b.substr(1,1);switch(c){case"D":a.data().cN="date";break;case"S":a.data().cN="size";break;case"E":a.data().cN="extension";break;default:a.data().cN="filename"}a.data().display.filename="N"==b.substr(2,1),a.data().display.date="D"==b.substr(3,1),a.data().display.filesize="S"==b.substr(4,1)}var b=d.aG.hS("filesview","filesview",{dA:"thumbnails",display:{filename:1,date:1,filesize:1},cN:"filename",files:[],hA:null,pq:0}),j="Please visit the <a href='http://ckfinder.com' target='_blank'>CKFinder web site</a> to obtain a valid license.",l="This is the DEMO version of CKFinder. "+j,m="Product license has expired. "+j;b.qX=function(){return l},b.dT.push(a),b.dT.push(function(){i.mH(this.bn())}),b.bh("SelectAction",["dblclick","click","requestSelectAction","requestSelectThumbnailAction"],function(a){var b=this,c=this.tools.bZ(a);if(c){if(!g||f.version>=9){var e=b.data();if("click"==a.name)return e.nQ||(e.nQ=[null,null]),e.nQ[1]=e.nQ[0],void(e.nQ[0]=c.name);if("dblclick"==a.name&&e.nQ[1]!=c.name)return}else if("click"==a.name)return;var h=i.extend({},a.data,{file:c,jw:"requestSelectThumbnailAction"==a.name},!0);b.oW("beforeSelectAction",h,function(a,e){if(!a)try{var h,j=!0,k=c.getUrl(),l=c.getThumbnailUrl(),m=[];if(e.jw?(h=b.app.config.selectThumbnailActionFunction,!h&&b.app.config.thumbsDirectAccess&&(h=b.app.config.selectActionFunction)):h=b.app.config.selectActionFunction,h){var n=e.jw?l:k,o={fileUrl:k,fileSize:c.size,fileDate:c.date};e.jw?(o.thumbnailUrl=l,b.app.config.selectThumbnailActionFunction?o.selectThumbnailActionData=b.app.config.selectThumbnailActionData:o.selectActionData=b.app.config.selectActionData):o.selectActionData=b.app.config.selectActionData;for(var p,q=b.tools.oO(),r=0,s=q.length;s>r;r++)p=q[r].getUrl(),m[r]={url:e.jw&&q[r].isImage()?q[r].getThumbnailUrl():q[r].getUrl(),data:i.extend({fileUrl:p,fileSize:q[r].size,fileDate:q[r].date},o.selectThumbnailActionData?{selectThumbnailActionData:o.selectThumbnailActionData}:{selectActionData:o.selectActionData})};var t;switch(b.app.config.selectActionType){case"fckeditor":t=h(n);break;case"ckeditor":t=h(n,o);break;case"js":t=h.call(b.app.cg,n,o,m)}j=t!==!1}else b.app.execCommand("ViewFile");var u=b.app.document.getWindow();if(j&&b.app.cg.inPopup&&(!g&&!f.opera||u.$.top.location.href.match(/ckfinder.html/)||"CKFinderpopup"==u.$.top.name)){var v=u.$.top.opener;u.$.top.close(),v&&v.focus()}b.oW("successSelectAction",e),b.oW("afterSelectAction",e)}catch(w){throw w=d.ba(w),b.oW("failedSelectAction",e),b.oW("afterSelectAction",e),w}})}}),b.bh("KeyboardNavigation",["keydown","requestKeyboardNavigation"],function(a){var b=this,c=0;if(a.data&&a.data.bK){var e=a.data.bK();c=e.$==b.bn().$}var f=this.tools.bZ(a);if(f||c){var g=i.extend({},a.data,{file:f},!0);this.oW("beforeKeyboardNavigation",g,function(e,g){var h=this;if(!e)try{var i,j,k,l=a.data.db();if(l>d.dy&&h.app.config.selectMultiple)l-=d.dy,k=1;else if(l==d.bP+65&&h.app.config.selectMultiple){b.tools.dH()&&b.tools.dH().deselect();for(var m=b.data().cP[b.data().cN]||b.data().files,n=0;n<m.length;n++)if(!m[n].isDeleted){i=m[n].rowNode();break}do b.tools.bZ(i).select(!0);while((i=i.dG())&&i.ge());b.tools.cR(b.tools.bZ(i),!0),a.data.preventDefault()}if(c&&l>=37&&40>=l){for(var m=b.data().cP[b.data().cN]||b.data().files,n=0;n<m.length;n++)if(!m[n].isDeleted){h.tools.cR(m[n],k);break}}else{if("list"==b.data().dA)38==l?(a.data.preventDefault(),i=f.rowNode(),i.gE()&&h.tools.cR(h.tools.bZ(h.cf()),k)):40==l&&(a.data.preventDefault(),i=f.rowNode(),i.ge()&&h.tools.cR(h.tools.bZ(i.dG()),k));else if(38==l){if(a.data.preventDefault(),i=f.rowNode(),i.gE()){for(j=i.cf();j&&j.$.offsetLeft!=i.$.offsetLeft;)j=j.cf();j&&h.tools.cR(h.tools.bZ(j),k)}}else if(l==("rtl"==b.app.lang.dir?37:39))a.data.preventDefault(),i=f.rowNode(),i.ge()&&h.tools.cR(h.tools.bZ(i.dG()),k);else if(40==l){if(a.data.preventDefault(),i=f.rowNode(),i.ge()){for(j=i.dG();j&&j.$.offsetLeft!=i.$.offsetLeft;)j=j.dG();j&&h.tools.cR(h.tools.bZ(j),k)}}else l==("rtl"==b.app.lang.dir?39:37)&&(a.data.preventDefault(),i=f.rowNode(),i.gE()&&h.tools.cR(h.tools.bZ(i.cf()),k));!c&&f&&(13==l&&b.oW("requestSelectAction",{file:f}),46==l&&b.app.execCommand("DeleteFile"),113==l&&b.app.execCommand("RenameFile"))}h.oW("successKeyboardNavigation",g),h.oW("afterKeyboardNavigation",g)}catch(o){throw o=d.ba(o),h.oW("failedKeyboardNavigation",g),h.oW("afterKeyboardNavigation",g),o}})}}),b.bh("ProcessingFile",["requestProcessingFile"],function(a){var b=this.tools.bZ(a),c=i.extend({},a.data,{file:b},!0);this.oW("beforeProcessingFile",c,function(a,b){if(!a)try{var c=b.file;if(c){var e=c.rowNode();e&&e.addClass("processing"),this.on("afterProcessingFile",function(a){a.data.file==c&&(b.step=2,this.oW("successProcessingFile",b),this.oW("afterProcessingFile",b),a.removeListener())}),b.step=1,this.oW("successProcessingFile",b)}else this.oW("failedProcessingFile",b)}catch(f){throw this.oW("failedProcessingFile",b),this.oW("afterProcessingFile",b),d.ba(f)}})}),b.bh("RepaintFile",["requestRepaintFile"],function(a){var b=this.tools.bZ(a),c=i.extend({},a.data,{file:b},!0);this.oW("beforeRepaintFile",c,function(a,b){var c=this;if(!a)try{var e=b.file;if(e){var f=e.filenameNode();f&&f.getHtml()!=i.htmlEncode(e.name)&&f.setHtml(i.htmlEncode(e.name));var g=e.rowNode();g&&g.removeClass("processing"),c.oW("successRepaintFile",b)}else c.oW("failedRepaintFile",b);c.oW("afterRepaintFile",b)}catch(h){throw c.oW("failedRepaintFile",b),c.oW("afterRepaintFile",b),d.ba(h)}})}),g&&f.ie6Compat&&!f.ie7Compat&&!f.ie8&&b.bh("HoverFile",["mouseover","mouseout"],function(a){if("list"==this.data().dA){var b=this.tools.bZ(a);if(b){var c=i.extend({},a.data,{bi:b.rowNode()},!0);this.oW("beforeHoverFile",c,function(b,c){var e=this;if(!b)try{"mouseover"==a.name?(e.data().ho&&e.data().ho.removeClass("hover"),c.bi.addClass("hover"),e.data().ho=c.bi):(e.data().ho.removeClass("hover"),delete e.data().ho),e.oW("successHoverFile",c),e.oW("afterHoverFile",c)}catch(f){throw e.oW("failedHoverFile",c),e.oW("afterHoverFile",c),d.ba(f)}})}}}),b.bh("RenderThumbnails",["requestRenderThumbnails"],function(a){var b=this.hF.files;if(b[0])for(var c=function(a){for(var b=0;a;)b+=a.offsetTop,a=a.offsetParent;return b},d=this.eh.$.offsetHeight,e=this.eh.$.scrollTop,f=c(this.eh.$),g=this.app.config.thumbnailDelay,h=this.app.config.showContextMenuArrow?1:0,i=0,j=0,k=b.length;k>i;i++){var l=this.hF.files[i].aNode().getChild([h,0]);if(!l.$.style.backgroundImage){{var m=c(l.$);l.$.offsetHeight}if(d+e+f>m&&m>=e){var n=this.hF.files[i].getThumbnailUrl(!0);n&&function(){var a=l,b=n;setTimeout(function(){try{a.$.style.backgroundImage='url("'+b+'")'}catch(c){}},g*j++)}()}}}}),b.bh("RenderFiles",["requestRenderFiles"],function(b){var c,e,f=this.data(),g=b.data&&(!!b.data.ma||!!b.data.lK),h=b.data&&b.data.ma;if(l){if(b.data&&b.data.files){for(this.tools.kR(),e=0;e<b.data.files.length;e++)f.files[e]=b.data.files[e];c=f.files,g=1,this.data().folder=b.data.folder}var j=this.data().folder;if(!h||h==j){(g||!f.cP||f.pq)&&(f.cP={}),a.call(this);var k=j.type;if(this._.nV||(this.app.config["defaultViewType_"+k]&&(f.dA=this.app.config["defaultViewType_"+k]),this.app.config["defaultSortBy_"+k]&&(f.cN=this.app.config["defaultSortBy_"+k]),void 0!==this.app.config["defaultDisplayFilename_"+k]&&(f.display.filename=this.app.config["defaultDisplayFilename_"+k]),void 0!==this.app.config["defaultDisplayDate_"+k]&&(f.display.date=this.app.config["defaultDisplayDate_"+k]),void 0!==this.app.config["defaultDisplayFilesize_"+k]&&(f.display.filesize=this.app.config["defaultDisplayFilesize_"+k])),f.files.length)if("date"==f.cN&&f.cP.date)c=f.cP.date;else if("size"==f.cN&&f.cP.size)c=f.cP.size;else if("extension"==f.cN&&f.cP.extension)c=f.cP.extension;else if("filename"==f.cN&&f.cP.filename)c=f.cP.filename;else{d.log("[FILES VIEW] Sorting files");var m=f.files;for(c=[],e=0;e<m.length;e++)if(!m[e].isDeleted){var n=c.length;m[e].index=n,c[n]=m[e]}for(f.files.length=0,e=0;e<c.length;e++)f.files[e]=c[e];for(c=[],e=0;e<f.files.length;e++)c[e]=f.files[e],c[e].releaseDomNodes();var o=function(a,b){var c=a.name.toLowerCase(),d=b.name.toLowerCase();return d>c?-1:c>d?1:0};"date"==f.cN?(c.sort(function(a,b){return a.date>b.date?-1:a.date<b.date?1:0}),f.cP.date=c):"size"==f.cN?(c.sort(function(a,b){return a.size>b.size?-1:a.size<b.size?1:0}),f.cP.size=c):"extension"==f.cN?(c.sort(function(a,b){return a.ext>b.ext?1:a.ext<b.ext?-1:o(a,b)}),f.cP.extension=c):(c.sort(o),f.cP.filename=c)}else c=f.files;var p=i.extend({eu:1,dA:this.data().dA,display:this.data().display},b.data,{files:c},!0);if(this.oW("beforeRenderFiles",p,function(a,b){if(!a&&"t"==l.charAt(8)){w=d.bF.substr(7,1);try{for(var c=0;c<b.files.length;c++)b.files[c].releaseDomNodes();this.tools.cR(),this.oW("requestAddFiles",b,function(a){a||(f.hA=b.dA)}),this.oW("successRenderFiles",b),this.oW("afterRenderFiles",b)}catch(e){throw this.oW("failedRenderFiles",b),this.oW("afterRenderFiles",b),d.ba(e)}}}),this._.initialized)"thumbnails"==this.hF.dA&&this.oW("requestRenderThumbnails");else{var q=this.eh,r=this;q.on("scroll",function(){"thumbnails"==r.hF.dA&&this.oW("requestRenderThumbnails")},this),this.app.on("afterRepaintLayout",function(){"thumbnails"==r.hF.dA&&setTimeout(function(){r.oW("requestRenderThumbnails");

},0)}),this._.initialized=!0}}}}),b.dT.push(function(a,b){b=this,a.on("afterCommandExecDefered",function(a){if(a.data){var c,d=a.data.name;if("RenameFile"==d){var e=a.data.file,f=b.tools.oO().length>1;if(c=e&&e.folder,b.tools.currentFolder()!=c)return;b.oW("requestRenderFiles",{folder:c,lK:1},function(c){c||(e.deselect(!0),b.oW("requestSelectFile",{file:a.data.file,multiple:f},function(){c||e.focus(f)}))})}else if("RemoveFiles"==d){if(c=a.data.folder,b.tools.currentFolder()!=c)return;b.tools.cR(),b.bn().focus(),b.oW("requestRenderFiles",{folder:c,lK:1})}}})}),b.bh("SelectFile",["click","requestSelectFile"],function(a){var b=this.tools.bZ(a),c="click"==a.name,e=a.data&&a.data.multiple&&this.app.config.selectMultiple;if(l.length>>4){if(c&&a.data.db()>=d.bP&&(a.data.preventDefault(),e=(a.data.$.ctrlKey||a.data.$.metaKey)&&this.app.config.selectMultiple),c&&a.data.bK().hasClass("dropdown"))return a.jN.oW("contextmenu",a.data),void a.cancel();var f=i.extend({},a.data,{file:b},!0);this.oW("beforeSelectFile",f,function(a,b){var f=this;if(!a){var g=b.file;try{if(f.tools.dH()&&!e){for(var h=f.tools.oO(),i=0;i<h.length;i++)h[i].rowNode()&&h[i].rowNode().removeClass("selected");f.data().nY=[]}if(g&&e&&g.rowNode().hasClass("selected")&&f.tools.dH()){for(var h=f.tools.oO(),j=[],i=0;i<h.length;i++)h[i].isSameFile(g)?h[i].rowNode().removeClass("selected"):(h[i].rowNode().hasClass("selected")||h[i].rowNode().addClass("selected"),j.push(h[i]));f.data().nY=j,f.data().cG.isSameFile(g)&&(f.data().cG=f.data().nY[j.length-1]),c&&f.tools.cR(f.tools.dH(),!0,j.length>1)}else g?(g.rowNode().addClass("selected"),f.data().nY||(f.data().nY=[]),f.data().cG=g,f.data().nY.push(g),c&&f.tools.cR(g,e,e)):f.tools.dH()&&!e&&(f.data().cG=null,f.data().nY=[],f.tools.cR());f.oW("successSelectFile",b),f.oW("afterSelectFile",b)}catch(k){throw f.oW("failedSelectFile",b),f.oW("afterSelectFile",b),d.ba(k)}}})}}),b.bh("AddFiles",["requestAddFiles"],function(a){var b=i.extend({eu:0,view:"thumbnails",mj:null},a.data,{files:a.data.file?[a.data.file]:a.data.files},!0);this.oW("beforeAddFiles",b,function(a,b){if(!a)try{var c,f,h=this,j=h.bn(),k=h.data().hA,n=0;if(j.removeClass("files_message"),e()&&(b.files.length&&(b.mj=l),n=1),"list"==b.dA){this.data().kQ||(this.data().kQ=i.bind(this.tools.qc,this.tools)),j.removeClass("files_thumbnails"),j.addClass("files_details"),c=s(b.files,this.data().kQ),f=this.tools.fF();var o=this.tools.kj();if(k&&"list"!=k&&this.tools.lP().setHtml(""),g){if(o&&k&&"list"==k&&!b.eu&&(c=o.getHtml()+c),f&&f.remove(),c){var p=A[0]+this.tools.lz()+A[1]+c+A[2]+A[3];j.appendHtml(p)}this.tools.releaseDomNodes(["detailsContentNode","detailsRootNode"])}else c?b.eu?this.tools.fF().setHtml(this.tools.lz()+A[1]+c+A[2]):o.appendHtml(c):f.setHtml("")}else{j.removeClass("files_details"),j.addClass("files_thumbnails");var q=this.data().display;if(c=s(b.files,function(a){var b="r"+a.index,c=[];return c.push('<a id="',b),c.push('" class="file_entry" tabindex="-1" role="listiem presentation" href="javascript:void(0)" title="',i.htmlEncode(a.name).replace('"',"&quot;"),'" aria-labelledby="',b),c.push('_label" aria-describedby="',b,'_details" style="width: '+(h.app.config.thumbsWidth+10)+'px">'),c.push(y,'<div class="image"><div role="img" style="width: '+h.app.config.thumbsWidth+"px; height: "+h.app.config.thumbsHeight+'px"></div></div>'),q.filename&&c.push('<h5 id="',b,'_label">',i.htmlEncode(a.name),"</h5>"),c.push('<span id="'+b+'_details" class="details" role="list presentation">'),q.date&&c.push('<span role="listitem" class="extra">',a.dateF,"</span>"),q.filesize&&c.push('<span role="listitem" aria-label="Size">',i.formatSize(a.size,h.app.lang,!0),"</span>"),c.push("</span></a>"),c.join("")}),f=this.tools.lP(),k&&"list"==k){var r=this.tools.fF();r&&g?r.remove():r&&r.setHtml("")}b.eu?f.setHtml(c):f.appendHtml(c)}n||w&&!(d.bs.indexOf(w)%8<5)||(b.mj=m,n=1),(b.eu&&!c||n)&&b.mj&&(j.addClass("files_message"),this.tools.of().setHtml(b.mj)),w||n||f.setHtml(""),this.oW("successAddFiles"),this.oW("afterAddFiles")}catch(t){throw this.oW("failedAddFiles"),this.oW("afterAddFiles"),d.ba(t)}})}),b.bh("ShowFolderFiles",["requestShowFolderFiles"],function(a){var b=this,g=d.aG.bX["foldertree.foldertree"].tools.cq(a),h=i.extend({},a.data,{folder:g},!0);this.oW("beforeShowFolderFiles",h,function(g,h){if(!g){this.tools.dH()&&this.oW("requestSelectFile"),this.app.cS("refresh").bR(d.aY);try{var i,j=h.folder;if(!j.acl.folderView)throw b.app.msgDialog("",b.app.lang.Errors[103]),"[CKFINDER] No permissions to view folder.";a.data.ib=this,this.data().folder=j,b.tools.kR(),this.oW("requestRenderFiles",{eu:1,mj:b.app.lang.FilesLoading}),this.app.connector.sendCommand("GetFiles",i,function(a){if(b.app.cS("refresh").bR(d.aS),b.app.aV!=j)return b.oW("failedShowFolderFiles",h),void b.oW("afterShowFolderFiles",h);if(!(a.checkError()||e.toString().length<200)){b.tools.kR();for(var g,i=a.selectNodes("Connector/Files/File"),k=0;k<i.length;k++){var l=i[k].attributes.getNamedItem("date").value,m=i[k].attributes.getNamedItem("name").value,n=b.tools.rg(new d.aL.File(m,parseInt(i[k].attributes.getNamedItem("size").value,10),i[k].attributes.getNamedItem("thumb")?i[k].attributes.getNamedItem("thumb").value:!1,l,b.app.lB(l.substr(6,2),l.substr(4,2),l.substr(0,4),l.substr(8,2),l.substr(10,2)),j));h.mw&&m==h.mw&&(g=n)}b.oW("requestRenderFiles",{mj:b.app.lang.FilesEmpty}),g&&(b.app.oW("requestSelectFile",{file:g,scrollTo:1}),setTimeout(function(){g.aNode().$.scrollIntoView(1),b.app.layout.mB().getFirst().$.scrollIntoView(0)},f.opera?500:100)),b.oW("successShowFolderFiles",h),b.oW("afterShowFolderFiles",h),c(b)}},j.type,j)}catch(k){throw this.oW("failedShowFolderFiles",h),this.oW("afterShowFolderFiles",h),d.ba(k)}}})}),b.tools.bZ=function(a){var b,c=this,e=0;if(a.data&&a.data.file instanceof k?(a=a.data.file,e=1):a.data&&a.data.bK?(a=a.data.bK(),e=1):a instanceof h.bi&&(e=1),e){for(var f=a;!(!f||f.is("a")&&f.hasAttribute("id")||f.is("tr"))&&f!=c.ib.eh;)f=f.getParent();if(f){var g=f.dS();g&&(f.is("a")||f.is("tr"))&&(b=c.ib.data().files[f.dS().slice(1)])}}else"number"==typeof a?b=c.ib.data().files[a]:"String"==typeof a?b=c.ib.data().files[f.dS().slice(1)]:a.data&&a.data.file&&a.data.file instanceof d.aL.File?b=a.data.file:a.data&&a.data.files&&a.data.files.length&&a.data.files[0]&&a.data.files[0]instanceof d.aL.File?b=a.data.files[0]:a instanceof d.aL.File&&(b=a);return b},b.tools.kR=function(){var a=this.ib.data();a.files.length=0,a.cP={}},b.tools.oR=function(a,b){var c=(a.thumb,a.name),d=this.ib.app,e=c.match(d.rQ.jf);return e&&(e=e[0])&&d.rQ.jh.test(e)?d.fh+"images/icons/"+(b?"32":"16")+"/"+e.toLowerCase()+".gif":d.fh+"images/icons/"+(b?"32":"16")+"/default.icon.gif"},b.tools.rg=function(a){var b=this.ib.data().files,c=b.push(a);return a.index=--c,a.app=this.ib.app,a},b.tools.lP=function(a){var b=this;return b.jl||(b.jl=b.ib.bn().getChild(1)),b.jl},b.tools.kj=function(a){var b=this;if(void 0===b.iJ){var c=b.fF();b.iJ=c?v(u(c.$.childNodes,"tbody")):null}return b.iJ},b.tools.sn=function(a){var b=this;if(void 0===b.kT){var c=b.fF();b.kT=c?v(u(c.$.childNodes,"thead")):null}return b.kT},b.tools.fF=function(a){var b=this;return void 0===b.iO&&(b.iO=v(u(b.ib.bn().$.childNodes,"table"))),b.iO},b.tools.of=function(a){var b=this;return b.iF||(b.iF=b.ib.bn().getChild(0)),b.iF},b.tools.releaseDomNodes=function(a){var b=this;b.jl=void 0,b.iO=void 0,b.iJ=void 0,b.iF=void 0},b.tools.lz=function(){var a=this,b=a.ib.data().display,c=[];c.push('<td class="name">'+a.ib.app.lang.SetDisplayName+"</td>"),b.filesize&&c.push("<td>"+a.ib.app.lang.SetDisplaySize+"</td>"),b.date&&c.push("<td>"+a.ib.app.lang.SetDisplayDate+"</td>");var d=c.length-1;return d?c[d]='<td class="last">'+c[d].substr(4):c[d]='<td class="last '+c[d].substr(11),"<thead><tr><td>&nbsp;</td>"+c.join("")+"</tr></thead>"},b.tools.qc=function(a){var b=this.oR(a),c="r"+a.index,d=this.ib.data().display,e=[];e.push('<td class="name">'+z+'<a tabindex="-1">'+(d.filename?i.htmlEncode(a.name):"")+"</a></td>"),d.filesize&&e.push("<td>"+i.formatSize(a.size,this.ib.app.lang,!0)+"</td>"),d.date&&e.push("<td>"+a.dateF+"</td>");var f=e.length-1;return f?e[f]='<td class="last">'+e[f].substr(4):e[f]='<td class="last '+e[f].substr(11),'<tr id="'+c+'"><td class="image"><img src="'+b+'" alt="img alt" /></td>'+e.join("")+"</tr>"},b.tools.dH=function(){var a=this.ib.data();return a.cG?a.cG.isDeleted?a.cG=null:a.cG:void 0},b.tools.oO=function(a){var b=this.ib.data(),c=[];if(b.nY){for(var d=0;d<b.nY.length;d++)b.nY[d]&&!b.nY[d].isDeleted&&c.push(b.nY[d]);if(a){var e=c,f={},c=[];for(d=0;d<e.length;d++)e[d].name in f||(c.push(e[d]),f[e[d].name]=1)}}return b.nY=c},b.tools.currentFolder=function(){return this.ib.data().folder},b.tools.cR=function(a,b,c){var d=this;a?(d.iS?d.iS.blur():d.ib.bn().setAttribute("tabindex",-1),d.iS=a,a.focus(b,c)):(delete d.iS,d.ib.bn().setAttribute("tabindex",0))},b.tools.downloadFile=function(a,b){var c=a.getById("downloadIframe");c||(c=a.createElement("iframe"),c.setAttribute("id","downloadIframe"),c.setStyle("display","none"),a.bH().append(c)),c.setAttribute("src",b)}}function l(a,b,c,d,e,f){for(var g={},h=0,j=b.files,k=[b.destination],m=0,p=b.files.length;p>m;m++)b.destination!=j[m].folder&&(g["files["+h+"][name]"]=j[m].name,g["files["+h+"][type]"]=j[m].folder.type,g["files["+h+"][folder]"]=j[m].folder.getPath(),g["files["+h+"][options]"]=e&&e[m]||"",h++,c&&!d&&k.push(j[m].folder));if(d||(f||(f=function(){}),f=i.override(f,function(b){return function(){for(var c=a.aG["filesview.filesview"],d=c.tools.currentFolder(),e=0,f=k.length;f>e;e++)if(k[e]==d){a.oW("requestSelectFolder",{folder:d});break}return b}})),!h)return void(f&&f());var q=a.connector,r=0,s=c?"MoveFiles":"CopyFiles";q.sendCommandPost(s,null,g,function(e){var g,h,k,m=e.getErrorNumber(),p=[],s=[];for(g=0,h=j.length;h>g;g++)s.push(j[g]);if(m==q.ERROR_COPY_FAILED||m==q.ERROR_MOVE_FAILED){r=1;var t,u,v,w,x=e.selectNodes("Connector/Errors/Error"),y=parseInt(e.selectSingleNode("Connector/"+(c?"MoveFiles/@moved":"CopyFiles/@copied")).value,10),z=0,A=[];for(g=0,h=x.length;h>g;g++)for(t=x[g].getAttribute("code"),t==q.ERROR_ALREADYEXIST?z=1:A.push([x[g].getAttribute("name"),a.lang.Errors[t]]),u=0,v=s.length;v>u;u++)if((w=s[u])&&w.name==x[g].getAttribute("name")&&w.folder.getPath()==x[g].getAttribute("folder")&&w.folder.type==x[g].getAttribute("type")){x[g].getAttribute("code")==q.ERROR_ALREADYEXIST&&p.push(w),delete s[u];break}for(g=0,h=A.length;h>g;g++)A[g]=a.lang.FileError.replace("%s",A[g][0]).replace("%e",A[g][1]);y||z?A.length==s.length-y&&(k=a.lang.OperationCompletedErrors+" "+a.lang[c?"MovedFilesNumber":"CopiedFilesNumber"].replace("%s",y)+"<br /><br />",k+=a.lang[c?"MoveFailedList":"CopyFailedList"].replace("%s",o(A)),a.msgDialog("",k,f||null)):a.msgDialog("",a.lang.Errors[c?300:301]+"<br /><br />"+o(A),f||null);var B=n(a,s,b.fileCallback);if(z&&a.cg.openDialog("moveFileExists",function(d){var e=arguments.callee;k="",A.length&&(k+=a.lang.OperationCompletedErrors+" "),k+=y?a.lang[c?"MovedFilesNumber":"CopiedFilesNumber"].replace("%s",y):"",A.length&&(k+=(k?"<br /><br />":"")+a.lang[c?"MoveFailedList":"CopyFailedList"].replace("%s",o(A))),k&&(k+="<br /><br />");var g=a.lang.ErrorMsg.FileExists;g=g.replace("%s",p[0]),k+="<strong>"+g+"</strong>",d.show(),d.getContentElement("tab1","msg").getElement().setHtml(k),d.on("ok",function(g){g.removeListener();var h,j=d.getContentElement("tab1","option").getValue(),k=d.getContentElement("tab1","remember").getValue();switch(j){case"autorename":case"overwrite":h=[j];break;case"skip":return void(k?f&&f():(p.shift(),p.length&&setTimeout(function(){a.cg.openDialog("moveFileExists",e)},0)))}if(k)for(var m=1,n=p.length;n>m;m++)h.push(h[0]);l(a,i.extend({files:p},b),c,1,h,f)})}),d)return}else e.checkError()&&(r=1);if(r)return void(b.errorCallback&&b.errorCallback());var B=n(a,s,b.fileCallback);B?(k=a.lang.OperationCompletedSuccess+"<br />"+a.lang[c?"MovedFilesNumber":"CopiedFilesNumber"].replace("%s",B),a.msgDialog("",k,f||null)):f&&f()},b.destination.type,b.destination)}function n(a,b,c){for(var d,e=0,f=0,g=b.length;g>f;f++)(d=b[f])&&(e++,c&&c(a,d));return e}function o(a){return'<ul class="cke_files_list'+(a.length>3?" cke_files_list_many":"")+'"><li>'+a.join("</li><li>")+"</li></ul>"}function p(a,b){if(!a||0===a.length)throw new d.dU("name_empty",b.lang.ErrorMsg.pg);if(x.iz.test(a))throw new d.dU("name_invalid_chars",b.lang.ErrorMsg.oP);return!0}function q(a,b){for(var c={},d=b[0].folder,e=d.getPath(),f=0,g=b.length;g>f;f++)c["files["+f+"][name]"]=b[f].name,c["files["+f+"][type]"]=d.type,c["files["+f+"][folder]"]=e,a.oW("requestProcessingFile",{file:b[f]});a.connector.sendCommandPost("DeleteFiles",null,c,function(c){var e,f,g={};if(302==c.getErrorNumber()){var h=b.length-parseInt(c.selectSingleNode("Connector/DeleteFiles/@deleted").value,10);if(!h)return void c.checkError();var i=c.selectNodes("Connector/Errors/Error");for(e=0,f=i.length;f>e;e++)g[i[e].attributes.getNamedItem("name").value]=1;a.skippedFilesDialog(null,i)}else if(c.checkError())return;for(e=0,f=b.length;f>e;e++)g[b[e]]||(b[e].isDeleted=!0,b[e].releaseDomNodes());a.oW("afterCommandExecDefered",{name:"RemoveFiles",folder:d})},d.type,d)}function r(){i.extend(d.aL.Folder.prototype,{getFiles:function(a){var b=this,c=this.app;c.connector.sendCommand("GetFiles",{},function(e){for(var f=[],g=e.selectNodes("Connector/Files/File"),h=0;h<g.length;h++){var i=g[h].attributes.getNamedItem("date").value;f.push(new d.aL.File(g[h].attributes.getNamedItem("name").value,parseInt(g[h].attributes.getNamedItem("size").value,10),g[h].attributes.getNamedItem("thumb")?g[h].attributes.getNamedItem("thumb").value:!1,i,c.lB(i.substr(6,2),i.substr(4,2),i.substr(0,4),i.substr(8,2),i.substr(10,2)),b))}a&&a.call(b,f)},b.type,b)},showFiles:function(a){this.app.oW("requestShowFolderFiles",{folder:this,mw:a})}})}function s(a,b){if(!a)return void 0;for(var c=[],d=0;d<a.length;d++)c.push(b(a[d]));return c.join("")}function t(a,b){for(var c in a)if(void 0!==b(a[c]))return a[c];return void 0}function u(a,b,c){return t(a,function(a){return a.tagName&&a.tagName.toLowerCase()==b&&!c--?a:void 0})}function v(a){return a?new k(a):null}var w,x={fX:/[^\.]+$/,iz:/[\\\/:\*\?"<>\|]/},y='<span class="dropdown">▼</span>',z='<a href="javascript:void(0)" class="dropdown">▼</a>',A=["<table class='files_details' role='region' aria-controls='status_view'>","<tbody>","</tbody>","</table>"],B=["Node","message"];m.add("filesview",{bM:["foldertree"],onLoad:function(){r(),j(),d.dialog.add("moveFileExists",function(a){return{title:a.lang.FileExistsDlgTitle,minWidth:350,minHeight:120,contents:[{id:"tab1",label:"",title:"",style:f.ie7Compat?"height:auto":"",expand:!0,padding:0,elements:[{id:"msg",className:"cke_dialog_error_msg",type:"html",widths:["70%","30%"],html:""},{type:"hbox",className:"cke_dialog_file_exist_options",children:[{type:"radio",id:"option",label:a.lang.common.makeDecision,"default":"autorename",items:[[a.lang.FileAutorename,"autorename"],[a.lang.FileOverwrite,"overwrite"],[a.lang.common.skip,"skip"]]}]},{type:"hbox",className:"cke_dialog_remember_decision",children:[{type:"checkbox",id:"remember",label:a.lang.common.rememberDecision}]}]}],buttons:[CKFinder.dialog.okButton,CKFinder.dialog.cancelButton]}})},bz:function(a){var b=this;a.rQ.jh=new RegExp("^("+a.config.fileIcons+")$","i"),a.rQ.rO=/^(jpg|gif|png|bmp|jpeg)$/i,a.rQ.jf=x.fX,a.on("themeSpace",function(a){if("mainMiddle"==a.data.space){var b="";g||(b=A[0]+A[3]),a.data.html+="<div id='files_view' class='view widget files_thumbnails' aria-live='polite' role='main' tabindex='0' aria-controls='status_view'><h4 class='message_content'></h4><div class='files_thumbnails fake no_list' role='list'></div>"+b+"</div>"}}),a.on("uiReady",function(c){a.config.showContextMenuArrow||(y="",z="");var e=a.document.getById("files_view");e.hX();var f=d.aG.bz(a,"filesview",b,e);a.config.selectMultiple&&e.on("click",function(a){if(a.data.$.shiftKey){var b=f.tools.dH(),c=f.tools.bZ(a),d=!b;if(c){b&&(b.rowNode().$.offsetTop<c.rowNode().$.offsetTop?d=1:"list"!=f.data().dA&&b.rowNode().$.offsetTop==c.rowNode().$.offsetTop&&(d=b.rowNode().$.offsetLeft<c.rowNode().$.offsetLeft));for(var e,g=c.rowNode();(g=d?g.cf():g.dG())&&(e=f.tools.bZ(g),!b||!e.isSameFile(b));)e.select(!0);f.tools.cR(c,!0),a.cancel(),a.data.preventDefault()}}},null,null,1),a.bD("ViewFile",{exec:function(a){var b=f.data().cG;if(b){if(a.oW("launchGallery",{selected:b,files:f.data().files}).bx===!0)return;var c=.8*window.screen.width,d=.7*window.screen.height,e="menubar=no,location=no,status=no,toolbar=no,scrollbars=yes,resizable=yes";e+=",width="+c,e+=",height="+d,e+=",left="+(window.screen.width-c)/2,e+=",top="+(window.screen.height-d)/2;var g=a.cg.inPopup?a.document.getWindow().$.parent:window;g.open(b.folder.getUrl()+encodeURIComponent(b.name),"_blank",e)||a.msgDialog("",a.lang.ErrorMsg.oo)}}}),a.bD("DownloadFile",{exec:function(a){var b=f.data().cG;if(b){var c;c=a.config.directDownload?b.folder.getUrl()+b.name+"?download":a.connector.composeUrl("DownloadFile",{FileName:b.name},b.folder.type,b.folder),f.tools.downloadFile(a.document,c)}}}),a.bD("RenameFile",{readOnly:!1,exec:function(a){var b=function(b,e){try{c.rename(e)}catch(f){if(!(f instanceof d.dU))throw f;a.msgDialog("",f.message)}},c=f.data().cG;c&&c.folder.acl.fileRename&&a.hs(a.lang.RenameDlgTitle,a.lang.FileRename,c.name,function(d){if(d=i.trim(d)){var e=d.match(a.rQ.jf)[0];e.toLowerCase()!=c.ext.toLowerCase()?a.fe("",a.lang.FileRenameExt,function(){b(c,d)}):b(c,d)}})}}),a.bD("DeleteFile",{readOnly:!1,exec:function(a){var b=f.tools.oO(!0);b&&0!=b.length&&b[0].folder.acl.fileDelete&&a.fe("",1==b.length?a.lang.FileDelete.replace("%1",b[0].name):a.lang.FilesDelete.replace("%1",b.length),function(){q(a,b)})}}),a.bD("copyFilesToFolder",{readOnly:!1,exec:function(a,b){b.files||(b.files=f.tools.oO()),b.files.length&&b.destination&&b.destination.acl.fileUpload&&l(a,b,0,0,[],b.callback)}}),a.bD("moveFilesToFolder",{readOnly:!1,exec:function(a,b){b.files||(b.files=f.tools.oO()),b.files.length&&b.destination&&b.destination.acl.fileUpload&&b.files[0].folder.acl.fileDelete&&l(a,b,1,0,[],b.callback)}}),a.eU&&(a.dZ("file0",90),a.dZ("file1",100),a.dZ("file2",110),a.dZ("file3",120),a.eU({selectFile:{label:a.lang.Select,onClick:function(){var b=a.aG["filesview.filesview"],c=b.tools.dH();c&&b.oW("requestSelectAction",{file:c})},group:"file0"},nA:{label:a.lang.SelectThumbnail,onClick:function(){var b=a.aG["filesview.filesview"],c=b.tools.dH();c&&b.oW("requestSelectThumbnailAction",{file:c})},group:"file0"},viewFile:{label:a.lang.View,command:"ViewFile",group:"file1"},downloadFile:{label:a.lang.Download,command:"DownloadFile",group:"file1"},renameFile:{label:a.lang.Rename,command:"RenameFile",group:"file2"},deleteFile:{label:a.lang.Delete,command:"DeleteFile",group:"file3"},deleteFiles:{label:a.lang.DeleteFiles,command:"DeleteFile",group:"file3"}})),a.bj&&(a.bj.lX(e),a.bj.kh(function(b,c){var e=f.tools.bZ(b);if(e){e.rowNode().hasClass("selected")?f.data().cG=e:a.oW("requestSelectFile",{file:e});var g=e.folder.acl,h={viewFile:g.fileView?d.aS:d.aY,downloadFile:g.fileView?d.aS:d.aY};return a.config.readOnly||(h.renameFile=g.fileRename?d.aS:d.aY,h[f.tools.oO().length>1?"deleteFiles":"deleteFile"]=g.fileDelete?d.aS:d.aY),a.config.selectActionFunction&&(h.selectFile=g.fileView?d.aS:d.aY),e.isImage()&&!a.config.disableThumbnailSelection&&(a.config.selectThumbnailActionFunction||a.config.thumbsDirectAccess&&a.config.selectActionFunction)&&(h.nA=g.fileView?d.aS:d.aY),f.oW("beforeContextMenu",{bj:h,file:e,folder:f.data().folder}),h}},e))}),a.bD("filesviewFocus",{exec:function(a){var b=a.layout.pn(),c=a.aG["filesview.filesview"],d=c.tools.dH();b.focus(),d&&d.focus()}})}}),d.aL.File=function(a,b,c,d,e,f){var g=this;g.index=null,g.app=null,g.name=a,g.ext=a.match(x.fX)[0],g.nameL=a.toLowerCase(),g.size=b,g.thumb=c,g.date=d,g.dateF=e,g.folder=f,g.isDeleted=!1},d.aL.File.prototype={rename:function(a){p(a,this.app);var b=this;return b.name==a?void b.app.oW("afterCommandExecDefered",{name:"RenameFile",file:b}):(b.app.oW("requestProcessingFile",{file:b}),void b.app.connector.sendCommandPost("RenameFile",{fileName:b.name,newFileName:a},null,function(a){return a.checkError()?void b.app.oW("requestRepaintFile",{file:b}):(b.name=a.selectSingleNode("Connector/RenamedFile/@newName").value,b.nameL=b.name.toLowerCase(),b.ext=b.name.match(x.fX)[0],b.thumb=0,void b.app.oW("afterCommandExecDefered",{name:"RenameFile",file:b}))},b.folder.type,b.folder))},remove:function(){q(this.app,[this])},select:function(a){this.app.oW("requestSelectFile",{file:this,multiple:a})},deselect:function(a){a?this.select(!0):this.app.oW("requestSelectFile")},toString:function(){return this.name},isImage:function(){return this.app.rQ.rO.test(this.ext)},isSameFile:function(a){var b=this;return(b.name==a.name||b.index==a.index)&&b.folder.getPath()==a.folder.getPath()&&b.folder.type==a.folder.type},getUrl:function(){return this.folder.getUrl()+encodeURIComponent(this.name)},rowNode:function(){var a=this;return a.je||(a.je=a.app.document.getById("r"+a.index)),a.je},getThumbnailUrl:function(a){var b=this,c=b.thumb,d=b.name,e=b.app,g=d.match(e.rQ.jf);if(g&&(g=g[0])){if(e.config.thumbsEnabled&&e.rQ.rO.test(g)){var h=encodeURIComponent(b.date+"-"+b.size);if(c&&e.config.thumbsDirectAccess)return e.config.thumbsUrl+b.folder.type+b.folder.getPath()+encodeURIComponent(d)+(a?"?hash="+e.getResourceType(b.folder.type).hash+"&fileHash="+h:"");var i={FileName:d};return a&&(i.fileHash=h),e.connector.composeUrl("Thumbnail",i,b.folder.type,b.folder)}if(e.config.useNativeIcons&&f.gecko)return"moz-icon://."+g.toLowerCase()+"?size=32";if(e.rQ.jh.test(g))return e.fh+"images/icons/32/"+g.toLowerCase()+".gif"}return e.fh+"images/icons/32/default.icon.gif"},filenameNode:function(){var a=this;if(void 0===a.ht){var b=a.rowNode();b&&(b.is("a")?a.ht=v(u(b.$.childNodes,"h5")):a.ht=v(u(a.aNode().$.childNodes,"h5")))}return a.ht},aNode:function(){var a=this;if(void 0===a.dM){var b=a.rowNode();if(b)if(b.is("a"))a.dM=b;else{var c=u(b.$.childNodes,"td",1);a.dM=v(u(c.childNodes,"a"))}}return a.dM},focusNode:function(){return this.aNode()},releaseDomNodes:function(){this.je=void 0,this.dM=void 0,this.ht=void 0},focus:function(a,b){!b&&this.select(a);var c=this.focusNode();c.setAttribute("tabindex",0),c.focus()},blur:function(){this.aNode().setAttribute("tabindex",-1)}}}(),function(){function a(a,b){var c=[];if(!b)return a;for(var d in b)c.push(d+"="+encodeURIComponent(b[d]));return a+(-1!=a.indexOf("?")?"&":"?")+c.join("&")}function b(a){var b=this,c=b.getDialog(),d=c.getParentApi();return d._.rb=b,c.getContentElement(b["for"][0],b["for"][1]).getInputElement().$.value&&c.getContentElement(b["for"][0],b["for"][1]).vy()?!0:!1}function c(b,c,d){var e=d.params||{};d.url&&(e.CKFinderFuncNum=b._.ra,e.langCode||(e.langCode=b.langCode),c.action=a(d.url,e),c.filebrowser=d)}function e(d,f,g,h){var i;for(var j in h)if(i=h[j],("hbox"==i.type||"vbox"==i.type)&&e(d,f,g,i.children),i.filebrowser&&"fileButton"==i.type&&i["for"]){if("string"==typeof i.filebrowser){var k={target:i.filebrowser};i.filebrowser=k}i.filebrowser.action="QuickUpload";var l=i.filebrowser.url;if(l)i.filebrowser.url=l,i.hidden=!1,c(d,g.vz(i["for"][0]).eB(i["for"][1]),i.filebrowser);else{var m=i.onShow;i.onShow=function(b){var c=b.jN;if(m&&m.call(c,b)===!1)return!1;var e=d.getSelectedFolder();if(e&&(l=e.getUploadUrl()),!l)return!1;var f=i.filebrowser.params||{};f.CKFinderFuncNum=d._.ra,f.langCode||(f.langCode=d.langCode),l=a(l,f);var g=this.getDialog().getContentElement(i["for"][0],i["for"][1]);return g?(g._.dg.action=l,g.reset(),!0):!1}}var n=i.onClick;i.onClick=function(a){var c=a.jN;return n&&n.call(c,a)===!1?!1:b.call(c,a)}}}function f(a,b){var c=b.getDialog(),d=b.filebrowser.target||"";if(d){var e=d.split(":"),f=c.getContentElement(e[0],e[1]);f&&(f.setValue(a),c.selectPage(e[0]))}}function g(a,b,c){if(-1!==c.indexOf(";")){for(var d=c.split(";"),e=0;e<d.length;e++)if(g(a,b,d[e]))return!0;return!1}var f=a.vz(b).eB(c).filebrowser;return f&&f.url}function h(a,b){var c=this,d=c._.rb.getDialog(),e=c._.rb["for"],g=c._.rb.filebrowser.onSelect;e&&d.getContentElement(e[0],e[1]).reset(),("function"!=typeof b||b.call(c._.rb)!==!1)&&(g&&g.call(c._.rb,a,b)===!1||("string"==typeof b&&b&&alert(b),a&&f(a,c._.rb)))}m.add("filebrowser",{bz:function(a){a.cg._.ra=i.addFunction(h,a.cg)}}),d.on("dialogDefinition",function(a){var b,c=a.data.dg;for(var d in c.contents)b=c.contents[d],e(a.application.cg,a.data.name,c,b.elements),b.hidden&&b.filebrowser&&(b.hidden=!g(c,b.id,b.filebrowser))})}(),m.add("button",{eK:function(a){a.bY.kd(d.UI_BUTTON,n.button.dq)}}),CKFinder._.UI_BUTTON=d.UI_BUTTON=1,n.button=function(a){i.extend(this,a,{title:a.label,className:a.className||a.command&&"cke_button_"+a.command||"",click:a.click||function(b){a.command?b.execCommand(a.command):a.onClick&&a.onClick(b)}}),this._={}},n.button.dq={create:function(a){return new n.button(a)}},n.button.prototype={canGroup:!0,er:function(a,b){var c=f,e=this._.id="cke_"+i.getNextNumber();this._.app=a;var g={id:e,button:this,app:a,focus:function(){var b=a.document.getById(e);b&&b.focus()},lc:function(){this.button.click(a)}},h=i.addFunction(g.lc,g),j=n.button._.instances.push(g)-1,k="",l=this.command;if(this.iH?a.on("mode",function(){this.bR(this.iH[a.mode]?d.aS:d.aY)},this):l&&(l=a.cS(l),l&&(l.on("bu",function(){this.bR(l.bu)},this),k+="cke_"+(l.bu==d.eV?"on":l.bu==d.aY?"disabled":"off"))),l||(k+="cke_off"),this.className&&(k+=" "+this.className),b.push('<span class="cke_button">','<a id="',e,'" class="',k,'" href="javascript:void(\'',(this.title||"").replace("'",""),'\')" title="',this.title,'" tabindex="-1" hidefocus="true" role="button" aria-labelledby="'+e+'_label"'+(this.vZ?' aria-haspopup="true"':"")),(c.opera||c.gecko&&c.mac)&&b.push(' onkeypress="return false;"'),c.gecko&&b.push(' onblur="this.style.cssText = this.style.cssText;"'),b.push(' onkeydown="window.parent.CKFinder._.uiButtonKeydown(',j,', event);" onfocus="window.parent.CKFinder._.uiButtonFocus(',j,', event);" onclick="window.parent.CKFinder._.callFunction(',h,', this); return false;">'),this.icon!==!1&&b.push('<span class="cke_icon"'),this.icon){var m=-16*(this.rD||0);b.push(' style="background-image:url(',d.getUrl(this.icon),");background-position:0 "+m+'px;"')}return this.icon!==!1&&b.push("></span>"),b.push('<span id="',e,'_label" class="cke_label">',this.label,"</span>"),this.vZ&&b.push('<span class="cke_buttonarrow"></span>'),b.push("</a>","</span>"),this.onRender&&this.onRender(),g},bR:function(a){var b=this;if(b._.bu==a)return!1;b._.bu=a;var c=b._.app.document.getById(b._.id);if(c){c.bR(a),a==d.aY?c.setAttribute("aria-disabled",!0):c.removeAttribute("aria-disabled"),a==d.eV?c.setAttribute("aria-pressed",!0):c.removeAttribute("aria-pressed");var e=b.title,f=b._.app.lang.common.unavailable,g=c.getChild(1);return a==d.aY&&(e=f.replace("%1",b.title)),g.setHtml(e),!0}return!1}},n.button._={instances:[],keydown:function(a,b){var c=n.button._.instances[a];return c.onkey?(b=new h.event(b),c.onkey(c,b.db())!==!1):void 0},focus:function(a,b){var c,d=n.button._.instances[a];return d.onfocus&&(c=d.onfocus(d,new h.event(b))!==!1),f.gecko&&f.version<10900&&b.preventBubble(),c}},CKFinder._.uiButtonKeydown=n.button._.keydown,CKFinder._.uiButtonFocus=n.button._.focus,n.prototype.qW=function(a,b){this.add(a,d.UI_BUTTON,b)},function(){m.add("container",{bM:[],bz:function(a){var b=this;a.on("themeAvailable",function(){b.pV(a)})},pV:function(a){function b(b){b&&b.removeListener();var c=o.getFrameDocument().$;if(c.open(),m&&(c.domain=document.domain),a.document=new j(c),a.theme.dQ(a),c.close(),(c.defaultView||c.parentWindow).CKFinder=CKFinder,d.skins.load(a,"application",function(){var b=a.dJ;b&&b.oA(a.document)}),!o.isVisible()&&g&&f.version>=8)var e=setInterval(function(){o.isVisible()&&(a.layout.ea(!0),e=clearInterval(e))},500)}var c=a.config.height,e=a.config.tabIndex||a.element.getAttribute("tabindex")||0;isNaN(c)||(c=Math.max(c,200),c+="px");var h="",i=a.config.width;i&&(isNaN(i)||(i+="px"),h+="width: "+i+";");var l=a.config.className?'class="'+a.config.className+'"':"",m=f.isCustomDomain(),n="document.open();"+(m?'document.domain="'+window.document.domain+'";':"")+"document.close();",o=k.kE('<iframe style="'+h+"height:"+c+'"'+l+' frameBorder="0" src="'+(g?"javascript:void(function(){"+encodeURIComponent(n)+"}())":"")+'" tabIndex="'+e+'" allowTransparency="true"'+(g&&f.version>=9&&a.cg.inPopup?' onload="typeof ckfinder !== "undefined" && ckfinder();"':"")+"></iframe>",a.element.getDocument());g&&f.version>=9&&a.cg.inPopup&&(a.element.getDocument().getWindow().$.ckfinder=function(){a.element.getDocument().getWindow().$.ckfinder=void 0,b()}),o.on("load",b);var p=a.lang.appTitle.replace("%1",a.name);f.gecko?(o.on("load",function(a){a.removeListener()}),a.element.setAttributes({role:"region",title:p}),o.setAttributes({role:"region",title:" "})):f.webkit?(o.setAttribute("title",p),o.setAttribute("name",p)):g&&o.appendTo(a.element),g||a.element.append(o),a.container=o}}),d.application.prototype.focus=function(){var a=this;if(a._.oO&&a._.oO.length>1){a.oW("requestSelectFile");for(var b=0,c=a._.oO.length;c>b;b++)a.oW("requestSelectFile",{file:a._.oO[b],multiple:!0})}(a._.activeElement?k.eB(a._.activeElement):a.document.getWindow()).focus()}}(),m.add("contextmenu",{bM:["menu"],eK:function(a){a.bj=new m.bj(a),a.bD("bj",{exec:function(){var b,c,d,e=a.layout.pn();if(e.hasClass("focus_inside")){d=a.aG["filesview.filesview"];var f=d.tools.dH();if(f)return b=f.dM,c=b.ir(),a.bj.show(a.document.bH().getParent(),null,c.x+5,c.y+5,b,e),a._.activeElement=b,void(a._.oO=d.tools.oO())}if(e=a.layout.pS(),e.hasClass("focus_inside")){d=a.aG["foldertree.foldertree"];var g=d.tools.ew;if(g)return b=g.dM,c=b.ir(),a.bj.show(a.document.bH().getParent(),null,c.x+5,c.y+5,b,e),a._.activeElement=b,void(a._.oO=[])}}})}}),m.bj=i.createClass({$:function(a){this.id="cke_"+i.getNextNumber(),this.app=a,this._.dF=[],this._.vx=i.addFunction(function(b){this._.panel.hide(),a.focus&&a.focus()},this)},_:{onMenu:function(a,b,c,e,f,h){var j=this._.menu,k=this.app;j?(j.hide(),j.ih()):(j=this._.menu=new d.menu(k),j.onClick=i.bind(function(a){var b=!0;j.hide(),g&&k.focus&&k.focus(),a.onClick?a.onClick():a.command&&k.execCommand(a.command),b=!1},this)),j.onEscape=function(){k.focus&&k.focus(),f.focus&&f.focus(),k._.activeElement=null};var l=this._.dF;j.onHide=i.bind(function(){j.onHide=null,this.onHide&&this.onHide()},this);for(var m=0;m<l.length;m++){var n=l[m];if(!n[1]||n[1].$==h.$){var o=l[m][0](f);if(o)for(var p in o){var q=this.app.mh(p);q&&(q.bu=o[p],j.add(q))}}}j.items.length&&j.show(a,b||("rtl"==k.lang.dir?2:1),c,e)}},ej:{lX:function(a,b){if(f.opera&&!("oncontextmenu"in document.body)){var c;a.on("mousedown",function(e){if(e=e.data,2!=e.$.button)return void(e.db()==d.bP+1&&a.oW("contextmenu",e));if(!b||!e.$.ctrlKey&&!e.$.metaKey){var f=e.bK();if(!c){var g=f.getDocument();c=g.createElement("input"),c.$.type="button",g.bH().append(c)}c.setAttribute("style","position:absolute;top:"+(e.$.clientY-2)+"px;left:"+(e.$.clientX-2)+"px;width:5px;height:5px;opacity:0.01")}}),a.on("mouseup",function(b){c&&(c.remove(),c=void 0,a.oW("contextmenu",b.data))})}if(a.on("contextmenu",function(c){var d=c.data;if(!b||!(f.webkit?e:d.$.ctrlKey||d.$.metaKey)){d.preventDefault();var g=d.bK(),h=d.bK().getDocument().gT(),j=d.$.clientX,k=d.$.clientY;i.setTimeout(function(){this._.onMenu(h,null,j,k,g,a)},0,this)}},this),f.opera&&a.on("keypress",function(a){var b=a.data;0===b.$.keyCode&&b.preventDefault()}),f.webkit){var e,g=function(a){e=a.data.$.ctrlKey||a.data.$.metaKey},h=function(){e=0};a.on("keydown",g),a.on("keyup",h),a.on("contextmenu",h)}},kh:function(a,b){this._.dF.push([a,b])},show:function(a,b,c,e,f,g){this.app.focus(),this._.onMenu(a||d.document.gT(),b,c||0,e||0,f,g)}}}),function(){function a(a){var b=this;b.jr=null,b.kP=null,b.nK=null,b.app=a}function b(a,b){for(var c=!0,d=b[0].ext.toLowerCase(),e=1,f=b.length;f>e;e++)if(b[e].ext.toLowerCase()!=d){
c=!1;break}return'<div style="background-image: url('+(c?a.tools.oR(b[0],!0):a.app.fh+"images/icons/32/default.icon.gif")+')"><span>'+b.length+"</span></div>"}m.add("dragdrop",{bM:["foldertree","filesview","contextmenu","dialog"],readOnly:!1,gr:function(c){c.cK=new a(c);var e,f;c.on("themeSpace",function(a){"mainBottom"==a.data.space&&(a.data.html+='<div id="dragged_container" style="display: none; position: absolute;"></div>')}),c.on("uiReady",function(a){c.document.on("dragstart",function(a){a.data.preventDefault(!0)}),c.document.on("drag",function(a){a.data.preventDefault(!0)});c.aG["filesview.filesview"].gA("Draggable"),c.aG["foldertree.foldertree"].ke("Droppable")}),d.aG.bX["filesview.filesview"].bh("Draggable",["mousedown"],function(a){var d=this,f=d.tools.bZ(a),g=d.tools.oO(!0);if(f&&a.data.ov()){a.data.preventDefault(),f.rowNode().hasClass("selected")||((a.data.$.ctrlKey||a.data.$.metaKey)&&c.config.selectMultiple?g.push(f):g=[f]);var h=i.extend({},{file:f,files:g,step:1},!0);d.oW("beforeDraggable",h,function(a,h){function i(a){if(e.setStyles({left:a.data.$.clientX-("rtl"==c.lang.dir?e.hR("width"):-1)+"px",top:a.data.$.clientY+"px"}),0===l&&(l=a.data.$.clientY+a.data.$.clientX),!(m||Math.abs(a.data.$.clientY+a.data.$.clientX-l)<20)){d.app.cK.kG(k),d.app.cK.kz(g);for(var f=0,i=g.length;i>f;f++)g[f].rowNode().addClass("dragged_source");1==g.length?(e.setStyle("width",k.rd("width")),e.addClass("file_entry")):e.addClass("drag_multiple"),e.show();var j;1==g.length?(j=k.getHtml(),j=j.replace(/url\(&quot;(.+?)&quot;\);?"/,'url($1);"'),j=j.replace(/url\(([^'].+?[^'])\);?"/,"url('$1');\"")):j=b(d,g),e.setHtml(j),m=1,d.app.document.bH().addClass("dragging"),d.app.aG["foldertree.foldertree"].gA("Droppable"),h.step=1,d.oW("successDraggable",h)}}function j(a){e.hide(),e.removeClass("drag_multiple"),e.removeClass("file_entry"),e.setStyle("width","auto"),e.setHtml("");for(var b=0,f=g.length;f>b;b++)g[b].rowNode().removeClass("dragged_source");d.app.cK.kG(null),d.app.cK.kz(null),c.document.removeListener("mousemove",i),a?a.removeListener():c.document.removeListener("mouseup",j),d.app.aG["foldertree.foldertree"].ke("Droppable"),d.app.document.bH().removeClass("dragging"),h.step=2,d.oW("successDraggable",h),d.oW("afterDraggable",h)}if(!a){var k=f.rowNode(),l=0,m=0;e=e||c.document.getById("dragged_container"),e.hide(),c.document.on("mousemove",i),c.document.on("mouseup",j,999);var n=c.document.bH().$;c.document.on("mouseout",function(a){c.cK.qp()&&a.data.bK().$==n&&j()})}})}}),d.aG.bX["foldertree.foldertree"].bh("Droppable",["mouseup","mouseover","mouseout"],function(a){var b=a.data.bK(),e=this,g=a.name,h=!!e.app.cK.qp();if(h&&!b.is("ul")){var j=e.tools.cq(b);if(j)if("mouseup"==g){e.app.cK.iW(0),e.app.cK.nz(j);var k=e.app.cK.pe(),l=i.extend({},{target:j,source:k},!0);e.oW("beforeDroppable",l,function(a,b){if(!a)try{var g=b.target,h=b.source,j=new d.iD(e.app,"copyFilesToFolderDrop",{label:e.app.lang.CopyDragDrop,bu:g!=h[0].folder&&g.acl.fileUpload?d.aS:d.aY,onClick:function(){e.oW("successDroppable",{hH:h,hC:g,step:2}),e.app.execCommand("copyFilesToFolder",{files:h,destination:g,callback:function(){e.oW("successDroppable",{hH:h,hC:g,step:3}),e.oW("afterDroppable",b)},errorCallback:function(){e.oW("failedDroppable",b),e.oW("afterDroppable",b)}})}}),k=window.top[d.nd+"cation"][d.jG+"st"],l=new d.iD(e.app,"moveFilesToFolderDrop",{label:e.app.lang.MoveDragDrop,bu:g!=h[0].folder&&g.acl.fileUpload&&h[0].folder.acl.fileDelete?d.aS:d.aY,onClick:function(){e.oW("successDroppable",{hH:h,hC:g,step:2}),d.bF&&1==d.bs.indexOf(d.bF.substr(1,1))%5&&d.lS(k)!=d.lS(d.ed)||d.bF&&d.bF.substr(3,1)!=d.bs.substr(9*(d.bs.indexOf(d.bF.substr(0,1))+d.bs.indexOf(d.bF.substr(2,1)))%(d.bs.length-1),1)?e.app.msgDialog("","This function is disabled in the demo version of CKFinder.<br />Please visit the <a href='http://ckfinder.com'>CKFinder web site</a> to obtain a valid license."):e.app.execCommand("moveFilesToFolder",{files:h,destination:g,callback:function(){e.oW("successDroppable",{hH:h,hC:g,step:3}),e.oW("afterDroppable",b)},errorCallback:function(){e.oW("failedDroppable",b),e.oW("afterDroppable",b)}})}}),m={copyFilesToFolder:j,moveFilesToFolder:l};e.oW("beforeDropMenu",{iG:m,folder:g}),f||(f=new d.menu(e.app),f.onClick=i.bind(function(a){var b=!0;f.hide(),a.onClick?a.onClick():a.command&&c.execCommand(a.command),b=!1},this)),f.ih();for(var n in m)m.hasOwnProperty(n)&&f.add(m[n]);f.items.length&&f.show(g.aNode(),"rtl"==c.lang.dir?2:1,0,g.aNode().$.offsetHeight),e.oW("successDroppable",{hH:h,hC:g,step:1})}catch(o){throw o=d.ba(o),e.oW("failedDroppable",b),e.oW("afterDroppable",b),o}})}else"mouseover"==g?e.app.cK.fZ||e.app.cK.iW(j.liNode()):"mouseout"==g&&e.app.cK.fZ&&e.app.cK.iW(0)}})}}),a.prototype={iW:function(a){var b=this,c=!!a;c&&!b.fZ?(b.app.document.bH().addClass("drop_accepted"),a.addClass("drop_target")):!c&&b.fZ&&(b.app.document.bH().removeClass("drop_accepted"),b.fZ.removeClass("drop_target")),b.fZ=c?a:null},kG:function(a){this.jr=a,this.jr instanceof k&&this.jr.focus()},vE:function(){return this.jr},kz:function(a){this.kP=a},pe:function(){return this.kP},qp:function(){return!!this.jr},nz:function(a){this.nK=a},oa:function(){return this.nK}}}(),m.add("floatpanel",{bM:["panel"]}),function(){function a(a,c,d,e,f){var g=c.iY()+"-"+d.iY()+"-"+a.gd+"-"+a.lang.dir+(a.uiColor&&"-"+a.uiColor||"")+(e.css&&"-"+e.css||"")+(f&&"-"+f||""),h=b[g];return h||(h=b[g]=new n.panel(c,e,a.gd),h.element=d.append(k.kE(h.nt(a),d.getDocument())),h.element.setStyles({display:"none",position:"absolute"})),h}var b={},c=!1;n.pY=i.createClass({$:function(b,c,d,e){d.lE=!0;var f=c.getDocument(),g=a(b,f,c,d,e||0),h=g.element,i=h.getFirst().getFirst();this.element=h,b.ia?b.ia.push(h):b.ia=[h],this._={panel:g,parentElement:c,dg:d,document:f,iframe:i,children:[],dir:b.lang.dir}},ej:{qq:function(a,b){return this._.panel.qq(a,b)},re:function(a,b){return this._.panel.re(a,b)},iv:function(a){return this._.panel.iv(a)},gf:function(a,b,e,j,k){var l=this._.panel,m=l.gf(a);this.fj(!1),c=!0;var n=this.element,o=this._.iframe,p=this._.dg,q=b.ir(n.getDocument()),r="rtl"==this._.dir,s=q.x+(j||0),t=q.y+(k||0);if(!r||1!=e&&4!=e?r||2!=e&&3!=e||(s+=b.$.offsetWidth-1):s+=b.$.offsetWidth,(3==e||4==e)&&(t+=b.$.offsetHeight-1),this._.panel._.nr=b.dS(),n.setStyles({top:t+"px",left:"-3000px",visibility:"hidden",opacity:"0",display:""}),n.getFirst().removeStyle("width"),!this._.qa){var u=g?o:new h.window(o.$.contentWindow);d.event.jP=!0,u.on("blur",function(a){if(!g||this.fj()){var b=a.data.bK(),d=b.getWindow&&b.getWindow();d&&d.equals(u)||!this.visible||this._.gF||c||(f.webkit&&f.isMobile?i.setTimeout(function(){this.hide()},500,this):this.hide())}},this),u.on("focus",function(){this._.lG=!0,this.gU(),this.fj(!0)},this),d.event.jP=!1,this._.qa=1}l.onEscape=i.bind(function(){this.onEscape&&this.onEscape()},this),i.setTimeout(function(){function a(){var a=n.getFirst(),b=0,c=m.element.$;(f.gecko||f.opera)&&(c=c.parentNode);var d=c.scrollWidth;if(g&&f.version<10){c=c.document.body;for(var e=c.getElementsByTagName("a"),h=0;h<e.length;h++){var i=e[h].children[1],j=i.scrollWidth+i.offsetLeft-d;j>0&&j>b&&(b=j)}}d+=b,g&&f.quirks&&d>0&&(d+=(a.$.offsetWidth||0)-(a.$.clientWidth||0)),d+=4,a.setStyle("width",d+"px"),m.element.addClass("cke_frameLoaded");var k=m.element.$.scrollHeight;g&&f.quirks&&k>0&&(k+=(a.$.offsetHeight||0)-(a.$.clientHeight||0)),a.setStyle("height",k+"px"),l._.iL.element.setStyle("display","none").removeStyle("display")}r&&(s-=n.$.offsetWidth),n.setStyles({left:s+"px",visibility:"",opacity:"1"});var b=n.getFirst();m.oz?l.hm?a():l.onLoad=a:b.removeStyle("height");var c=l.element,d=c.getWindow(),e=d.hV(),h=d.eR(),j={height:c.$.offsetHeight,width:c.$.offsetWidth};(r?0>s:s+j.width>h.width+e.x)&&(s+=j.width*(r?1:-1)),t+j.height>h.height+e.y&&(t-=j.height),n.setStyles({top:t+"px",left:s+"px",opacity:"1"}),i.setTimeout(function(){if(p.ny&&f.gecko){var a=o.getParent();a.setAttribute("role","region"),a.setAttribute("title",p.ny),o.setAttribute("role","region"),o.setAttribute("title"," ")}g&&f.quirks?o.focus():o.$.contentWindow.focus(),g&&!f.quirks&&this.fj(!0)},0,this)},0,this),this.visible=1,this.onShow&&this.onShow.call(this),(f.ie7Compat||f.ie8&&f.ie6Compat)&&i.setTimeout(function(){this._.parentElement.$.style.cssText+=""},0,this),c=!1},hide:function(){var a=this;!a.visible||a.onHide&&a.onHide.call(a)===!0||(a.gU(),a.element.setStyle("display","none"),a.visible=0)},fj:function(a){var b=this._.panel;return void 0!=a&&(b.fj=a),b.fj},rA:function(a,b,c,d,e,g){(this._.gF!=a||a._.panel._.nr!=c.dS())&&(this.gU(),a.onHide=i.bind(function(){i.setTimeout(function(){this._.lG||this.hide()},0,this)},this),this._.gF=a,this._.lG=!1,a.gf(b,c,d,e,g),(f.ie7Compat||f.ie8&&f.ie6Compat)&&setTimeout(function(){a.element.getChild(0).$.style.cssText+=""},100))},gU:function(){var a=this._.gF;a&&(delete a.onHide,delete this._.gF,a.hide())}}})}(),function(){function a(){var a=d.aG.hS("formpanel","formpanel",{dc:null});a.dT.push(function(){i.mH(this.bn())}),a.bh("UnloadForm",["submit","requestUnloadForm"],function(a){("submit"!=a.name||this.data().gM)&&(a.result=this.oW("beforeUnloadForm",function(a,b){var c=this;if(!a)try{if(c.bn().getParent().setStyle("display","none"),c.app.layout.ea(!0),c.data().dc){var e=c.app.cS(c.data().dc);e&&e.bR(d.aS),c.data().dc=null}var f=c.tools.ij();f&&(f.mF(),f.remove()),c.tools.releaseDomNodes(),c.oW("successUnloadForm",b)}catch(g){throw c.oW("failedUnloadForm",b),c.oW("afterUnloadForm",b),d.ba(g)}}))}),a.bh("LoadForm",["requestLoadForm"],function(a){var b=this,c=i.extend({html:null,dq:null,cC:null,cancelSubmit:1,gM:1,command:null},a.data,!0);a.result=this.oW("beforeLoadForm",c,function(a,c){if(!a){try{var f=this.bn();f.setHtml(c.html),f.getParent().removeStyle("display"),this.app.layout.ea(!0);var g=this.tools.ij();if(g){if(c.dq)if(c.cC)for(var h in c.cC)g.on(c.cC[h],c.dq);else g.on("submit",c.dq);c.cancelSubmit&&g.on("submit",e);for(var i=g.eG("input"),h=0;h<i.count();h++)if("cancel"==i.getItem(h).getAttribute("name")){i.getItem(h).on("click",function(a){b.oW("requestUnloadForm"),a.removeListener()});break}c.cancelSubmit&&g.on("submit",e)}if(this.data().gM=c.gM,c.command){var j=this.app.cS(c.command);j&&j.bR(d.eV),this.data().dc=c.command}this.oW("successLoadForm",c)}catch(k){throw this.oW("failedLoadForm",c),d.ba(k)}this.oW("afterLoadForm",c)}})}),a.bh("FilesViewSettingsForm",["requestFilesViewSettingsForm"],function(a){a.result=this.oW("beforeFilesViewSettingsForm",{},function(a,e){if(!a)try{if("settings"==this.data().dc)this.oW("requestUnloadForm",function(){this.oW("successFilesViewSettingsForm",e),this.oW("afterFilesViewSettingsForm",e)});else{this.data().dc&&this.oW("requestUnloadForm");var f=this.app.aG["filesview.filesview"].data(),g=c(this.app.lang,f.dA,f.display,f.cN);this.oW("requestLoadForm",{html:g,dq:i.bind(b,this),cC:["click","submit"],command:"settings"},function(){this.eh.addClass("show_border"),this.app.cg.resizeFormPanel(),this.oW("successFilesViewSettingsForm",e)})}}catch(h){throw this.oW("failedFilesViewSettingsForm",e),this.oW("afterFilesViewSettingsForm",e),d.ba(h)}})}),a.tools={ij:function(){var a=this;return void 0===a.iP&&a.ib.bn().$.childNodes.length&&(a.iP=h(g(a.ib.bn().$.childNodes,"form"))),a.iP},releaseDomNodes:function(){delete this.iP}}}function b(a){if("submit"==a.name){var b=this.app.aG["formpanel.formpanel"],c=b.data();return this.oW("requestUnloadForm"),void this.oW("afterFilesViewSettingsForm",c)}var d=a.data.bK(),e=d.getAttribute("name"),f=d.getAttribute("value"),g=d.$.checked;"input"==d.getName()&&i.setTimeout(function(){var a=this.app.aG["filesview.filesview"],b=a.data(),c={dA:b.dA,cN:b.cN,display:CKFinder.tools.clone(b.display)};if("sortby"==e)b.cN=f;else if("view_type"==e){b.dA=f;var d=this.app.document.getById("fs_display_filename");"list"==f?(b.display.filename=!0,d.$.checked=!0,d.$.disabled=!0):d.$.disabled=!1}else"display_filename"==e?"list"!=b.dA&&(b.display.filename=!!g):"display_date"==e?b.display.date=!!g:"display_filesize"==e&&(b.display.filesize=!!g);var h=("list"==b.dA?"L":"T")+("size"==b.cN?"S":"date"==b.cN?"D":"extension"==b.cN?"E":"N")+(b.display.filename?"N":"_")+(b.display.date?"D":"_")+(b.display.filesize?"S":"_");i.setCookie("CKFinder_Settings",h,!1),(c.display.filename!=b.display.filename||c.display.date!=b.display.date||c.display.filesize!=b.display.filesize||c.cN!=b.cN||c.dA!=b.dA)&&a.oW("requestRenderFiles",{mj:a.app.lang.FilesEmpty,lastView:c})},0,this)}function c(a,b,c,d){var e='checked="checked"',f="",g="",h="",i="",j="",k="",l="",m="",n="";"list"==b?f=e:g=e,c.filename&&(h=e),c.date&&(i=e),c.filesize&&(j=e),"date"==d?l=e:"size"==d?m=e:"extension"==d?n=e:k=e;var o=f?' disabled="true"':"";return'<form id="files_settings" role="region" aria-controls="files_view" action="#" method="POST"><h2 role="heading">'+a.SetTitle+'</h2><table role="presentation"><tr><td><dl role="group" aria-labelledby="files_settings_type"><dt id="files_settings_type">'+a.SetView+'</dt><dd><input type="radio" name="view_type" value="thumbnails" '+g+' id="fs_type_thumbnails" /> <label for="fs_type_thumbnails">'+a.SetViewThumb+'</label></dd><dd><input type="radio" name="view_type" value="list" '+f+' id="fs_type_details" /> <label for="fs_type_details">'+a.SetViewList+'</label></dd></dl></td><td><dl role="group" aria-labelledby="files_settings_display"><dt id="files_settings_display">'+a.SetDisplay+'</dt><dd><input type="checkbox" name="display_filename" value="1" '+h+o+' id="fs_display_filename" /> <label for="fs_display_filename">'+a.SetDisplayName+'</label></dd><dd><input type="checkbox" name="display_date" value="1" '+i+' id="fs_display_date" /> <label for="fs_display_date">'+a.SetDisplayDate+'</label></dd><dd><input type="checkbox" name="display_filesize" value="1" '+j+' id="fs_display_filesize" /> <label for="fs_display_filesize">'+a.SetDisplaySize+'</label></dd></dl></td><td><dl role="group" aria-labelledby="files_settings_sorting"><dt id="files_settings_sorting">'+a.SetSort+'</dt><dd><input type="radio" name="sortby" value="filename" '+k+' id="fs_sortby_filename" /> <label for="fs_sortby_filename">'+a.SetSortName+'</label></dd><dd><input type="radio" name="sortby" value="date" '+l+' id="fs_sortby_date" /> <label for="fs_sortby_date">'+a.SetSortDate+'</label></dd><dd><input type="radio" name="sortby" value="size" '+m+' id="fs_sortby_size" /> <label for="fs_sortby_size">'+a.SetSortSize+'</label></dd><dd><input type="radio" name="sortby" value="extension" '+n+' id="fs_sortby_extension" /> <label for="fs_sortby_extension">'+a.SetSortExtension+'</label></dd></dl></td></tr></table><div class="buttons_wrapper"><div class="buttons"><input type="submit" value="'+a.CloseBtn+'" /></div></div></form>'}function e(a){a.data.preventDefault()}function f(a,b){for(var c in a)if(void 0!==b(a[c]))return a[c];return void 0}function g(a,b,c){return f(a,function(a){return a.tagName&&a.tagName.toLowerCase()==b&&!c--?a:void 0})}function h(a){return a?new k(a):null}m.add("formpanel",{bM:["button"],onLoad:function(){a()},gr:function(a){var b=this;a.on("themeSpace",function(a){"mainTop"==a.data.space&&(a.data.html+='<div id="panel_view" class="view" role="region" aria-live="polite" style="display: none;"><div id="panel_widget" class="panel_widget ib" tabindex="-1"></div></div>')}),a.on("uiReady",function(c){var e=a.document.getById("panel_view").getChild(0);d.aG.bz(a,"formpanel",b,e)}),a.bD("settings",{exec:function(a){a.oW("requestFilesViewSettingsForm",null,function(){a.cS("settings").bu==d.eV&&setTimeout(function(){a.aG["formpanel.formpanel"].tools.ij().eG("input").getItem(0).focus()},0)})}}),a.bD("refresh",{exec:function(a){var b=a.aV;b&&a.oW("requestShowFolderFiles",{folder:b},function(){setTimeout(function(){a.aG["filesview.filesview"].bn().focus()},0)})}}),a.bY.add("Settings",d.UI_BUTTON,{label:a.lang.Settings,command:"settings"}),a.bY.add("Refresh",d.UI_BUTTON,{label:a.lang.Refresh,command:"refresh"}),a.cS("refresh").bR(d.aY)}})}(),m.add("keystrokes",{eK:function(a){a.dJ=new d.dJ(a),a.oX={}},bz:function(a){for(var b=a.config.keystrokes,c=a.config.gN,d=a.dJ.keystrokes,e=a.dJ.gN,f=0;f<b.length;f++)d[b[f][0]]=b[f][1];for(f=0;f<c.length;f++)e[c[f]]=1}}),d.dJ=function(a){var b=this;return a.dJ?a.dJ:(b.keystrokes={},b.gN={},b._={app:a},b)},function(){var a,b=function(b){b=b.data;var c=b.db(),d=this.keystrokes[c],e=this._.app;if(a=e.oW("iK",{keyCode:c})===!0,!a){if(d){var f={gJ:"dJ"};a=e.execCommand(d,f)!==!1}if(!a){var g=e.oX[c];a=g&&g(e)===!0,a||(a=!!this.gN[c])}}return a&&b.preventDefault(!0),!a},c=function(b){a&&(a=!1,b.data.preventDefault(!0))};d.dJ.prototype={oA:function(a){a.on("keydown",b,this),(f.opera||f.gecko&&f.mac)&&a.on("keypress",c,this)}}}(),l.gN=[],l.keystrokes=[[d.eJ+119,"foldertreeFocus"],[d.eJ+120,"filesviewFocus"],[d.eJ+121,"hW"],[d.eJ+85,"upload"],[d.dy+121,"bj"],[d.bP+d.dy+121,"bj"]],m.add("menu",{eK:function(a){for(var b=a.config.nj.split(","),c={},d=0;d<b.length;d++)c[b[d]]=d+1;a._.iA=c,a._.iG={}},bM:["floatpanel"]}),i.extend(d.application.prototype,{dZ:function(a,b){this._.iA[a]=b||100},gp:function(a,b){this._.iA[b.group]&&(this._.iG[a]=new d.iD(this,a,b))},eU:function(a){for(var b in a)this.gp(b,a[b])},mh:function(a){return this._.iG[a]}}),function(){function a(a){a.sort(function(a,b){return a.group<b.group?-1:a.group>b.group?1:a.fE<b.fE?-1:a.fE>b.fE?1:0})}d.menu=i.createClass({$:function(a,b){var c=this;c.id="cke_"+i.getNextNumber(),c.app=a,c.items=[],c._.hx=b||1},_:{jK:function(a){var b=this,c=b._.oM,e=b.items[a],f=e.hQ&&e.hQ();if(!f)return void b._.panel.gU();c?c.ih():(c=b._.oM=new d.menu(b.app,b._.hx+1),c.parent=b,c.onClick=i.bind(b.onClick,b));for(var g in f)c.add(b.app.mh(g));var h=b._.panel.iv(b.id).element.getDocument().getById(b.id+String(a));c.show(h,2)}},ej:{add:function(a){a.fE||(a.fE=this.items.length),this.items.push(a)},ih:function(){this.items=[]},show:function(b,c,e,f){var g=this.items,h=this.app,j=this._.panel,k=this._.element;if(!j){j=this._.panel=new n.pY(this.app,this.app.document.bH(),{css:[],hx:this._.hx-1,className:h.iy+" cke_contextmenu"},this._.hx),j.onEscape=i.bind(function(){this.onEscape&&this.onEscape(),this.hide()},this),j.onHide=i.bind(function(){this.onHide&&this.onHide()},this);var l=j.qq(this.id);l.oz=!0;var m=l.jQ;m[40]="next",m[9]="next",m[38]="prev",m[d.dy+9]="prev",m[32]="click",m[39]="click",k=this._.element=l.element,k.addClass(h.iy);var o=k.getDocument();o.bH().setStyle("overflow","hidden"),o.eG("html").getItem(0).setStyle("overflow","hidden"),this._.qz=i.addFunction(function(a){var b=this;clearTimeout(b._.jI),b._.jI=i.setTimeout(b._.jK,h.config.ob,b,[a])},this),this._.qm=i.addFunction(function(a){clearTimeout(this._.jI)},this),this._.ql=i.addFunction(function(a){var b=this,c=b.items[a];return c.bu==d.aY?void b.hide():void(c.hQ?b._.jK(a):b.onClick&&b.onClick(c))},this)}a(g);for(var p=['<div class="cke_menu">'],q=g.length,r=q&&g[0].group,s=0;q>s;s++){var t=g[s];r!=t.group&&(p.push('<div class="cke_menuseparator"></div>'),r=t.group),t.er(this,s,p)}p.push("</div>"),k.setHtml(p.join("")),this.parent?this.parent._.panel.rA(j,this.id,b,c,e,f):j.gf(this.id,b,c,e,f),h.oW("menuShow",[j])},hide:function(){this._.panel&&this._.panel.hide()}}})}(),d.iD=i.createClass({$:function(a,b,c){var d=this;i.extend(d,c,{fE:0,className:"cke_button_"+b}),d.group=a._.iA[d.group],d.app=a,d.name=b},ej:{er:function(a,b,c){var e=this,g=a.id+String(b),h="undefined"==typeof e.bu?d.aS:e.bu,i=" cke_"+(h==d.eV?"on":h==d.aY?"disabled":"off"),j=e.label;h==d.aY&&(j=e.app.lang.common.unavailable.replace("%1",j)),e.className&&(i+=" "+e.className);var k=e.hQ;c.push('<span class="cke_menuitem"><a id="',g,'" class="',i,'" href="javascript:void(\'',(e.label||"").replace("'",""),'\')" title="',e.label,'" tabindex="-1"_cke_focus=1 hidefocus="true" role="menuitem"'+(k?'aria-haspopup="true"':"")+(h==d.aY?'aria-disabled="true"':"")+(h==d.eV?'aria-pressed="true"':"")),(f.opera||f.gecko&&f.mac)&&c.push(' onkeypress="return false;"'),f.gecko&&c.push(' onblur="this.style.cssText = this.style.cssText;"');var l=-16*(e.rD||0);c.push(' onmouseover="CKFinder.tools.callFunction(',a._.qz,",",b,');" onmouseout="CKFinder.tools.callFunction(',a._.qm,",",b,');" onclick="CKFinder.tools.callFunction(',a._.ql,",",b,'); return false;"><span class="cke_icon_wrapper"><span class="cke_icon"'+(e.icon?' style="background-image:url('+d.getUrl(e.icon)+");background-position:0 "+l+'px;"':"")+'></span></span><span class="cke_label">'),e.hQ&&c.push('<span class="cke_menuarrow"></span>'),c.push(j,"</span></a></span>")}}}),l.ob=400,l.nj="",function(){function a(a){f.opera&&a.setStyle("overflow","hidden"),a.on("touchstart",function(b){var c=b.data.$.touches[0];a.interval&&(window.clearInterval(a.interval),delete a.interval),a.lL=a.$.scrollTop,a.nx=a.$.scrollLeft,a.mP=c.pageY,a.na=c.pageX,a.mO=new Date}),a.on("touchmove",function(c){var d=c.data,e=d.$.touches[0];b(a,e.pageX,e.pageY)&&d.preventDefault()}),a.on("touchend",function(d){var e=d.data,f=e.$.changedTouches[0];if(b(a,f.pageX,f.pageY)){e.preventDefault();var g=(new Date-a.mO)/100,h=f.pageX-a.na,i=f.pageY-a.mP;a.mK=h/g,a.nu=i/g,a.jy=f.pageX,a.mv=f.pageY,a.nf=0,a.interval=window.setInterval(function(){c(a)},100)}})}function b(a,b,c){var d=Math.round(b-a.na),e=Math.round(c-a.mP),f=a.nx-d,g=a.lL-e;return a.$.scrollLeft==f&&a.$.scrollTop==g?!1:(a.$.scrollLeft=f,a.$.scrollTop=g,Math.abs(d)>Math.abs(e)?a.$.scrollLeft==f:a.$.scrollTop==g)}function c(a){var c=7,d=Math.cos(a.nf/c*Math.PI/2);return a.jy+=a.mK*d,a.mv+=a.nu*d,a.nf++>c||!b(a,a.jy,a.mv)?(window.clearInterval(a.interval),void delete a.interval):void 0}m.add("mobile",{bM:["foldertree","filesview"],bz:function(b){var c="ontouchstart"in window;(f.isMobile||c)&&(b.config.showContextMenuArrow=!0,f.isMobile&&b.on("uiReady",function(c){(f.webkit&&f.version<534||f.opera)&&(a(b.layout.pS()),a(b.layout.pn())),b.hs=function(a,b,c,d){var e=window.prompt(b,c);null!==e&&d(e)},b.msgDialog=function(a,b,c){window.alert(b),c&&c()},b.fe=function(a,b,c){window.confirm(b)&&c()}},null,null,20))}})}(),m.add("panel",{eK:function(a){a.bY.kd(d.UI_PANEL,n.panel.dq)}}),d.UI_PANEL=2,n.panel=function(a,b,c){var e=this;b&&i.extend(e,b),i.extend(e,{className:""});var f=d.basePath;i.extend(e.css,[f+"skins/"+c+"/uipanel.css"]),e.id=i.getNextNumber(),e.document=a,e._={iq:{}}},n.panel.dq={create:function(a){return new n.panel(a)}},n.panel.prototype={nt:function(a){var b=[];return this.er(a,b),b.join("")},er:function(a,b){var c=this,d="cke_"+c.id;if(b.push('<div class="',a.iy,' cke_compatibility" lang="',a.langCode,'" role="presentation" style="display:none;z-index:'+(a.config.baseFloatZIndex+1)+'"><div id="',d,'"',' dir="',a.lang.dir,'"',' role="presentation" class="cke_panel cke_',a.lang.dir),c.className&&b.push(" ",c.className),b.push('">'),c.lE||c.css.length){b.push('<iframe id="',d,'_frame" frameborder="0" src="');var e=f.isCustomDomain(),h="document.open();"+(e?'document.domain="'+window.document.domain+'";':"")+"document.close();";b.push(g?"javascript:void(function(){"+encodeURIComponent(h)+"}())":""),b.push('"></iframe>')}return b.push("</div></div>"),d},oU:function(){var a=this._.rE;if(!a){if(this.lE||this.css.length){var b=this.document.getById("cke_"+this.id+"_frame"),c=b.getParent(),d=c.getAttribute("dir"),e=c.getParent().getAttribute("class").split(" ")[0],g=c.getParent().getAttribute("lang"),h=b.getFrameDocument();h.$.open(),f.isCustomDomain()&&(h.$.domain=document.domain);var j=i.addFunction(i.bind(function(a){this.hm=!0,this.onLoad&&this.onLoad()},this)),k=h.getWindow();k.$.CKFinder=CKFinder;var l=f.cssClass.replace(/browser_quirks|browser_iequirks/g,"");h.$.write("<!DOCTYPE HTML PUBLIC '-//W3C//DTD HTML 4.01//EN' 'http://www.w3.org/TR/html4/strict.dtd'><html dir=\""+d+'" class="'+e+'_container" lang="'+g+'"><head><style>.'+e+'_container{visibility:hidden}</style></head><body class="cke_'+d+" cke_panel_frame "+l+' cke_compatibility" style="margin:0;padding:0" onload="var ckfinder = window.CKFinder || window.parent.CKFinder; ckfinder && ckfinder.tools.callFunction('+j+');"></body><link type="text/css" rel=stylesheet href="'+this.css.join('"><link type="text/css" rel="stylesheet" href="')+'"></html>'),h.$.close(),k.$.CKFinder=CKFinder,h.on("keydown",function(a){var b=this,c=a.data.db();return b._.onKeyDown&&b._.onKeyDown(c)===!1?void a.data.preventDefault():void(27==c&&b.onEscape&&b.onEscape())},this),a=h.bH()}else a=this.document.getById("cke_"+this.id);this._.rE=a}return a},qq:function(a,b){var c=this;return b=c._.iq[a]=b||new n.panel.block(c.oU()),c._.iL||c.gf(a),b},iv:function(a){return this._.iq[a]},gf:function(a){var b=this,c=b._.iq,d=c[a],e=b._.iL;return e&&e.hide(),b._.iL=d,d._.cQ=-1,b._.onKeyDown=d.onKeyDown&&i.bind(d.onKeyDown,d),d.show(),d}},n.panel.block=i.createClass({$:function(a){var b=this;b.element=a.append(a.getDocument().createElement("div",{attributes:{"class":"cke_panel_block",role:"presentation"},gS:{display:"none"}})),b.jQ={},b._.cQ=-1,b.element.hX()},_:{},ej:{show:function(){this.element.setStyle("display","")},hide:function(){var a=this;a.onHide&&a.onHide.call(a)===!0||a.element.setStyle("display","none")},onKeyDown:function(a){var b=this,c=b.jQ[a];switch(c){case"next":for(var d,e=b._.cQ,f=b.element.eG("a");d=f.getItem(++e);)if(d.getAttribute("_cke_focus")&&d.$.offsetWidth){b._.cQ=e,d.focus();break}return!1;case"prev":for(e=b._.cQ,f=b.element.eG("a");e>0&&(d=f.getItem(--e));)if(d.getAttribute("_cke_focus")&&d.$.offsetWidth){b._.cQ=e,d.focus();break}return!1;case"click":return e=b._.cQ,d=e>=0&&b.element.eG("a").getItem(e),d&&(d.$.click?d.$.click():d.$.onclick()),!1}return!0}}}),m.add("resize",{bz:function(a){var b=a.config;b.nB&&a.on("uiReady",function(){function c(c){a.document.bH().addClass("during_sidebar_resize");var d=c.data.$.screenX-f.x,e=g.width+d*("rtl"==a.lang.dir?-1:1);a.nJ(Math.max(b.nN,Math.min(e,b.nC)))}function e(b){a.document.bH().removeClass("during_sidebar_resize"),d.document.removeListener("mousemove",c),d.document.removeListener("mouseup",e),a.document&&(a.document.removeListener("mousemove",c),a.document.removeListener("mouseup",e))}var f,g,h=null;a.layout.dV().on("mousedown",function(b){h||(h=a.layout.dV()),b.data.bK().$==h.$&&(g={width:h.$.offsetWidth||0},f={x:b.data.$.screenX},d.document.on("mousemove",c),d.document.on("mouseup",e),a.document&&(a.document.on("mousemove",c),a.document.on("mouseup",e)))})})}}),l.nN=120,l.nC=500,l.nB=!0,function(){function a(){var a=d.aG.hS("status","status");a.bh("ShowFileInfo",["requestShowFileInfo"],function(a){a.result=this.oW("beforeShowFileInfo",a.data,function(a,c){var e=this;if(!a){var f=c.file;try{var g=f?b(f,e.app.lang):"";e.bn().setHtml(g),e.oW("successShowFileInfo",c)}catch(h){throw e.oW("failedShowFileInfo",c),d.ba(h)}e.oW("afterShowFileInfo",c)}})}),a.bh("ShowFolderInfo",["requestShowFolderInfo"],function(a){a.result=this.oW("beforeShowFolderInfo",a.data,function(b,e){var f=this;if(!b){{e.folder}try{var g=c(a.data.ib.data().files.length,f.app.lang);f.bn().setHtml(g),f.oW("successShowFolderInfo",e)}catch(h){throw f.oW("failedShowFolderInfo",e),d.ba(h)}f.oW("afterShowFolderInfo",e)}})})}function b(a,b){return"<p>"+a.name+" ("+i.formatSize(a.size,b,!0)+", "+a.dateF+")</p>"}function c(a,b){var c;return c=0===a?b.FilesCountEmpty:1==a?b.FilesCountOne:b.FilesCountMany.replace("%1",a),"<p>"+i.htmlEncode(c)+"</p>"}m.add("status",{bM:["filesview"],onLoad:function(){a()},gr:function(a){var b=this;a.on("themeSpace",function(a){"mainBottom"==a.data.space&&(a.data.html+='<div id="status_view" class="view" role="status"></div>')}),a.on("uiReady",function(c){var e=a.document.getById("status_view"),f=a.aG["filesview.filesview"],g=d.aG.bz(a,"status",b,e,{parent:f});f.app==a&&(f.on("successSelectFile",function(a){g.oW("requestShowFileInfo",a.data)}),f.on("successShowFolderFiles",function(a){a.data.ib=this,g.oW("requestShowFolderInfo",a.data)})),a.on("afterCommandExecDefered",function(a){if("RemoveFile"==a.data.name){var b={folder:a.data.folder,ib:f};g.oW("requestShowFolderInfo",b)}}),g.on("afterShowFileInfo",function(a){this.bn().getText()||g.oW("requestShowFolderInfo",{ib:f,folder:f.data().folder})})})}})}(),function(){var a=function(){this.fk=[],this.pZ=!1};a.prototype.focus=function(){for(var a,b=0;a=this.fk[b++];)for(var c,d=0;c=a.items[d++];)if(c.focus)return void c.focus()};var b={hW:{iH:{qt:1,source:1},exec:function(a){a.dh&&(a.dh.pZ=!0,g?setTimeout(function(){a.dh.focus()},100):a.dh.focus())}}};m.add("toolbar",{bM:["formpanel"],bz:function(c){var d=function(a,b){switch(b){case"rtl"==c.lang.dir?37:39:for(;(a=a.next||a.toolbar.next&&a.toolbar.next.items[0])&&!a.focus;);return a?a.focus():c.dh.focus(),!1;case"rtl"==c.lang.dir?39:37:for(;(a=a.previous||a.toolbar.previous&&a.toolbar.previous.items[a.toolbar.previous.items.length-1])&&!a.focus;);if(a)a.focus();else{var d=c.dh.fk[c.dh.fk.length-1].items;d[d.length-1].focus()}return!1;case 27:return c.focus(),!1;case 13:case 32:return a.lc(),!1}return!0};c.on("themeSpace",function(b){if("mainTop"==b.data.space){c.dh=new a;var e,f="cke_"+i.getNextNumber(),g=['<div id="toolbar_view" class="view"><div class="cke_toolbox cke_compatibility" role="toolbar" aria-labelledby="',f,'"'];g.push(">"),g.push('<span id="',f,'" class="cke_voice_label">',c.lang.toolbar,"</span>");for(var h=c.dh.fk,j=c.config.toolbar instanceof Array?c.config.toolbar:c.config["toolbar_"+c.config.toolbar],k=0;k<j.length;k++){var l=j[k];if(l){var m="cke_"+i.getNextNumber(),o={id:m,items:[]};if(e&&(g.push("</div>"),e=0),"/"!==l){g.push('<span id="',m,'" class="cke_toolbar" role="presentation"><span class="cke_toolbar_start"></span>');var p=h.push(o)-1;p>0&&(o.previous=h[p-1],o.previous.next=o);for(var q=0;q<l.length;q++){var r,s=l[q];if(r="-"==s?n.separator:c.bY.create(s)){r.canGroup?e||(g.push('<span class="cke_toolgroup">'),e=1):e&&(g.push("</span>"),e=0);var t=r.er(c,g);p=o.items.push(t)-1,p>0&&(t.previous=o.items[p-1],t.previous.next=t),t.toolbar=o,t.onkey=d}}e&&(g.push("</span>"),e=0),g.push('<span class="cke_toolbar_end"></span></span>')}else g.push('<div class="cke_break"></div>')}}g.push("</div></div>"),b.data.html+=g.join("")}}),c.bD("hW",b.hW)}})}(),n.separator={er:function(a,b){return b.push('<span class="cke_separator"></span>'),{}}},l.toolbar_Basic=[["Upload","Refresh"]],l.toolbar_Full=[["Upload","Refresh","Settings","Maximize","Help"]],l.toolbar="Full",function(){m.add("tools",{eK:function(a){this.app=a},addTool:function(a,b){var c="tool_"+i.getNextNumber();return a=b?'<div id="'+c+'" class="view tool_panel" tabindex="0" style="display: none;">'+a+"</div>":'<div id="'+c+'" class="tool" style="display: none;">'+a+"</div>",this.app.layout.dV().getChild(0).appendHtml(a),c},addToolPanel:function(a){a=a||"";var b=this.addTool(a,1),c=this.app.layout.dV().getChild(0).dB();return i.mH(c),b},hideTool:function(a){this.app.document.getById(a).setStyle("display","none"),this.app.layout.ea(!0)},showTool:function(a){this.app.document.getById(a).removeStyle("display"),this.app.layout.ea(!0)},removeTool:function(a){this.hideTool(a),this.app.document.getById(a).remove()}})}(),function(){function a(){function a(){var a="RMRHY5Q4S,GGYXTSBLA,QS8F4ZFUJ";return d.bF.length>0&&-1!=a.indexOf(d.bF.substr(0,9))}function b(a,b){var c=this,e=(c.data(),1),f=this.tools.qO(),g=f&&f.$.value;if(!g.length)return a.data.preventDefault(!0),this.oW("failedUploadFileForm"),this.oW("afterUploadFileForm"),!1;var h=g.match(/\.([^\.]+)\s*$/)[1];if(h&&b.getResourceType().isExtensionAllowed(h)?e=0:(a.data.preventDefault(),c.app.msgDialog("",c.app.lang.UploadExtIncorrect)),e)return a.data.preventDefault(!0),this.oW("failedUploadFileForm"),this.oW("afterUploadFileForm"),!1;var i=c.app.document.getWindow().$;return i.OnUploadCompleted=function(a,d){var e={step:3,filename:a,folder:b};if(d&&!a){c.app.msgDialog("",d);var f=c.tools.qB();f.setStyle("display","none"),f.getChild(1).setText(""),f.getChild(2).setText(""),c.oW("failedUploadFileForm",e)}else d&&c.app.msgDialog("",d),c.app.aV==b&&c.app.oW("requestShowFolderFiles",{
folder:b,mw:a}),c.oW("requestUnloadForm"),c.oW("successUploadFileForm",e);c.oW("afterUploadFileForm",e);try{delete i.OnUploadCompleted}catch(g){i.OnUploadCompleted=void 0}},d.log("[UPLOADFORM] Starting IFRAME file upload."),this.oW("successUploadFileForm",{step:2}),!0}function c(a,b,c){return'<form enctype="multipart/form-data" id="upload_form" role="region" action="'+c+'" method="POST" target="'+b+'"><h2 role="heading">'+a.lang.UploadTitle+'</h2><p><input type="file" name="upload" /></p><div class="buttons_wrapper"><div class="buttons"><input type="submit" value="'+a.lang.UploadBtn+'" /><input type="button" name="cancel" value="'+a.lang.UploadBtnCancel+'" /></div></div></form>'}var e=d.aG.bX["formpanel.formpanel"];e&&(e.bh("UploadFileForm",["requestUploadFileForm"],function(e){var f=this.app.aV,g=this;this.oW("beforeUploadFileForm",{folder:f,step:1},function(e,f){if(!e&&!a()){var h=this.data(),j=f.folder,k=0;return j||(this.app.msgDialog("",this.app.lang.UploadNoFolder),k=1),k||j.acl.fileUpload||(this.app.msgDialog("",this.app.lang.UploadNoPerms),k=1),k?(this.oW("failedUploadFileForm"),void this.oW("afterUploadFileForm")):void this.oW("beforeUploadFileForm",{folder:j,step:2},function(a,e){function f(a){if(a.data.folder&&a.data.folder.acl.fileUpload){var b=g.tools.qO();g.oW("requestUnloadForm"),g.oW("requestUploadFileForm",function(){var a=g.tools.qO();b.kB(a),a.remove(),delete g.tools.jj})}}try{if("upload"==h.dc)this.oW("requestUnloadForm",function(){this.app.cS("upload").bR(d.aS),this.oW("successUploadFileForm",e),this.oW("afterUploadFileForm",e)});else{h.dc&&this.oW("requestUnloadForm");var k=this.tools.qL(),l=this.app.connector.composeUrl("FileUpload",{},j.type,j),m=c(this.app,k.$.id,l),n=this;this.oW("requestLoadForm",{html:m,dq:i.bind(function(a){return b.call(n,a,j)}),cC:["submit"],cancelSubmit:0,gM:0,command:"upload"},function(){this.eh.addClass("show_border"),e.step=1,this.oW("successUploadFileForm",e)});var o=this.app.aG["filesview.filesview"];o.on("successShowFolderFiles",f),this.on("requestUnloadForm",function(a){a.removeListener(),o.removeListener("successShowFolderFiles",f)})}}catch(p){throw this.oW("failedUploadFileForm",e),this.oW("afterUploadFileForm",e),d.ba(p)}})}})}),e.tools.releaseDomNodes=i.override(e.tools.releaseDomNodes,function(a){return function(){var b=this;a.apply(b,arguments),delete b.jj,delete b.jc,void 0!==b.gq&&(b.gq.remove(),delete b.gq)}}),e.tools.qB=function(){var a=this;return void 0===a.jc&&(a.jc=a.ib.bn().getChild([0,2])),a.jc},e.tools.qO=function(){var a=this;return void 0===a.jj&&(a.jj=a.ib.bn().getChild([0,1,0])),a.jj},e.tools.qL=function(){var a=this;if(void 0===a.gq){var b=f.isCustomDomain(),c="ckf_"+i.getNextNumber(),d='<iframe id="'+c+'" name="'+c+'" style="display:none" frameBorder="0"'+(b?" src=\"javascript:void((function(){document.open();document.domain='"+document.domain+"';document.close();})())\"":"")+' tabIndex="-1" allowTransparency="true"></iframe>',e=a.ib.app.document.bH();e.appendHtml(d),a.gq=e.dB()}return a.gq})}m.add("uploadform",{bM:["formpanel","button"],readOnly:!1,md:function(){if(!f.webkit)return!0;var a=document.createElement("input");return a.setAttribute("type","file"),a.disabled===!1},onLoad:function(){this.md()&&a()},gr:function(a){this.md()&&(a.bD("upload",{exec:function(a){a.oW("requestUploadFileForm",null,function(){a.cS("upload").bu==d.eV&&setTimeout(function(){var b=a.aG["formpanel.formpanel"].tools.ij();if(b){var c=b.eG("input").getItem(0);c.on("change",function(){if(c.getValue())for(var a=0;a<b.$.elements.length;a++){var d=b.$.elements[a];"INPUT"==d.nodeName&&"submit"==d.type&&d.click()}}),c.$.click?c.$.click():c.focus()}},0)})}}),a.bY.add("Upload",d.UI_BUTTON,{label:a.lang.Upload,command:"upload"}),a.on("appReady",function(b){a.aG["filesview.filesview"].on("successShowFolderFiles",function(b){var c=this.tools.currentFolder(),e=this.app.cS("upload");if(c&&c.acl.fileUpload)e.bu==d.aY&&e.bR(d.aS);else{var f=a.aG["formpanel.formpanel"];"upload"==f.data().dc&&f.oW("requestUnloadForm"),e.bR(d.aY)}})}))}})}(),function(){function a(a,b){function c(){if(!T){try{var a=M.getElementsByTagName("body")[0].appendChild(s("span"));a.parentNode.removeChild(a)}catch(b){return}T=!0;for(var c=P.length,d=0;c>d;d++)P[d]()}}function d(a){T?a():P[P.length]=a}function e(a){if(typeof L.addEventListener!=E)L.addEventListener("load",a,!1);else if(typeof M.addEventListener!=E)M.addEventListener("load",a,!1);else if(typeof L.attachEvent!=E)t(L,"onload",a);else if("function"==typeof L.onload){var b=L.onload;L.onload=function(){b(),a()}}else L.onload=a}function f(){O?g():h()}function g(){var a=M.getElementsByTagName("body")[0],b=s(F);b.setAttribute("type",I);var c=a.appendChild(b);if(c){var d=0;!function(){if(typeof c.GetVariable!=E){var e=c.GetVariable("$version");e&&(e=e.split(" ")[1].split(","),W.pv=[parseInt(e[0],10),parseInt(e[1],10),parseInt(e[2],10)])}else if(10>d)return d++,void setTimeout(arguments.callee,10);a.removeChild(b),c=null,h()}()}else h()}function h(){var a=Q.length;if(a>0)for(var b=0;a>b;b++){var c=Q[b].id,d=Q[b].callbackFn,e={success:!1,id:c};if(W.pv[0]>0){var f=r(c);if(f)if(!u(Q[b].swfVersion)||W.wk&&W.wk<312)if(Q[b].ln&&j()){var g={};g.data=Q[b].ln,g.width=f.getAttribute("width")||"0",g.height=f.getAttribute("height")||"0",f.getAttribute("class")&&(g.styleclass=f.getAttribute("class")),f.getAttribute("align")&&(g.align=f.getAttribute("align"));for(var h={},m=f.getElementsByTagName("param"),n=m.length,o=0;n>o;o++)"movie"!=m[o].getAttribute("name").toLowerCase()&&(h[m[o].getAttribute("name")]=m[o].getAttribute("value"));k(g,h,c,d)}else l(f),d&&d(e);else w(c,!0),d&&(e.success=!0,e.ref=i(c),d(e))}else if(w(c,!0),d){var p=i(c);p&&typeof p.SetVariable!=E&&(e.success=!0,e.ref=p),d(e)}}}function i(a){var b=null,c=r(a);if(c&&"OBJECT"==c.nodeName)if(typeof c.SetVariable!=E)b=c;else{var d=c.getElementsByTagName(F)[0];d&&(b=d)}return b}function j(){return!U&&u("6.0.65")&&(W.win||W.mac)&&!(W.wk&&W.wk<312)}function k(a,b,c,d){U=!0,A=d||null,B={success:!1,id:c};var e=r(c);if(e){"OBJECT"==e.nodeName?(y=m(e),z=null):(y=e,z=c),a.id=J,(typeof a.width==E||!/%$/.test(a.width)&&parseInt(a.width,10)<310)&&(a.width="310"),(typeof a.height==E||!/%$/.test(a.height)&&parseInt(a.height,10)<137)&&(a.height="137"),M.title=M.title.slice(0,47)+" - Flash Player Installation";var f=W.ie&&W.win?"ActiveX":"PlugIn",g="MMredirectURL="+L.location.toString().replace(/&/g,"%26")+"&MMplayerType="+f+"&MMdoctitle="+M.title;if(typeof b.flashvars!=E?b.flashvars+="&"+g:b.flashvars=g,W.ie&&W.win&&4!=e.readyState){var h=s("div");c+="SWFObjectNew",h.setAttribute("id",c),e.parentNode.insertBefore(h,e),e.style.display="none",function(){4==e.readyState?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)}()}n(a,b,c)}}function l(a){if(W.ie&&W.win&&4!=a.readyState){var b=s("div");a.parentNode.insertBefore(b,a),b.parentNode.replaceChild(m(a),b),a.style.display="none",function(){4==a.readyState?a.parentNode.removeChild(a):setTimeout(arguments.callee,10)}()}else a.parentNode.replaceChild(m(a),a)}function m(a){var b=s("div");if(W.win&&W.ie)b.innerHTML=a.innerHTML;else{var c=a.getElementsByTagName(F)[0];if(c){var d=c.childNodes;if(d)for(var e=d.length,f=0;e>f;f++)1==d[f].nodeType&&"PARAM"==d[f].nodeName||8==d[f].nodeType||b.appendChild(d[f].cloneNode(!0))}}return b}function n(a,b,c){var d,e=r(c);if(W.wk&&W.wk<312)return d;if(e)if(typeof a.id==E&&(a.id=c),W.ie&&W.win){var f="";for(var g in a)a[g]!=Object.prototype[g]&&("data"==g.toLowerCase()?b.movie=a[g]:"styleclass"==g.toLowerCase()?f+=' class="'+a[g]+'"':"classid"!=g.toLowerCase()&&(f+=" "+g+'="'+a[g]+'"'));var h="";for(var i in b)b[i]!=Object.prototype[i]&&(h+='<param name="'+i+'" value="'+b[i]+'" />');e.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+f+">"+h+"</object>",R[R.length]=a.id,d=r(a.id)}else{var j=s(F);j.setAttribute("type",I);for(var k in a)a[k]!=Object.prototype[k]&&("styleclass"==k.toLowerCase()?j.setAttribute("class",a[k]):"classid"!=k.toLowerCase()&&j.setAttribute(k,a[k]));for(var l in b)b[l]!=Object.prototype[l]&&"movie"!=l.toLowerCase()&&o(j,l,b[l]);e.parentNode.replaceChild(j,e),d=j}return d}function o(a,b,c){var d=s("param");d.setAttribute("name",b),d.setAttribute("value",c),a.appendChild(d)}function p(a){var b=r(a);b&&"OBJECT"==b.nodeName&&(W.ie&&W.win?(b.style.display="none",function(){4==b.readyState?q(a):setTimeout(arguments.callee,10)}()):b.parentNode.removeChild(b))}function q(a){var b=r(a);if(b){for(var c in b)"function"==typeof b[c]&&(b[c]=null);b.parentNode.removeChild(b)}}function r(a){var b=null;try{b=M.getElementById(a)}catch(c){}return b}function s(a){return M.createElement(a)}function t(a,b,c){a.attachEvent(b,c),S[S.length]=[a,b,c]}function u(a){var b=W.pv,c=a.split(".");return c[0]=parseInt(c[0],10),c[1]=parseInt(c[1],10)||0,c[2]=parseInt(c[2],10)||0,b[0]>c[0]||b[0]==c[0]&&b[1]>c[1]||b[0]==c[0]&&b[1]==c[1]&&b[2]>=c[2]?!0:!1}function v(a,b,c,d){if(!W.ie||!W.mac){var e=M.getElementsByTagName("head")[0];if(e){var f=c&&"string"==typeof c?c:"screen";if(d&&(C=null,D=null),!C||D!=f){var g=s("style");g.setAttribute("type","text/css"),g.setAttribute("media",f),C=e.appendChild(g),W.ie&&W.win&&typeof M.styleSheets!=E&&M.styleSheets.length>0&&(C=M.styleSheets[M.styleSheets.length-1]),D=f}W.ie&&W.win?C&&typeof C.addRule==F&&C.addRule(a,b):C&&typeof M.createTextNode!=E&&C.appendChild(M.createTextNode(a+" {"+b+"}"))}}}function w(a,b){if(V){var c=b?"visible":"hidden";T&&r(a)?r(a).style.visibility=c:v("#"+a,"visibility:"+c)}}function x(a){var b=/[\\\"<>\.;]/,c=null!=b.exec(a);return c&&typeof encodeURIComponent!=E?encodeURIComponent(a):a}{var y,z,A,B,C,D,E="undefined",F="object",G="Shockwave Flash",H="ShockwaveFlash.ShockwaveFlash",I="application/x-shockwave-flash",J="SWFObjectExprInst",K="onreadystatechange",L=a,M=b,N=navigator,O=!1,P=[f],Q=[],R=[],S=[],T=!1,U=!1,V=!0,W=function(){var a=typeof M.getElementById!=E&&typeof M.getElementsByTagName!=E&&typeof M.createElement!=E,b=N.userAgent.toLowerCase(),c=N.platform.toLowerCase(),d=/win/.test(c?c:b),e=/mac/.test(c?c:b),f=/webkit/.test(b)?parseFloat(b.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,g=!1,h=[0,0,0],i=null;if(typeof N.plugins!=E&&typeof N.plugins[G]==F)i=N.plugins[G].description,!i||typeof N.mimeTypes!=E&&N.mimeTypes[I]&&!N.mimeTypes[I].enabledPlugin||(O=!0,g=!1,i=i.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),h[0]=parseInt(i.replace(/^(.*)\..*$/,"$1"),10),h[1]=parseInt(i.replace(/^.*\.(.*)\s.*$/,"$1"),10),h[2]=/[a-zA-Z]/.test(i)?parseInt(i.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof L.ActiveXObject!=E)try{var j=new ActiveXObject(H);j&&(i=j.GetVariable("$version"),i&&(g=!0,i=i.split(" ")[1].split(","),h=[parseInt(i[0],10),parseInt(i[1],10),parseInt(i[2],10)]))}catch(k){}return{w3:a,pv:h,wk:f,ie:g,win:d,mac:e}}();!function(){W.w3&&((typeof M.readyState!=E&&"complete"==M.readyState||typeof M.readyState==E&&(M.getElementsByTagName("body")[0]||M.body))&&c(),T||(typeof M.addEventListener!=E&&M.addEventListener("DOMContentLoaded",c,!1),W.ie&&W.win&&(M.attachEvent(K,function(){"complete"==M.readyState&&(M.detachEvent(K,arguments.callee),c())}),L==top&&function(){if(!T){try{M.documentElement.doScroll("left")}catch(a){return void setTimeout(arguments.callee,0)}c()}}()),W.wk&&function(){return T?void 0:/loaded|complete/.test(M.readyState)?void c():void setTimeout(arguments.callee,0)}(),e(c)))}()}setTimeout(function(){c()},100);!function(){W.ie&&W.win&&a.attachEvent("onunload",function(){for(var a=S.length,b=0;a>b;b++)S[b][0].detachEvent(S[b][1],S[b][2]);for(var c=R.length,d=0;c>d;d++)p(R[d]);for(var e in W)W[e]=null;if(W=null,"undefined"!=typeof swfobject){for(var f in swfobject)swfobject[f]=null;swfobject=null}})}();return{gH:function(a,b,c,d){if(W.w3&&a&&b){var e={};e.id=a,e.swfVersion=b,e.ln=c,e.callbackFn=d,Q[Q.length]=e,w(a,!1)}else d&&d({success:!1,id:a})},lp:function(a){return W.w3?i(a):void 0},embedSWF:function(a,b,c,e,f,g,h,i,l,m){var o={success:!1,id:b};W.w3&&!(W.wk&&W.wk<312)&&a&&b&&c&&e&&f?(w(b,!1),d(function(){c+="",e+="";var d={};if(l&&typeof l===F)for(var p in l)d[p]=l[p];d.data=a,d.width=c,d.height=e;var q={};if(i&&typeof i===F)for(var r in i)q[r]=i[r];if(h&&typeof h===F)for(var s in h)typeof q.flashvars!=E?q.flashvars+="&"+s+"="+h[s]:q.flashvars=s+"="+h[s];if(u(f)){var t=n(d,q,b);d.id==b&&w(b,!0),o.success=!0,o.ref=t}else{if(g&&j())return d.data=g,void k(d,q,b,m);w(b,!0)}m&&m(o)})):m&&m(o)},switchOffAutoHideShow:function(){V=!1},ua:W,kL:function(){return{major:W.pv[0],minor:W.pv[1],release:W.pv[2]}},kf:u,iV:function(a,b,c){return W.w3?n(a,b,c):void 0},jS:function(a,b,c,d){W.w3&&j()&&k(a,b,c,d)},jv:function(a){W.w3&&p(a)},ik:function(a,b,c,d){W.w3&&v(a,b,c,d)},cz:d,jC:e,kY:function(a){var b=M.location.search||M.location.hash;if(b){if(/\?/.test(b)&&(b=b.split("?")[1]),null==a)return x(b);for(var c=b.split("&"),d=0;d<c.length;d++)if(c[d].substring(0,c[d].indexOf("="))==a)return x(c[d].substring(c[d].indexOf("=")+1))}return""},lq:function(){if(U){var a=r(J);a&&y&&(a.parentNode.replaceChild(y,a),z&&(w(z,!0),W.ie&&W.win&&(y.style.display="block")),A&&A(B)),U=!1}}}}CKFinder.addPlugin("flashupload",{readOnly:!1,appReady:function(b){if("asp"!=b.config.connectorLanguage||CKFinder.env.ie){var c=b.document,d=c.defaultView||c.parentWindow,e=a(d,c);e.kf("10.2.0")&&setTimeout(function(){b.replaceUploadForm('<iframe src="'+CKFinder.getPluginPath("flashupload")+'Uploader.html" style="width: 100%; height: 98%;" frameBorder="0"></iframe>',function(){b.resizeFormPanel(100),d.api=b,d.create_swfobject=a,d.sessionIdentifiers={CFID:"CFID",CFTOKEN:"CFTOKEN",JSESSIONID:"jsessionid"},CKFinder.env.ie||d.flash_cookies||b.connector.sendCommandPost("LoadCookies",null,null,function(a){if(a.checkError())return!1;var b=a.selectSingleNode("Connector/Cookies");if(b){var c=b.attributes.getNamedItem("sessionCookieName"),e=b.attributes.getNamedItem("sessionParameterName");c&&c.value&&e&&e.value&&(d.sessionIdentifiers[c.value]=e.value)}var f=a.selectNodes("Connector/Cookies/Cookie");if(f&&f.length){d.flash_cookies={};for(var g=0;g<f.length;g++){var h=f[g].attributes.getNamedItem("value").value,i=f[g].attributes.getNamedItem("name").value;d.flash_cookies[i]=h}}})},!1,12)},100)}}})}(),function(){function a(a,b){var c,f=a.aG["formpanel.formpanel"],g=a.cS("upload");if(g.bu!=d.aY)if(g.bu==d.eV)for(c=0;c<b.length;c++)e(f,b[c]);else{for(c=0;c<b.length;c++)i.push(b[c]);g.exec()}}function b(a,b){a=a.getChild([0,0]);var c=a.getChild(0),d=a.getChild(1),e=a.getChild([2,0]),f=a.getChild(3),g=a.getChild(4),h={},i=0,j=0,k=a.getDocument().getById("ckf_cancelUpload"),l=!1,m=0,n=[],o=b.config.maxSimultaneousUploads,p=0,q=0,r=0;this.ns=function(){n=[];for(var a in h){var b=h[a];b.close&&b.close()}return s(),!0},this.ld=function(a){h[a.id]=a,j++,1==j&&(k.getFirst().setHtml(b.lang.UploadBtnCancel),k.addClass("cke_dialog_ui_button_cancel"),k.removeClass("cke_dialog_ui_button_ok"))},this.lQ=function(a){i--,0===j&&0===i&&k.oW("click")},this.mU=function(a,c,d){i++,c&&b.aV==c.folder&&(l=c),j--,delete h[a.id],d&&(r+=a.size,m--,n.length>0&&(m++,n.shift().mW())),0===j&&(k.getFirst().setHtml(b.lang.CloseBtn),k.addClass("cke_dialog_ui_button_ok"),k.removeClass("cke_dialog_ui_button_cancel"),s()),or(),nU()},this.mE=function(a,b){if(p--,q-=a.size,t(),b)for(var c=0;c<n.length;c++)if(n[c]==a)return void n.splice(c,1)};var s=function(){l&&(b.aV==l.folder&&b.oW("requestShowFolderFiles",{folder:l.folder,mw:l.filename}),l=null)};this.nU=function(){var a=0;for(var c in h){var d=h[c];d.speed&&(a+=d.speed)}g.setText(CKFinder.tools.formatSpeed(a,b.lang))},this.or=function(){var a=r;for(var c in h){var d=h[c];d.lT&&(a+=d.lT)}var g=0===q?0:a/q*100;0>g&&(g=0),g>100&&(g=100),e.setStyle("width",g+"%"),0!==g&&100!=g&&(g=g.toFixed(1)),f.setText(b.lang.UploadUploaded.replace("!n",g)+" - "+CKFinder.tools.formatSize(a/1024,b.lang))};var t=function(){c.setText(b.lang.UploadTotalFiles+" "+p+" "),d.setText(b.lang.UploadTotalSize+" "+CKFinder.tools.formatSize(q/1024,b.lang))};return this.nv=function(a){return p++,q+=a.size,t(),o>m||!o?(m++,void a.mW()):void n.push(a)},t(),this}function c(a,b){var c=a.bn(),d=c.getDocument(),e=a.app,f=new k("div",d);this.ib=a,this.id=h++,this.speed=0,this.lT=0,this.nZ=0,f.setAttribute("class","ckf_upload_info"),f.setHtml('<div class="ckf_progress_wrapper"><div class="ckf_progress_info"><span>'+b+' </span><span></span><div class="ckf_progress_bar_container"><div></div></div><span class="ckf_status"></span><span class="ckf_speed"></span><div class="ckf_outcome"></div></div></div><div class="ckf_uploadButtons"><a class="cke_dialog_ui_button cke_dialog_ui_button_cancel" name="cancel"><span class="cke_dialog_ui_button">'+e.lang.UploadBtnCancel+"</span></a></div>"),c.dB().append(f),e.cg.resizeFormPanel(),this.container=f;var i=this.container.getChild([0,0]);this.mx=i.getChild(1),this.ni=i.getChild([2,0]),this.mz=i.getChild(3),this.np=i.getChild(4),this.mI=i.getChild(5);var j=this;return this.button=this.container.getChild([1,0]),this.button.on("click",function(){j.close()}),g.ld(this),this}function e(a,b){var d=a.app,e=d.aV,f=b.size,g=b.name;if(!g.length)return void a.oW("failedUploadFile");var h=new c(a,g);if(0===f)return void h.mD(d.lang.Errors[202]);var i=g.match(/\.([^\.]+)\s*$/),j=i&&i[1];if(!j||!e.getResourceType().isExtensionAllowed(j))return void h.mD(a.app.lang.UploadExtIncorrect);var k=parseInt(d.config.uploadMaxSize,10);if(k&&f>k)return void h.mD(d.lang.Errors[203]);var l=parseInt(d.cg.getSelectedFolder().getResourceType().maxSize,10);if(l&&f>l&&(d.config.uploadCheckImages||!j.match(/^(jpg|jpeg|gif|png|bmp)$/i)))return void h.mD(d.lang.Errors[203]);var m=new XMLHttpRequest,n=function(b,c){var f={step:3,filename:b,folder:e};if(c&&!b)h.mD(c,f);else{var g={filename:b,folder:e};c?h.mC("",c,g):h.mC(d.lang.UploadUploaded.replace("!n%",b),"",g),a.oW("successUploadFile",f)}a.oW("afterUploadFile",f)};m.addEventListener("error",function(a){form.removeClass("progress_visible"),n("",d.lang.UploadUnknError)},!1),m.addEventListener("load",function(a){var b=/(.*)\|(.*)/,c=a.target.responseText,d=c.match(b);return d?void n(d[1].replace(/\\'/g,"'"),d[2].replace(/\\'/g,"'")):void n("",c)},!1),m.open("POST",d.connector.composeUrl("FileUpload",{response_type:"txt"},e.type,e)),h.lN(m,b)}var g,h=0,i=[];m.add("html5upload",{bM:["uploadform"],bz:function(c){if("undefined"!=typeof FormData){var d='<div id="ckf_upload_form"><div class="ckf_upload_info" id="ckf_globalUploads"><div class="ckf_progress_wrapper"><div class="ckf_progress_info"><span></span><span></span><div class="ckf_progress_bar_container"><div></div></div><span class="ckf_status"></span><span class="ckf_speed"></span></div></div><div class="ckf_uploadButtons"><input type="file"'+(f.safari&&!f.mac?"":" multiple")+' id="ckf_fileInput"><a class="cke_dialog_ui_button"><span class="cke_dialog_ui_button" id="ckf_addFiles">'+c.lang.UploadAddFiles+'</span></a><br><a class="cke_dialog_ui_button cke_dialog_ui_button_ok" id="ckf_cancelUpload"><span class="cke_dialog_ui_button">'+c.lang.CloseBtn+"</span></a></div></div></div>";setTimeout(function(){c.cg.replaceUploadForm(d,function(){var d=c.aG["formpanel.formpanel"],f=d.bn(),h=f.getDocument(),k=h.getById("ckf_fileInput");if(g=b(h.getById("ckf_globalUploads"),c),k.on("change",function(b){a(c,b.jN.$.files)}),0==i.length)window.setTimeout(function(){k.$.click()},100);else{for(var l=0;l<i.length;l++)e(d,i[l]);i=[]}h.getById("ckf_addFiles").on("click",function(a){k.$.click()}),h.getById("ckf_cancelUpload").on("click",function(a){g.ns()&&d.oW("requestUnloadForm")}),h.getById("ckf_upload_form").on("dragover",j)},!0,11);var h=c.layout.pn();h.getDocument().on("dragover",function(a){var b=a.data.$.dataTransfer;b&&(b.dropEffect="none",f.webkit&&a.data.preventDefault())});var j=function(a){var b=a.data.$.dataTransfer;b&&(b.files&&b.files.length||b.types&&(b.types.contains&&b.types.contains("Files")||b.types.indexOf&&-1!=b.types.indexOf("Files"))?(b.dropEffect="copy",a.data.stopPropagation(),a.data.preventDefault()):(b.dropEffect="none",a.data.preventDefault()))};h.on("dragover",j),h.getDocument().on("drop",function(b){var d=b.data.$.dataTransfer;d&&d.files&&d.files.length>0&&(a(c,d.files),b.data.preventDefault())})},500)}}}),c.prototype.mC=function(a,b,c){var d=this,e=d.ib.app;d.mI.setText(b),d.ni.getParent().hide(),d.mz.hide(),d.np.hide(),g.mU(d,c,!!d.bT),delete d.bT,b?(d.button.getFirst().setHtml(e.lang.CloseBtn),d.button.addClass("cke_dialog_ui_button_ok"),d.button.removeClass("cke_dialog_ui_button_cancel")):d.close(),e.cg.resizeFormPanel()},c.prototype.mD=function(a,b){this.ib.oW("failedUploadFile",b),this.container.addClass("ckf_FileError"),this.mC("",a)},c.prototype.close=function(){var a=this;a.bT&&a.bT.abort&&(a.bT.abort(),g.mE(a,a.file),a.size=0,g.mU(a,null,!a.file),delete a.bT,delete a.file),a.container.remove(),g.lQ(a)},c.prototype.nR=function(a){var b=this;b.speed=a/1024,b.np.setText(CKFinder.tools.formatSpeed(b.speed,b.ib.app.lang)),g.nU()},c.prototype.or=function(a){var b=this;b.lT=a;var c=a/b.size*100;0>c&&(c=0),c>100&&(c=100),b.ni.setStyle("width",c+"%"),0!==c&&100!=c&&(c=c.toFixed(1)),b.mz.setText(b.ib.app.lang.UploadUploaded.replace("!n",c)),g.or()},c.prototype.lN=function(a,b){var c=this;c.bT=a,c.file=b,c.size=b.size,c.mx.setText(" - "+CKFinder.tools.formatSize(b.size/1024,c.ib.app.lang)),g.nv(c)},c.prototype.mW=function(){d.log("[UPLOADFORM] Starting XHR file upload.");var a=this.bT.upload;if(a){a.oS=(new Date).getTime();var b=function(a,b){var c=((new Date).getTime()-a.oS)/1e3;b.nR(a.kC/c)};a.interval=window.setInterval(b,1e3,a,this),a.onload=function(a){window.clearInterval(a.target.interval)};var c=this;a.kC=0,a.onprogress=function(a){a.lengthComputable&&(a.target.kC=a.loaded,c.or(a.loaded),b(a.target,c))}}var e=new FormData;e.append("upload",this.file),this.bT.send(e),delete this.file}}(),function(){function a(a,b,c,d){a.execCommand(d?"moveFilesToFolder":"copyFilesToFolder",{files:c,destination:b,fileCallback:function(a,b){for(var c=i.indexOf(a.basketFiles,b),d=1,e=a.basketFiles.length-1,f=c;e>f;f++)a.basketFiles[f]?a.basketFiles[f]=a.basketFiles[f+d]:d++;a.basketFiles.length=Math.max(e,0)}})}m.add("basket",{bM:["foldertree","filesview","contextmenu"],readOnly:!1,basketToolbar:[["clearBasket",{label:"BasketClear",command:"TruncateBasket",disableEmpty:!0}]],basketFileContextMenu:[["mu",{label:"BasketRemove",command:"RemoveFileFromBasket",group:"file3"}],["hN",{label:"BasketOpenFolder",command:"OpenFileFolder",group:"file1"}]],bz:function(b){var c=window.top[d.nd+"cation"][d.jG+"st"],e=[],f=function(){for(var a=b.basketFiles.length?d.aS:d.aY,c=0,f=e.length;f>c;c++)b.cS(e[c]).bR(a)};b.bD("FolderPasteCopyBasket",{exec:function(b){var c=b.aV;c&&a(b,c,b.basketFiles)}}),b.bD("FolderPasteMoveBasket",{exec:function(b){if(d.bF&&1==d.bs.indexOf(d.bF.substr(1,1))%5&&d.lS(c)!=d.lS(d.ed)||d.bF&&d.bF.substr(3,1)!=d.bs.substr(9*(d.bs.indexOf(d.bF.substr(0,1))+d.bs.indexOf(d.bF.substr(2,1)))%(d.bs.length-1),1))b.msgDialog("","This function is disabled in the demo version of CKFinder.<br />Please visit the <a href='http://ckfinder.com'>CKFinder web site</a> to obtain a valid license.");else{var e=b.aV;if(!e)return;a(b,e,b.basketFiles,!0),f()}}}),b.eU({folderPasteMoveBasket:{label:b.lang.BasketMoveFilesHere,command:"FolderPasteMoveBasket",group:"folder1"},folderPasteCopyBasket:{label:b.lang.BasketCopyFilesHere,command:"FolderPasteCopyBasket",group:"folder1"}});var g=b.basket=new d.aL.BasketFolder(b);b.basketFiles=[],b.on("uiReady",function(a){function c(a){for(var b in a.plugins)if(a.plugins.hasOwnProperty(b)&&(b=a.plugins[b],b.basketToolbar))for(var c=0;c<b.basketToolbar.length;c++){var d=b.basketToolbar[c];if(!a.bY._.items[d[0]]){var f=i.deepCopy(d[1]),g=f.command;if(!f.command){var h=d[1].onClick;g="BasketToolbar_"+d[0],a.bD(g,{exec:function(a){h(a.cg)}}),f.command=g}var j=i.capitalize(b.name);"function"==typeof f.label?f.label=f.label.call(b,a.cg):a.lang[b.name]&&a.lang[b.name][f.label]?f.label=a.lang[b.name][f.label]:a.lang[j]&&a.lang[j][f.label]?f.label=a.lang[j][f.label]:a.lang[f.label]&&(f.label=a.lang[f.label]),f.basketToolbar=1,f.disableEmpty&&e.push(g),a.bY.add(d[0],CKFinder._.UI_BUTTON,f)}}}function h(a){if(a.eU)for(var b in a.plugins)if(a.plugins.hasOwnProperty(b)&&(b=a.plugins[b],b.basketFileContextMenu))for(var c=0;c<b.basketFileContextMenu.length;c++){var d=b.basketFileContextMenu[c];if(!a._.iG[d[0]]){var f=i.deepCopy(d[1]);if(!f.command){var g="BasketContextMenu_"+d[0],h=d[1].onClick;a.bD("BasketContextMenu_"+d[0],{exec:function(a){h(a.cg)}}),f.command=g}var j=i.capitalize(b.name);"function"==typeof f.label?f.label=f.label.call(b,a.cg):a.lang[b.name]&&a.lang[b.name][f.label]?f.label=a.lang[b.name][f.label]:a.lang[j]&&a.lang[j][f.label]?f.label=a.lang[j][f.label]:a.lang[f.label]&&(f.label=a.lang[f.label]),f.disableEmpty&&e.push(g),a.gp(d[0],f),m.push(d[0])}}}var j=b.aG["foldertree.foldertree"];j.on("beforeAddFolder",function(a){a.removeListener(),a.data.folders.push(g)}),j.on("beforeDroppable",function(a){if(a.data.target instanceof d.aL.BasketFolder&&(a.data.source instanceof d.aL.File&&(a.data.source=[a.data.source]),i.isArray(a.data.source)&&a.data.source.length&&a.data.source[0]instanceof d.aL.File)){for(var c,e,f=a.data.source,g=0,h=0,j=f.length;j>h;h++){for(c=0,e=b.basketFiles.length;e>c;c++)if(f[h].isSameFile(b.basketFiles[c])){g=1;break}g||b.basketFiles.push(f[h])}a.cancel(1)}}),j.on("beforeContextMenu",function(a){var c;a.data.folder instanceof d.aL.BasketFolder?(c=a.data.bj,delete c.lI,delete c.removeFolder,delete c.kl,c.qT=b.basketFiles.length?d.aS:d.aY):(c=a.data.bj,c.folderPasteCopyBasket=b.basketFiles.length?d.aS:d.aY,c.folderPasteMoveBasket=b.basketFiles.length?d.aS:d.aY)}),j.on("beforeKeyboardNavigation",function(a){if(a.data.folder instanceof d.aL.BasketFolder){var b=a.data.db();(46==b||113==b)&&a.cancel()}}),b.bD("TruncateBasket",{exec:function(a){a.basketFiles.length&&a.fe("",a.lang.BasketTruncateConfirm,function(){a.basketFiles.length=0,a.oW("requestSelectFolder",{folder:a.basket})})}}),b.bD("RemoveFileFromBasket",{exec:function(a){var b=a.aG["filesview.filesview"].tools.oO();b&&b.length&&a.fe("",1==b.length?a.lang.BasketRemoveConfirm.replace("%1",b[0].name):a.lang.BasketRemoveConfirmMultiple.replace("%1",b.length),function(){for(var c,d=0,e=b.length;e>d;d++)for(c=0;c<a.basketFiles.length;c++)if(b[d].isSameFile(a.basketFiles[c])){a.basketFiles.splice(c,1);break}a.oW("requestSelectFolder",{folder:a.basket}),f()})}}),b.bD("OpenFileFolder",{exec:function(a){var b=a.aG["filesview.filesview"].data().cG;b&&a.oW("requestSelectFolder",{folder:b.folder})}}),b.eU&&b.gp("truncateBasket",{label:b.lang.BasketClear,command:"TruncateBasket",group:"folder"});var k=[],l=b.aG["filesview.filesview"],m=[];l.on("beforeContextMenu",function(a){if(a.data.folder instanceof d.aL.BasketFolder){var b=a.data.bj;delete b.renameFile,delete b.deleteFile,delete b.deleteFiles,b.mu=d.aS,b.hN=d.aS;for(var c=0;c<m.length;c++)b[m[c]]=d.aS}}),l.on("beforeShowFolderFiles",function(a){if(a.data.folder instanceof d.aL.BasketFolder){a.cancel(1),this.app.oW("requestRenderFiles",{files:b.basketFiles,mj:b.lang.BasketEmpty,eu:1,folder:a.data.folder}),this.app.oW("requestRepaintFolder",a.data),c(this.app),h(this.app),f();for(var e=this.app.dh.fk,g=0;g<e.length;g++){var i=this.app.document.getById(e[g].id),j=['<span class="cke_toolgroup" id="basket">'];for(var l in this.app.bY._.items)if(this.app.bY._.items.hasOwnProperty(l)){var m=b.bY._.items[l];if(m.mp[0].basketToolbar){m=b.bY.create(l);var n=m.er(b,j),o=e[g].items.push(n)-1;o>0&&(n.previous=e[g].items[o-1],n.previous.next=n),k[g]||(k[g]=[]),k[g].push(o)}}j.push("</span>"),i.appendHtml(j.join(""))}this.on("beforeShowFolderFiles",function(a){this.app.document.getById("basket").remove();for(var b=this.app.dh.fk,c=0;c<b.length;c++)for(var d=0;d<b[c].items.length;d++)k[c][d]&&delete b[c].items[d];a.removeListener()},null,null,1),this.oW("successShowFolderFiles",a.data),this.oW("afterShowFolderFiles",a.data)}}),l.on("beforeKeyboardNavigation",function(a){var c=b.aV;if(c&&c instanceof d.aL.BasketFolder){var e=a.data.db();46==e&&(a.cancel(),b.execCommand("RemoveFileFromBasket")),113==e&&a.cancel()}})},null,null,20)}}),d.aL.BasketFolder=i.createClass({$:function(a){var b=this;d.aL.Folder.call(b,a,null,a.lang.BasketFolder),b.hasChildren=0,b.acl=new d.aL.Acl("1111111"),b.isBasket=!0},base:d.aL.Folder,ej:{createNewFolder:function(){},getChildren:function(a){a.apply(this,null)},rename:function(){},remove:function(){},getUrl:function(){return"ckfinder://basketFolder"},getUploadUrl:function(){return null},getPath:function(){return"/"},copyFiles:function(a){},moveFiles:function(a){}}})}(),d.DIALOG_RESIZE_NONE=0,d.DIALOG_RESIZE_WIDTH=1,d.DIALOG_RESIZE_HEIGHT=2,d.DIALOG_RESIZE_BOTH=3,function(){function a(a){return!!this._.tabs[a][0].$.offsetHeight}function b(){for(var b=this,c=b._.gx,d=b._.cU.length,e=i.indexOf(b._.cU,c)+d,f=e-1;f>e-d;f--)if(a.call(b,b._.cU[f%d]))return b._.cU[f%d];return null}function c(){for(var b=this,c=b._.gx,d=b._.cU.length,e=i.indexOf(b._.cU,c),f=e+1;e+d>f;f++)if(a.call(b,b._.cU[f%d]))return b._.cU[f%d];return null}function e(a,b,c){this.element=b,this.cQ=c,this.fM=function(){return!b.getAttribute("disabled")&&b.isVisible()},this.focus=function(){a._.aW=this.cQ,this.element.focus()},b.on("keydown",function(a){a.data.db()in{32:1,13:1}&&this.oW("click")}),b.on("focus",function(){this.oW("mouseover")}),b.on("blur",function(){this.oW("mouseout")})}function h(a,b){this._={dialog:a},i.extend(this,b)}function l(a){function b(b){var c,f,h=a.hR(),k=d.document.getWindow().eR(),l=b.data.$.screenX,m=b.data.$.screenY,n=l-e.x,o=m-e.y;e={x:l,y:m},g.x+=n,g.y+=o,c=g.x+j[3]<i?-j[3]:g.x-j[1]>k.width-h.width-i?k.width-h.width+j[1]:g.x,f=g.y+j[0]<i?-j[0]:g.y-j[2]>k.height-h.height-i?k.height-h.height+j[2]:g.y,a.move(c,f,1),b.data.preventDefault()}function c(a){if(d.document.removeListener("mousemove",b),d.document.removeListener("mouseup",c),f.ie6Compat){var e=w.getChild(0).getFrameDocument();e.removeListener("mousemove",b),e.removeListener("mouseup",c)}}var e=null,g=null,h=(a.getElement().getFirst(),a.eY()),i=h.config.dialog_magnetDistance,j=h.skin.margins||[0,0,0,0];"undefined"==typeof i&&(i=20),a.bO.title.on("mousedown",function(h){if(e={x:h.data.$.screenX,y:h.data.$.screenY},d.document.on("mousemove",b),d.document.on("mouseup",c),g=a.gz(),f.ie6Compat){var i=w.getChild(0).getFrameDocument();i.on("mousemove",b),i.on("mouseup",c)}h.data.preventDefault()},a)}function o(a){function b(b){if(a._.moved&&"rtl"==s.lang.dir){var c=a._.element.getFirst();c.setStyle("right",b+"px"),c.removeStyle("left")}else a._.moved||a.layout()}function c(b){q=a.hR(),b=b.data.$;var c=a.bO.contents,i=c.$.getElementsByTagName("iframe").length;if(i&&(r=k.kE('<div class="cke_dialog_resize_cover" style="height: 100%; position: absolute; width: 100%;"></div>'),c.append(r)),n=q.height-a.bO.contents.hR("height",!(f.gecko||f.opera||g&&f.quirks)),m=q.width-a.bO.contents.hR("width",1),p={x:b.screenX,y:b.screenY},o=d.document.getWindow().eR(),d.document.on("mousemove",e),d.document.on("mouseup",h),f.ie6Compat){var j=w.getChild(0).getFrameDocument();j.on("mousemove",e),j.on("mouseup",h)}b.preventDefault&&b.preventDefault()}function e(c){var e="rtl"==s.lang.dir,f=(c.data.$.screenX-p.x)*(e?-1:1),g=c.data.$.screenY-p.y,h=q.width,i=q.height,k=h+f*(a._.moved?1:2),r=i+g*(a._.moved?1:2),t=a._.element.getFirst(),u=e&&t.getComputedStyle("right"),v=a.gz();u&&(u="auto"==u?o.width-(v.x||0)-t.hR("width"):parseInt(u,10)),v.y+r>o.height&&(r=o.height-v.y),(e?u:v.x)+k>o.width&&(k=o.width-(e?u:v.x)),l!=d.DIALOG_RESIZE_WIDTH&&l!=d.DIALOG_RESIZE_BOTH||e&&f>0&&!v.x||(h=Math.max(j.minWidth||0,k-m)),(l==d.DIALOG_RESIZE_HEIGHT||l==d.DIALOG_RESIZE_BOTH)&&(i=Math.max(j.minHeight||0,r-n)),a.resize(h,i),b(u),c.data.preventDefault()}function h(){if(d.document.removeListener("mouseup",h),d.document.removeListener("mousemove",e),r&&(r.remove(),r=null),f.ie6Compat){var b=w.getChild(0).getFrameDocument();b.removeListener("mouseup",h),
b.removeListener("mousemove",e)}if("rtl"==s.lang.dir){var c=a._.element.getFirst(),g=c.getComputedStyle("left");g="auto"==g?o.width-parseInt(c.rd("right"),10)-a.hR().width:parseInt(g,10),c.removeStyle("right"),a._.position.x+=1,a.move(g,a._.position.y)}}var j=a.dg,l=j.resizable;if(l!=d.DIALOG_RESIZE_NONE){var m,n,o,p,q,r,s=a.eY();a.on("load",function(){var b="";l==d.DIALOG_RESIZE_WIDTH?b=" cke_resizer_horizontal":l==d.DIALOG_RESIZE_HEIGHT&&(b=" cke_resizer_vertical");var e=k.kE('<div class="cke_resizer'+b+'" title="'+i.htmlEncode(s.lang.resize)+'"></div>');e.on("mousedown",c),a.bO.footer.append(e,1)}),s.on("destroy",function(){i.removeFunction(c)})}}function p(a,b){var c=function(){e(this),b(this)},d=function(){e(this)},e=function(a){a.removeListener("ok",c),a.removeListener("cancel",d)};a.on("ok",c),a.on("cancel",d)}d.dialog=function(a,e){function g(a){var b=p._.eO,c=a?1:-1;if(!(b.length<1)){for(var d=(p._.aW+c+b.length)%b.length,e=d;!b[e].fM()&&(e=(e+c+b.length)%b.length,e!=d););b[e].focus(),"text"==b[e].type&&b[e].select()}}function h(a){if(p==d.dialog._.dL){var e=a.data.db();if(s=0,9==e||e==d.dy+9){var f=e==d.dy+9;if(p._.eC){var h=f?b.call(p):c.call(p);p.selectPage(h),p._.tabs[h][0].focus()}else g(!f);s=1}else e!=d.eJ+121||p._.eC?37!=e&&39!=e||!p._.eC||(h=37==e?b.call(p):c.call(p),p.selectPage(h),p._.tabs[h][0].focus(),s=1):(p._.eC=!0,p._.tabs[p._.gx][0].focus(),s=1);s&&(a.stop(),a.data.preventDefault())}}function k(a){s&&a.data.preventDefault()}var m=d.dialog._.ev[e];m=i.extend(m(a),q),m=i.clone(m),m=new u(this,m);var n=(d.document,a.theme.pu(a));this._={app:a,element:n.element,name:e,hB:{width:0,height:0},size:{width:0,height:0},contents:{},buttons:{},iX:{},tabs:{},cU:[],gx:null,nM:null,gV:0,qF:null,eC:!1,eO:[],aW:0,hasFocus:!1},this.bO=n.bO,this.bO.dialog.setStyles({position:f.ie6Compat?"absolute":"fixed",top:0,left:0,visibility:"hidden"}),d.event.call(this),this.dg=m=d.oW("dialogDefinition",{name:e,dg:m},a).dg,m.onLoad&&this.on("load",m.onLoad),m.onShow&&this.on("show",m.onShow),m.onHide&&this.on("hide",m.onHide),m.onOk&&this.on("ok",function(a){m.onOk.call(this,a)===!1&&(a.data.hide=!1)}),m.onCancel&&this.on("cancel",function(a){m.onCancel.call(this,a)===!1&&(a.data.hide=!1)});var p=this,r=function(a){var b=p._.contents,c=!1;for(var d in b)for(var e in b[d])if(c=a.call(this,b[d][e]))return};this.on("ok",function(b){r(function(c){if(c.validate){var d=c.validate(this);if("string"==typeof d&&(a.document.getWindow().$.alert(d),d=!1),d===!1)return c.select?c.select():c.focus(),b.data.hide=!1,b.stop(),!0}})},this,null,0),this.on("cancel",function(b){r(function(c){return c.isChanged()?(a.document.getWindow().$.confirm(a.lang.common.confirmCancel)||(b.data.hide=!1),!0):void 0})},this,null,0),this.bO.close.on("click",function(a){this.oW("cancel",{hide:!0}).hide!==!1&&this.hide()},this);var s;this.on("show",function(){if(d.document.on("keydown",h,this,null,0),(f.opera||f.gecko&&f.mac)&&d.document.on("keypress",k,this),f.ie6Compat){var a=w.getChild(0).getFrameDocument();a.on("keydown",h,this,null,0)}}),this.on("hide",function(){d.document.removeListener("keydown",h),(f.opera||f.gecko&&f.mac)&&d.document.removeListener("keypress",k)}),this.on("iframeAdded",function(a){var b=new j(a.data.iframe.$.contentWindow.document);b.on("keydown",h,this,null,0)}),this.on("show",function(){this._.hasFocus||(this._.aW=-1,g(!0))},this,null,4294967295),f.ie6Compat&&this.on("load",function(a){var b=this.getElement(),c=b.getFirst();c.remove(),c.appendTo(b)},this),l(this),o(this),this.bO.title.setText(m.title);for(var t=0;t<m.contents.length;t++)this.addPage(m.contents[t]);var v=/cke_dialog_tab(\s|$|_)/;this.bO.tabs.on("click",function(a){var b,c=this,d=a.data.bK();(v.test(d.$.className)||"a"==d.getName())&&(b=d.$.id.substr(0,d.$.id.lastIndexOf("_")),c.selectPage(b),c._.eC&&(c._.eC=!1,c._.aW=-1,g(!0)),a.data.preventDefault())},this);var x=[],y=d.dialog._.gv.hbox.dQ(this,{type:"hbox",className:"cke_dialog_footer_buttons",widths:[],children:m.buttons},x).getChild();for(this.bO.footer.setHtml(x.join("")),t=0;t<y.length;t++)this._.buttons[y[t].id]=y[t];d.skins.load(a,"dialog")},d.dialog.prototype={resize:function(){return function(a,b){var c=this;c._.hB&&c._.hB.width==a&&c._.hB.height==b||(d.dialog.oW("resize",{dialog:c,skin:c._.app.gd,width:a,height:b},c._.app),c._.hB={width:a,height:b})}}(),hR:function(){var a=this._.element.getFirst();return{width:a.$.offsetWidth||0,height:a.$.offsetHeight||0}},mn:function(){var a=this.hR();return a.height=a.height-(this.bO.title.$.offsetHeight||0)-(this.bO.footer.$.offsetHeight||0),a},move:function(){var a;return function(b,c,e){var f=this,g=f._.element.getFirst();if(void 0===a&&(a="fixed"==g.getComputedStyle("position")),!a||!f._.position||f._.position.x!=b||f._.position.y!=c){if(f._.position={x:b,y:c},!a){var h=d.document.getWindow().hV();b+=h.x,c+=h.y}g.setStyles({left:(b>0?b:0)+"px",top:(c>0?c:0)+"px"}),e&&(f._.moved=1)}}}(),gz:function(){return i.extend({},this._.position)},show:function(){var a=this._.app;if("qt"==a.mode&&g){var b=a.getSelection();b&&b.up()}var c=this._.element,e=this.dg;if(!c.getParent()||!c.getParent().equals(d.document.bH())){if(c.appendTo(d.document.bH()),f.gecko&&f.version<10900){var h=this.bO.dialog;h.setStyle("position","absolute"),setTimeout(function(){h.setStyle("position","fixed")},0)}if(this.resize(this._.hB&&this._.hB.width||e.minWidth,this._.hB&&this._.hB.height||e.minHeight),this.selectPage(this.dg.contents[0].id),this.reset(),null===d.dialog._.gw&&(d.dialog._.gw=this._.app.config.baseFloatZIndex),this._.element.getFirst().setStyle("z-index",d.dialog._.gw+=10),null===d.dialog._.dL){d.dialog._.dL=this,this._.ep=null,x(this._.app),c.on("keydown",A),c.on(f.opera?"keypress":"keyup",B);for(var j in{keyup:1,keydown:1,keypress:1})c.on(j,H)}else{this._.ep=d.dialog._.dL;var k=this._.ep.getElement().getFirst();k.$.style.zIndex-=Math.floor(this._.app.config.baseFloatZIndex/2),d.dialog._.dL=this}C(this,this,"",null,function(){var a=this.getButton("cancel");a?a.click():this.oW("cancel",{hide:!0}).hide!==!1&&this.hide()}),this._.hasFocus=!1,i.setTimeout(function(){this.layout(),this.bO.dialog.setStyle("visibility",""),this.cr("load",{}),this.oW("show",{}),this._.app.oW("dialogShow",this),this.gh(function(a){a.jW&&a.jW()})},100,this)}},layout:function(){var a=this,b=d.document.getWindow().eR(),c=a.hR();a.move(a._.moved?a._.position.x:(b.width-c.width)/2,a._.moved?a._.position.y:(b.height-c.height)/2)},gh:function(a){var b=this;for(var c in b._.contents)for(var d in b._.contents[c])a(b._.contents[c][d]);return b},reset:function(){var a=function(a){a.reset&&a.reset()};return function(){return this.gh(a),this}}(),rN:function(){var a=arguments;this.gh(function(b){b.qi&&b.qi.apply(b,a)})},sI:function(){var a=arguments;this.gh(function(b){b.rx&&b.rx.apply(b,a)})},hide:function(){this.oW("hide",{}),this._.app.oW("dialogHide",this);var a=this._.element;if(a.getParent()){if(a.remove(),this.bO.dialog.setStyle("visibility","hidden"),D(this),this._.ep){var b=this._.ep.getElement().getFirst();b.setStyle("z-index",parseInt(b.$.style.zIndex,10)+Math.floor(this._.app.config.baseFloatZIndex/2))}else y();if(d.dialog._.dL=this._.ep,this._.ep)d.dialog._.gw-=10;else{d.dialog._.gw=null,a.removeListener("keydown",A),a.removeListener(f.opera?"keypress":"keyup",B);for(var c in{keyup:1,keydown:1,keypress:1})a.removeListener(c,H);var e=this._.app;if(e.focus(),e._.activeElement=null,e._.oO=[],"qt"==e.mode&&g){var h=e.getSelection();h&&h.sd(!0)}}this.gh(function(a){a.ki&&a.ki()})}},addPage:function(a){var b=this,c=[],e=a.label?' title="'+i.htmlEncode(a.label)+'"':"",f=(a.elements,d.dialog._.gv.vbox.dQ(b,{type:"vbox",className:"cke_dialog_page_contents",children:a.elements,expand:!!a.expand,padding:a.padding,style:a.style||"width: 100%; height: 100%;"},c)),g=k.kE(c.join(""),d.document),h=k.kE(['<a class="cke_dialog_tab"',b._.gV>0?" cke_last":"cke_first",e,a.hidden?' style="display:none"':"",' id="',a.id+"_",i.getNextNumber(),'" href="javascript:void(0)"',' hp="true">',a.label,"</a>"].join(""),d.document);0===b._.gV?b.bO.dialog.addClass("cke_single_page"):b.bO.dialog.removeClass("cke_single_page"),b._.tabs[a.id]=[h,g],b._.cU.push(a.id),b._.gV++,b._.qF=h;for(var j,l=b._.contents[a.id]={},m=f.getChild();j=m.shift();)l[j.id]=j,"function"==typeof j.getChild&&m.push.apply(m,j.getChild());g.setAttribute("name",a.id),g.appendTo(b.bO.contents),h.unselectable(),b.bO.tabs.append(h),a.accessKey&&(C(b,b,"bP+"+a.accessKey,F,E),b._.iX["bP+"+a.accessKey]=a.id)},selectPage:function(a){var b=this;for(var c in b._.tabs){var d=b._.tabs[c][0],e=b._.tabs[c][1];c!=a&&(d.removeClass("cke_dialog_tab_selected"),e.hide())}var f=b._.tabs[a];f[0].addClass("cke_dialog_tab_selected"),f[1].show(),b._.gx=a,b._.nM=i.indexOf(b._.cU,a)},vJ:function(a){var b=this._.tabs[a]&&this._.tabs[a][0];b&&b.hide()},showPage:function(a){var b=this._.tabs[a]&&this._.tabs[a][0];b&&b.show()},getElement:function(){return this._.element},getName:function(){return this._.name},getContentElement:function(a,b){return this._.contents[a][b]},getValueOf:function(a,b){return this.getContentElement(a,b).getValue()},setValueOf:function(a,b,c){return this.getContentElement(a,b).setValue(c)},getButton:function(a){return this._.buttons[a]},click:function(a){return this._.buttons[a].click()},disableButton:function(a){return this._.buttons[a].disable()},enableButton:function(a){return this._.buttons[a].enable()},vj:function(){return this._.gV},getParentApi:function(){return this._.app.cg},eY:function(){return this._.app},rf:function(){return this.eY().getSelection().rf()},tQ:function(a,b){var c=this;if("undefined"==typeof b)b=c._.eO.length,c._.eO.push(new e(c,a,b));else{c._.eO.splice(b,0,new e(c,a,b));for(var d=b+1;d<c._.eO.length;d++)c._.eO[d].cQ++}},setTitle:function(a){this.bO.title.setText(a)}},i.extend(d.dialog,{add:function(a,b){this._.ev[a]&&"function"!=typeof b||(this._.ev[a]=b)},exists:function(a){return!!this._.ev[a]},getCurrent:function(){return d.dialog._.dL},okButton:function(){var a=function(a,b){return b=b||{},i.extend({id:"ok",type:"button",label:a.lang.common.ok,"class":"cke_dialog_ui_button_ok",onClick:function(a){var b=a.data.dialog;b.oW("ok",{hide:!0}).hide!==!1&&b.hide()}},b,!0)};return a.type="button",a.override=function(b){return i.extend(function(c){return a(c,b)},{type:"button"},!0)},a}(),cancelButton:function(){var a=function(a,b){return b=b||{},i.extend({id:"cancel",type:"button",label:a.lang.common.cancel,"class":"cke_dialog_ui_button_cancel",onClick:function(a){var b=a.data.dialog;b.oW("cancel",{hide:!0}).hide!==!1&&b.hide()}},b,!0)};return a.type="button",a.override=function(b){return i.extend(function(c){return a(c,b)},{type:"button"},!0)},a}(),addUIElement:function(a,b){this._.gv[a]=b}}),d.dialog._={gv:{},ev:{},dL:null,gw:null},d.event.du(d.dialog),d.event.du(d.dialog.prototype,!0);var q={resizable:d.DIALOG_RESIZE_NONE,minWidth:600,minHeight:400,buttons:[d.dialog.okButton,d.dialog.cancelButton]},r=function(a,b,c){for(var d,e=0;d=a[e];e++){if(d.id==b)return d;if(c&&d[c]){var f=r(d[c],b,c);if(f)return f}}return null},s=function(a,b,c,d,e){if(c){for(var f,g=0;f=a[g];g++){if(f.id==c)return a.splice(g,0,b),b;if(d&&f[d]){var h=s(f[d],b,c,d,!0);if(h)return h}}if(e)return null}return a.push(b),b},t=function(a,b,c){for(var d,e=0;d=a[e];e++){if(d.id==b)return a.splice(e,1);if(c&&d[c]){var f=t(d[c],b,c);if(f)return f}}return null},u=function(a,b){this.dialog=a;for(var c,d=b.contents,e=0;c=d[e];e++)d[e]=new h(a,c);i.extend(this,b)};u.prototype={vz:function(a){return r(this.contents,a)},getButton:function(a){return r(this.buttons,a)},uh:function(a,b){return s(this.contents,a,b)},qW:function(a,b){return s(this.buttons,a,b)},uP:function(a){t(this.contents,a)},uO:function(a){t(this.buttons,a)}},h.prototype={eB:function(a){return r(this.elements,a,"children")},add:function(a,b){return s(this.elements,a,b,"children")},remove:function(a){t(this.elements,a,"children")}};var v,w,x=function(a){var b=d.document.getWindow();if(!w){var c=a.config.dialog_backgroundCoverColor||"white",e=['<div style="position: ',f.ie6Compat?"absolute":"fixed","; z-index: ",a.config.baseFloatZIndex,"; top: 0px; left: 0px; ",f.ie6Compat?"":"background-color: "+c,'" id="cke_dialog_background_cover">'];if(f.ie6Compat){var g=f.isCustomDomain(),h="<html><body style=\\'background-color:"+c+";\\'></body></html>";e.push('<iframe hp="true" frameborder="0" id="cke_dialog_background_iframe" src="javascript:'),e.push("void((function(){document.open();"+(g?"document.domain='"+document.domain+"';":"")+"document.write( '"+h+"' );document.close();})())"),e.push('" style="position:absolute;left:0;top:0;width:100%;height: 100%;progid:DXImageTransform.Microsoft.Alpha(opacity=0)"></iframe>')}e.push("</div>"),w=k.kE(e.join(""),d.document)}var i=w,j=function(){var a=b.eR();i.setStyles({width:a.width+"px",height:a.height+"px"})},l=function(){var a=b.hV(),c=d.dialog._.dL;i.setStyles({left:a.x+"px",top:a.y+"px"});do{var e=c.gz();c.move(e.x,e.y)}while(c=c._.ep)};if(v=j,b.on("resize",j),j(),f.ie6Compat){var m=function(){l(),arguments.callee.lw.apply(this,arguments)};b.$.setTimeout(function(){m.lw=window.onscroll||function(){},window.onscroll=m},0),l()}var n=a.config.dialog_backgroundCoverOpacity;i.setOpacity("undefined"!=typeof n?n:.5),i.appendTo(d.document.bH())},y=function(){if(w){var a=d.document.getWindow();w.remove(),a.removeListener("resize",v),f.ie6Compat&&a.$.setTimeout(function(){var a=window.onscroll&&window.onscroll.lw;window.onscroll=a||null},0),v=null}},z={},A=function(a){var b=a.data.$.ctrlKey||a.data.$.metaKey,c=a.data.$.altKey,d=a.data.$.shiftKey,e=String.fromCharCode(a.data.$.keyCode),f=z[(b?"bP+":"")+(c?"eJ+":"")+(d?"dy+":"")+e];f&&f.length&&(f=f[f.length-1],f.keydown&&f.keydown.call(f.bf,f.dialog,f.iK),a.data.preventDefault())},B=function(a){var b=a.data.$.ctrlKey||a.data.$.metaKey,c=a.data.$.altKey,d=a.data.$.shiftKey,e=String.fromCharCode(a.data.$.keyCode),f=z[(b?"bP+":"")+(c?"eJ+":"")+(d?"dy+":"")+e];f&&f.length&&(f=f[f.length-1],f.keyup&&(f.keyup.call(f.bf,f.dialog,f.iK),a.data.preventDefault()))},C=function(a,b,c,d,e){var f=z[c]||(z[c]=[]);f.push({bf:a,dialog:b,iK:c,keyup:e||a.eZ,keydown:d||a.iU})},D=function(a){for(var b in z){for(var c=z[b],d=c.length-1;d>=0;d--)(c[d].dialog==a||c[d].bf==a)&&c.splice(d,1);0===c.length&&delete z[b]}},E=function(a,b){a._.iX[b]&&a.selectPage(a._.iX[b])},F=function(a,b){},G={27:1,13:1},H=function(a){a.data.db()in G&&a.data.stopPropagation()};!function(){n.dialog={bf:function(a,b,c,e,f,g,h){if(!(arguments.length<4)){{var j,k=(e.call?e(b):e)||"div",l=["<",k," "],m=(f&&f.call?f(b):f)||{},n=(g&&g.call?g(b):g)||{},o=(h&&h.call?h(a,b):h)||"",p=this.oJ=n.id||i.getNextNumber()+"_uiElement";this.id=b.id}n.id=p;var q={};b.type&&(q["cke_dialog_ui_"+b.type]=1),b.className&&(q[b.className]=1);var r=n["class"]&&n["class"].split?n["class"].split(" "):[];for(j=0;j<r.length;j++)r[j]&&(q[r[j]]=1);var s=[];for(j in q)s.push(j);n["class"]=s.join(" "),b.title&&(n.title=b.title);var t=(b.style||"").split(";");for(j in m)t.push(j+":"+m[j]);for(b.hidden&&t.push("display:none"),j=t.length-1;j>=0;j--)""===t[j]&&t.splice(j,1);t.length>0&&(n.style=(n.style?n.style+"; ":"")+t.join("; "));for(j in n)l.push(j+'="'+i.htmlEncode(n[j])+'" ');l.push(">",o,"</",k,">"),c.push(l.join("")),(this._||(this._={})).dialog=a,"boolean"==typeof b.isChanged&&(this.isChanged=function(){return b.isChanged}),"function"==typeof b.isChanged&&(this.isChanged=b.isChanged),d.event.du(this),this.nc(b),this.eZ&&this.iU&&b.accessKey&&C(this,a,"bP+"+b.accessKey);var u=this;a.on("load",function(){u.getInputElement()&&u.getInputElement().on("focus",function(){a._.eC=!1,a._.hasFocus=!0,u.oW("focus")},u)}),this.eA&&(this.cQ=a._.eO.push(this)-1,this.on("focus",function(){a._.aW=u.cQ})),i.extend(this,b)}},hbox:function(a,b,c,d,e){if(!(arguments.length<4)){this._||(this._={});var f,g=(this._.children=b,e&&e.widths||null),h=e&&e.height||null,j={},k=function(){var a=['<tbody><tr class="cke_dialog_ui_hbox">'];for(f=0;f<c.length;f++){var b="cke_dialog_ui_hbox_child",d=[];0===f&&(b="cke_dialog_ui_hbox_first"),f==c.length-1&&(b="cke_dialog_ui_hbox_last"),a.push('<td class="',b,'" '),g?g[f]&&d.push("width:"+i.cssLength(g[f])):d.push("width:"+Math.floor(100/c.length)+"%"),h&&d.push("height:"+i.cssLength(h)),e&&void 0!=e.padding&&d.push("padding:"+i.cssLength(e.padding)),d.length>0&&a.push('style="'+d.join("; ")+'" '),a.push(">",c[f],"</td>")}return a.push("</tr></tbody>"),a.join("")};n.dialog.bf.call(this,a,e||{type:"hbox"},d,"table",j,e&&e.align&&{align:e.align}||null,k)}},vbox:function(a,b,c,d,e){if(!(arguments.length<3)){this._||(this._={});var f=(this._.children=b,e&&e.width||null),g=e&&e.vY||null,h=function(){var b=['<table cellspacing="0" border="0" '];b.push('style="'),e&&e.expand&&b.push("height:100%;"),b.push("width:"+i.cssLength(f||"100%"),";"),b.push('"'),b.push('align="',i.htmlEncode(e&&e.align||("ltr"==a.eY().lang.dir?"left":"right")),'" '),b.push("><tbody>");for(var d=0;d<c.length;d++){var h=[];b.push("<tr><td "),f&&h.push("width:"+i.cssLength(f||"100%")),g?h.push("height:"+i.cssLength(g[d])):e&&e.expand&&h.push("height:"+Math.floor(100/c.length)+"%"),e&&void 0!=e.padding&&h.push("padding:"+i.cssLength(e.padding)),h.length>0&&b.push('style="',h.join("; "),'" '),b.push(' class="cke_dialog_ui_vbox_child">',c[d],"</td></tr>")}return b.push("</tbody></table>"),b.join("")};n.dialog.bf.call(this,a,e||{type:"vbox"},d,"div",null,null,h)}}}}(),n.dialog.bf.prototype={getElement:function(){return d.document.getById(this.oJ)},getInputElement:function(){return this.getElement()},getDialog:function(){return this._.dialog},setValue:function(a){return this.getInputElement().setValue(a),this.oW("change",{value:a}),this},getValue:function(){return this.getInputElement().getValue()},isChanged:function(){return!1},selectParentTab:function(){for(var a,b=this,c=b.getInputElement(),d=c;(d=d.getParent())&&-1==d.$.className.search("cke_dialog_page_contents"););return d?(a=d.getAttribute("name"),b._.dialog._.gx!=a&&b._.dialog.selectPage(a),b):b},focus:function(){return this.selectParentTab().getInputElement().focus(),this},nc:function(a){var b,c=/^on([A-Z]\w+)/,d=function(a,b,c,d){b.on("load",function(){a.getInputElement().on(c,d,a)})};for(var e in a)(b=e.match(c))&&(this.dm[e]?this.dm[e].call(this,this._.dialog,a[e]):d(this,this._.dialog,b[1].toLowerCase(),a[e]));return this},dm:{onLoad:function(a,b){a.on("load",b,this)},onShow:function(a,b){a.on("show",b,this)},onHide:function(a,b){a.on("hide",b,this)}},iU:function(a,b){this.focus()},eZ:function(a,b){},disable:function(){var a=this.getInputElement();a.setAttribute("disabled","true"),a.addClass("cke_disabled")},enable:function(){var a=this.getInputElement();a.removeAttribute("disabled"),a.removeClass("cke_disabled")},isEnabled:function(){return!this.getInputElement().getAttribute("disabled")},isVisible:function(){return this.getInputElement().isVisible()},fM:function(){return this.isEnabled()&&this.isVisible()?!0:!1}},n.dialog.hbox.prototype=i.extend(new n.dialog.bf,{getChild:function(a){var b=this;return arguments.length<1?b._.children.concat():(a.splice||(a=[a]),a.length<2?b._.children[a[0]]:b._.children[a[0]]&&b._.children[a[0]].getChild?b._.children[a[0]].getChild(a.slice(1,a.length)):null)}},!0),n.dialog.vbox.prototype=new n.dialog.hbox,function(){var a={dQ:function(a,b,c){for(var e,f=b.children,g=[],h=[],i=0;i<f.length&&(e=f[i]);i++){var j=[];g.push(j),h.push(d.dialog._.gv[e.type].dQ(a,e,j))}return new n.dialog[b.type](a,h,g,c,b)}};d.dialog.addUIElement("hbox",a),d.dialog.addUIElement("vbox",a)}(),d.rB=function(a){this.ry=a},d.rB.prototype={exec:function(a){a.openDialog(this.ry)},sG:!1},function(){var a=/^([a]|[^a])+$/,b=/^\d*$/,c=/^\d*(?:\.\d+)?$/;d.sg=1,d.jb=2,d.dialog.validate={functions:function(){return function(){var a,b=this,c=b&&b.getValue?b.getValue():arguments[0],e=void 0,f=d.jb,g=[];for(a=0;a<arguments.length&&"function"==typeof arguments[a];a++)g.push(arguments[a]);a<arguments.length&&"string"==typeof arguments[a]&&(e=arguments[a],a++),a<arguments.length&&"number"==typeof arguments[a]&&(f=arguments[a]);var h=f==d.jb?!0:!1;for(a=0;a<g.length;a++)h=f==d.jb?h&&g[a](c):h||g[a](c);return h?!0:(void 0!==e&&alert(e),b&&(b.select||b.focus)&&(b.select||b.focus()),!1)}},regex:function(a,b){return function(){var c=this,d=c&&c.getValue?c.getValue():arguments[0];return a.test(d)?!0:(void 0!==b&&alert(b),c&&(c.select||c.focus)&&(c.select?c.select():c.focus()),!1)}},notEmpty:function(b){return this.regex(a,b)},integer:function(a){return this.regex(b,a)},number:function(a){return this.regex(c,a)},equals:function(a,b){return this.functions(function(b){return b==a},b)},notEqual:function(a,b){return this.functions(function(b){return b!=a},b)}}}(),i.extend(d.application.prototype,{openDialog:function(a,b,c){var e=d.dialog._.ev[a];if("function"==typeof e){var f=this._.oB||(this._.oB={}),g=f[a]||(f[a]=new d.dialog(this,a));return b&&b.call(g,g),!this._.activeElement&&(this._.activeElement=this.document.$.activeElement),!this._.oO&&(this._.oO=this.aG["filesview.filesview"].tools.oO()),g.show(),g}if("failed"==e)throw new Error('[CKFINDER.dialog.openDialog] Dialog "'+a+'" failed when loading dg.');var h=d.document.bH(),i=h.$.style.cursor,j=this;return h.setStyle("cursor","wait"),d.scriptLoader.load(d.getUrl(e),function(){"function"!=typeof d.dialog._.ev[a]&&(d.dialog._.ev[a]="failed"),j.openDialog(a,b),h.setStyle("cursor",i)},null,null,c),null},hs:function(a,b,c,d){var e=this;setTimeout(function(){e.cg.openDialog("Input",function(f){f.show(),f.setTitle(a||e.lang.common.inputTitle),f.getContentElement("tab1","msg").getElement().setHtml(b),f.getContentElement("tab1","input").setValue(c),p(f,function(a){var b=a.getContentElement("tab1","input").getValue();d(b)})})},0)},msgDialog:function(a,b,c){var d=this;setTimeout(function(){d.cg.openDialog("Msg",function(e){e.show(),e.setTitle(a||d.lang.common.messageTitle),e.getContentElement("tab1","msg").getElement().setHtml(b),c&&p(e,function(a){c()})})},0)},fe:function(a,b,c){var d=this;setTimeout(function(){d.cg.openDialog("Confirm",function(e){e.show(),e.setTitle(a||d.lang.common.confirmationTitle),e.getContentElement("tab1","msg").getElement().setHtml(b),p(e,function(a){c()})})},0)},skippedFilesDialog:function(a,b,c,d){var e=this;setTimeout(function(){e.cg.openDialog("SkippedFiles",function(f){f.show(),f.setTitle(a||e.lang.common.messageTitle),c?(f.getContentElement("tab1","msg").getElement().show(),f.getContentElement("tab1","msg").getElement().setHtml(c)):f.getContentElement("tab1","msg").getElement().hide();var g="",h="cke_files_list",i="",j=b.length;j>3&&(h+=" cke_files_list_many",i=' style="height: '+Math.min(j+.1,20)+'em"');for(var k=0;j>k;k++)g+="<li>"+("string"==typeof b[k]?b[k]:b[k].getAttribute("name"))+"</li>";f.getContentElement("tab1","skippedList").getElement().setHtml('<ul class="'+h+'"'+i+">"+g+"</ul>"),d&&p(f,function(){d()})})},0)}}),m.add("dialog",{bM:["dialogui"],onLoad:function(){d.dialog.add("Confirm",function(a){return{title:a.lang.common.confirmationTitle,minWidth:270,minHeight:60,contents:[{id:"tab1",elements:[{type:"html",html:"",id:"msg"}]}],buttons:[CKFinder.dialog.okButton,CKFinder.dialog.cancelButton]}}),d.dialog.add("Msg",function(a){return{title:a.lang.common.messageTitle,minWidth:270,minHeight:60,contents:[{id:"tab1",elements:[{type:"html",html:"",id:"msg"}]}],buttons:[CKFinder.dialog.okButton]}}),d.dialog.add("Input",function(a){return{title:a.lang.common.inputTitle,minWidth:270,minHeight:60,contents:[{id:"tab1",elements:[{type:"html",html:"",id:"msg"},{type:"text",id:"input"}]}],buttons:[CKFinder.dialog.okButton,CKFinder.dialog.cancelButton]}}),d.dialog.add("SkippedFiles",function(a){return{title:a.lang.common.messageTitle,minWidth:400,minHeight:100,contents:[{id:"tab1",style:f.ie7Compat?"height: auto":"",expand:!0,padding:0,elements:[{type:"vbox",expand:!0,children:[{type:"html",className:"cke_dialog_msg",html:"",id:"msg"},{type:"html",id:"skippedDescription",className:"cke_dialog_msg",html:a.lang.SkippedFiles},{type:"html",id:"skippedList",className:"cke_dialog_msg",html:""}]}]}],buttons:[CKFinder.dialog.okButton]}})}})}(),m.add("dialogui"),function(){var a=function(a){var b=this;b._||(b._={}),b._["default"]=b._.hq=a["default"]||"";for(var c=[b._],d=1;d<arguments.length;d++)c.push(arguments[d]);return c.push(!0),i.extend.apply(i,c),b._},b={dQ:function(a,b,c){return new n.dialog.ju(a,b,c)}},c={dQ:function(a,b,c){return new n.dialog[b.type](a,b,c)}},e={isChanged:function(){return this.getValue()!=this.lu()},reset:function(){this.setValue(this.lu())},jW:function(){this._.hq=this.getValue()},ki:function(){this._.hq=this._["default"]},lu:function(){return this._.hq}},j=i.extend({},n.dialog.bf.prototype.dm,{onChange:function(a,b){this._.pL||(a.on("load",function(){this.getInputElement().on("change",function(){this.oW("change",{value:this.getValue()})},this)},this),this._.pL=!0),this.on("change",b)}},!0),l=/^on([A-Z]\w+)/,m=function(a){for(var b in a)(l.test(b)||"title"==b||"type"==b)&&delete a[b];return a};i.extend(n.dialog,{dD:function(b,c,e,f){if(!(arguments.length<4)){var g=a.call(this,c);g.hz=i.getNextNumber()+"_label";var h=(this._.children=[],function(){var a=[];if("horizontal"!=c.uC)a.push('<div class="cke_dialog_ui_labeled_label" id="',g.hz,'" >',c.label,"</div>",'<div class="cke_dialog_ui_labeled_content">',f(b,c),"</div>");else{var e={type:"hbox",widths:c.widths,padding:0,children:[{type:"html",html:'<span class="cke_dialog_ui_labeled_label" id="'+g.hz+'">'+i.htmlEncode(c.label)+"</span>"},{type:"html",html:'<span class="cke_dialog_ui_labeled_content">'+f(b,c)+"</span>"}]};d.dialog._.gv.hbox.dQ(b,e,a)}return a.join("")});n.dialog.bf.call(this,b,c,e,"div",null,null,h)}},ju:function(b,c,d){if(!(arguments.length<3)){a.call(this,c);var e=this._.le=i.getNextNumber()+"_textInput",f={"class":"cke_dialog_ui_input_"+c.type,id:e,type:"text"};c.validate&&(this.validate=c.validate),c.maxLength&&(f.uy=c.maxLength),c.size&&(f.size=c.size);var g=this,h=!1;b.on("load",function(){g.getInputElement().on("keydown",function(a){13==a.data.db()&&(h=!0)}),g.getInputElement().on("keyup",function(a){13==a.data.db()&&h&&(b.getButton("ok")&&setTimeout(function(){b.getButton("ok").click()},0),h=!1)},null,null,1e3)});var j=function(){var a=['<div class="cke_dialog_ui_input_',c.type,'"'];c.width&&a.push('style="width:'+c.width+'" '),a.push("><input ");for(var b in f)a.push(b+'="'+f[b]+'" ');return a.push(" /></div>"),a.join("")};n.dialog.dD.call(this,b,c,d,j)}},textarea:function(b,c,d){if(!(arguments.length<3)){a.call(this,c);var e=this,f=this._.le=i.getNextNumber()+"_textarea",g={};c.validate&&(this.validate=c.validate),g.rows=c.rows||5,g.cols=c.cols||20;var h=function(){var a=['<div class="cke_dialog_ui_input_textarea"><textarea class="cke_dialog_ui_input_textarea" id="',f,'" '];for(var b in g)a.push(b+'="'+i.htmlEncode(g[b])+'" ');return a.push(">",i.htmlEncode(e._["default"]),"</textarea></div>"),a.join("")};n.dialog.dD.call(this,b,c,d,h)}},checkbox:function(b,c,d){if(!(arguments.length<3)){var e=a.call(this,c,{"default":!!c["default"]});c.validate&&(this.validate=c.validate);var f=function(){var a=i.extend({},c,{id:c.id?c.id+"_checkbox":i.getNextNumber()+"_checkbox"},!0),d=[],f={"class":"cke_dialog_ui_checkbox_input",type:"checkbox"};return m(a),c["default"]&&(f.checked="checked"),e.checkbox=new n.dialog.bf(b,a,d,"input",null,f),d.push(' <label for="',f.id,'">',i.htmlEncode(c.label),"</label>"),d.join("")};n.dialog.bf.call(this,b,c,d,"span",null,null,f)}},radio:function(b,c,d){if(!(arguments.length<3)){a.call(this,c),this._["default"]||(this._["default"]=this._.hq=c.items[0][1]),c.validate&&(this.validate=c.sh);var e=[],f=this,g=function(){for(var a=[],d=[],g=c.id?c.id+"_radio":i.getNextNumber()+"_radio",h=0;h<c.items.length;h++){var j=c.items[h],k=void 0!==j[2]?j[2]:j[0],l=void 0!==j[1]?j[1]:j[0],o=i.extend({},c,{id:i.getNextNumber()+"_radio_input",title:null,type:null},!0),p=i.extend({},o,{id:null,title:k},!0),q={type:"radio","class":"cke_dialog_ui_radio_input",name:g,value:l},r=[];f._["default"]==l&&(q.checked="checked"),m(o),m(p),e.push(new n.dialog.bf(b,o,r,"input",null,q)),r.push(" "),new n.dialog.bf(b,p,r,"label",null,{"for":q.id},j[0]),a.push(r.join(""))}return new n.dialog.hbox(b,[],a,d),d.join("")};n.dialog.dD.call(this,b,c,d,g),this._.children=e}},button:function(b,c,e){if(arguments.length){"function"==typeof c&&(c=c(b.eY())),a.call(this,c,{disabled:c.disabled||!1}),d.event.du(this);var f=this;b.on("load",function(a){var b=this.getElement();!function(){b.on("click",function(a){f.oW("click",{dialog:f.getDialog()}),a.data.preventDefault()})}(),b.unselectable()},this);var g=i.extend({},c);delete g.style,n.dialog.bf.call(this,b,g,e,"a",null,{style:c.style,href:"javascript:void(0)",title:c.label,hp:"true","class":c["class"]},'<span class="cke_dialog_ui_button">'+i.htmlEncode(c.label)+"</span>")}},select:function(b,c,d){if(!(arguments.length<3)){var e=a.call(this,c);c.validate&&(this.validate=c.validate);var f=function(){var a=i.extend({},c,{id:c.id?c.id+"_select":i.getNextNumber()+"_select"},!0),d=[],f=[],g={"class":"cke_dialog_ui_input_select"};void 0!=c.size&&(g.size=c.size),void 0!=c.multiple&&(g.multiple=c.multiple),m(a);for(var h,j=0;j<c.items.length&&(h=c.items[j]);j++)f.push('<option value="',i.htmlEncode(void 0!==h[1]?h[1]:h[0]),'" /> ',i.htmlEncode(h[0]));return e.select=new n.dialog.bf(b,a,d,"select",null,g,f.join("")),d.join("")};n.dialog.dD.call(this,b,c,d,f)}},file:function(b,c,e){if(!(arguments.length<3)){void 0===c["default"]&&(c["default"]="");var g=i.extend(a.call(this,c),{dg:c,buttons:[]});c.validate&&(this.validate=c.validate);var h=function(){g.gL=i.getNextNumber()+"_fileInput";var a=f.isCustomDomain(),b=['<iframe frameborder="0" allowtransparency="0" class="cke_dialog_ui_input_file" id="',g.gL,'" title="',c.label,'" src="javascript:void('];return b.push(a?"(function(){document.open();document.domain='"+document.domain+"';document.close();})()":"0"),b.push(')"></iframe>'),b.join("")};b.on("load",function(){var a=d.document.getById(g.gL),b=a.getParent();b.addClass("cke_dialog_ui_input_file")}),n.dialog.dD.call(this,b,c,e,h)}},fileButton:function(b,c,d){if(!(arguments.length<3)){var e=(a.call(this,c),this);c.validate&&(this.validate=c.validate);var f=i.extend({},c),g=f.onClick;f.className=(f.className?f.className+" ":"")+"cke_dialog_ui_button",f.onClick=function(a){var d=c["for"];g&&g.call(this,a)===!1||(b.getContentElement(d[0],d[1]).submit(),this.disable())},b.on("load",function(){b.getContentElement(c["for"][0],c["for"][1])._.buttons.push(e)}),n.dialog.button.call(this,b,f,d)}},html:function(){var a=/^\s*<[\w:]+\s+([^>]*)?>/,b=/^(\s*<[\w:]+(?:\s+[^>]*)?)((?:.|\r|\n)+)$/,c=/\/$/;return function(d,e,f){if(!(arguments.length<3)){var g,h,i,j=[],k=e.html;if("<"!=k.charAt(0)&&(k="<span>"+k+"</span>"),e.focus){var l=this.focus;if(this.focus=function(){l.call(this),e.focus.call(this),this.oW("focus")},e.fM){var m=this.fM;this.fM=m}this.eA=!0}n.dialog.bf.call(this,d,e,j,"span",null,null,""),g=j.join(""),h=g.match(a),i=k.match(b)||["","",""],c.test(i[1])&&(i[1]=i[1].slice(0,-1),i[2]="/"+i[2]),f.push([i[1]," ",h[1]||"",i[2]].join(""))}}}()},!0),n.dialog.html.prototype=new n.dialog.bf,n.dialog.dD.prototype=i.extend(new n.dialog.bf,{rW:function(a){var b=d.document.getById(this._.hz);return b.iu()<1?new h.text(a,d.document).appendTo(b):b.getChild(0).$.nodeValue=a,this},vt:function(){var a=d.document.getById(this._.hz);return!a||a.iu()<1?"":a.getChild(0).getText()},dm:j},!0),n.dialog.button.prototype=i.extend(new n.dialog.bf,{click:function(){var a=this;return a._.disabled?(a.getElement().$.blur(),!1):a.oW("click",{dialog:a._.dialog})},enable:function(){this._.disabled=!1;var a=this.getElement();a&&a.removeClass("disabled")},disable:function(){this._.disabled=!0,this.getElement().addClass("disabled")},isVisible:function(){return this.getElement().getFirst().isVisible()},isEnabled:function(){return!this._.disabled;

},dm:i.extend({},n.dialog.bf.prototype.dm,{onClick:function(a,b){this.on("click",b)}},!0),eZ:function(){this.click()},iU:function(){this.focus()},eA:!0},!0),n.dialog.ju.prototype=i.extend(new n.dialog.dD,{getInputElement:function(){return d.document.getById(this._.le)},focus:function(){var a=this.selectParentTab();setTimeout(function(){var b=a.getInputElement();b&&b.$.focus()},0)},select:function(){var a=this.selectParentTab();setTimeout(function(){var b=a.getInputElement();b&&(b.$.focus(),b.$.select())},0)},eZ:function(){this.select()},setValue:function(a){return a=null!==a?a:"",n.dialog.bf.prototype.setValue.call(this,a)},eA:!0},e,!0),n.dialog.textarea.prototype=new n.dialog.ju,n.dialog.select.prototype=i.extend(new n.dialog.dD,{getInputElement:function(){return this._.select.getElement()},add:function(a,b,c){var d=new k("option",this.getDialog().eY().document),e=this.getInputElement().$;return d.$.text=a,d.$.value=void 0===b||null===b?a:b,void 0===c||null===c?g?e.add(d.$):e.add(d.$,null):e.add(d.$,c),this},remove:function(a){var b=this.getInputElement().$;return b.remove(a),this},clear:function(){for(var a=this.getInputElement().$;a.length>0;)a.remove(0);return this},eA:!0},e,!0),n.dialog.checkbox.prototype=i.extend(new n.dialog.bf,{getInputElement:function(){return this._.checkbox.getElement()},setValue:function(a){this.getInputElement().$.checked=a,this.oW("change",{value:a})},getValue:function(){return this.getInputElement().$.checked},eZ:function(){this.setValue(!this.getValue())},dm:{onChange:function(a,b){return g?(a.on("load",function(){var a=this._.checkbox.getElement();a.on("propertychange",function(b){b=b.data.$,"checked"==b.propertyName&&this.oW("change",{value:a.$.checked})},this)},this),this.on("change",b),null):j.onChange.apply(this,arguments)}},eA:!0},e,!0),n.dialog.radio.prototype=i.extend(new n.dialog.bf,{setValue:function(a){for(var b,c=this._.children,d=0;d<c.length&&(b=c[d]);d++)b.getElement().$.checked=b.getValue()==a;this.oW("change",{value:a})},getValue:function(){for(var a=this._.children,b=0;b<a.length;b++)if(a[b].getElement().$.checked)return a[b].getValue();return null},eZ:function(){var a,b=this._.children;for(a=0;a<b.length;a++)if(b[a].getElement().$.checked)return void b[a].getElement().focus();b[0].getElement().focus()},dm:{onChange:function(a,b){return g?(a.on("load",function(){for(var a=this._.children,b=this,c=0;c<a.length;c++){var d=a[c].getElement();d.on("propertychange",function(a){a=a.data.$,"checked"==a.propertyName&&this.$.checked&&b.oW("change",{value:this.getAttribute("value")})})}},this),this.on("change",b),null):j.onChange.apply(this,arguments)}},eA:!0},e,!0),n.dialog.file.prototype=i.extend(new n.dialog.dD,e,{getInputElement:function(){var a=d.document.getById(this._.gL).getFrameDocument();return a.$.forms.length>0?new k(a.$.forms[0].elements[0]):this.getElement()},submit:function(){return this.getInputElement().getParent().$.submit(),this},vy:function(a){return this.getInputElement().getParent().$.action},reset:function(){function a(){c.$.open(),f.isCustomDomain()&&(c.$.domain=document.domain);var a="";e.size&&(a=e.size-(g?7:0)),c.$.write(['<html><head><title></title></head><body style="margin: 0; overflow: hidden; background: transparent;">','<form enctype="multipart/form-data" method="POST" action="',i.htmlEncode(e.action),'">','<input type="file" name="',i.htmlEncode(e.id||"cke_upload"),'" size="',i.htmlEncode(a>0?a:""),'" />',"</form>","</body></html>"].join("")),c.$.close();for(var b=0;b<h.length;b++)h[b].enable()}var b=d.document.getById(this._.gL),c=b.getFrameDocument(),e=this._.dg,h=this._.buttons;f.gecko?setTimeout(a,500):a()},getValue:function(){return""},dm:j,eA:!0},!0),n.dialog.fileButton.prototype=new n.dialog.button,d.dialog.addUIElement("text",b),d.dialog.addUIElement("password",b),d.dialog.addUIElement("textarea",c),d.dialog.addUIElement("checkbox",c),d.dialog.addUIElement("radio",c),d.dialog.addUIElement("button",c),d.dialog.addUIElement("select",c),d.dialog.addUIElement("file",c),d.dialog.addUIElement("fileButton",c),d.dialog.addUIElement("html",c),i.extend(CKFinder.dialog,d.dialog)}(),function(){m.add("help",{bM:["toolbar","button"],bz:function(a){a.config.disableHelpButton||(a.bD("help",{exec:function(a){a.aG["filesview.filesview"].bn().focus(),window.open(d.basePath+"help/"+(a.lang.HelpLang||"en")+"/index.html")}}),a.bY.add("Help",d.UI_BUTTON,{label:a.lang.Help,command:"help"}))}})}(),function(){function a(a,b,c,d,f){for(var g=0,h=0,i=[],j=0;j<a.length;j++)(!d||d(a[j]))&&(i.push('<a href="',b.folder.getUrl(),encodeURIComponent(a[j].name),'" title="',a[j].name,'" rel="',c,'">a</a>'),a[j].isSameFile(b)&&(g=h),h++);return e(),p=new k("div",f),p.setAttribute("id","ckf_gallery"),p.setHtml(i.join("")),p.appendTo(f.bH()),p.hide(),g}function b(a){if(a&&a.inPopup){var b=new j(a.document),c=b.getWindow();if(!g&&!f.opera||c.$.top.location.href.match(/ckfinder.html/)||"CKFinderpopup"==c.$.top.name)return b}return d.oC}function c(a){return function(){a.$.activeElement&&a.$.activeElement.blur(),a.$.activeElement&&a.$.activeElement.blur(),f.gecko||(a.getWindow().focus(),a.bH().focus())}}function e(){p&&p.remove()}function h(a){return function(){e(),a&&a.focus(!0,!0)}}function l(a){if(a.click)a.click();else if(d.document.$.createEvent){var b=d.document.$.createEvent("MouseEvents");b.initEvent("click",!0,!0),a.dispatchEvent(b)}}function m(a,b,c){g&&f.version<9?a.$.onreadystatechange=function(){("loaded"==this.readyState||"complete"==this.readyState)&&setTimeout(function(){b.callee.apply(c,b)},0)}:a.on("load",function(){setTimeout(function(){b.callee.apply(c,b)},0)})}function n(a,c){if(!a||!a.inPopup){a&&a.aG["filesview.filesview"].on("afterRenderFiles",e);var d=b(c).getWindow().$;"undefined"!=typeof d.jQuery&&d.jQuery.fn.colorbox?q=1:"undefined"!=typeof d.jQuery&&d.jQuery.fn.fancybox?q=2:"undefined"!=typeof d.jQuery&&d.jQuery.fn.prettyPhoto?q=3:"undefined"!=typeof d.Shadowbox?q=4:"undefined"!=typeof d.Prototype&&"undefined"!=typeof d.Lightbox&&(q=5),q&&(r=1)}}var o,p,q=0,r=0,s=[];CKFinder.addPlugin("gallery",{bM:["filesview"],galleryCallback:function(d,f,g){r||n(null,d);var j=b(d),t=j.getWindow().$,u=function(a){return a.isImage()};if(!q&&d.config.gallery_autoLoad){if(!u(f))return!1;var v,w=j.getHead(),x=CKFinder.getPluginPath("gallery")+"colorbox/",y=arguments,z="undefined"==typeof t.jQuery;if(!z){var A=t.jQuery.fn.jquery.split("."),B=parseInt(A[0],10),C=parseInt(A[1],10),D=parseInt(A[2]||0,10);(1>B||1==B&&4>C||1==B&&4==C&&3>D)&&(z=!0)}return z?(t.jQuery&&(s=[t.jQuery,t.$]),v=new k("script",j),v.setAttribute("type","text/javascript"),v.setAttribute("src",x+"jquery.min.js"),m(v,y,t),v.appendTo(w),!0):(j.appendStyleSheet(x+"colorbox.css"),v=new k("script",j),v.setAttribute("type","text/javascript"),v.setAttribute("src",x+"jquery.colorbox-min.js"),m(v,y,t),v.appendTo(w),!0)}if(s.length&&(o=t.jQuery.noConflict(!0),t.jQuery=s[0],t.$=s[1],s=[]),o||(o=t.jQuery),q){var E,F=i.getNextNumber();switch(q){case 1:if(!u(f))return!1;E=a(g,f,"ckf_gallery_"+F,u,j),o("#ckf_gallery a").colorbox(i.extend({minWidth:"300",minHeight:"200",maxWidth:"95%",maxHeight:"95%",scalePhotos:!0,current:d.lang.Gallery.current},d.config.gallery_config,{group:"ckf_gallery_"+F,onClosed:h(f),onOpen:c(j)},!0)).eq(E).click();break;case 2:if(u=function(a){return a.isImage()||"swf"==a.ext},!u(f))return!1;E=a(g,f,"ckf_gallery_"+F,u,j),t.jQuery("#ckf_gallery a").fancybox(i.extend({},d.config.gallery_config,{onClosed:e,onComplete:c(j),afterClose:h(f),afterShow:c(j)},!0)).eq(E).click();break;case 3:if(u=function(a){return a.isImage()||"swf"==a.ext||"mov"==a.ext},!u(f))return!1;E=a(g,f,"prettyPhoto[ckf_gallery_"+F+"]",u,j),t.jQuery("#ckf_gallery a").prettyPhoto(i.extend({},d.config.gallery_config,{callback:h(f),changepicturecallback:c(j)},!0)).eq(E).click();break;case 4:if(u=function(a){return a.isImage()||"swf"==a.ext||"mov"==a.ext},!u(f))return!1;E=a(g,f,"ckf_gallery_"+F,u,j),t.Shadowbox.qi("#ckf_gallery a",i.extend({},d.config.gallery_config,{gallery:"ckf_gallery_"+F,onClose:h(f),onFinish:c(j)},!0)),l(p.eG("a").getItem(E).$);break;case 5:if(!u(f))return!1;E=a(g,f,"lightbox[ckf_gallery_"+F+"]",u,j),l(p.eG("a").getItem(E).$);break;default:return!1}return!0}return!1},bz:n})}(),l.gallery_autoLoad=!0,function(){function a(a){if(!a||a.type!=d.cv||"form"!=a.getName())return[];for(var b=[],c=["style","className"],e=0;e<c.length;e++){var f=c[e],g=a.$.elements.namedItem(f);if(g){var h=new k(g);b.push([h,h.nextSibling]),h.remove()}}return b}function b(a,b){if(a&&a.type==d.cv&&"form"==a.getName()&&b.length>0)for(var c=b.length-1;c>=0;c--){var e=b[c][0],f=b[c][1];f?e.insertBefore(f):e.appendTo(a)}}function c(c,d){var e=a(c),f={},g=c.$;return d||(f["class"]=g.className||"",g.className=""),f.inline=g.style.cssText||"",d||(g.style.cssText="position: static; overflow: visible"),b(e),f}function e(c,d){var e=a(c),f=c.$;"class"in d&&(f.className=d["class"]),"inline"in d&&(f.style.cssText=d.inline),b(e)}var h=null,l=null;m.add("maximize",{bz:function(a){function b(b){var c=q.eR();if(!b&&r&&(b=[r]),b){for(var d=0,e=b.length;e>d;d++)b[d].setStyles({width:c.width+"px",height:c.height+"px"});a.oW("resize")}else a.resize(c.width,c.height)}var m,n,o=a.lang.Maximize,p=d.oC,q=p.getWindow(),r=d.document.getWindow().$.frameElement&&new k(d.document.getWindow().$.frameElement),s=[0,0,0,0],t={};r&&!r.getFrameDocument().bH().hasClass("CKFinderFrameWindow")&&(r=null),a.bD("maximize",{oD:!1,exec:function(){var p=a.document.getWindow().$;if(a.cg.inPopup&&(!g&&!f.opera||p.top.location.href.match(/ckfinder.html/)||"CKFinderpopup"==p.top.name)){var p=a.document.getWindow().$.parent;this.bu==d.aS?(s[2]=p.screenLeft||p.screenX,s[3]=p.screenTop||p.screenY,p.moveTo(0,0),l||(l=[p.screenLeft||p.screenX,p.screenTop||p.screenY]),s[2]-=l[0],s[3]-=l[1],p.outerHeight?(s[0]=p.outerWidth,s[1]=p.outerHeight):(s[0]=p.document.body.scrollWidth,s[1]=p.document.body.scrollHeight,h||(p.resizeTo(p.screen.availWidth,p.screen.availHeight),h=[p.screen.availWidth-p.document.body.scrollWidth,p.screen.availHeight-p.document.body.scrollHeight]),s[0]+=h[0],s[1]+=h[1]),p.resizeTo?p.resizeTo(p.screen.availWidth,p.screen.availHeight):(p.outerHeight=p.screen.availHeight,p.outerWidth=p.screen.availWidth)):(p.resizeTo?p.resizeTo(s[0],s[1]):(p.outerWidth=s[0],p.outerHeight=s[1]),p.moveTo(s[2],s[3]))}else{var u=r||a.element.getFirst();if(this.bu==d.aS){m=q.hV();for(var v,w=u;w=w.getParent();)v=i.getNextNumber(),t[v]=c(w),w.$.og=v,w.is("html","body")&&w.setStyle("overflow","hidden"),w.setStyle("z-index",a.config.baseFloatZIndex-1);v=i.getNextNumber(),t[v]=c(u,!0),u.$.og=v;for(var x=[u],p=u.getDocument().getWindow().$;p.frameElement;)x.push(k.eB(p.frameElement)),p=p.parent;n=function(){b(x)},q.on("resize",n);var y=new j(p.document),z={overflow:f.webkit?"":"hidden",width:0,height:0};y.gT().setStyles(z),!f.gecko&&y.gT().setStyle("position","fixed"),y.bH().setStyles(z),g?setTimeout(function(){q.$.scrollTo(0,0)},0):q.$.scrollTo(0,0);for(var A,B=0,C=x.length;C>B;B++)A=x[B],A.setStyle("position","absolute"),A.$.offsetLeft,A.setStyles({"z-index":a.config.baseFloatZIndex-1,left:"0px",top:"0px"});x[0].addClass("cke_maximized"),b(x);var D=x[0].ir();x[0].setStyles({left:-1*D.x+"px",top:-1*D.y+"px"})}else{q.removeListener("resize",n);for(var w=u;w;)e(w,t[w.$.og]),w.$.og=null,w=w.getParent();t={},g?setTimeout(function(){q.$.scrollTo(m.x,m.y)},0):q.$.scrollTo(m.x,m.y),u.removeClass("cke_maximized"),f.webkit&&(u.setStyle("display","inline"),setTimeout(function(){u.setStyle("display","block")},0)),a.oW("resize")}}this.rJ();var E=this.pW[0];if(E){var F=this.bu==d.aS?o.maximize:o.minimize,G=a.document.getById(E._.id);G.getChild(1).setHtml(F),G.setAttribute("title",F),G.setAttribute("href",'javascript:void("'+F+'");')}}}),a.bY.qW("Maximize",{label:o.maximize,command:"maximize"})}})}(),function(){function a(a,b){for(var c=0,d=b.length;d>c;c++)if(b[c].name&&b[c].name===a)return!0;return!1}var b={};CKFinder.addPlugin("zip",{uiReady:function(c){var d=c.lang.Zip;CKFinder.dialog.add("compressToFileName",function(a){var b=a.getSelectedFolder();return{title:a.lang.DestinationFile,minWidth:270,minHeight:60,contents:[{id:"tab1",label:"",title:"",expand:!0,style:CKFinder.env.ie7Compat?"height:auto":"",padding:0,elements:[{id:"msg",className:"cke_dialog_error_msg",type:"html",html:a.lang.FileRename},{type:"hbox",widths:["90%","10%"],padding:0,children:[{type:"text",label:"",id:"fileName","default":b.name,validate:function(){return this.getValue()?void 0:(a.openMsgDialog("",a.lang.ErrorMsg.pg),!1)}},{type:"html",html:".zip",id:"fileNameExt",onLoad:function(){this.getElement().getParent().setStyles({"vertical-align":"bottom","padding-bottom":"2px"})}}]}]}],buttons:[CKFinder.dialog.okButton,CKFinder.dialog.cancelButton]}}),CKFinder.dialog.add("unzipDirExists",function(a){var c=a.getSelectedFolder(),e=[[a.lang.ManuallyRename,"manuallyrename"]];return c.acl.fileDelete&&c.acl.fileRename&&c.acl.folderRename&&c.acl.folderDelete&&e.push([d.removeAndExtract,"overwrite"],[d.extractAndOverwrite,"merge"]),{title:a.lang.ErrorMsg.FolderNameExists,minWidth:270,minHeight:60,contents:[{id:"tab1",label:"",title:"",expand:!0,style:CKFinder.env.ie7Compat?"height:auto":"",padding:0,elements:[{id:"msg",className:"cke_dialog_error_msg",type:"html",html:""},{type:"hbox",className:"cke_dialog_file_exist_options",children:[{label:a.lang.common.makeDecision,type:"radio",id:"option","default":"manuallyrename",items:e}]}]}],onOk:function(){var c=this,d=c.getValueOf("tab1","option");return"manuallyrename"==d&&(d=null),b.extractTo(a.getSelectedFile(),d),!0},onCancel:function(){return b.ma(c),!0},buttons:[CKFinder.dialog.okButton,CKFinder.dialog.cancelButton]}}),CKFinder.dialog.add("unzipFileExists",function(a){var c=a.getSelectedFolder();return{title:a.lang.FileExistsDlgTitle,minWidth:350,minHeight:120,contents:[{id:"tab1",label:"",title:"",style:CKFinder.env.ie7Compat?"height:auto":"",expand:!0,padding:0,elements:[{id:"msg",className:"cke_dialog_error_msg",type:"html",widths:["70%","30%"],html:""},{type:"hbox",className:"cke_dialog_file_exist_options",children:[{type:"radio",id:"option",label:a.lang.common.makeDecision,"default":"autorename",items:[[a.lang.FileAutorename,"autorename"],[a.lang.FileOverwrite,"overwrite"],[a.lang.common.skip,"skip"]]}]},{type:"hbox",className:"cke_dialog_remember_decision",children:[{type:"checkbox",id:"remember",label:a.lang.common.rememberDecision}]}]}],onCancel:function(){return b.ma(c),!0},buttons:[CKFinder.dialog.okButton,CKFinder.dialog.cancelButton]}}),CKFinder.dialog.add("compressFileExists",function(a){var c=a.getSelectedFolder(),d=[[a.lang.ManuallyRename,"manuallyrename"]];return c.acl.fileDelete&&c.acl.fileRename&&d.push([a.lang.FileAutorename,"autorename"],[a.lang.FileOverwrite,"overwrite"]),{title:a.lang.FileExistsDlgTitle,minWidth:270,minHeight:60,contents:[{id:"tab1",label:"",title:"",expand:!0,style:CKFinder.env.ie7Compat?"height:auto":"",padding:0,elements:[{id:"msg",className:"cke_dialog_error_msg",type:"html",html:""},{type:"hbox",className:"cke_dialog_file_exist_options",children:[{label:a.lang.common.makeDecision,type:"radio",id:"option","default":"manuallyrename",items:d}]}]}],onOk:function(){var c=this,d=c.getValueOf("tab1","option");return"manuallyrename"==d&&(d=null),b.nX(a.getSelectedFolder(),b.pp.download,d),!0},onCancel:function(){return b.ma(c),!0},buttons:[CKFinder.dialog.okButton,CKFinder.dialog.cancelButton]}}),c.connector.app.dZ("zip",112),b={rQ:{iz:/[\\\/:\*\?"<>\|]/},iG:{extractHere:{label:d.extractHereLabel,command:"ExtractHere",group:"zip",icon:CKFinder.getPluginPath("zip")+"images/zip.gif"},extractTo:{label:d.extractToLabel,command:"ExtractTo",group:"zip",icon:CKFinder.getPluginPath("zip")+"images/zip.gif"},downloadZip:{label:d.downloadZipLabel,command:"DownloadZip",group:"zip",icon:CKFinder.getPluginPath("zip")+"images/zip.gif"},compressZip:{label:d.compressZipLabel,command:"CompressZip",group:"zip",icon:CKFinder.getPluginPath("zip")+"images/zip.gif"}},ma:function(a){a.getChildren(function(b){a.close(),a.showFiles(),a.open()},!0)},oc:function(a){return a&&a.length?b.rQ.iz.test(a)?c.lang.ErrorMsg.FolderInvChar:!1:c.lang.ErrorMsg.FolderEmpty},nI:function(d){if(!b.filesList[b.currentItem])return void b.extractHere(c.getSelectedFile(),!0);var e=[{name:"skip"},{name:"ok"}];if(b.filesList[b.currentItem].options&&a(b.filesList[b.currentItem].options,e))return b.currentItem++,void c.openDialog("unzipFileExists",b.nI);d.show();var f=c.lang.ErrorMsg["Folder"==b.filesList[b.currentItem].type?"FolderExists":"FileExists"];f="<strong>"+f.replace("%s",b.filesList[b.currentItem].name)+"</strong>",d.getContentElement("tab1","msg").getElement().setHtml(f),d.on("ok",function(a){a.removeListener();var e=d.getValueOf("tab1","remember"),f=d.getValueOf("tab1","option");if(e){for(var g=0,h=b.filesList.length;h>g;g++)b.filesList[g].options||(b.filesList[g].options=f);return void b.extractHere(c.getSelectedFile(),!0)}for(b.filesList[b.currentItem].options=f,b.currentItem++;b.currentItem<b.filesList.length&&b.filesList[b.currentItem].options&&(!b.filesList[b.currentItem].options||"skip"==b.filesList[b.currentItem].options);)b.currentItem++;return b.currentItem<b.filesList.length?void setTimeout(function(){c.openDialog("unzipFileExists",b.nI)},0):void b.extractHere(c.getSelectedFile(),!0)})},extract:function(a){var e={},f=a.file;a.extra&&(e=a.extra),e.fileName=a.file.name,c.connector.sendCommandPost(a.action,null,e,function(a){if(b.filesList=[],303==a.getErrorNumber()){b.currentItem=0;for(var e,f=a.selectNodes("Connector/Errors/Error"),g=a.selectNodes("Connector/UnzippedFiles/File"),h=0,i=0,j=f.length;j>i;i++)e="skip",115==f[i].getAttribute("code")&&(h=1,e=null),b.filesList[i]={name:f[i].getAttribute("name"),options:e,type:f[i].getAttribute("type"),code:f[i].getAttribute("code")};for(var k=0,j=g.length;j>k;k++,i++)b.filesList[i]={name:g[k].getAttribute("name"),options:g[k].getAttribute("action"),type:"File",code:0};if(h)return void c.openDialog("unzipFileExists",b.nI)}else if(a.checkError())return;var l=a.selectNodes("Connector/FolderExists/Folder");if(l&&l.length)return void c.openDialog("unzipDirExists",function(a){a.show();var b=c.lang.FolderNameExists;b="<strong>"+b.replace("%s",l[0].getAttribute("name"))+"</strong>",a.getContentElement("tab1","msg").getElement().setHtml(b)});var g=a.selectNodes("Connector/UnzippedFiles/File");if(g&&g.length){for(var m=[],i=0,n=g.length;n>i;i++)"skip"==g[i].getAttribute("action")&&m.push(g[i].getAttribute("name"));if(b.filesList)for(var i=0,n=b.filesList.length;n>i;i++)m.push(b.filesList[i].name);if(m.length)return c.openSkippedFilesDialog(null,m,d.extractSuccess),b.ma(c.getSelectedFolder()),!0}return c.openMsgDialog("OK",d.extractSuccess),b.ma(c.getSelectedFolder()),!0},f.folder.type,f.folder)},extractHere:function(a,e){if(e){for(var f=!1,g=0,h=b.filesList.length;h>g;g++)if(115==b.filesList[g].code&&"skip"!=b.filesList[g].options){f=!0,e={};for(var g=0,h=b.filesList.length;h>g;g++)e["files["+g+"][name]"]=b.filesList[g].name,e["files["+g+"][options]"]=b.filesList[g].options;break}if(!f){for(var i=[],g=0,h=b.filesList.length;h>g;g++)i.push(b.filesList[g].name);return void c.openSkippedFilesDialog(null,i,d.extractSuccess,function(){return b.ma(c.getSelectedFolder()),!0})}}e=e||{},b.extract({action:"ExtractHere",file:a,extra:e})},extractTo:function(d,e){return e?void b.extract({action:"ExtractTo",file:d,extra:{extractDir:b.extractDir||"/",force:e}}):void c.openInputDialog(c.lang.DestinationFolder,c.lang.FolderRename,"",function(f){var g=c.getSelectedFolder(),f=CKFinder.tools.trim(f),h=b.oc(f);return h?(c.openConfirmDialog("",h,function(a){b.extractTo(d,e)}),!1):(b.extractDir=f,void(g.hasChildren?g.getChildren(function(e){return a(f,e)?void c.openDialog("unzipDirExists",function(a){a.show();var b=c.lang.ErrorMsg.FolderExists;b="<strong>"+b.replace("%s",f)+"</strong>",a.getContentElement("tab1","msg").getElement().setHtml(b)}):void b.extract({action:"ExtractTo",file:d,extra:{extractDir:f}})},!0):(g.createNewFolder(f),b.extract({action:"ExtractTo",file:d,extra:{extractDir:f}}))))})},downloadZip:function(a,b,d){var e=c.connector.composeUrl("DownloadZip",{FileName:a,ZipName:b},d.type,d);c.connector.app.aG["filesview.filesview"].tools.downloadFile(new CKFinder.dom.document(c.document),e)},oH:function(a,d){c.connector.sendCommandPost("CreateZip",null,d,function(c){if(!c.checkError()){if(d.download){var e=c.selectSingleNode("Connector/ZipFile");if(e){var e=e.getAttribute("name");return b.downloadZip(e,d.zipName,a)}}b.ma(a)}},a.type,a)},nX:function(d,e,f,g){var h={zipName:d.name+".zip",download:e};if(g)for(var i=0,j=g.length;j>i;i++)h["files["+i+"][name]"]=g[i].name,h["files["+i+"][type]"]=g[i].folder.type,h["files["+i+"][folder]"]=g[i].folder.getPath();if(f)return h=b.pp,h.fileExistsAction=f,b.oH(d,h);if(d.isBasket||e){if(d.isBasket&&"undefined"==typeof g){h.zipName="basket.zip";for(var i=0,j=c.basketFiles.length;j>i;i++)h["files["+i+"][name]"]=c.basketFiles[i].name,h["files["+i+"][type]"]=c.basketFiles[i].folder.type,h["files["+i+"][folder]"]=c.basketFiles[i].folder.getPath()}return d.isBasket&&(d=c.folders[1],h.basket=!0),b.oH(d,h)}c.openDialog("compressToFileName",function(f){f.show(),f.getContentElement("tab1","fileName").getElement().setValue(d.name),f.on("ok",function(g){g.removeListener();var i=f.getValueOf("tab1","fileName");i=CKFinder.tools.trim(i)+".zip";var j=b.oc(i);return j?(c.openConfirmDialog("",j,function(a){b.nX(d,e)}),!1):(h.zipName=i,void d.getFiles(function(e){return a(i,e)?(b.pp=h,c.openDialog("compressFileExists",function(a){a.show();var b=c.lang.ErrorMsg.FileExists;b="<strong>"+b.replace("%s",i)+"</strong>",a.getContentElement("tab1","msg").getElement().setHtml(b)}),!1):void b.oH(d,h)},!0))})})}},c.addFileContextMenuOption(b.iG.extractHere,function(a,c){b.extractHere(c)},function(a){var b=c.getSelectedFolder();if(b.isBasket)return!1;var d=c.getSelectedFiles();return"zip"!==a.ext.toLowerCase()||c.config.selectMultiple&&d.length>1?!1:a.folder.acl.fileUpload&&a.folder.acl.folderCreate?!0:-1}),c.addFileContextMenuOption(b.iG.extractTo,function(a,c){b.extractTo(c)},function(a){var b=c.getSelectedFolder();if(b.isBasket)return!1;var d=c.getSelectedFiles();return"zip"!==a.ext.toLowerCase()||c.config.selectMultiple&&d.length>1?!1:a.folder.acl.fileUpload&&a.folder.acl.folderCreate?!0:-1}),c.addFileContextMenuOption(b.iG.compressZip,function(a,c){var d=a.getSelectedFiles(),e=a.getSelectedFolder();b.nX(e,!1,!1,d)},function(a){var b=c.getSelectedFolder();if(b.isBasket)return!1;var d=c.getSelectedFiles();return!c.config.selectMultiple||d.length<2?!1:a.folder.acl.fileUpload&&a.folder.acl.folderCreate&&b.getResourceType().isExtensionAllowed("zip")?!0:-1}),c.addFileContextMenuOption(b.iG.downloadZip,function(a,c){var d=a.getSelectedFiles(),e=a.getSelectedFolder();b.nX(e,!0,!1,d)},function(a){var b=c.getSelectedFiles();return!c.config.selectMultiple||b.length<2?!1:a.folder.acl.fileUpload?!0:-1}),c.addFolderContextMenuOption(b.iG.compressZip,function(a,c){b.nX(c,!1)},function(a){return a.isBasket?!1:a.acl.fileUpload&&a.getResourceType().isExtensionAllowed("zip")&&(c.files.length||a.hasChildren)?!0:-1}),c.addFolderContextMenuOption(b.iG.downloadZip,function(a,c){b.nX(c,!0)},function(a){return a.isBasket?a.app.basketFiles.length?!0:-1:a.acl.fileUpload&&(c.files.length||a.hasChildren)?!0:-1}),c.connector.app.aG["filesview.filesview"].on("beforeContextMenu",function(a){c.getSelectedFiles().length>1&&delete a.data.bj.downloadFile})},basketToolbar:[["DownloadZip",{label:"downloadZipLabel",icon:CKFinder.getPluginPath("zip")+"images/zip.gif",onClick:function(a){var c=a.getSelectedFolder();c.app.basketFiles.length&&b.nX(c,!0)},disableEmpty:!0}]]})}(),d.skins.add("kama",function(){var a=["images/loaders/16x16.gif","images/loaders/32x32.gif","images/ckffolder.gif","images/ckffolderopened.gif"];return g&&f.version<7&&a.push("images/sprites_ie6.png"),{ls:a,application:{css:["app.css"]},host:{qx:1,css:["host.css"]},mA:7,kN:7,ps:1,bz:function(a){function b(a){var b=a.getHead().append("style");return b.setAttribute("id","cke_ui_color"),b.setAttribute("type","text/css"),b}function c(a,b,c){for(var d,e,h,i=0;i<a.length;i++)if(f.webkit){for(e=0;e<a[i].$.sheet.rules.length;e++)a[i].$.sheet.removeRule(e);for(e=0;e<b.length;e++){for(h=b[e][1],d=0;d<c.length;d++)h=h.replace(c[d][0],c[d][1]);a[i].$.sheet.addRule(b[e][0],h)}}else{for(h=b,d=0;d<c.length;d++)h=h.replace(c[d][0],c[d][1]);g?a[i].$.styleSheet.cssText=h:a[i].setHtml(h)}}a.config.width&&!isNaN(a.config.width)&&(a.config.width-=12);var e=[],h="/* UI Color Support */.cke_skin_kama .cke_menuitem .cke_icon_wrapper{	background-color: $color !important;	border-color: $color !important;}.cke_skin_kama .cke_menuitem a:hover .cke_icon_wrapper,.cke_skin_kama .cke_menuitem a:focus .cke_icon_wrapper,.cke_skin_kama .cke_menuitem a:active .cke_icon_wrapper{	background-color: $color !important;	border-color: $color !important;}.cke_skin_kama .cke_menuitem a:hover .cke_label,.cke_skin_kama .cke_menuitem a:focus .cke_label,.cke_skin_kama .cke_menuitem a:active .cke_label{	background-color: $color !important;}.cke_skin_kama .cke_menuitem a.cke_disabled:hover .cke_label,.cke_skin_kama .cke_menuitem a.cke_disabled:focus .cke_label,.cke_skin_kama .cke_menuitem a.cke_disabled:active .cke_label{	background-color: transparent !important;}.cke_skin_kama .cke_menuitem a.cke_disabled:hover .cke_icon_wrapper,.cke_skin_kama .cke_menuitem a.cke_disabled:focus .cke_icon_wrapper,.cke_skin_kama .cke_menuitem a.cke_disabled:active .cke_icon_wrapper{	background-color: $color !important;	border-color: $color !important;}.cke_skin_kama .cke_menuitem a.cke_disabled .cke_icon_wrapper{	background-color: $color !important;	border-color: $color !important;}.cke_skin_kama .cke_menuseparator{	background-color: $color !important;}.cke_skin_kama .cke_menuitem a:hover,.cke_skin_kama .cke_menuitem a:focus,.cke_skin_kama .cke_menuitem a:active{	background-color: $color !important;}";if(f.webkit){h=h.split("}").slice(0,-1);for(var j=0;j<h.length;j++)h[j]=h[j].split("{")}var k=/\$color/g;i.extend(a,{uiColor:null,rk:function(){return this.uiColor},setUiColor:function(g){var i,j,l=b(d.oC),m=b(this.document),n=".cke_"+a.name.replace(".","\\."),o=[n+" .cke_wrapper",n+"_dialog .cke_dialog_contents",n+"_dialog a.cke_dialog_tab",n+"_dialog .cke_dialog_footer"].join(","),p="background-color: $color !important;";return f.webkit?(i=[[o,p]],j=[["body,"+o,p]]):(i=o+"{"+p+"}",j="body,"+o+"{"+p+"}"),(this.setUiColor=function(b){var d=[[k,b]];a.uiColor=b,c([l],i,d),c([m],j,d),c(e,h,d)})(g)}}),a.on("menuShow",function(d){var f=d.data[0],g=f.element.eG("iframe").getItem(0).getFrameDocument();if(!g.getById("cke_ui_color")){var i=b(g);e.push(i);var j=a.rk();j&&c([i],h,[[k,j]])}}),a.config.uiColor&&a.on("uiReady",function(){a.setUiColor(a.config.uiColor)})}}}()),function(){function a(){d.dialog.on("resize",function(a){var b=a.data,c=b.width,d=b.height,e=b.dialog,f=e.bO.contents;"kama"==b.skin&&(f.setStyles({width:c+"px",height:d+"px"}),setTimeout(function(){var a=e.bO.dialog.getChild([0,0,0]),b=a.getChild(0),c=a.getChild(2);c.setStyle("width",b.$.offsetWidth+"px"),c=a.getChild(7),c.setStyle("width",b.$.offsetWidth-28+"px"),c=a.getChild(4),c.setStyle("height",b.$.offsetHeight-31-14+"px"),c=a.getChild(5),c.setStyle("height",b.$.offsetHeight-31-14+"px")},100))})}d.dialog?a():d.on("dialogPluginReady",a)}(),d.skins.add("v1",function(){var a=["images/loaders/16x16.gif","images/loaders/32x32.gif","images/ckffolder.gif","images/ckffolderopened.gif"];return g&&f.version<7&&a.push("images/sprites_ie6.png"),{ls:a,application:{css:["app.css"]},ps:1,rv:-8,kN:0,host:{qx:1,css:["host.css"]}}}()),function(){function a(){d.dialog.on("resize",function(a){var b=a.data,c=b.width,d=b.height,e=b.dialog,f=e.bO.contents;"v1"==b.skin&&(f.setStyles({width:c+"px",height:d+"px"}),setTimeout(function(){var a=e.bO.dialog.getChild([0,0,0]),b=a.getChild(0),c=a.getChild(2);c.setStyle("width",b.$.offsetWidth+"px"),c=a.getChild(7),c.setStyle("width",b.$.offsetWidth-28+"px"),c=a.getChild(4),c.setStyle("height",b.$.offsetHeight-31-14+"px"),c=a.getChild(5),c.setStyle("height",b.$.offsetHeight-31-14+"px")},100))})}d.dialog?a():d.on("dialogPluginReady",a)}(),d.gc.add("default",function(){return{dQ:function(a){function b(){f.ie6Compat&&(a.layout.oG=a.document.getWindow().eR())}var c=(a.name,a.element),e=a.ff;if(c&&e!=d.kZ){a.layout=new d.application.layout(a);var h=a.oW("themeSpace",{space:"head",html:""}),j=a.oW("themeSpace",{space:"sidebar",html:""}),k=a.oW("themeSpace",{space:"mainTop",html:""}),l=a.oW("themeSpace",{space:"mainMiddle",html:""}),m=a.oW("themeSpace",{space:"mainBottom",html:""}),n=a.config.skin.indexOf(","),o=(-1==n?a.config.skin:a.config.skin.substr(0,n))||"kama",p='<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"><html lang="'+a.lang.LangCode+'" dir="'+a.lang.dir+'"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" />'+h.html+"</head><body>"+(f.ie6Compat?'<div id="ckfinder" role="application">':'<div id="ckfinder" role="application" style="visibility: hidden">')+'<!-- 1. CKE Skin class. --><div class="fake_wrapper cke_skin_'+o+'"><!-- 2. High contrast class. --><div class="fake_wrapper"><!-- Applicable: hc cke_hc --><!-- 3. Browser class. --><div class="fake_wrapper '+f.cssClass+'"><!-- 4. RTL class. --><div class="fake_wrapper cke_'+("ltr"==a.lang.dir||g&&f.version<8?"ltr":"rtl")+'"><!-- Applicable: rtl cke_rtl --><!-- 5. Layout class. --><div class="fake_wrapper"><div id="ckfinder_view" class="columns_2"><!-- Applicable: columns_1 columns_2 --><div id="sidebar_container" class="container" role="region"'+(a.config.sidebarWidth?' style="width: '+i.cssLength(a.config.sidebarWidth)+'"':"")+'><div id="sidebar_wrapper" class="wrapper">'+j.html+'</div></div><div id="main_container" class="container" role="region">'+k.html+l.html+m.html+"</div></div></div></div></div></div></div></div></body></html>";d.log("[THEME] DOM flush using document.write"),a.document.$.write(p),a.cr("themeLoaded"),a.cr("uiReady",function(){b(),a.cr("appReady",function(){function c(){i=i||a.document.getHead().eG("link").getItem(0);var d=0;if(i)try{i.$.sheet&&i.$.sheet.cssRules.length>0?d=1:i.$.styleSheet&&i.$.styleSheet.cssText.length>0?d=1:i.$.innerHTML&&i.$.innerHTML.length>0&&(d=1)}catch(e){}return d?void(f.ie6Compat?(b(),a.layout.ea(),setTimeout(function(){a.layout.ea()},500)):(a.layout.ea(!0),setTimeout(function(){a.document.getById("ckfinder").removeStyle("visibility")}))):void window.setTimeout(c,250)}if(b(),f.ie8){var d,e=a.document.$;if(e.documentMode?d=e.documentMode:(d=5,e.compatMode&&"CSS1Compat"==e.compatMode&&(d=7)),8>d){var g='<strong style="color: red;">Forced IE compatibility mode! CKFinder may not look as intended.</strong>',h=a.plugins.tools;h.showTool(h.addTool(g))}}f.ie6Compat&&a.document.getWindow().on("resize",b),a.document.getWindow().on("resize",function(){a.layout.ea.call(a.layout)});var i;c()})})}},pu:function(a){var b=i.getNextNumber(),c=k.kE(['<div class="cke_compatibility cke_'+a.name.replace(".","\\.")+"_dialog cke_skin_",a.gd,'" dir="',a.lang.dir,'" lang="',a.langCode,'"><table class="cke_dialog'," "+f.cssClass.replace(/browser/g,"cke_browser")," cke_",a.lang.dir,'" style="position:absolute"><tr><td><div class="%body"><div id="%title#" class="%title"></div><div id="%close_button#" class="%close_button"><span>X</span></div><div id="%tabs#" class="%tabs"></div><table class="%contents"><tr><td id="%contents#" class="%contents"></td></tr></table><div id="%footer#" class="%footer"></div></div><div id="%tl#" class="%tl"></div><div id="%tc#" class="%tc"></div><div id="%tr#" class="%tr"></div><div id="%ml#" class="%ml"></div><div id="%mr#" class="%mr"></div><div id="%bl#" class="%bl"></div><div id="%bc#" class="%bc"></div><div id="%br#" class="%br"></div></td></tr></table>',g?"":"<style>.cke_dialog{visibility:hidden;}</style>","</div>"].join("").replace(/#/g,"_"+b).replace(/%/g,"cke_dialog_"),d.document),e=c.getChild([0,0,0,0,0]),h=e.getChild(0),j=e.getChild(1);

return h.unselectable(),j.unselectable(),{element:c,bO:{dialog:c.getChild(0),title:h,close:j,tabs:e.getChild(2),contents:e.getChild([3,0,0,0]),footer:e.getChild(4)}}},destroy:function(a){var b=a.container,c=a.ia;b&&b.remove();for(var e=0;c&&e<c.length;e++)c[e].remove();a.element&&(a.ff==d.fc&&a.element.remove(),delete a.element)}}}()),d.application.prototype.vU=function(a){var b=""+a,c=this._[b]||(this._[b]=d.document.getById(b+"_"+this.name));return c},d.application.prototype.nJ=function(a){var b=/^\d+$/;b.test(a)&&(a+="px");var c=this.layout.dV();c.setStyle("width",a),this.oW("resize"),this.layout.ea()},d.application.prototype.resize=function(a,b){this.element.getChild(0).setStyle("height",b+"px"),this.element.getChild(0).setStyle("width",a+"px")},function(){function a(a,b){for(var c=0,d=0,e=0;e<a.$.parentNode.childNodes.length;e++){var h=a.$.parentNode.childNodes[e];if(1==h.nodeType){var i=h==a.$;if(!h.offsetHeight&&!i)continue;d++,i||(c+=h.offsetHeight)}}var j=a.$.offsetHeight-a.$.clientHeight,k=(d-1)*b;!f.ie6Compat||f.ie8||f.ie7Compat||(k+=2*b);var l=g?a.$.parentNode.parentNode.parentNode.offsetHeight:a.$.parentNode.offsetHeight,m=l-j-c-(k||0);try{a.setStyle("height",m+"px")}catch(n){}}function b(a){return d.bs.substr(9*a%32,1)}var c="<div class='view tool_panel' style='padding:2px;display:block !important;position:static !important;color:black !important;background-color:white !important;'>",e="</div>",h=c+"This is the DEMO version of CKFinder. Please visit the <a href='http://ckfinder.com' target='_blank'>CKFinder web site</a> to obtain a valid license."+e,j=c+"CKFinder Developer License<br/>Licensed to: ";d.application.layout=function(a){this.app=h.length?a:null,this.jB=null},d.application.layout.prototype={ea:function(c){this.jB||(this.jB=i.setTimeout(function(){d.log("[THEME] Repainting layout");var e=d.bs.indexOf(d.bF.substr(1,1))%5,k=[d.bF.substr(8,1),d.bF.substr(6,1)],l=d.bF&&d.bF.substr(3,1)!=d.bs.substr(9*(d.bs.indexOf(d.bF.substr(0,1))+d.bs.indexOf(d.bF.substr(2,1)))%(d.bs.length-1),1),m=!!d.ed&&k[1]!=b(d.ed.length+d.bs.indexOf(k[0]));if(d.bF&&1==e&&d.lS(window.top[d.nd+"cation"][d.jG+"st"])!=d.lS(d.ed)||4==e||l){for(var n=this.dV().getChild(0).getChildren(),o=0,p=0;p<n.count();p++)"static"==n.getItem(p).rd("position")&&(o=1);o||this.dV().getChild(0).appendHtml(l||m||4!=e?h:j+"<b>"+i.htmlEncode(d.ed)+"</b></div>")}var q=this.pn(),r=this.pS(),s=d.skins.loaded[this.app.gd];if(s.ps&&g&&f.ie6Compat&&!f.ie8){var t=this.mB(),u=this.dV(),v=3*s.kN,w=s.rv?s.rv:0,x=this.oG.width-u.$.offsetWidth-v+w;t.setStyle("width",x+"px")}q&&a(q,s.mA),r&&a(r,s.kN),this.jB=null,c=!1,this.app.oW("afterRepaintLayout"),f.ie6Compat&&i.setTimeout(function(){this.app.element.$.style.cssText+=""},0,this)},c===!0?0:500,this))},dV:function(){var a=this;return a.kS||(a.kS=a.app.document.getById("sidebar_container")),a.kS},mB:function(){var a=this;return a.lb||(a.lb=a.app.document.getById("main_container")),a.lb},pS:function(){var a=this;return"undefined"==typeof a.kK&&(a.kK=a.app.document.getById("folders_view")),a.kK},pn:function(){var a=this;return"undefined"==typeof a.kD&&(a.kD=a.app.document.getById("files_view")),a.kD}}}()}();